(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();(function(e){var t=function(){for(var i=arguments[0],o=[].slice.call(arguments,1),a=0;a<o.length;++a){var c=o[a];for(Object.key in c){var l=c[Object.key];i[Object.key]=typeof l=="object"?t(typeof i[Object.key]=="object"?i[Object.key]:{},l):l}}return i},n={wav:"WebAudioRecorderWav.min.js",ogg:"WebAudioRecorderOgg.min.js",mp3:"WebAudioRecorderMp3.min.js"},r={numChannels:2,encoding:"wav",options:{timeLimit:300,encodeAfterRecord:!1,progressInterval:1e3,bufferSize:void 0,wav:{mimeType:"audio/wav"},ogg:{mimeType:"audio/ogg",quality:.5},mp3:{mimeType:"audio/mpeg",bitRate:160}}},s=function(i,o){t(this,r,o||{}),this.context=i.context,this.context.createScriptProcessor==null&&(this.context.createScriptProcessor=this.context.createJavaScriptNode),this.input=this.context.createGain(),i.connect(this.input),this.buffer=[],this.initWorker()};t(s.prototype,{isRecording:function(){return this.processor!=null},setEncoding:function(i){this.isRecording()?this.error("setEncoding: cannot set encoding during recording"):this.encoding!==i&&(this.encoding=i,this.initWorker())},setOptions:function(i){this.isRecording()?this.error("setOptions: cannot set options during recording"):(t(this.options,i),this.worker.postMessage({command:"options",options:this.options}))},startRecording:function(){if(this.isRecording())this.error("startRecording: previous recording is running");else{var i=this.numChannels,o=this.buffer,a=this.worker;this.processor=this.context.createScriptProcessor(this.options.bufferSize,this.numChannels,this.numChannels),this.input.connect(this.processor),this.processor.connect(this.context.destination),this.processor.onaudioprocess=function(c){for(var l=0;l<i;++l)o[l]=c.inputBuffer.getChannelData(l);a.postMessage({command:"record",buffer:o})},this.worker.postMessage({command:"start",bufferSize:this.processor.bufferSize}),this.startTime=Date.now()}},recordingTime:function(){return this.isRecording()?(Date.now()-this.startTime)*.001:null},cancelRecording:function(){this.isRecording()?(this.input.disconnect(),this.processor.disconnect(),delete this.processor,this.worker.postMessage({command:"cancel"})):this.error("cancelRecording: no recording is running")},finishRecording:function(){this.isRecording()?(this.input.disconnect(),this.processor.disconnect(),delete this.processor,this.worker.postMessage({command:"finish"})):this.error("finishRecording: no recording is running")},cancelEncoding:function(){this.options.encodeAfterRecord?this.isRecording()?this.error("cancelEncoding: recording is not finished"):(this.onEncodingCanceled(this),this.initWorker()):this.error("cancelEncoding: invalid method call")},initWorker:function(){this.worker!=null&&this.worker.terminate(),this.onEncoderLoading(this,this.encoding);const o=import.meta.url.split("/");o.length==5&&o.pop(),o.pop();const a=o.join("/");this.worker=new Worker(a+"/"+n[this.encoding]);var c=this;this.worker.onmessage=function(l){var u=l.data;switch(u.command){case"loaded":c.onEncoderLoaded(c,c.encoding);break;case"timeout":c.onTimeout(c);break;case"progress":c.onEncodingProgress(c,u.progress);break;case"complete":c.onComplete(c,u.blob);break;case"error":c.error(u.message)}},this.worker.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:this.numChannels},options:this.options})},error:function(i){this.onError(this,"WebAudioRecorder.min.js:"+i)},onEncoderLoading:function(i,o){},onEncoderLoaded:function(i,o){},onTimeout:function(i){i.finishRecording()},onEncodingProgress:function(i,o){},onEncodingCanceled:function(i){},onComplete:function(i,o){i.onError(i,"WebAudioRecorder.min.js: You must override .onComplete event")},onError:function(i,o){console.log(o)}}),e.WebAudioRecorder=s})(window);/**
* @vue/shared v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qc(e,t){const n=new Set(e.split(","));return t?r=>n.has(r.toLowerCase()):r=>n.has(r)}const Et={},vr=[],Te=()=>{},P_=()=>!1,yo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Yc=e=>e.startsWith("onUpdate:"),Gt=Object.assign,Xc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},D_=Object.prototype.hasOwnProperty,it=(e,t)=>D_.call(e,t),Q=Array.isArray,Tr=e=>Eo(e)==="[object Map]",od=e=>Eo(e)==="[object Set]",Z=e=>typeof e=="function",Lt=e=>typeof e=="string",qr=e=>typeof e=="symbol",bt=e=>e!==null&&typeof e=="object",ad=e=>(bt(e)||Z(e))&&Z(e.then)&&Z(e.catch),cd=Object.prototype.toString,Eo=e=>cd.call(e),V_=e=>Eo(e).slice(8,-1),ld=e=>Eo(e)==="[object Object]",Jc=e=>Lt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,xi=Qc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),wo=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},x_=/-(\w)/g,Wn=wo(e=>e.replace(x_,(t,n)=>n?n.toUpperCase():"")),N_=/\B([A-Z])/g,Jn=wo(e=>e.replace(N_,"-$1").toLowerCase()),ud=wo(e=>e.charAt(0).toUpperCase()+e.slice(1)),ma=wo(e=>e?`on${ud(e)}`:""),Ge=(e,t)=>!Object.is(e,t),Ni=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Wi=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Qa=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ou;const hd=()=>Ou||(Ou=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Zc(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Lt(r)?L_(r):Zc(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Lt(e)||bt(e))return e}const O_=/;(?![^(]*\))/g,k_=/:([^]+)/,M_=/\/\*[^]*?\*\//g;function L_(e){const t={};return e.replace(M_,"").split(O_).forEach(n=>{if(n){const r=n.split(k_);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function tl(e){let t="";if(Lt(e))t=e;else if(Q(e))for(let n=0;n<e.length;n++){const r=tl(e[n]);r&&(t+=r+" ")}else if(bt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const F_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",U_=Qc(F_);function fd(e){return!!e||e===""}const ur=e=>Lt(e)?e:e==null?"":Q(e)||bt(e)&&(e.toString===cd||!Z(e.toString))?JSON.stringify(e,dd,2):String(e),dd=(e,t)=>t&&t.__v_isRef?dd(e,t.value):Tr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[ga(r,i)+" =>"]=s,n),{})}:od(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>ga(n))}:qr(t)?ga(t):bt(t)&&!Q(t)&&!ld(t)?String(t):t,ga=(e,t="")=>{var n;return qr(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Re;class B_{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Re,!t&&Re&&(this.index=(Re.scopes||(Re.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Re;try{return Re=this,t()}finally{Re=n}}}on(){Re=this}off(){Re=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function j_(e,t=Re){t&&t.active&&t.effects.push(e)}function $_(){return Re}let jn;class el{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=2,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,j_(this,s)}get dirty(){if(this._dirtyLevel===1){Zn();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(q_(n.computed),this._dirtyLevel>=2))break}this._dirtyLevel<2&&(this._dirtyLevel=0),tr()}return this._dirtyLevel>=2}set dirty(t){this._dirtyLevel=t?2:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=wn,n=jn;try{return wn=!0,jn=this,this._runnings++,ku(this),this.fn()}finally{Mu(this),this._runnings--,jn=n,wn=t}}stop(){var t;this.active&&(ku(this),Mu(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function q_(e){return e.value}function ku(e){e._trackId++,e._depsLength=0}function Mu(e){if(e.deps&&e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)pd(e.deps[t],e);e.deps.length=e._depsLength}}function pd(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let wn=!0,Ya=0;const md=[];function Zn(){md.push(wn),wn=!1}function tr(){const e=md.pop();wn=e===void 0?!0:e}function nl(){Ya++}function rl(){for(Ya--;!Ya&&Xa.length;)Xa.shift()()}function gd(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&pd(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Xa=[];function _d(e,t,n){nl();for(const r of e.keys())if(r._dirtyLevel<t&&e.get(r)===r._trackId){const s=r._dirtyLevel;r._dirtyLevel=t,s===0&&(r._shouldSchedule=!0,r.trigger())}yd(e),rl()}function yd(e){for(const t of e.keys())t.scheduler&&t._shouldSchedule&&(!t._runnings||t.allowRecurse)&&e.get(t)===t._trackId&&(t._shouldSchedule=!1,Xa.push(t.scheduler))}const Ed=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},Ja=new WeakMap,$n=Symbol(""),Za=Symbol("");function fe(e,t,n){if(wn&&jn){let r=Ja.get(e);r||Ja.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=Ed(()=>r.delete(n))),gd(jn,s)}}function en(e,t,n,r,s,i){const o=Ja.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&Q(e)){const c=Number(r);o.forEach((l,u)=>{(u==="length"||!qr(u)&&u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":Q(e)?Jc(n)&&a.push(o.get("length")):(a.push(o.get($n)),Tr(e)&&a.push(o.get(Za)));break;case"delete":Q(e)||(a.push(o.get($n)),Tr(e)&&a.push(o.get(Za)));break;case"set":Tr(e)&&a.push(o.get($n));break}nl();for(const c of a)c&&_d(c,2);rl()}const K_=Qc("__proto__,__v_isRef,__isVue"),wd=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(qr)),Lu=W_();function W_(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=ut(this);for(let i=0,o=this.length;i<o;i++)fe(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(ut)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Zn(),nl();const r=ut(this)[t].apply(this,n);return rl(),tr(),r}}),e}function z_(e){const t=ut(this);return fe(t,"has",e),t.hasOwnProperty(e)}class vd{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,r){const s=this._isReadonly,i=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?iy:Rd:i?Id:Ad).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=Q(t);if(!s){if(o&&it(Lu,n))return Reflect.get(Lu,n,r);if(n==="hasOwnProperty")return z_}const a=Reflect.get(t,n,r);return(qr(n)?wd.has(n):K_(n))||(s||fe(t,"get",n),i)?a:de(a)?o&&Jc(n)?a:a.value:bt(a)?s?Sd(a):Cr(a):a}}class Td extends vd{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._shallow){const c=Pr(i);if(!zi(r)&&!Pr(r)&&(i=ut(i),r=ut(r)),!Q(t)&&de(i)&&!de(r))return c?!1:(i.value=r,!0)}const o=Q(t)&&Jc(n)?Number(n)<t.length:it(t,n),a=Reflect.set(t,n,r,s);return t===ut(s)&&(o?Ge(r,i)&&en(t,"set",n,r):en(t,"add",n,r)),a}deleteProperty(t,n){const r=it(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&en(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!qr(n)||!wd.has(n))&&fe(t,"has",n),r}ownKeys(t){return fe(t,"iterate",Q(t)?"length":$n),Reflect.ownKeys(t)}}class H_ extends vd{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const G_=new Td,Q_=new H_,Y_=new Td(!0),sl=e=>e,vo=e=>Reflect.getPrototypeOf(e);function di(e,t,n=!1,r=!1){e=e.__v_raw;const s=ut(e),i=ut(t);n||(Ge(t,i)&&fe(s,"get",t),fe(s,"get",i));const{has:o}=vo(s),a=r?sl:n?al:As;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function pi(e,t=!1){const n=this.__v_raw,r=ut(n),s=ut(e);return t||(Ge(e,s)&&fe(r,"has",e),fe(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function mi(e,t=!1){return e=e.__v_raw,!t&&fe(ut(e),"iterate",$n),Reflect.get(e,"size",e)}function Fu(e){e=ut(e);const t=ut(this);return vo(t).has.call(t,e)||(t.add(e),en(t,"add",e,e)),this}function Uu(e,t){t=ut(t);const n=ut(this),{has:r,get:s}=vo(n);let i=r.call(n,e);i||(e=ut(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?Ge(t,o)&&en(n,"set",e,t):en(n,"add",e,t),this}function Bu(e){const t=ut(this),{has:n,get:r}=vo(t);let s=n.call(t,e);s||(e=ut(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&en(t,"delete",e,void 0),i}function ju(){const e=ut(this),t=e.size!==0,n=e.clear();return t&&en(e,"clear",void 0,void 0),n}function gi(e,t){return function(r,s){const i=this,o=i.__v_raw,a=ut(o),c=t?sl:e?al:As;return!e&&fe(a,"iterate",$n),o.forEach((l,u)=>r.call(s,c(l),c(u),i))}}function _i(e,t,n){return function(...r){const s=this.__v_raw,i=ut(s),o=Tr(i),a=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,l=s[e](...r),u=n?sl:t?al:As;return!t&&fe(i,"iterate",c?Za:$n),{next(){const{value:h,done:f}=l.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function hn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function X_(){const e={get(i){return di(this,i)},get size(){return mi(this)},has:pi,add:Fu,set:Uu,delete:Bu,clear:ju,forEach:gi(!1,!1)},t={get(i){return di(this,i,!1,!0)},get size(){return mi(this)},has:pi,add:Fu,set:Uu,delete:Bu,clear:ju,forEach:gi(!1,!0)},n={get(i){return di(this,i,!0)},get size(){return mi(this,!0)},has(i){return pi.call(this,i,!0)},add:hn("add"),set:hn("set"),delete:hn("delete"),clear:hn("clear"),forEach:gi(!0,!1)},r={get(i){return di(this,i,!0,!0)},get size(){return mi(this,!0)},has(i){return pi.call(this,i,!0)},add:hn("add"),set:hn("set"),delete:hn("delete"),clear:hn("clear"),forEach:gi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=_i(i,!1,!1),n[i]=_i(i,!0,!1),t[i]=_i(i,!1,!0),r[i]=_i(i,!0,!0)}),[e,n,t,r]}const[J_,Z_,ty,ey]=X_();function il(e,t){const n=t?e?ey:ty:e?Z_:J_;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(it(n,s)&&s in r?n:r,s,i)}const ny={get:il(!1,!1)},ry={get:il(!1,!0)},sy={get:il(!0,!1)},Ad=new WeakMap,Id=new WeakMap,Rd=new WeakMap,iy=new WeakMap;function oy(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ay(e){return e.__v_skip||!Object.isExtensible(e)?0:oy(V_(e))}function Cr(e){return Pr(e)?e:ol(e,!1,G_,ny,Ad)}function bd(e){return ol(e,!1,Y_,ry,Id)}function Sd(e){return ol(e,!0,Q_,sy,Rd)}function ol(e,t,n,r,s){if(!bt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=ay(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function Ar(e){return Pr(e)?Ar(e.__v_raw):!!(e&&e.__v_isReactive)}function Pr(e){return!!(e&&e.__v_isReadonly)}function zi(e){return!!(e&&e.__v_isShallow)}function Cd(e){return Ar(e)||Pr(e)}function ut(e){const t=e&&e.__v_raw;return t?ut(t):e}function Pd(e){return Wi(e,"__v_skip",!0),e}const As=e=>bt(e)?Cr(e):e,al=e=>bt(e)?Sd(e):e;class Dd{constructor(t,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new el(()=>t(this._value),()=>hs(this,1),()=>this.dep&&yd(this.dep)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=ut(this);return(!t._cacheable||t.effect.dirty)&&Ge(t._value,t._value=t.effect.run())&&hs(t,2),cl(t),t.effect._dirtyLevel>=1&&hs(t,1),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function cy(e,t,n=!1){let r,s;const i=Z(e);return i?(r=e,s=Te):(r=e.get,s=e.set),new Dd(r,s,i||!s,n)}function cl(e){wn&&jn&&(e=ut(e),gd(jn,e.dep||(e.dep=Ed(()=>e.dep=void 0,e instanceof Dd?e:void 0))))}function hs(e,t=2,n){e=ut(e);const r=e.dep;r&&_d(r,t)}function de(e){return!!(e&&e.__v_isRef===!0)}function yr(e){return Vd(e,!1)}function ly(e){return Vd(e,!0)}function Vd(e,t){return de(e)?e:new uy(e,t)}class uy{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:ut(t),this._value=n?t:As(t)}get value(){return cl(this),this._value}set value(t){const n=this.__v_isShallow||zi(t)||Pr(t);t=n?t:ut(t),Ge(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:As(t),hs(this,2))}}function Se(e){return de(e)?e.value:e}const hy={get:(e,t,n)=>Se(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return de(s)&&!de(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function xd(e){return Ar(e)?e:new Proxy(e,hy)}class fy{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=t(()=>cl(this),()=>hs(this));this._get=n,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function dy(e){return new fy(e)}/**
* @vue/runtime-core v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vn(e,t,n,r){let s;try{s=r?e(...r):e()}catch(i){To(i,t,n)}return s}function De(e,t,n,r){if(Z(e)){const i=vn(e,t,n,r);return i&&ad(i)&&i.catch(o=>{To(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(De(e[i],t,n,r));return s}function To(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](e,o,a)===!1)return}i=i.parent}const c=t.appContext.config.errorHandler;if(c){vn(c,null,10,[e,o,a]);return}}py(e,n,s,r)}function py(e,t,n,r=!0){console.error(e)}let Is=!1,tc=!1;const Zt=[];let Be=0;const Ir=[];let pn=null,On=0;const Nd=Promise.resolve();let ll=null;function Od(e){const t=ll||Nd;return e?t.then(this?e.bind(this):e):t}function my(e){let t=Be+1,n=Zt.length;for(;t<n;){const r=t+n>>>1,s=Zt[r],i=Rs(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function ul(e){(!Zt.length||!Zt.includes(e,Is&&e.allowRecurse?Be+1:Be))&&(e.id==null?Zt.push(e):Zt.splice(my(e.id),0,e),kd())}function kd(){!Is&&!tc&&(tc=!0,ll=Nd.then(Ld))}function gy(e){const t=Zt.indexOf(e);t>Be&&Zt.splice(t,1)}function _y(e){Q(e)?Ir.push(...e):(!pn||!pn.includes(e,e.allowRecurse?On+1:On))&&Ir.push(e),kd()}function $u(e,t,n=Is?Be+1:0){for(;n<Zt.length;n++){const r=Zt[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;Zt.splice(n,1),n--,r()}}}function Md(e){if(Ir.length){const t=[...new Set(Ir)].sort((n,r)=>Rs(n)-Rs(r));if(Ir.length=0,pn){pn.push(...t);return}for(pn=t,On=0;On<pn.length;On++)pn[On]();pn=null,On=0}}const Rs=e=>e.id==null?1/0:e.id,yy=(e,t)=>{const n=Rs(e)-Rs(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Ld(e){tc=!1,Is=!0,Zt.sort(yy);try{for(Be=0;Be<Zt.length;Be++){const t=Zt[Be];t&&t.active!==!1&&vn(t,null,14)}}finally{Be=0,Zt.length=0,Md(),Is=!1,ll=null,(Zt.length||Ir.length)&&Ld()}}function Ey(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Et;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=r[u]||Et;f&&(s=n.map(m=>Lt(m)?m.trim():m)),h&&(s=n.map(Qa))}let a,c=r[a=ma(t)]||r[a=ma(Wn(t))];!c&&i&&(c=r[a=ma(Jn(t))]),c&&De(c,e,6,s);const l=r[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,De(l,e,6,s)}}function Fd(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!Z(e)){const c=l=>{const u=Fd(l,t,!0);u&&(a=!0,Gt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!a?(bt(e)&&r.set(e,null),null):(Q(i)?i.forEach(c=>o[c]=null):Gt(o,i),bt(e)&&r.set(e,o),o)}function Ao(e,t){return!e||!yo(t)?!1:(t=t.slice(2).replace(/Once$/,""),it(e,t[0].toLowerCase()+t.slice(1))||it(e,Jn(t))||it(e,t))}let he=null,Io=null;function Hi(e){const t=he;return he=e,Io=e&&e.type.__scopeId||null,t}function wy(e){Io=e}function vy(){Io=null}function Ty(e,t=he,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Zu(-1);const i=Hi(t);let o;try{o=e(...s)}finally{Hi(i),r._d&&Zu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function _a(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:f,setupState:m,ctx:g,inheritAttrs:_}=e;let E,R;const P=Hi(e);try{if(n.shapeFlag&4){const B=s||r,at=B;E=Ue(u.call(at,B,h,i,m,f,g)),R=c}else{const B=t;E=Ue(B.length>1?B(i,{attrs:c,slots:a,emit:l}):B(i,null)),R=t.props?c:Ay(c)}}catch(B){ds.length=0,To(B,e,1),E=_e(zn)}let x=E;if(R&&_!==!1){const B=Object.keys(R),{shapeFlag:at}=x;B.length&&at&7&&(o&&B.some(Yc)&&(R=Iy(R,o)),x=Dr(x,R))}return n.dirs&&(x=Dr(x),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),E=x,Hi(P),E}const Ay=e=>{let t;for(const n in e)(n==="class"||n==="style"||yo(n))&&((t||(t={}))[n]=e[n]);return t},Iy=(e,t)=>{const n={};for(const r in e)(!Yc(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Ry(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?qu(r,o,l):!!o;if(c&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==r[f]&&!Ao(l,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?qu(r,o,l):!0:!!o;return!1}function qu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Ao(n,i))return!0}return!1}function by({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Sy=Symbol.for("v-ndc"),Cy=e=>e.__isSuspense;function Py(e,t){t&&t.pendingBranch?Q(e)?t.effects.push(...e):t.effects.push(e):_y(e)}const Dy=Symbol.for("v-scx"),Vy=()=>nn(Dy);function xy(e,t){return hl(e,null,{flush:"sync"})}const yi={};function Oi(e,t,n){return hl(e,t,n)}function hl(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=Et){if(t&&i){const $=t;t=(...At)=>{$(...At),at()}}const c=te,l=$=>r===!0?$:Mn($,r===!1?1:void 0);let u,h=!1,f=!1;if(de(e)?(u=()=>e.value,h=zi(e)):Ar(e)?(u=()=>l(e),h=!0):Q(e)?(f=!0,h=e.some($=>Ar($)||zi($)),u=()=>e.map($=>{if(de($))return $.value;if(Ar($))return l($);if(Z($))return vn($,c,2)})):Z(e)?t?u=()=>vn(e,c,2):u=()=>(m&&m(),De(e,c,3,[g])):u=Te,t&&r){const $=u;u=()=>Mn($())}let m,g=$=>{m=x.onStop=()=>{vn($,c,4),m=x.onStop=void 0}},_;if(Co)if(g=Te,t?n&&De(t,c,3,[u(),f?[]:void 0,g]):u(),s==="sync"){const $=Vy();_=$.__watcherHandles||($.__watcherHandles=[])}else return Te;let E=f?new Array(e.length).fill(yi):yi;const R=()=>{if(!(!x.active||!x.dirty))if(t){const $=x.run();(r||h||(f?$.some((At,H)=>Ge(At,E[H])):Ge($,E)))&&(m&&m(),De(t,c,3,[$,E===yi?void 0:f&&E[0]===yi?[]:E,g]),E=$)}else x.run()};R.allowRecurse=!!t;let P;s==="sync"?P=R:s==="post"?P=()=>ue(R,c&&c.suspense):(R.pre=!0,c&&(R.id=c.uid),P=()=>ul(R));const x=new el(u,Te,P),B=$_(),at=()=>{x.stop(),B&&Xc(B.effects,x)};return t?n?R():E=x.run():s==="post"?ue(x.run.bind(x),c&&c.suspense):x.run(),_&&_.push(at),at}function Ny(e,t,n){const r=this.proxy,s=Lt(e)?e.includes(".")?Ud(r,e):()=>r[e]:e.bind(r,r);let i;Z(t)?i=t:(i=t.handler,n=t);const o=zs(this),a=hl(s,i.bind(r),n);return o(),a}function Ud(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Mn(e,t,n=0,r){if(!bt(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(r=r||new Set,r.has(e))return e;if(r.add(e),de(e))Mn(e.value,t,n,r);else if(Q(e))for(let s=0;s<e.length;s++)Mn(e[s],t,n,r);else if(od(e)||Tr(e))e.forEach(s=>{Mn(s,t,n,r)});else if(ld(e))for(const s in e)Mn(e[s],t,n,r);return e}function Ku(e,t){if(he===null)return e;const n=Po(he)||he.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,a,c=Et]=t[s];i&&(Z(i)&&(i={mounted:i,updated:i}),i.deep&&Mn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function Vn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Zn(),De(c,n,8,[e.el,a,e,t]),tr())}}/*! #__NO_SIDE_EFFECTS__ */function Bd(e,t){return Z(e)?Gt({name:e.name},t,{setup:e}):e}const ki=e=>!!e.type.__asyncLoader,jd=e=>e.type.__isKeepAlive;function Oy(e,t){$d(e,"a",t)}function ky(e,t){$d(e,"da",t)}function $d(e,t,n=te){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Ro(t,r,n),n){let s=n.parent;for(;s&&s.parent;)jd(s.parent.vnode)&&My(r,t,n,s),s=s.parent}}function My(e,t,n,r){const s=Ro(t,e,r,!0);qd(()=>{Xc(r[t],s)},n)}function Ro(e,t,n=te,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Zn();const a=zs(n),c=De(t,n,e,o);return a(),tr(),c});return r?s.unshift(i):s.push(i),i}}const ln=e=>(t,n=te)=>(!Co||e==="sp")&&Ro(e,(...r)=>t(...r),n),Ly=ln("bm"),fl=ln("m"),Fy=ln("bu"),Uy=ln("u"),By=ln("bum"),qd=ln("um"),jy=ln("sp"),$y=ln("rtg"),qy=ln("rtc");function Ky(e,t=te){Ro("ec",e,t)}function Wy(e,t,n,r){let s;const i=n&&n[r];if(Q(e)||Lt(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(bt(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i&&i[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];s[a]=t(e[l],l,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const ec=e=>e?np(e)?Po(e)||e.proxy:ec(e.parent):null,fs=Gt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ec(e.parent),$root:e=>ec(e.root),$emit:e=>e.emit,$options:e=>dl(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,ul(e.update)}),$nextTick:e=>e.n||(e.n=Od.bind(e.proxy)),$watch:e=>Ny.bind(e)}),ya=(e,t)=>e!==Et&&!e.__isScriptSetup&&it(e,t),zy={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(ya(r,t))return o[t]=1,r[t];if(s!==Et&&it(s,t))return o[t]=2,s[t];if((l=e.propsOptions[0])&&it(l,t))return o[t]=3,i[t];if(n!==Et&&it(n,t))return o[t]=4,n[t];nc&&(o[t]=0)}}const u=fs[t];let h,f;if(u)return t==="$attrs"&&fe(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==Et&&it(n,t))return o[t]=4,n[t];if(f=c.config.globalProperties,it(f,t))return f[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return ya(s,t)?(s[t]=n,!0):r!==Et&&it(r,t)?(r[t]=n,!0):it(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==Et&&it(e,o)||ya(t,o)||(a=i[0])&&it(a,o)||it(r,o)||it(fs,o)||it(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:it(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Wu(e){return Q(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let nc=!0;function Hy(e){const t=dl(e),n=e.proxy,r=e.ctx;nc=!1,t.beforeCreate&&zu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:f,beforeUpdate:m,updated:g,activated:_,deactivated:E,beforeDestroy:R,beforeUnmount:P,destroyed:x,unmounted:B,render:at,renderTracked:$,renderTriggered:At,errorCaptured:H,serverPrefetch:yt,expose:tt,inheritAttrs:_t,components:Ct,directives:pe,filters:Xr}=t;if(l&&Gy(l,r,null),o)for(const mt in o){const ht=o[mt];Z(ht)&&(r[mt]=ht.bind(n))}if(s){const mt=s.call(n,n);bt(mt)&&(e.data=Cr(mt))}if(nc=!0,i)for(const mt in i){const ht=i[mt],Je=Z(ht)?ht.bind(n,n):Z(ht.get)?ht.get.bind(n,n):Te,un=!Z(ht)&&Z(ht.set)?ht.set.bind(n):Te,Oe=be({get:Je,set:un});Object.defineProperty(r,mt,{enumerable:!0,configurable:!0,get:()=>Oe.value,set:le=>Oe.value=le})}if(a)for(const mt in a)Kd(a[mt],r,n,mt);if(c){const mt=Z(c)?c.call(n):c;Reflect.ownKeys(mt).forEach(ht=>{Mi(ht,mt[ht])})}u&&zu(u,e,"c");function Ft(mt,ht){Q(ht)?ht.forEach(Je=>mt(Je.bind(n))):ht&&mt(ht.bind(n))}if(Ft(Ly,h),Ft(fl,f),Ft(Fy,m),Ft(Uy,g),Ft(Oy,_),Ft(ky,E),Ft(Ky,H),Ft(qy,$),Ft($y,At),Ft(By,P),Ft(qd,B),Ft(jy,yt),Q(tt))if(tt.length){const mt=e.exposed||(e.exposed={});tt.forEach(ht=>{Object.defineProperty(mt,ht,{get:()=>n[ht],set:Je=>n[ht]=Je})})}else e.exposed||(e.exposed={});at&&e.render===Te&&(e.render=at),_t!=null&&(e.inheritAttrs=_t),Ct&&(e.components=Ct),pe&&(e.directives=pe)}function Gy(e,t,n=Te){Q(e)&&(e=rc(e));for(const r in e){const s=e[r];let i;bt(s)?"default"in s?i=nn(s.from||r,s.default,!0):i=nn(s.from||r):i=nn(s),de(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function zu(e,t,n){De(Q(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Kd(e,t,n,r){const s=r.includes(".")?Ud(n,r):()=>n[r];if(Lt(e)){const i=t[e];Z(i)&&Oi(s,i)}else if(Z(e))Oi(s,e.bind(n));else if(bt(e))if(Q(e))e.forEach(i=>Kd(i,t,n,r));else{const i=Z(e.handler)?e.handler.bind(n):t[e.handler];Z(i)&&Oi(s,i,e)}}function dl(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let c;return a?c=a:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(l=>Gi(c,l,o,!0)),Gi(c,t,o)),bt(t)&&i.set(t,c),c}function Gi(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Gi(e,i,n,!0),s&&s.forEach(o=>Gi(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=Qy[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const Qy={data:Hu,props:Gu,emits:Gu,methods:os,computed:os,beforeCreate:ie,created:ie,beforeMount:ie,mounted:ie,beforeUpdate:ie,updated:ie,beforeDestroy:ie,beforeUnmount:ie,destroyed:ie,unmounted:ie,activated:ie,deactivated:ie,errorCaptured:ie,serverPrefetch:ie,components:os,directives:os,watch:Xy,provide:Hu,inject:Yy};function Hu(e,t){return t?e?function(){return Gt(Z(e)?e.call(this,this):e,Z(t)?t.call(this,this):t)}:t:e}function Yy(e,t){return os(rc(e),rc(t))}function rc(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ie(e,t){return e?[...new Set([].concat(e,t))]:t}function os(e,t){return e?Gt(Object.create(null),e,t):t}function Gu(e,t){return e?Q(e)&&Q(t)?[...new Set([...e,...t])]:Gt(Object.create(null),Wu(e),Wu(t??{})):t}function Xy(e,t){if(!e)return t;if(!t)return e;const n=Gt(Object.create(null),e);for(const r in t)n[r]=ie(e[r],t[r]);return n}function Wd(){return{app:null,config:{isNativeTag:P_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jy=0;function Zy(e,t){return function(r,s=null){Z(r)||(r=Gt({},r)),s!=null&&!bt(s)&&(s=null);const i=Wd(),o=new WeakSet;let a=!1;const c=i.app={_uid:Jy++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:AE,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&Z(l.install)?(o.add(l),l.install(c,...u)):Z(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const f=_e(r,s);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&t?t(f,l):e(f,l,h),a=!0,c._container=l,l.__vue_app__=c,Po(f.component)||f.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c},runWithContext(l){Qi=c;try{return l()}finally{Qi=null}}};return c}}let Qi=null;function Mi(e,t){if(te){let n=te.provides;const r=te.parent&&te.parent.provides;r===n&&(n=te.provides=Object.create(r)),n[e]=t}}function nn(e,t,n=!1){const r=te||he;if(r||Qi){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Qi._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Z(t)?t.call(r&&r.proxy):t}}function tE(e,t,n,r=!1){const s={},i={};Wi(i,So,1),e.propsDefaults=Object.create(null),zd(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:bd(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function eE(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=ut(s),[c]=e.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(Ao(e.emitsOptions,f))continue;const m=t[f];if(c)if(it(i,f))m!==i[f]&&(i[f]=m,l=!0);else{const g=Wn(f);s[g]=sc(c,a,g,m,e,!1)}else m!==i[f]&&(i[f]=m,l=!0)}}}else{zd(e,t,s,i)&&(l=!0);let u;for(const h in a)(!t||!it(t,h)&&((u=Jn(h))===h||!it(t,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=sc(c,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!t||!it(t,h))&&(delete i[h],l=!0)}l&&en(e,"set","$attrs")}function zd(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let c in t){if(xi(c))continue;const l=t[c];let u;s&&it(s,u=Wn(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:Ao(e.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=ut(n),l=a||Et;for(let u=0;u<i.length;u++){const h=i[u];n[h]=sc(s,c,h,l[h],e,!it(l,h))}}return o}function sc(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=it(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Z(c)){const{propsDefaults:l}=s;if(n in l)r=l[n];else{const u=zs(s);r=l[n]=c.call(null,t),u()}}else r=c}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Jn(n))&&(r=!0))}return r}function Hd(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let c=!1;if(!Z(e)){const u=h=>{c=!0;const[f,m]=Hd(h,t,!0);Gt(o,f),m&&a.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!c)return bt(e)&&r.set(e,vr),vr;if(Q(i))for(let u=0;u<i.length;u++){const h=Wn(i[u]);Qu(h)&&(o[h]=Et)}else if(i)for(const u in i){const h=Wn(u);if(Qu(h)){const f=i[u],m=o[h]=Q(f)||Z(f)?{type:f}:Gt({},f);if(m){const g=Ju(Boolean,m.type),_=Ju(String,m.type);m[0]=g>-1,m[1]=_<0||g<_,(g>-1||it(m,"default"))&&a.push(h)}}}const l=[o,a];return bt(e)&&r.set(e,l),l}function Qu(e){return e[0]!=="$"}function Yu(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Xu(e,t){return Yu(e)===Yu(t)}function Ju(e,t){return Q(t)?t.findIndex(n=>Xu(n,e)):Z(t)&&Xu(t,e)?0:-1}const Gd=e=>e[0]==="_"||e==="$stable",pl=e=>Q(e)?e.map(Ue):[Ue(e)],nE=(e,t,n)=>{if(t._n)return t;const r=Ty((...s)=>pl(t(...s)),n);return r._c=!1,r},Qd=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Gd(s))continue;const i=e[s];if(Z(i))t[s]=nE(s,i,r);else if(i!=null){const o=pl(i);t[s]=()=>o}}},Yd=(e,t)=>{const n=pl(t);e.slots.default=()=>n},rE=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=ut(t),Wi(t,"_",n)):Qd(t,e.slots={})}else e.slots={},t&&Yd(e,t);Wi(e.slots,So,1)},sE=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=Et;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(Gt(s,t),!n&&a===1&&delete s._):(i=!t.$stable,Qd(t,s)),o=t}else t&&(Yd(e,t),o={default:1});if(i)for(const a in s)!Gd(a)&&o[a]==null&&delete s[a]};function ic(e,t,n,r,s=!1){if(Q(e)){e.forEach((f,m)=>ic(f,t&&(Q(t)?t[m]:t),n,r,s));return}if(ki(r)&&!s)return;const i=r.shapeFlag&4?Po(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:c}=e,l=t&&t.r,u=a.refs===Et?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(Lt(l)?(u[l]=null,it(h,l)&&(h[l]=null)):de(l)&&(l.value=null)),Z(c))vn(c,a,12,[o,u]);else{const f=Lt(c),m=de(c),g=e.f;if(f||m){const _=()=>{if(g){const E=f?it(h,c)?h[c]:u[c]:c.value;s?Q(E)&&Xc(E,i):Q(E)?E.includes(i)||E.push(i):f?(u[c]=[i],it(h,c)&&(h[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else f?(u[c]=o,it(h,c)&&(h[c]=o)):m&&(c.value=o,e.k&&(u[e.k]=o))};s||g?_():(_.id=-1,ue(_,n))}}}const ue=Py;function iE(e){return oE(e)}function oE(e,t){const n=hd();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:f,setScopeId:m=Te,insertStaticContent:g}=e,_=(d,p,y,I=null,w=null,D=null,M=void 0,C=null,V=!!p.dynamicChildren)=>{if(d===p)return;d&&!Zr(d,p)&&(I=T(d),le(d,w,D,!0),d=null),p.patchFlag===-2&&(V=!1,p.dynamicChildren=null);const{type:S,ref:F,shapeFlag:W}=p;switch(S){case bo:E(d,p,y,I);break;case zn:R(d,p,y,I);break;case wa:d==null&&P(p,y,I,M);break;case Fe:Ct(d,p,y,I,w,D,M,C,V);break;default:W&1?at(d,p,y,I,w,D,M,C,V):W&6?pe(d,p,y,I,w,D,M,C,V):(W&64||W&128)&&S.process(d,p,y,I,w,D,M,C,V,j)}F!=null&&w&&ic(F,d&&d.ref,D,p||d,!p)},E=(d,p,y,I)=>{if(d==null)r(p.el=a(p.children),y,I);else{const w=p.el=d.el;p.children!==d.children&&l(w,p.children)}},R=(d,p,y,I)=>{d==null?r(p.el=c(p.children||""),y,I):p.el=d.el},P=(d,p,y,I)=>{[d.el,d.anchor]=g(d.children,p,y,I,d.el,d.anchor)},x=({el:d,anchor:p},y,I)=>{let w;for(;d&&d!==p;)w=f(d),r(d,y,I),d=w;r(p,y,I)},B=({el:d,anchor:p})=>{let y;for(;d&&d!==p;)y=f(d),s(d),d=y;s(p)},at=(d,p,y,I,w,D,M,C,V)=>{p.type==="svg"?M="svg":p.type==="math"&&(M="mathml"),d==null?$(p,y,I,w,D,M,C,V):yt(d,p,w,D,M,C,V)},$=(d,p,y,I,w,D,M,C)=>{let V,S;const{props:F,shapeFlag:W,transition:q,dirs:Y}=d;if(V=d.el=o(d.type,D,F&&F.is,F),W&8?u(V,d.children):W&16&&H(d.children,V,null,I,w,Ea(d,D),M,C),Y&&Vn(d,null,I,"created"),At(V,d,d.scopeId,M,I),F){for(const gt in F)gt!=="value"&&!xi(gt)&&i(V,gt,null,F[gt],D,d.children,I,w,Qt);"value"in F&&i(V,"value",null,F.value,D),(S=F.onVnodeBeforeMount)&&Me(S,I,d)}Y&&Vn(d,null,I,"beforeMount");const et=aE(w,q);et&&q.beforeEnter(V),r(V,p,y),((S=F&&F.onVnodeMounted)||et||Y)&&ue(()=>{S&&Me(S,I,d),et&&q.enter(V),Y&&Vn(d,null,I,"mounted")},w)},At=(d,p,y,I,w)=>{if(y&&m(d,y),I)for(let D=0;D<I.length;D++)m(d,I[D]);if(w){let D=w.subTree;if(p===D){const M=w.vnode;At(d,M,M.scopeId,M.slotScopeIds,w.parent)}}},H=(d,p,y,I,w,D,M,C,V=0)=>{for(let S=V;S<d.length;S++){const F=d[S]=C?mn(d[S]):Ue(d[S]);_(null,F,p,y,I,w,D,M,C)}},yt=(d,p,y,I,w,D,M)=>{const C=p.el=d.el;let{patchFlag:V,dynamicChildren:S,dirs:F}=p;V|=d.patchFlag&16;const W=d.props||Et,q=p.props||Et;let Y;if(y&&xn(y,!1),(Y=q.onVnodeBeforeUpdate)&&Me(Y,y,p,d),F&&Vn(p,d,y,"beforeUpdate"),y&&xn(y,!0),S?tt(d.dynamicChildren,S,C,y,I,Ea(p,w),D):M||ht(d,p,C,null,y,I,Ea(p,w),D,!1),V>0){if(V&16)_t(C,p,W,q,y,I,w);else if(V&2&&W.class!==q.class&&i(C,"class",null,q.class,w),V&4&&i(C,"style",W.style,q.style,w),V&8){const et=p.dynamicProps;for(let gt=0;gt<et.length;gt++){const Rt=et[gt],Ut=W[Rt],Ie=q[Rt];(Ie!==Ut||Rt==="value")&&i(C,Rt,Ut,Ie,w,d.children,y,I,Qt)}}V&1&&d.children!==p.children&&u(C,p.children)}else!M&&S==null&&_t(C,p,W,q,y,I,w);((Y=q.onVnodeUpdated)||F)&&ue(()=>{Y&&Me(Y,y,p,d),F&&Vn(p,d,y,"updated")},I)},tt=(d,p,y,I,w,D,M)=>{for(let C=0;C<p.length;C++){const V=d[C],S=p[C],F=V.el&&(V.type===Fe||!Zr(V,S)||V.shapeFlag&70)?h(V.el):y;_(V,S,F,null,I,w,D,M,!0)}},_t=(d,p,y,I,w,D,M)=>{if(y!==I){if(y!==Et)for(const C in y)!xi(C)&&!(C in I)&&i(d,C,y[C],null,M,p.children,w,D,Qt);for(const C in I){if(xi(C))continue;const V=I[C],S=y[C];V!==S&&C!=="value"&&i(d,C,S,V,M,p.children,w,D,Qt)}"value"in I&&i(d,"value",y.value,I.value,M)}},Ct=(d,p,y,I,w,D,M,C,V)=>{const S=p.el=d?d.el:a(""),F=p.anchor=d?d.anchor:a("");let{patchFlag:W,dynamicChildren:q,slotScopeIds:Y}=p;Y&&(C=C?C.concat(Y):Y),d==null?(r(S,y,I),r(F,y,I),H(p.children||[],y,F,w,D,M,C,V)):W>0&&W&64&&q&&d.dynamicChildren?(tt(d.dynamicChildren,q,y,w,D,M,C),(p.key!=null||w&&p===w.subTree)&&Xd(d,p,!0)):ht(d,p,y,F,w,D,M,C,V)},pe=(d,p,y,I,w,D,M,C,V)=>{p.slotScopeIds=C,d==null?p.shapeFlag&512?w.ctx.activate(p,y,I,M,V):Xr(p,y,I,w,D,M,V):or(d,p,V)},Xr=(d,p,y,I,w,D,M)=>{const C=d.component=gE(d,I,w);if(jd(d)&&(C.ctx.renderer=j),yE(C),C.asyncDep){if(w&&w.registerDep(C,Ft),!d.el){const V=C.subTree=_e(zn);R(null,V,p,y)}}else Ft(C,d,p,y,w,D,M)},or=(d,p,y)=>{const I=p.component=d.component;if(Ry(d,p,y))if(I.asyncDep&&!I.asyncResolved){mt(I,p,y);return}else I.next=p,gy(I.update),I.effect.dirty=!0,I.update();else p.el=d.el,I.vnode=p},Ft=(d,p,y,I,w,D,M)=>{const C=()=>{if(d.isMounted){let{next:F,bu:W,u:q,parent:Y,vnode:et}=d;{const lr=Jd(d);if(lr){F&&(F.el=et.el,mt(d,F,M)),lr.asyncDep.then(()=>{d.isUnmounted||C()});return}}let gt=F,Rt;xn(d,!1),F?(F.el=et.el,mt(d,F,M)):F=et,W&&Ni(W),(Rt=F.props&&F.props.onVnodeBeforeUpdate)&&Me(Rt,Y,F,et),xn(d,!0);const Ut=_a(d),Ie=d.subTree;d.subTree=Ut,_(Ie,Ut,h(Ie.el),T(Ie),d,w,D),F.el=Ut.el,gt===null&&by(d,Ut.el),q&&ue(q,w),(Rt=F.props&&F.props.onVnodeUpdated)&&ue(()=>Me(Rt,Y,F,et),w)}else{let F;const{el:W,props:q}=p,{bm:Y,m:et,parent:gt}=d,Rt=ki(p);if(xn(d,!1),Y&&Ni(Y),!Rt&&(F=q&&q.onVnodeBeforeMount)&&Me(F,gt,p),xn(d,!0),W&&It){const Ut=()=>{d.subTree=_a(d),It(W,d.subTree,d,w,null)};Rt?p.type.__asyncLoader().then(()=>!d.isUnmounted&&Ut()):Ut()}else{const Ut=d.subTree=_a(d);_(null,Ut,y,I,d,w,D),p.el=Ut.el}if(et&&ue(et,w),!Rt&&(F=q&&q.onVnodeMounted)){const Ut=p;ue(()=>Me(F,gt,Ut),w)}(p.shapeFlag&256||gt&&ki(gt.vnode)&&gt.vnode.shapeFlag&256)&&d.a&&ue(d.a,w),d.isMounted=!0,p=y=I=null}},V=d.effect=new el(C,Te,()=>ul(S),d.scope),S=d.update=()=>{V.dirty&&V.run()};S.id=d.uid,xn(d,!0),S()},mt=(d,p,y)=>{p.component=d;const I=d.vnode.props;d.vnode=p,d.next=null,eE(d,p.props,I,y),sE(d,p.children,y),Zn(),$u(d),tr()},ht=(d,p,y,I,w,D,M,C,V=!1)=>{const S=d&&d.children,F=d?d.shapeFlag:0,W=p.children,{patchFlag:q,shapeFlag:Y}=p;if(q>0){if(q&128){un(S,W,y,I,w,D,M,C,V);return}else if(q&256){Je(S,W,y,I,w,D,M,C,V);return}}Y&8?(F&16&&Qt(S,w,D),W!==S&&u(y,W)):F&16?Y&16?un(S,W,y,I,w,D,M,C,V):Qt(S,w,D,!0):(F&8&&u(y,""),Y&16&&H(W,y,I,w,D,M,C,V))},Je=(d,p,y,I,w,D,M,C,V)=>{d=d||vr,p=p||vr;const S=d.length,F=p.length,W=Math.min(S,F);let q;for(q=0;q<W;q++){const Y=p[q]=V?mn(p[q]):Ue(p[q]);_(d[q],Y,y,null,w,D,M,C,V)}S>F?Qt(d,w,D,!0,!1,W):H(p,y,I,w,D,M,C,V,W)},un=(d,p,y,I,w,D,M,C,V)=>{let S=0;const F=p.length;let W=d.length-1,q=F-1;for(;S<=W&&S<=q;){const Y=d[S],et=p[S]=V?mn(p[S]):Ue(p[S]);if(Zr(Y,et))_(Y,et,y,null,w,D,M,C,V);else break;S++}for(;S<=W&&S<=q;){const Y=d[W],et=p[q]=V?mn(p[q]):Ue(p[q]);if(Zr(Y,et))_(Y,et,y,null,w,D,M,C,V);else break;W--,q--}if(S>W){if(S<=q){const Y=q+1,et=Y<F?p[Y].el:I;for(;S<=q;)_(null,p[S]=V?mn(p[S]):Ue(p[S]),y,et,w,D,M,C,V),S++}}else if(S>q)for(;S<=W;)le(d[S],w,D,!0),S++;else{const Y=S,et=S,gt=new Map;for(S=et;S<=q;S++){const me=p[S]=V?mn(p[S]):Ue(p[S]);me.key!=null&&gt.set(me.key,S)}let Rt,Ut=0;const Ie=q-et+1;let lr=!1,Vu=0;const Jr=new Array(Ie);for(S=0;S<Ie;S++)Jr[S]=0;for(S=Y;S<=W;S++){const me=d[S];if(Ut>=Ie){le(me,w,D,!0);continue}let ke;if(me.key!=null)ke=gt.get(me.key);else for(Rt=et;Rt<=q;Rt++)if(Jr[Rt-et]===0&&Zr(me,p[Rt])){ke=Rt;break}ke===void 0?le(me,w,D,!0):(Jr[ke-et]=S+1,ke>=Vu?Vu=ke:lr=!0,_(me,p[ke],y,null,w,D,M,C,V),Ut++)}const xu=lr?cE(Jr):vr;for(Rt=xu.length-1,S=Ie-1;S>=0;S--){const me=et+S,ke=p[me],Nu=me+1<F?p[me+1].el:I;Jr[S]===0?_(null,ke,y,Nu,w,D,M,C,V):lr&&(Rt<0||S!==xu[Rt]?Oe(ke,y,Nu,2):Rt--)}}},Oe=(d,p,y,I,w=null)=>{const{el:D,type:M,transition:C,children:V,shapeFlag:S}=d;if(S&6){Oe(d.component.subTree,p,y,I);return}if(S&128){d.suspense.move(p,y,I);return}if(S&64){M.move(d,p,y,j);return}if(M===Fe){r(D,p,y);for(let W=0;W<V.length;W++)Oe(V[W],p,y,I);r(d.anchor,p,y);return}if(M===wa){x(d,p,y);return}if(I!==2&&S&1&&C)if(I===0)C.beforeEnter(D),r(D,p,y),ue(()=>C.enter(D),w);else{const{leave:W,delayLeave:q,afterLeave:Y}=C,et=()=>r(D,p,y),gt=()=>{W(D,()=>{et(),Y&&Y()})};q?q(D,et,gt):gt()}else r(D,p,y)},le=(d,p,y,I=!1,w=!1)=>{const{type:D,props:M,ref:C,children:V,dynamicChildren:S,shapeFlag:F,patchFlag:W,dirs:q}=d;if(C!=null&&ic(C,null,y,d,!0),F&256){p.ctx.deactivate(d);return}const Y=F&1&&q,et=!ki(d);let gt;if(et&&(gt=M&&M.onVnodeBeforeUnmount)&&Me(gt,p,d),F&6)fi(d.component,y,I);else{if(F&128){d.suspense.unmount(y,I);return}Y&&Vn(d,null,p,"beforeUnmount"),F&64?d.type.remove(d,p,y,w,j,I):S&&(D!==Fe||W>0&&W&64)?Qt(S,p,y,!1,!0):(D===Fe&&W&384||!w&&F&16)&&Qt(V,p,y),I&&ar(d)}(et&&(gt=M&&M.onVnodeUnmounted)||Y)&&ue(()=>{gt&&Me(gt,p,d),Y&&Vn(d,null,p,"unmounted")},y)},ar=d=>{const{type:p,el:y,anchor:I,transition:w}=d;if(p===Fe){cr(y,I);return}if(p===wa){B(d);return}const D=()=>{s(y),w&&!w.persisted&&w.afterLeave&&w.afterLeave()};if(d.shapeFlag&1&&w&&!w.persisted){const{leave:M,delayLeave:C}=w,V=()=>M(y,D);C?C(d.el,D,V):V()}else D()},cr=(d,p)=>{let y;for(;d!==p;)y=f(d),s(d),d=y;s(p)},fi=(d,p,y)=>{const{bum:I,scope:w,update:D,subTree:M,um:C}=d;I&&Ni(I),w.stop(),D&&(D.active=!1,le(M,d,p,y)),C&&ue(C,p),ue(()=>{d.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Qt=(d,p,y,I=!1,w=!1,D=0)=>{for(let M=D;M<d.length;M++)le(d[M],p,y,I,w)},T=d=>d.shapeFlag&6?T(d.component.subTree):d.shapeFlag&128?d.suspense.next():f(d.anchor||d.el);let L=!1;const k=(d,p,y)=>{d==null?p._vnode&&le(p._vnode,null,null,!0):_(p._vnode||null,d,p,null,null,null,y),L||(L=!0,$u(),Md(),L=!1),p._vnode=d},j={p:_,um:le,m:Oe,r:ar,mt:Xr,mc:H,pc:ht,pbc:tt,n:T,o:e};let ft,It;return t&&([ft,It]=t(j)),{render:k,hydrate:ft,createApp:Zy(k,ft)}}function Ea({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function xn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function aE(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Xd(e,t,n=!1){const r=e.children,s=t.children;if(Q(r)&&Q(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=mn(s[i]),a.el=o.el),n||Xd(o,a)),a.type===bo&&(a.el=o.el)}}function cE(e){const t=e.slice(),n=[0];let r,s,i,o,a;const c=e.length;for(r=0;r<c;r++){const l=e[r];if(l!==0){if(s=n[n.length-1],e[s]<l){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<l?i=a+1:o=a;l<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function Jd(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Jd(t)}const lE=e=>e.__isTeleport,Fe=Symbol.for("v-fgt"),bo=Symbol.for("v-txt"),zn=Symbol.for("v-cmt"),wa=Symbol.for("v-stc"),ds=[];let Ce=null;function we(e=!1){ds.push(Ce=e?null:[])}function uE(){ds.pop(),Ce=ds[ds.length-1]||null}let bs=1;function Zu(e){bs+=e}function Zd(e){return e.dynamicChildren=bs>0?Ce||vr:null,uE(),bs>0&&Ce&&Ce.push(e),e}function Le(e,t,n,r,s,i){return Zd(ct(e,t,n,r,s,i,!0))}function tp(e,t,n,r,s){return Zd(_e(e,t,n,r,s,!0))}function oc(e){return e?e.__v_isVNode===!0:!1}function Zr(e,t){return e.type===t.type&&e.key===t.key}const So="__vInternal",ep=({key:e})=>e??null,Li=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Lt(e)||de(e)||Z(e)?{i:he,r:e,k:t,f:!!n}:e:null);function ct(e,t=null,n=null,r=0,s=null,i=e===Fe?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ep(t),ref:t&&Li(t),scopeId:Io,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:he};return a?(ml(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Lt(n)?8:16),bs>0&&!o&&Ce&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ce.push(c),c}const _e=hE;function hE(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Sy)&&(e=zn),oc(e)){const a=Dr(e,t,!0);return n&&ml(a,n),bs>0&&!i&&Ce&&(a.shapeFlag&6?Ce[Ce.indexOf(e)]=a:Ce.push(a)),a.patchFlag|=-2,a}if(TE(e)&&(e=e.__vccOpts),t){t=fE(t);let{class:a,style:c}=t;a&&!Lt(a)&&(t.class=tl(a)),bt(c)&&(Cd(c)&&!Q(c)&&(c=Gt({},c)),t.style=Zc(c))}const o=Lt(e)?1:Cy(e)?128:lE(e)?64:bt(e)?4:Z(e)?2:0;return ct(e,t,n,r,s,o,i,!0)}function fE(e){return e?Cd(e)||So in e?Gt({},e):e:null}function Dr(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,a=t?dE(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&ep(a),ref:t&&t.ref?n&&s?Q(s)?s.concat(Li(t)):[s,Li(t)]:Li(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fe?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Dr(e.ssContent),ssFallback:e.ssFallback&&Dr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function fr(e=" ",t=0){return _e(bo,null,e,t)}function Er(e="",t=!1){return t?(we(),tp(zn,null,e)):_e(zn,null,e)}function Ue(e){return e==null||typeof e=="boolean"?_e(zn):Q(e)?_e(Fe,null,e.slice()):typeof e=="object"?mn(e):_e(bo,null,String(e))}function mn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Dr(e)}function ml(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Q(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),ml(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(So in t)?t._ctx=he:s===3&&he&&(he.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Z(t)?(t={default:t,_ctx:he},n=32):(t=String(t),r&64?(n=16,t=[fr(t)]):n=8);e.children=t,e.shapeFlag|=n}function dE(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=tl([t.class,r.class]));else if(s==="style")t.style=Zc([t.style,r.style]);else if(yo(s)){const i=t[s],o=r[s];o&&i!==o&&!(Q(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function Me(e,t,n,r=null){De(e,t,7,[n,r])}const pE=Wd();let mE=0;function gE(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||pE,i={uid:mE++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new B_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Hd(r,s),emitsOptions:Fd(r,s),emit:null,emitted:null,propsDefaults:Et,inheritAttrs:r.inheritAttrs,ctx:Et,data:Et,props:Et,attrs:Et,slots:Et,refs:Et,setupState:Et,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Ey.bind(null,i),e.ce&&e.ce(i),i}let te=null;const _E=()=>te||he;let Yi,ac;{const e=hd(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Yi=t("__VUE_INSTANCE_SETTERS__",n=>te=n),ac=t("__VUE_SSR_SETTERS__",n=>Co=n)}const zs=e=>{const t=te;return Yi(e),e.scope.on(),()=>{e.scope.off(),Yi(t)}},th=()=>{te&&te.scope.off(),Yi(null)};function np(e){return e.vnode.shapeFlag&4}let Co=!1;function yE(e,t=!1){t&&ac(t);const{props:n,children:r}=e.vnode,s=np(e);tE(e,n,s,t),rE(e,r);const i=s?EE(e,t):void 0;return t&&ac(!1),i}function EE(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Pd(new Proxy(e.ctx,zy));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?vE(e):null,i=zs(e);Zn();const o=vn(r,e,0,[e.props,s]);if(tr(),i(),ad(o)){if(o.then(th,th),t)return o.then(a=>{eh(e,a,t)}).catch(a=>{To(a,e,0)});e.asyncDep=o}else eh(e,o,t)}else rp(e,t)}function eh(e,t,n){Z(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:bt(t)&&(e.setupState=xd(t)),rp(e,n)}let nh;function rp(e,t,n){const r=e.type;if(!e.render){if(!t&&nh&&!r.render){const s=r.template||dl(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:c}=r,l=Gt(Gt({isCustomElement:i,delimiters:a},o),c);r.render=nh(s,l)}}e.render=r.render||Te}{const s=zs(e);Zn();try{Hy(e)}finally{tr(),s()}}}function wE(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return fe(e,"get","$attrs"),t[n]}}))}function vE(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return wE(e)},slots:e.slots,emit:e.emit,expose:t}}function Po(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(xd(Pd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in fs)return fs[n](e)},has(t,n){return n in t||n in fs}}))}function TE(e){return Z(e)&&"__vccOpts"in e}const be=(e,t)=>cy(e,t,Co);function rh(e,t,n=Et){const r=_E(),s=Wn(t),i=Jn(t),o=dy((c,l)=>{let u;return xy(()=>{const h=e[t];Ge(u,h)&&(u=h,l())}),{get(){return c(),n.get?n.get(u):u},set(h){const f=r.vnode.props;!(f&&(t in f||s in f||i in f)&&(`onUpdate:${t}`in f||`onUpdate:${s}`in f||`onUpdate:${i}`in f))&&Ge(h,u)&&(u=h,l()),r.emit(`update:${t}`,n.set?n.set(h):h)}}}),a=t==="modelValue"?"modelModifiers":`${t}Modifiers`;return o[Symbol.iterator]=()=>{let c=0;return{next(){return c<2?{value:c++?e[a]||{}:o,done:!1}:{done:!0}}}},o}function sp(e,t,n){const r=arguments.length;return r===2?bt(t)&&!Q(t)?oc(t)?_e(e,null,[t]):_e(e,t):_e(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&oc(n)&&(n=[n]),_e(e,t,n))}const AE="3.4.15";/**
* @vue/runtime-dom v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const IE="http://www.w3.org/2000/svg",RE="http://www.w3.org/1998/Math/MathML",gn=typeof document<"u"?document:null,sh=gn&&gn.createElement("template"),bE={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?gn.createElementNS(IE,e):t==="mathml"?gn.createElementNS(RE,e):gn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>gn.createTextNode(e),createComment:e=>gn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>gn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{sh.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const a=sh.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},SE=Symbol("_vtc");function CE(e,t,n){const r=e[SE];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const PE=Symbol("_vod"),DE=Symbol("");function VE(e,t,n){const r=e.style,s=r.display,i=Lt(n);if(n&&!i){if(t&&!Lt(t))for(const o in t)n[o]==null&&cc(r,o,"");for(const o in n)cc(r,o,n[o])}else if(i){if(t!==n){const o=r[DE];o&&(n+=";"+o),r.cssText=n}}else t&&e.removeAttribute("style");PE in e&&(r.display=s)}const ih=/\s*!important$/;function cc(e,t,n){if(Q(n))n.forEach(r=>cc(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=xE(e,t);ih.test(n)?e.setProperty(Jn(r),n.replace(ih,""),"important"):e[r]=n}}const oh=["Webkit","Moz","ms"],va={};function xE(e,t){const n=va[t];if(n)return n;let r=Wn(t);if(r!=="filter"&&r in e)return va[t]=r;r=ud(r);for(let s=0;s<oh.length;s++){const i=oh[s]+r;if(i in e)return va[t]=i}return t}const ah="http://www.w3.org/1999/xlink";function NE(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(ah,t.slice(6,t.length)):e.setAttributeNS(ah,t,n);else{const i=U_(t);n==null||i&&!fd(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function OE(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const l=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";l!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let c=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=fd(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function dr(e,t,n,r){e.addEventListener(t,n,r)}function kE(e,t,n,r){e.removeEventListener(t,n,r)}const ch=Symbol("_vei");function ME(e,t,n,r,s=null){const i=e[ch]||(e[ch]={}),o=i[t];if(r&&o)o.value=r;else{const[a,c]=LE(t);if(r){const l=i[t]=BE(r,s);dr(e,a,l,c)}else o&&(kE(e,a,o,c),i[t]=void 0)}}const lh=/(?:Once|Passive|Capture)$/;function LE(e){let t;if(lh.test(e)){t={};let r;for(;r=e.match(lh);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Jn(e.slice(2)),t]}let Ta=0;const FE=Promise.resolve(),UE=()=>Ta||(FE.then(()=>Ta=0),Ta=Date.now());function BE(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;De(jE(r,n.value),t,5,[r])};return n.value=e,n.attached=UE(),n}function jE(e,t){if(Q(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const uh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,$E=(e,t,n,r,s,i,o,a,c)=>{const l=s==="svg";t==="class"?CE(e,r,l):t==="style"?VE(e,n,r):yo(t)?Yc(t)||ME(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):qE(e,t,r,l))?OE(e,t,r,i,o,a,c):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),NE(e,t,r,l))};function qE(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&uh(t)&&Z(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return uh(t)&&Lt(n)?!1:t in e}const hh=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Q(t)?n=>Ni(t,n):t};function KE(e){e.target.composing=!0}function fh(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Aa=Symbol("_assign"),dh={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Aa]=hh(s);const i=r||s.props&&s.props.type==="number";dr(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=Qa(a)),e[Aa](a)}),n&&dr(e,"change",()=>{e.value=e.value.trim()}),t||(dr(e,"compositionstart",KE),dr(e,"compositionend",fh),dr(e,"change",fh))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e[Aa]=hh(i),e.composing)return;const o=s||e.type==="number"?Qa(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===a)||(e.value=a))}},WE=Gt({patchProp:$E},bE);let ph;function zE(){return ph||(ph=iE(WE))}const HE=(...e)=>{const t=zE().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=QE(r);if(!s)return;const i=t._component;!Z(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,GE(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function GE(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function QE(e){return Lt(e)?document.querySelector(e):e}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const pr=typeof window<"u";function YE(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const dt=Object.assign;function Ia(e,t){const n={};for(const r in t){const s=t[r];n[r]=Ve(s)?s.map(e):e(s)}return n}const ps=()=>{},Ve=Array.isArray,XE=/\/$/,JE=e=>e.replace(XE,"");function Ra(e,t,n="/"){let r,s={},i="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,a>-1?a:t.length),s=e(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=nw(r??t,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function ZE(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function mh(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function tw(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Vr(t.matched[r],n.matched[s])&&ip(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Vr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ip(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!ew(e[n],t[n]))return!1;return!0}function ew(e,t){return Ve(e)?gh(e,t):Ve(t)?gh(t,e):e===t}function gh(e,t){return Ve(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function nw(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var Ss;(function(e){e.pop="pop",e.push="push"})(Ss||(Ss={}));var ms;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ms||(ms={}));function rw(e){if(!e)if(pr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),JE(e)}const sw=/^[^#]+#/;function iw(e,t){return e.replace(sw,"#")+t}function ow(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Do=()=>({left:window.pageXOffset,top:window.pageYOffset});function aw(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=ow(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function _h(e,t){return(history.state?history.state.position-t:-1)+e}const lc=new Map;function cw(e,t){lc.set(e,t)}function lw(e){const t=lc.get(e);return lc.delete(e),t}let uw=()=>location.protocol+"//"+location.host;function op(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),mh(c,"")}return mh(n,e)+r+s}function hw(e,t,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const m=op(e,location),g=n.value,_=t.value;let E=0;if(f){if(n.value=m,t.value=f,o&&o===g){o=null;return}E=_?f.position-_.position:0}else r(m);s.forEach(R=>{R(n.value,g,{delta:E,type:Ss.pop,direction:E?E>0?ms.forward:ms.back:ms.unknown})})};function c(){o=n.value}function l(f){s.push(f);const m=()=>{const g=s.indexOf(f);g>-1&&s.splice(g,1)};return i.push(m),m}function u(){const{history:f}=window;f.state&&f.replaceState(dt({},f.state,{scroll:Do()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:h}}function yh(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?Do():null}}function fw(e){const{history:t,location:n}=window,r={value:op(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const h=e.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+c:uw()+e+c;try{t[u?"replaceState":"pushState"](l,"",f),s.value=l}catch(m){console.error(m),n[u?"replace":"assign"](f)}}function o(c,l){const u=dt({},t.state,yh(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});i(c,u,!0),r.value=c}function a(c,l){const u=dt({},s.value,t.state,{forward:c,scroll:Do()});i(u.current,u,!0);const h=dt({},yh(r.value,c,null),{position:u.position+1},l);i(c,h,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function dw(e){e=rw(e);const t=fw(e),n=hw(e,t.state,t.location,t.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=dt({location:"",base:e,go:r,createHref:iw.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function pw(e){return typeof e=="string"||e&&typeof e=="object"}function ap(e){return typeof e=="string"||typeof e=="symbol"}const fn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},cp=Symbol("");var Eh;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Eh||(Eh={}));function xr(e,t){return dt(new Error,{type:e,[cp]:!0},t)}function Ze(e,t){return e instanceof Error&&cp in e&&(t==null||!!(e.type&t))}const wh="[^/]+?",mw={sensitive:!1,strict:!1,start:!0,end:!0},gw=/[.+*?^${}()[\]/\\]/g;function _w(e,t){const n=dt({},mw,t),r=[];let s=n.start?"^":"";const i=[];for(const l of e){const u=l.length?[]:[90];n.strict&&!l.length&&(s+="/");for(let h=0;h<l.length;h++){const f=l[h];let m=40+(n.sensitive?.25:0);if(f.type===0)h||(s+="/"),s+=f.value.replace(gw,"\\$&"),m+=40;else if(f.type===1){const{value:g,repeatable:_,optional:E,regexp:R}=f;i.push({name:g,repeatable:_,optional:E});const P=R||wh;if(P!==wh){m+=10;try{new RegExp(`(${P})`)}catch(B){throw new Error(`Invalid custom RegExp for param "${g}" (${P}): `+B.message)}}let x=_?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;h||(x=E&&l.length<2?`(?:/${x})`:"/"+x),E&&(x+="?"),s+=x,m+=20,E&&(m+=-8),_&&(m+=-20),P===".*"&&(m+=-50)}u.push(m)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const m=u[f]||"",g=i[f-1];h[g.name]=m&&g.repeatable?m.split("/"):m}return h}function c(l){let u="",h=!1;for(const f of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const m of f)if(m.type===0)u+=m.value;else if(m.type===1){const{value:g,repeatable:_,optional:E}=m,R=g in l?l[g]:"";if(Ve(R)&&!_)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const P=Ve(R)?R.join("/"):R;if(!P)if(E)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=P}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function yw(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Ew(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=yw(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(vh(r))return 1;if(vh(s))return-1}return s.length-r.length}function vh(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ww={type:0,value:""},vw=/[a-zA-Z0-9_]/;function Tw(e){if(!e)return[[]];if(e==="/")return[[ww]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${n})/"${l}": ${m}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",u="";function h(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),l="")}function f(){l+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:c==="("?n=2:vw.test(c)?f():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${l}"`),h(),o(),s}function Aw(e,t,n){const r=_w(Tw(e.path),n),s=dt(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Iw(e,t){const n=[],r=new Map;t=Ih({strict:!1,end:!0,sensitive:!1},t);function s(u){return r.get(u)}function i(u,h,f){const m=!f,g=Rw(u);g.aliasOf=f&&f.record;const _=Ih(t,u),E=[g];if("alias"in u){const x=typeof u.alias=="string"?[u.alias]:u.alias;for(const B of x)E.push(dt({},g,{components:f?f.record.components:g.components,path:B,aliasOf:f?f.record:g}))}let R,P;for(const x of E){const{path:B}=x;if(h&&B[0]!=="/"){const at=h.record.path,$=at[at.length-1]==="/"?"":"/";x.path=h.record.path+(B&&$+B)}if(R=Aw(x,h,_),f?f.alias.push(R):(P=P||R,P!==R&&P.alias.push(R),m&&u.name&&!Ah(R)&&o(u.name)),g.children){const at=g.children;for(let $=0;$<at.length;$++)i(at[$],R,f&&f.children[$])}f=f||R,(R.record.components&&Object.keys(R.record.components).length||R.record.name||R.record.redirect)&&c(R)}return P?()=>{o(P)}:ps}function o(u){if(ap(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let h=0;for(;h<n.length&&Ew(u,n[h])>=0&&(u.record.path!==n[h].record.path||!lp(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Ah(u)&&r.set(u.record.name,u)}function l(u,h){let f,m={},g,_;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw xr(1,{location:u});_=f.record.name,m=dt(Th(h.params,f.keys.filter(P=>!P.optional).map(P=>P.name)),u.params&&Th(u.params,f.keys.map(P=>P.name))),g=f.stringify(m)}else if("path"in u)g=u.path,f=n.find(P=>P.re.test(g)),f&&(m=f.parse(g),_=f.record.name);else{if(f=h.name?r.get(h.name):n.find(P=>P.re.test(h.path)),!f)throw xr(1,{location:u,currentLocation:h});_=f.record.name,m=dt({},h.params,u.params),g=f.stringify(m)}const E=[];let R=f;for(;R;)E.unshift(R.record),R=R.parent;return{name:_,path:g,params:m,matched:E,meta:Sw(E)}}return e.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Th(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Rw(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:bw(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function bw(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Ah(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Sw(e){return e.reduce((t,n)=>dt(t,n.meta),{})}function Ih(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function lp(e,t){return t.children.some(n=>n===e||lp(e,n))}const up=/#/g,Cw=/&/g,Pw=/\//g,Dw=/=/g,Vw=/\?/g,hp=/\+/g,xw=/%5B/g,Nw=/%5D/g,fp=/%5E/g,Ow=/%60/g,dp=/%7B/g,kw=/%7C/g,pp=/%7D/g,Mw=/%20/g;function gl(e){return encodeURI(""+e).replace(kw,"|").replace(xw,"[").replace(Nw,"]")}function Lw(e){return gl(e).replace(dp,"{").replace(pp,"}").replace(fp,"^")}function uc(e){return gl(e).replace(hp,"%2B").replace(Mw,"+").replace(up,"%23").replace(Cw,"%26").replace(Ow,"`").replace(dp,"{").replace(pp,"}").replace(fp,"^")}function Fw(e){return uc(e).replace(Dw,"%3D")}function Uw(e){return gl(e).replace(up,"%23").replace(Vw,"%3F")}function Bw(e){return e==null?"":Uw(e).replace(Pw,"%2F")}function Xi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function jw(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(hp," "),o=i.indexOf("="),a=Xi(o<0?i:i.slice(0,o)),c=o<0?null:Xi(i.slice(o+1));if(a in t){let l=t[a];Ve(l)||(l=t[a]=[l]),l.push(c)}else t[a]=c}return t}function Rh(e){let t="";for(let n in e){const r=e[n];if(n=Fw(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Ve(r)?r.map(i=>i&&uc(i)):[r&&uc(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function $w(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Ve(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const qw=Symbol(""),bh=Symbol(""),_l=Symbol(""),mp=Symbol(""),hc=Symbol("");function ts(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function _n(e,t,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(xr(4,{from:n,to:t})):h instanceof Error?a(h):pw(h)?a(xr(2,{from:t,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},l=e.call(r&&r.instances[s],t,n,c);let u=Promise.resolve(l);e.length<3&&(u=u.then(c)),u.catch(h=>a(h))})}function ba(e,t,n,r){const s=[];for(const i of e)for(const o in i.components){let a=i.components[o];if(!(t!=="beforeRouteEnter"&&!i.instances[o]))if(Kw(a)){const l=(a.__vccOpts||a)[t];l&&s.push(_n(l,n,r,i,o))}else{let c=a();s.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=YE(l)?l.default:l;i.components[o]=u;const f=(u.__vccOpts||u)[t];return f&&_n(f,n,r,i,o)()}))}}return s}function Kw(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Sh(e){const t=nn(_l),n=nn(mp),r=be(()=>t.resolve(Se(e.to))),s=be(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(Vr.bind(null,u));if(f>-1)return f;const m=Ch(c[l-2]);return l>1&&Ch(u)===m&&h[h.length-1].path!==m?h.findIndex(Vr.bind(null,c[l-2])):f}),i=be(()=>s.value>-1&&Gw(n.params,r.value.params)),o=be(()=>s.value>-1&&s.value===n.matched.length-1&&ip(n.params,r.value.params));function a(c={}){return Hw(c)?t[Se(e.replace)?"replace":"push"](Se(e.to)).catch(ps):Promise.resolve()}return{route:r,href:be(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const Ww=Bd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Sh,setup(e,{slots:t}){const n=Cr(Sh(e)),{options:r}=nn(_l),s=be(()=>({[Ph(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Ph(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:sp("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),zw=Ww;function Hw(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Gw(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Ve(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Ch(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ph=(e,t,n)=>e??t??n,Qw=Bd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=nn(hc),s=be(()=>e.route||r.value),i=nn(bh,0),o=be(()=>{let l=Se(i);const{matched:u}=s.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=be(()=>s.value.matched[o.value]);Mi(bh,be(()=>o.value+1)),Mi(qw,a),Mi(hc,s);const c=yr();return Oi(()=>[c.value,a.value,e.name],([l,u,h],[f,m,g])=>{u&&(u.instances[h]=l,m&&m!==u&&l&&l===f&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),l&&u&&(!m||!Vr(u,m)||!f)&&(u.enterCallbacks[h]||[]).forEach(_=>_(l))},{flush:"post"}),()=>{const l=s.value,u=e.name,h=a.value,f=h&&h.components[u];if(!f)return Dh(n.default,{Component:f,route:l});const m=h.props[u],g=m?m===!0?l.params:typeof m=="function"?m(l):m:null,E=sp(f,dt({},g,t,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return Dh(n.default,{Component:E,route:l})||E}}});function Dh(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const gp=Qw;function Yw(e){const t=Iw(e.routes,e),n=e.parseQuery||jw,r=e.stringifyQuery||Rh,s=e.history,i=ts(),o=ts(),a=ts(),c=ly(fn);let l=fn;pr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Ia.bind(null,T=>""+T),h=Ia.bind(null,Bw),f=Ia.bind(null,Xi);function m(T,L){let k,j;return ap(T)?(k=t.getRecordMatcher(T),j=L):j=T,t.addRoute(j,k)}function g(T){const L=t.getRecordMatcher(T);L&&t.removeRoute(L)}function _(){return t.getRoutes().map(T=>T.record)}function E(T){return!!t.getRecordMatcher(T)}function R(T,L){if(L=dt({},L||c.value),typeof T=="string"){const p=Ra(n,T,L.path),y=t.resolve({path:p.path},L),I=s.createHref(p.fullPath);return dt(p,y,{params:f(y.params),hash:Xi(p.hash),redirectedFrom:void 0,href:I})}let k;if("path"in T)k=dt({},T,{path:Ra(n,T.path,L.path).path});else{const p=dt({},T.params);for(const y in p)p[y]==null&&delete p[y];k=dt({},T,{params:h(p)}),L.params=h(L.params)}const j=t.resolve(k,L),ft=T.hash||"";j.params=u(f(j.params));const It=ZE(r,dt({},T,{hash:Lw(ft),path:j.path})),d=s.createHref(It);return dt({fullPath:It,hash:ft,query:r===Rh?$w(T.query):T.query||{}},j,{redirectedFrom:void 0,href:d})}function P(T){return typeof T=="string"?Ra(n,T,c.value.path):dt({},T)}function x(T,L){if(l!==T)return xr(8,{from:L,to:T})}function B(T){return At(T)}function at(T){return B(dt(P(T),{replace:!0}))}function $(T){const L=T.matched[T.matched.length-1];if(L&&L.redirect){const{redirect:k}=L;let j=typeof k=="function"?k(T):k;return typeof j=="string"&&(j=j.includes("?")||j.includes("#")?j=P(j):{path:j},j.params={}),dt({query:T.query,hash:T.hash,params:"path"in j?{}:T.params},j)}}function At(T,L){const k=l=R(T),j=c.value,ft=T.state,It=T.force,d=T.replace===!0,p=$(k);if(p)return At(dt(P(p),{state:typeof p=="object"?dt({},ft,p.state):ft,force:It,replace:d}),L||k);const y=k;y.redirectedFrom=L;let I;return!It&&tw(r,j,k)&&(I=xr(16,{to:y,from:j}),Oe(j,j,!0,!1)),(I?Promise.resolve(I):tt(y,j)).catch(w=>Ze(w)?Ze(w,2)?w:un(w):ht(w,y,j)).then(w=>{if(w){if(Ze(w,2))return At(dt({replace:d},P(w.to),{state:typeof w.to=="object"?dt({},ft,w.to.state):ft,force:It}),L||y)}else w=Ct(y,j,!0,d,ft);return _t(y,j,w),w})}function H(T,L){const k=x(T,L);return k?Promise.reject(k):Promise.resolve()}function yt(T){const L=cr.values().next().value;return L&&typeof L.runWithContext=="function"?L.runWithContext(T):T()}function tt(T,L){let k;const[j,ft,It]=Xw(T,L);k=ba(j.reverse(),"beforeRouteLeave",T,L);for(const p of j)p.leaveGuards.forEach(y=>{k.push(_n(y,T,L))});const d=H.bind(null,T,L);return k.push(d),Qt(k).then(()=>{k=[];for(const p of i.list())k.push(_n(p,T,L));return k.push(d),Qt(k)}).then(()=>{k=ba(ft,"beforeRouteUpdate",T,L);for(const p of ft)p.updateGuards.forEach(y=>{k.push(_n(y,T,L))});return k.push(d),Qt(k)}).then(()=>{k=[];for(const p of It)if(p.beforeEnter)if(Ve(p.beforeEnter))for(const y of p.beforeEnter)k.push(_n(y,T,L));else k.push(_n(p.beforeEnter,T,L));return k.push(d),Qt(k)}).then(()=>(T.matched.forEach(p=>p.enterCallbacks={}),k=ba(It,"beforeRouteEnter",T,L),k.push(d),Qt(k))).then(()=>{k=[];for(const p of o.list())k.push(_n(p,T,L));return k.push(d),Qt(k)}).catch(p=>Ze(p,8)?p:Promise.reject(p))}function _t(T,L,k){a.list().forEach(j=>yt(()=>j(T,L,k)))}function Ct(T,L,k,j,ft){const It=x(T,L);if(It)return It;const d=L===fn,p=pr?history.state:{};k&&(j||d?s.replace(T.fullPath,dt({scroll:d&&p&&p.scroll},ft)):s.push(T.fullPath,ft)),c.value=T,Oe(T,L,k,d),un()}let pe;function Xr(){pe||(pe=s.listen((T,L,k)=>{if(!fi.listening)return;const j=R(T),ft=$(j);if(ft){At(dt(ft,{replace:!0}),j).catch(ps);return}l=j;const It=c.value;pr&&cw(_h(It.fullPath,k.delta),Do()),tt(j,It).catch(d=>Ze(d,12)?d:Ze(d,2)?(At(d.to,j).then(p=>{Ze(p,20)&&!k.delta&&k.type===Ss.pop&&s.go(-1,!1)}).catch(ps),Promise.reject()):(k.delta&&s.go(-k.delta,!1),ht(d,j,It))).then(d=>{d=d||Ct(j,It,!1),d&&(k.delta&&!Ze(d,8)?s.go(-k.delta,!1):k.type===Ss.pop&&Ze(d,20)&&s.go(-1,!1)),_t(j,It,d)}).catch(ps)}))}let or=ts(),Ft=ts(),mt;function ht(T,L,k){un(T);const j=Ft.list();return j.length?j.forEach(ft=>ft(T,L,k)):console.error(T),Promise.reject(T)}function Je(){return mt&&c.value!==fn?Promise.resolve():new Promise((T,L)=>{or.add([T,L])})}function un(T){return mt||(mt=!T,Xr(),or.list().forEach(([L,k])=>T?k(T):L()),or.reset()),T}function Oe(T,L,k,j){const{scrollBehavior:ft}=e;if(!pr||!ft)return Promise.resolve();const It=!k&&lw(_h(T.fullPath,0))||(j||!k)&&history.state&&history.state.scroll||null;return Od().then(()=>ft(T,L,It)).then(d=>d&&aw(d)).catch(d=>ht(d,T,L))}const le=T=>s.go(T);let ar;const cr=new Set,fi={currentRoute:c,listening:!0,addRoute:m,removeRoute:g,hasRoute:E,getRoutes:_,resolve:R,options:e,push:B,replace:at,go:le,back:()=>le(-1),forward:()=>le(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Ft.add,isReady:Je,install(T){const L=this;T.component("RouterLink",zw),T.component("RouterView",gp),T.config.globalProperties.$router=L,Object.defineProperty(T.config.globalProperties,"$route",{enumerable:!0,get:()=>Se(c)}),pr&&!ar&&c.value===fn&&(ar=!0,B(s.location).catch(ft=>{}));const k={};for(const ft in fn)Object.defineProperty(k,ft,{get:()=>c.value[ft],enumerable:!0});T.provide(_l,L),T.provide(mp,bd(k)),T.provide(hc,c);const j=T.unmount;cr.add(T),T.unmount=function(){cr.delete(T),cr.size<1&&(l=fn,pe&&pe(),pe=null,c.value=fn,ar=!1,mt=!1),j()}}};function Qt(T){return T.reduce((L,k)=>L.then(()=>yt(k)),Promise.resolve())}return fi}function Xw(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(l=>Vr(l,a))?r.push(a):n.push(a));const c=e.matched[o];c&&(t.matched.find(l=>Vr(l,c))||s.push(c))}return[n,r,s]}const Jw={__name:"App",setup(e){return(t,n)=>(we(),tp(Se(gp)))}};var Vh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Zw=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],o=e[n++],a=e[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},yp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,a=o?e[s+1]:0,c=s+2<e.length,l=c?e[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(f=64)),r.push(n[u],n[h],n[f],n[m])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(_p(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Zw(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const l=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||a==null||l==null||h==null)throw new tv;const f=i<<2|a>>4;if(r.push(f),l!==64){const m=a<<4&240|l>>2;if(r.push(m),h!==64){const g=l<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class tv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ev=function(e){const t=_p(e);return yp.encodeByteArray(t,!0)},Ji=function(e){return ev(e).replace(/\./g,"")},nv=function(e){try{return yp.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=()=>rv().__FIREBASE_DEFAULTS__,iv=()=>{if(typeof process>"u"||typeof Vh>"u")return;const e=Vh.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ov=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&nv(e[1]);return t&&JSON.parse(t)},yl=()=>{try{return sv()||iv()||ov()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},av=e=>{var t,n;return(n=(t=yl())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Ep=e=>{const t=av(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},wp=()=>{var e;return(e=yl())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ji(JSON.stringify(n)),Ji(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lv(){var e;const t=(e=yl())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uv(){return!lv()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tp(){try{return typeof indexedDB=="object"}catch{return!1}}function hv(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="FirebaseError";class er extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=fv,Object.setPrototypeOf(this,er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ap.prototype.create)}}class Ap{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?dv(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new er(s,a,r)}}function dv(e,t){return e.replace(pv,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const pv=/\{\$([^}]+)}/g;function fc(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],o=t[s];if(xh(i)&&xh(o)){if(!fc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function xh(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(e){return e&&e._delegate?e._delegate:e}class Nr{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new cv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(_v(t))try{this.getOrInitializeService({instanceIdentifier:Nn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=Nn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Nn){return this.instances.has(t)}getOptions(t=Nn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gv(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Nn){return this.component?this.component.multipleInstances?t:Nn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gv(e){return e===Nn?void 0:e}function _v(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new mv(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const Ev={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},wv=ot.INFO,vv={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},Tv=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=vv[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ip{constructor(t){this.name=t,this._logLevel=wv,this._logHandler=Tv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Ev[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}const Av=(e,t)=>t.some(n=>e instanceof n);let Nh,Oh;function Iv(){return Nh||(Nh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rv(){return Oh||(Oh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rp=new WeakMap,dc=new WeakMap,bp=new WeakMap,Sa=new WeakMap,El=new WeakMap;function bv(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(Tn(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Rp.set(n,e)}).catch(()=>{}),El.set(t,e),t}function Sv(e){if(dc.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});dc.set(e,t)}let pc={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return dc.get(e);if(t==="objectStoreNames")return e.objectStoreNames||bp.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Cv(e){pc=e(pc)}function Pv(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Ca(this),t,...n);return bp.set(r,t.sort?t.sort():[t]),Tn(r)}:Rv().includes(e)?function(...t){return e.apply(Ca(this),t),Tn(Rp.get(this))}:function(...t){return Tn(e.apply(Ca(this),t))}}function Dv(e){return typeof e=="function"?Pv(e):(e instanceof IDBTransaction&&Sv(e),Av(e,Iv())?new Proxy(e,pc):e)}function Tn(e){if(e instanceof IDBRequest)return bv(e);if(Sa.has(e))return Sa.get(e);const t=Dv(e);return t!==e&&(Sa.set(e,t),El.set(t,e)),t}const Ca=e=>El.get(e);function Vv(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=Tn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Tn(o.result),c.oldVersion,c.newVersion,Tn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const xv=["get","getKey","getAll","getAllKeys","count"],Nv=["put","add","delete","clear"],Pa=new Map;function kh(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Pa.get(t))return Pa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Nv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||xv.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return Pa.set(t,i),i}Cv(e=>({...e,get:(t,n,r)=>kh(t,n)||e.get(t,n,r),has:(t,n)=>!!kh(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function kv(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const mc="@firebase/app",Mh="0.9.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new Ip("@firebase/app"),Mv="@firebase/app-compat",Lv="@firebase/analytics-compat",Fv="@firebase/analytics",Uv="@firebase/app-check-compat",Bv="@firebase/app-check",jv="@firebase/auth",$v="@firebase/auth-compat",qv="@firebase/database",Kv="@firebase/database-compat",Wv="@firebase/functions",zv="@firebase/functions-compat",Hv="@firebase/installations",Gv="@firebase/installations-compat",Qv="@firebase/messaging",Yv="@firebase/messaging-compat",Xv="@firebase/performance",Jv="@firebase/performance-compat",Zv="@firebase/remote-config",tT="@firebase/remote-config-compat",eT="@firebase/storage",nT="@firebase/storage-compat",rT="@firebase/firestore",sT="@firebase/firestore-compat",iT="firebase",oT="10.7.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc="[DEFAULT]",aT={[mc]:"fire-core",[Mv]:"fire-core-compat",[Fv]:"fire-analytics",[Lv]:"fire-analytics-compat",[Bv]:"fire-app-check",[Uv]:"fire-app-check-compat",[jv]:"fire-auth",[$v]:"fire-auth-compat",[qv]:"fire-rtdb",[Kv]:"fire-rtdb-compat",[Wv]:"fire-fn",[zv]:"fire-fn-compat",[Hv]:"fire-iid",[Gv]:"fire-iid-compat",[Qv]:"fire-fcm",[Yv]:"fire-fcm-compat",[Xv]:"fire-perf",[Jv]:"fire-perf-compat",[Zv]:"fire-rc",[tT]:"fire-rc-compat",[eT]:"fire-gcs",[nT]:"fire-gcs-compat",[rT]:"fire-fst",[sT]:"fire-fst-compat","fire-js":"fire-js",[iT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new Map,_c=new Map;function cT(e,t){try{e.container.addComponent(t)}catch(n){Hn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Cs(e){const t=e.name;if(_c.has(t))return Hn.debug(`There were multiple attempts to register component ${t}.`),!1;_c.set(t,e);for(const n of to.values())cT(n,e);return!0}function Sp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},An=new Ap("app","Firebase",lT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw An.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=oT;function Pp(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:gc,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw An.create("bad-app-name",{appName:String(s)});if(n||(n=wp()),!n)throw An.create("no-options");const i=to.get(s);if(i){if(fc(n,i.options)&&fc(r,i.config))return i;throw An.create("duplicate-app",{appName:s})}const o=new yv(s);for(const c of _c.values())o.addComponent(c);const a=new uT(n,r,o);return to.set(s,a),a}function Dp(e=gc){const t=to.get(e);if(!t&&e===gc&&wp())return Pp();if(!t)throw An.create("no-app",{appName:e});return t}function In(e,t,n){var r;let s=(r=aT[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${t}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Hn.warn(a.join(" "));return}Cs(new Nr(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="firebase-heartbeat-database",fT=1,Ps="firebase-heartbeat-store";let Da=null;function Vp(){return Da||(Da=Vv(hT,fT,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ps)}catch(n){console.warn(n)}}}}).catch(e=>{throw An.create("idb-open",{originalErrorMessage:e.message})})),Da}async function dT(e){try{return await(await Vp()).transaction(Ps).objectStore(Ps).get(xp(e))}catch(t){if(t instanceof er)Hn.warn(t.message);else{const n=An.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Hn.warn(n.message)}}}async function Lh(e,t){try{const r=(await Vp()).transaction(Ps,"readwrite");await r.objectStore(Ps).put(t,xp(e)),await r.done}catch(n){if(n instanceof er)Hn.warn(n.message);else{const r=An.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hn.warn(r.message)}}}function xp(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=1024,mT=30*24*60*60*1e3;class gT{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Fh();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=mT}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fh(),{heartbeatsToSend:r,unsentEntries:s}=_T(this._heartbeatsCache.heartbeats),i=Ji(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Fh(){return new Date().toISOString().substring(0,10)}function _T(e,t=pT){const n=[];let r=e.slice();for(const s of e){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Uh(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Uh(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tp()?hv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lh(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lh(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Uh(e){return Ji(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(e){Cs(new Nr("platform-logger",t=>new Ov(t),"PRIVATE")),Cs(new Nr("heartbeat",t=>new gT(t),"PRIVATE")),In(mc,Mh,e),In(mc,Mh,"esm2017"),In("fire-js","")}ET("");var wT="firebase",vT="10.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In(wT,vT,"app");var TT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O,wl=wl||{},G=TT||self;function Vo(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Hs(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function AT(e){return Object.prototype.hasOwnProperty.call(e,Va)&&e[Va]||(e[Va]=++IT)}var Va="closure_uid_"+(1e9*Math.random()>>>0),IT=0;function RT(e,t,n){return e.call.apply(e.bind,arguments)}function bT(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),e.apply(t,s)}}return function(){return e.apply(t,arguments)}}function ee(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ee=RT:ee=bT,ee.apply(null,arguments)}function Ei(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function $t(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[s].apply(r,o)}}function Pn(){this.s=this.s,this.o=this.o}var ST=0;Pn.prototype.s=!1;Pn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),ST!=0)&&AT(this)};Pn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Np=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function vl(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Bh(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Vo(r)){const s=e.length||0,i=r.length||0;e.length=s+i;for(let o=0;o<i;o++)e[s+o]=r[o]}else e.push(r)}}function ne(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var CT=function(){if(!G.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};G.addEventListener("test",n,t),G.removeEventListener("test",n,t)}catch{}return e}();function Ds(e){return/^[\s\xa0]*$/.test(e)}function xo(){var e=G.navigator;return e&&(e=e.userAgent)?e:""}function je(e){return xo().indexOf(e)!=-1}function Tl(e){return Tl[" "](e),e}Tl[" "]=function(){};function PT(e,t){var n=vA;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var DT=je("Opera"),Or=je("Trident")||je("MSIE"),Op=je("Edge"),yc=Op||Or,kp=je("Gecko")&&!(xo().toLowerCase().indexOf("webkit")!=-1&&!je("Edge"))&&!(je("Trident")||je("MSIE"))&&!je("Edge"),VT=xo().toLowerCase().indexOf("webkit")!=-1&&!je("Edge");function Mp(){var e=G.document;return e?e.documentMode:void 0}var Ec;t:{var xa="",Na=function(){var e=xo();if(kp)return/rv:([^\);]+)(\)|;)/.exec(e);if(Op)return/Edge\/([\d\.]+)/.exec(e);if(Or)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(VT)return/WebKit\/(\S+)/.exec(e);if(DT)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(Na&&(xa=Na?Na[1]:""),Or){var Oa=Mp();if(Oa!=null&&Oa>parseFloat(xa)){Ec=String(Oa);break t}}Ec=xa}var wc;if(G.document&&Or){var jh=Mp();wc=jh||parseInt(Ec,10)||void 0}else wc=void 0;var xT=wc;function Vs(e,t){if(ne.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(kp){t:{try{Tl(t.nodeName);var s=!0;break t}catch{}s=!1}s||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:NT[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Vs.$.h.call(this)}}$t(Vs,ne);var NT={2:"touch",3:"pen",4:"mouse"};Vs.prototype.h=function(){Vs.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Gs="closure_listenable_"+(1e6*Math.random()|0),OT=0;function kT(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++OT,this.fa=this.ia=!1}function No(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Al(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function MT(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function Lp(e){const t={};for(const n in e)t[n]=e[n];return t}const $h="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fp(e,t){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)e[n]=r[n];for(let i=0;i<$h.length;i++)n=$h[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Oo(e){this.src=e,this.g={},this.h=0}Oo.prototype.add=function(e,t,n,r,s){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var o=Tc(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new kT(t,this.src,i,!!r,s),t.ia=n,e.push(t)),t};function vc(e,t){var n=t.type;if(n in e.g){var r=e.g[n],s=Np(r,t),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(No(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Tc(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}var Il="closure_lm_"+(1e6*Math.random()|0),ka={};function Up(e,t,n,r,s){if(r&&r.once)return jp(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Up(e,t[i],n,r,s);return null}return n=Sl(n),e&&e[Gs]?e.O(t,n,Hs(r)?!!r.capture:!!r,s):Bp(e,t,n,!1,r,s)}function Bp(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=Hs(s)?!!s.capture:!!s,a=bl(e);if(a||(e[Il]=a=new Oo(e)),n=a.add(t,n,r,o,i),n.proxy)return n;if(r=LT(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)CT||(s=o),s===void 0&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(qp(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function LT(){function e(n){return t.call(e.src,e.listener,n)}const t=FT;return e}function jp(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)jp(e,t[i],n,r,s);return null}return n=Sl(n),e&&e[Gs]?e.P(t,n,Hs(r)?!!r.capture:!!r,s):Bp(e,t,n,!0,r,s)}function $p(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)$p(e,t[i],n,r,s);else r=Hs(r)?!!r.capture:!!r,n=Sl(n),e&&e[Gs]?(e=e.i,t=String(t).toString(),t in e.g&&(i=e.g[t],n=Tc(i,n,r,s),-1<n&&(No(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=bl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Tc(t,n,r,s)),(n=-1<e?t[e]:null)&&Rl(n))}function Rl(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Gs])vc(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(qp(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=bl(t))?(vc(n,e),n.h==0&&(n.src=null,t[Il]=null)):No(e)}}}function qp(e){return e in ka?ka[e]:ka[e]="on"+e}function FT(e,t){if(e.fa)e=!0;else{t=new Vs(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Rl(e),e=n.call(r,t)}return e}function bl(e){return e=e[Il],e instanceof Oo?e:null}var Ma="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sl(e){return typeof e=="function"?e:(e[Ma]||(e[Ma]=function(t){return e.handleEvent(t)}),e[Ma])}function jt(){Pn.call(this),this.i=new Oo(this),this.S=this,this.J=null}$t(jt,Pn);jt.prototype[Gs]=!0;jt.prototype.removeEventListener=function(e,t,n,r){$p(this,e,t,n,r)};function zt(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new ne(t,e);else if(t instanceof ne)t.target=t.target||e;else{var s=t;t=new ne(r,e),Fp(t,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=wi(o,r,!0,t)&&s}if(o=t.g=e,s=wi(o,r,!0,t)&&s,s=wi(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)o=t.g=n[i],s=wi(o,r,!1,t)&&s}jt.prototype.N=function(){if(jt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)No(n[r]);delete e.g[t],e.h--}}this.J=null};jt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};jt.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function wi(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&vc(e.i,o),s=a.call(c,r)!==!1&&s}}return s&&!r.defaultPrevented}var Cl=G.JSON.stringify;class UT{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function BT(){var e=Pl;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class jT{constructor(){this.h=this.g=null}add(t,n){const r=Kp.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Kp=new UT(()=>new $T,e=>e.reset());class $T{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function qT(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function KT(e){G.setTimeout(()=>{throw e},0)}let xs,Ns=!1,Pl=new jT,Wp=()=>{const e=G.Promise.resolve(void 0);xs=()=>{e.then(WT)}};var WT=()=>{for(var e;e=BT();){try{e.h.call(e.g)}catch(n){KT(n)}var t=Kp;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ns=!1};function ko(e,t){jt.call(this),this.h=e||1,this.g=t||G,this.j=ee(this.qb,this),this.l=Date.now()}$t(ko,jt);O=ko.prototype;O.ga=!1;O.T=null;O.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),zt(this,"tick"),this.ga&&(Dl(this),this.start()))}};O.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Dl(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}O.N=function(){ko.$.N.call(this),Dl(this),delete this.g};function Vl(e,t,n){if(typeof e=="function")n&&(e=ee(e,n));else if(e&&typeof e.handleEvent=="function")e=ee(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:G.setTimeout(e,t||0)}function zp(e){e.g=Vl(()=>{e.g=null,e.i&&(e.i=!1,zp(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class zT extends Pn{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:zp(this)}N(){super.N(),this.g&&(G.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(e){Pn.call(this),this.h=e,this.g={}}$t(Os,Pn);var qh=[];function Hp(e,t,n,r){Array.isArray(n)||(n&&(qh[0]=n.toString()),n=qh);for(var s=0;s<n.length;s++){var i=Up(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function Gp(e){Al(e.g,function(t,n){this.g.hasOwnProperty(n)&&Rl(t)},e),e.g={}}Os.prototype.N=function(){Os.$.N.call(this),Gp(this)};Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Mo(){this.g=!0}Mo.prototype.Ea=function(){this.g=!1};function HT(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+`
`+n+`
`+o})}function GT(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+`
`+n+`
`+i+" "+o})}function wr(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+YT(e,n)+(r?" "+r:"")})}function QT(e,t){e.info(function(){return"TIMEOUT: "+t})}Mo.prototype.info=function(){};function YT(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Cl(n)}catch{return t}}var nr={},Kh=null;function Lo(){return Kh=Kh||new jt}nr.Ta="serverreachability";function Qp(e){ne.call(this,nr.Ta,e)}$t(Qp,ne);function ks(e){const t=Lo();zt(t,new Qp(t))}nr.STAT_EVENT="statevent";function Yp(e,t){ne.call(this,nr.STAT_EVENT,e),this.stat=t}$t(Yp,ne);function oe(e){const t=Lo();zt(t,new Yp(t,e))}nr.Ua="timingevent";function Xp(e,t){ne.call(this,nr.Ua,e),this.size=t}$t(Xp,ne);function Qs(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return G.setTimeout(function(){e()},t)}var Fo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Jp={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function xl(){}xl.prototype.h=null;function Wh(e){return e.h||(e.h=e.i())}function Zp(){}var Ys={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nl(){ne.call(this,"d")}$t(Nl,ne);function Ol(){ne.call(this,"c")}$t(Ol,ne);var Ac;function Uo(){}$t(Uo,xl);Uo.prototype.g=function(){return new XMLHttpRequest};Uo.prototype.i=function(){return{}};Ac=new Uo;function Xs(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Os(this),this.P=XT,e=yc?125:void 0,this.V=new ko(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new tm}function tm(){this.i=null,this.g="",this.h=!1}var XT=45e3,em={},Ic={};O=Xs.prototype;O.setTimeout=function(e){this.P=e};function Rc(e,t,n){e.L=1,e.A=jo(an(t)),e.u=n,e.S=!0,nm(e,null)}function nm(e,t){e.G=Date.now(),Js(e),e.B=an(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),um(n.i,"t",r),e.o=0,n=e.l.J,e.h=new tm,e.g=Vm(e.l,n?t:null,!e.u),0<e.O&&(e.M=new zT(ee(e.Pa,e,e.g),e.O)),Hp(e.U,e.g,"readystatechange",e.nb),t=e.I?Lp(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),ks(),HT(e.j,e.v,e.B,e.m,e.W,e.u)}O.nb=function(e){e=e.target;const t=this.M;t&&$e(e)==3?t.l():this.Pa(e)};O.Pa=function(e){try{if(e==this.g)t:{const u=$e(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||yc||this.g&&(this.h.h||this.g.ja()||Qh(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?ks(3):ks(2)),Bo(this);var n=this.g.da();this.ca=n;e:if(rm(this)){var r=Qh(this.g);e="";var s=r.length,i=$e(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ln(this),gs(this);var o="";break e}this.h.i=new G.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,GT(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ds(a)){var l=a;break e}}l=null}if(n=l)wr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bc(this,n);else{this.i=!1,this.s=3,oe(12),Ln(this),gs(this);break t}}this.S?(sm(this,u,o),yc&&this.i&&u==3&&(Hp(this.U,this.V,"tick",this.mb),this.V.start())):(wr(this.j,this.m,o,null),bc(this,o)),u==4&&Ln(this),this.i&&!this.J&&(u==4?Sm(this.l,this):(this.i=!1,Js(this)))}else yA(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,oe(12)):(this.s=0,oe(13)),Ln(this),gs(this)}}}catch{}finally{}};function rm(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function sm(e,t,n){let r=!0,s;for(;!e.J&&e.o<n.length;)if(s=JT(e,n),s==Ic){t==4&&(e.s=4,oe(14),r=!1),wr(e.j,e.m,null,"[Incomplete Response]");break}else if(s==em){e.s=4,oe(15),wr(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else wr(e.j,e.m,s,null),bc(e,s);rm(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,oe(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bl(t),t.M=!0,oe(11))):(wr(e.j,e.m,n,"[Invalid Chunked Response]"),Ln(e),gs(e))}O.mb=function(){if(this.g){var e=$e(this.g),t=this.g.ja();this.o<t.length&&(Bo(this),sm(this,e,t),this.i&&e!=4&&Js(this))}};function JT(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?Ic:(n=Number(t.substring(n,r)),isNaN(n)?em:(r+=1,r+n>t.length?Ic:(t=t.slice(r,r+n),e.o=r+n,t)))}O.cancel=function(){this.J=!0,Ln(this)};function Js(e){e.Y=Date.now()+e.P,im(e,e.P)}function im(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=Qs(ee(e.lb,e),t)}function Bo(e){e.C&&(G.clearTimeout(e.C),e.C=null)}O.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(QT(this.j,this.B),this.L!=2&&(ks(),oe(17)),Ln(this),this.s=2,gs(this)):im(this,this.Y-e)};function gs(e){e.l.H==0||e.J||Sm(e.l,e)}function Ln(e){Bo(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Dl(e.V),Gp(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function bc(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||Sc(n.i,e))){if(!e.K&&Sc(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)ro(n),Wo(n);else break t;Ul(n),oe(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Qs(ee(n.ib,n),6e3));if(1>=dm(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Fn(n,11)}else if((e.K||n.g==e)&&ro(n),!Ds(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=l[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=l[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=e.g;if(m){const g=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.i;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(kl(i,i.h),i.h=null))}if(r.F){const _=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,vt(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=Dm(r,r.J?r.pa:null,r.Y),o.K){pm(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Bo(a),Js(a)),r.g=o}else Rm(r);0<n.j.length&&zo(n)}else l[0]!="stop"&&l[0]!="close"||Fn(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Fn(n,7):Fl(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}ks(4)}catch{}}function ZT(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Vo(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function tA(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Vo(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function om(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Vo(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=tA(e),r=ZT(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}var am=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eA(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function qn(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof qn){this.h=e.h,eo(this,e.j),this.s=e.s,this.g=e.g,no(this,e.m),this.l=e.l;var t=e.i,n=new Ms;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),zh(this,n),this.o=e.o}else e&&(t=String(e).match(am))?(this.h=!1,eo(this,t[1]||"",!0),this.s=as(t[2]||""),this.g=as(t[3]||"",!0),no(this,t[4]),this.l=as(t[5]||"",!0),zh(this,t[6]||"",!0),this.o=as(t[7]||"")):(this.h=!1,this.i=new Ms(null,this.h))}qn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(cs(t,Hh,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(cs(t,Hh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(cs(n,n.charAt(0)=="/"?sA:rA,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",cs(n,oA)),e.join("")};function an(e){return new qn(e)}function eo(e,t,n){e.j=n?as(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function no(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function zh(e,t,n){t instanceof Ms?(e.i=t,aA(e.i,e.h)):(n||(t=cs(t,iA)),e.i=new Ms(t,e.h))}function vt(e,t,n){e.i.set(t,n)}function jo(e){return vt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function as(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function cs(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,nA),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function nA(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Hh=/[#\/\?@]/g,rA=/[#\?:]/g,sA=/[#\?]/g,iA=/[#\?@]/g,oA=/#/g;function Ms(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Dn(e){e.g||(e.g=new Map,e.h=0,e.i&&eA(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}O=Ms.prototype;O.add=function(e,t){Dn(this),this.i=null,e=Kr(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function cm(e,t){Dn(e),t=Kr(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function lm(e,t){return Dn(e),t=Kr(e,t),e.g.has(t)}O.forEach=function(e,t){Dn(this),this.g.forEach(function(n,r){n.forEach(function(s){e.call(t,s,r,this)},this)},this)};O.ta=function(){Dn(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let i=0;i<s.length;i++)n.push(t[r])}return n};O.Z=function(e){Dn(this);let t=[];if(typeof e=="string")lm(this,e)&&(t=t.concat(this.g.get(Kr(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};O.set=function(e,t){return Dn(this),this.i=null,e=Kr(this,e),lm(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};O.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function um(e,t,n){cm(e,t),0<n.length&&(e.i=null,e.g.set(Kr(e,t),vl(n)),e.h+=n.length)}O.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};function Kr(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function aA(e,t){t&&!e.j&&(Dn(e),e.i=null,e.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(cm(this,r),um(this,s,n))},e)),e.j=t}var cA=class{constructor(e,t){this.g=e,this.map=t}};function hm(e){this.l=e||lA,G.PerformanceNavigationTiming?(e=G.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(G.g&&G.g.Ka&&G.g.Ka()&&G.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lA=10;function fm(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function dm(e){return e.h?1:e.g?e.g.size:0}function Sc(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function kl(e,t){e.g?e.g.add(t):e.h=t}function pm(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}hm.prototype.cancel=function(){if(this.i=mm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function mm(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return vl(e.i)}var uA=class{stringify(e){return G.JSON.stringify(e,void 0)}parse(e){return G.JSON.parse(e,void 0)}};function hA(){this.g=new uA}function fA(e,t,n){const r=n||"";try{om(e,function(s,i){let o=s;Hs(s)&&(o=Cl(s)),t.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function dA(e,t){const n=new Mo;if(G.Image){const r=new Image;r.onload=Ei(vi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ei(vi,n,r,"TestLoadImage: error",!1,t),r.onabort=Ei(vi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ei(vi,n,r,"TestLoadImage: timeout",!1,t),G.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function vi(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch{}}function $o(e){this.l=e.ec||null,this.j=e.ob||!1}$t($o,xl);$o.prototype.g=function(){return new qo(this.l,this.j)};$o.prototype.i=function(e){return function(){return e}}({});function qo(e,t){jt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ml,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$t(qo,jt);var Ml=0;O=qo.prototype;O.open=function(e,t){if(this.readyState!=Ml)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ls(this)};O.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||G).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};O.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zs(this)),this.readyState=Ml};O.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ls(this)),this.g&&(this.readyState=3,Ls(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof G.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gm(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function gm(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}O.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Zs(this):Ls(this),this.readyState==3&&gm(this)}};O.Za=function(e){this.g&&(this.response=this.responseText=e,Zs(this))};O.Ya=function(e){this.g&&(this.response=e,Zs(this))};O.ka=function(){this.g&&Zs(this)};function Zs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ls(e)}O.setRequestHeader=function(e,t){this.v.append(e,t)};O.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};O.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Ls(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(qo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var pA=G.JSON.parse;function Pt(e){jt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=_m,this.L=this.M=!1}$t(Pt,jt);var _m="",mA=/^https?$/i,gA=["POST","PUT"];O=Pt.prototype;O.Oa=function(e){this.M=e};O.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ac.g(),this.C=this.u?Wh(this.u):Wh(Ac),this.g.onreadystatechange=ee(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){Gh(this,i);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=G.FormData&&e instanceof G.FormData,!(0<=Np(gA,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wm(this),0<this.B&&((this.L=_A(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ee(this.ua,this)):this.A=Vl(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Gh(this,i)}};function _A(e){return Or&&typeof e.timeout=="number"&&e.ontimeout!==void 0}O.ua=function(){typeof wl<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zt(this,"timeout"),this.abort(8))};function Gh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ym(e),Ko(e)}function ym(e){e.F||(e.F=!0,zt(e,"complete"),zt(e,"error"))}O.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,zt(this,"complete"),zt(this,"abort"),Ko(this))};O.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ko(this,!0)),Pt.$.N.call(this)};O.La=function(){this.s||(this.G||this.v||this.l?Em(this):this.kb())};O.kb=function(){Em(this)};function Em(e){if(e.h&&typeof wl<"u"&&(!e.C[1]||$e(e)!=4||e.da()!=2)){if(e.v&&$e(e)==4)Vl(e.La,0,e);else if(zt(e,"readystatechange"),$e(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var s=String(e.I).match(am)[1]||null;!s&&G.self&&G.self.location&&(s=G.self.location.protocol.slice(0,-1)),r=!mA.test(s?s.toLowerCase():"")}n=r}if(n)zt(e,"complete"),zt(e,"success");else{e.m=6;try{var i=2<$e(e)?e.g.statusText:""}catch{i=""}e.j=i+" ["+e.da()+"]",ym(e)}}finally{Ko(e)}}}}function Ko(e,t){if(e.g){wm(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||zt(e,"ready");try{n.onreadystatechange=r}catch{}}}function wm(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(G.clearTimeout(e.A),e.A=null)}O.isActive=function(){return!!this.g};function $e(e){return e.g?e.g.readyState:0}O.da=function(){try{return 2<$e(this)?this.g.status:-1}catch{return-1}};O.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};O.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),pA(t)}};function Qh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case _m:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function yA(e){const t={};e=(e.g&&2<=$e(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(Ds(e[r]))continue;var n=qT(e[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}MT(t,function(r){return r.join(", ")})}O.Ia=function(){return this.m};O.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function vm(e){let t="";return Al(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function Ll(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=vm(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):vt(e,t,n))}function es(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Tm(e){this.Ga=0,this.j=[],this.l=new Mo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=es("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=es("baseRetryDelayMs",5e3,e),this.hb=es("retryDelaySeedMs",1e4,e),this.eb=es("forwardChannelMaxRetries",2,e),this.xa=es("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new hm(e&&e.concurrentRequestLimit),this.Ja=new hA,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}O=Tm.prototype;O.ra=8;O.H=1;function Fl(e){if(Am(e),e.H==3){var t=e.W++,n=an(e.I);if(vt(n,"SID",e.K),vt(n,"RID",t),vt(n,"TYPE","terminate"),ti(e,n),t=new Xs(e,e.l,t),t.L=2,t.A=jo(an(n)),n=!1,G.navigator&&G.navigator.sendBeacon)try{n=G.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&G.Image&&(new Image().src=t.A,n=!0),n||(t.g=Vm(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Js(t)}Pm(e)}function Wo(e){e.g&&(Bl(e),e.g.cancel(),e.g=null)}function Am(e){Wo(e),e.u&&(G.clearTimeout(e.u),e.u=null),ro(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&G.clearTimeout(e.m),e.m=null)}function zo(e){if(!fm(e.i)&&!e.m){e.m=!0;var t=e.Na;xs||Wp(),Ns||(xs(),Ns=!0),Pl.add(t,e),e.C=0}}function EA(e,t){return dm(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Qs(ee(e.Na,e,t),Cm(e,e.C)),e.C++,!0)}O.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Xs(this,this.l,e);let i=this.s;if(this.U&&(i?(i=Lp(i),Fp(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Im(this,s,t),n=an(this.I),vt(n,"RID",e),vt(n,"CVER",22),this.F&&vt(n,"X-HTTP-Session-Id",this.F),ti(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(vm(i)))+"&"+t:this.o&&Ll(n,this.o,i)),kl(this.i,s),this.bb&&vt(n,"TYPE","init"),this.P?(vt(n,"$req",t),vt(n,"SID","null"),s.aa=!0,Rc(s,n,null)):Rc(s,n,t),this.H=2}}else this.H==3&&(e?Yh(this,e):this.j.length==0||fm(this.i)||Yh(this))};function Yh(e,t){var n;t?n=t.m:n=e.W++;const r=an(e.I);vt(r,"SID",e.K),vt(r,"RID",n),vt(r,"AID",e.V),ti(e,r),e.o&&e.s&&Ll(r,e.o,e.s),n=new Xs(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Im(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),kl(e.i,n),Rc(n,r,t)}function ti(e,t){e.na&&Al(e.na,function(n,r){vt(t,r,n)}),e.h&&om({},function(n,r){vt(t,r,n)})}function Im(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ee(e.h.Va,e.h,e):null;t:{var s=e.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let c=0;c<n;c++){let l=s[c].g;const u=s[c].map;if(l-=i,0>l)i=Math.max(0,s[c].g-100),a=!1;else try{fA(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function Rm(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;xs||Wp(),Ns||(xs(),Ns=!0),Pl.add(t,e),e.A=0}}function Ul(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Qs(ee(e.Ma,e),Cm(e,e.A)),e.A++,!0)}O.Ma=function(){if(this.u=null,bm(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Qs(ee(this.jb,this),e)}};O.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,oe(10),Wo(this),bm(this))};function Bl(e){e.B!=null&&(G.clearTimeout(e.B),e.B=null)}function bm(e){e.g=new Xs(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=an(e.wa);vt(t,"RID","rpc"),vt(t,"SID",e.K),vt(t,"AID",e.V),vt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&vt(t,"TO",e.qa),vt(t,"TYPE","xmlhttp"),ti(e,t),e.o&&e.s&&Ll(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=jo(an(t)),n.u=null,n.S=!0,nm(n,e)}O.ib=function(){this.v!=null&&(this.v=null,Wo(this),Ul(this),oe(19))};function ro(e){e.v!=null&&(G.clearTimeout(e.v),e.v=null)}function Sm(e,t){var n=null;if(e.g==t){ro(e),Bl(e),e.g=null;var r=2}else if(Sc(e.i,t))n=t.F,pm(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var s=e.C;r=Lo(),zt(r,new Xp(r,n)),zo(e)}else Rm(e);else if(s=t.s,s==3||s==0&&0<t.ca||!(r==1&&EA(e,t)||r==2&&Ul(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:Fn(e,5);break;case 4:Fn(e,10);break;case 3:Fn(e,6);break;default:Fn(e,2)}}}function Cm(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Fn(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=ee(e.pb,e);n||(n=new qn("//www.google.com/images/cleardot.gif"),G.location&&G.location.protocol=="http"||eo(n,"https"),jo(n)),dA(n.toString(),r)}else oe(2);e.H=0,e.h&&e.h.za(t),Pm(e),Am(e)}O.pb=function(e){e?(this.l.info("Successfully pinged google.com"),oe(2)):(this.l.info("Failed to ping google.com"),oe(1))};function Pm(e){if(e.H=0,e.ma=[],e.h){const t=mm(e.i);(t.length!=0||e.j.length!=0)&&(Bh(e.ma,t),Bh(e.ma,e.j),e.i.i.length=0,vl(e.j),e.j.length=0),e.h.ya()}}function Dm(e,t,n){var r=n instanceof qn?an(n):new qn(n);if(r.g!="")t&&(r.g=t+"."+r.g),no(r,r.m);else{var s=G.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new qn(null);r&&eo(i,r),t&&(i.g=t),s&&no(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&vt(r,n,t),vt(r,"VER",e.ra),ti(e,r),r}function Vm(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Pt(new $o({ob:n})):new Pt(e.va),t.Oa(e.J),t}O.isActive=function(){return!!this.h&&this.h.isActive(this)};function xm(){}O=xm.prototype;O.Ba=function(){};O.Aa=function(){};O.za=function(){};O.ya=function(){};O.isActive=function(){return!0};O.Va=function(){};function so(){if(Or&&!(10<=Number(xT)))throw Error("Environmental error: no available transport.")}so.prototype.g=function(e,t){return new Ee(e,t)};function Ee(e,t){jt.call(this),this.g=new Tm(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ds(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ds(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Wr(this)}$t(Ee,jt);Ee.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;oe(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Dm(e,null,e.Y),zo(e)};Ee.prototype.close=function(){Fl(this.g)};Ee.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Cl(e),e=n);t.j.push(new cA(t.fb++,e)),t.H==3&&zo(t)};Ee.prototype.N=function(){this.g.h=null,delete this.j,Fl(this.g),delete this.g,Ee.$.N.call(this)};function Nm(e){Nl.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}$t(Nm,Nl);function Om(){Ol.call(this),this.status=1}$t(Om,Ol);function Wr(e){this.g=e}$t(Wr,xm);Wr.prototype.Ba=function(){zt(this.g,"a")};Wr.prototype.Aa=function(e){zt(this.g,new Nm(e))};Wr.prototype.za=function(e){zt(this.g,new Om)};Wr.prototype.ya=function(){zt(this.g,"b")};function wA(){this.blockSize=-1}function xe(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}$t(xe,wA);xe.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function La(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[1]+3905402710&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[5]+1200080426&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[9]+2336552879&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[13]+4254626195&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(s^i&(n^s))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[6]+3225465664&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[10]+38016083&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[14]+3275163606&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[2]+4243563512&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(n^s^i)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[8]+2272392833&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[4]+1272893353&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[0]+3936430074&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[12]+3873151461&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(s^(n|~i))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[7]+1126891415&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[3]+2399980690&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[15]+4264355552&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[11]+3174756917&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}xe.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(s==0)for(;i<=n;)La(this,e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){La(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){La(this,r),s=0;break}}this.h=s,this.i+=t};xe.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function pt(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=e[s]|0;r&&i==t||(n[s]=i,r=!1)}this.g=n}var vA={};function jl(e){return-128<=e&&128>e?PT(e,function(t){return new pt([t|0],0>t?-1:0)}):new pt([e|0],0>e?-1:0)}function qe(e){if(isNaN(e)||!isFinite(e))return Rr;if(0>e)return Kt(qe(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Cc;return new pt(t,0)}function km(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Kt(km(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=qe(Math.pow(t,8)),r=Rr,s=0;s<e.length;s+=8){var i=Math.min(8,e.length-s),o=parseInt(e.substring(s,s+i),t);8>i?(i=qe(Math.pow(t,i)),r=r.R(i).add(qe(o))):(r=r.R(n),r=r.add(qe(o)))}return r}var Cc=4294967296,Rr=jl(0),Pc=jl(1),Xh=jl(16777216);O=pt.prototype;O.ea=function(){if(ve(this))return-Kt(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Cc+r)*t,t*=Cc}return e};O.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(tn(this))return"0";if(ve(this))return"-"+Kt(this).toString(e);for(var t=qe(Math.pow(e,6)),n=this,r="";;){var s=oo(n,t).g;n=io(n,s.R(t));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=s,tn(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};O.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function tn(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function ve(e){return e.h==-1}O.X=function(e){return e=io(this,e),ve(e)?-1:tn(e)?0:1};function Kt(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new pt(n,~e.h).add(Pc)}O.abs=function(){return ve(this)?Kt(this):this};O.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(this.D(s)&65535)+(e.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new pt(n,n[n.length-1]&-2147483648?-1:0)};function io(e,t){return e.add(Kt(t))}O.R=function(e){if(tn(this)||tn(e))return Rr;if(ve(this))return ve(e)?Kt(this).R(Kt(e)):Kt(Kt(this).R(e));if(ve(e))return Kt(this.R(Kt(e)));if(0>this.X(Xh)&&0>e.X(Xh))return qe(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(s)>>>16,c=e.D(s)&65535;n[2*r+2*s]+=o*c,Ti(n,2*r+2*s),n[2*r+2*s+1]+=i*c,Ti(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Ti(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Ti(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new pt(n,0)};function Ti(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ns(e,t){this.g=e,this.h=t}function oo(e,t){if(tn(t))throw Error("division by zero");if(tn(e))return new ns(Rr,Rr);if(ve(e))return t=oo(Kt(e),t),new ns(Kt(t.g),Kt(t.h));if(ve(t))return t=oo(e,Kt(t)),new ns(Kt(t.g),t.h);if(30<e.g.length){if(ve(e)||ve(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Pc,r=t;0>=r.X(e);)n=Jh(n),r=Jh(r);var s=hr(n,1),i=hr(r,1);for(r=hr(r,2),n=hr(n,2);!tn(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=hr(r,1),n=hr(n,1)}return t=io(e,s.R(t)),new ns(s,t)}for(s=Rr;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=qe(n),o=i.R(t);ve(o)||0<o.X(e);)n-=r,i=qe(n),o=i.R(t);tn(i)&&(i=Pc),s=s.add(i),e=io(e,o)}return new ns(s,e)}O.gb=function(e){return oo(this,e).h};O.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new pt(n,this.h&e.h)};O.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new pt(n,this.h|e.h)};O.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new pt(n,this.h^e.h)};function Jh(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new pt(n,e.h)}function hr(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new pt(s,e.h)}so.prototype.createWebChannel=so.prototype.g;Ee.prototype.send=Ee.prototype.u;Ee.prototype.open=Ee.prototype.m;Ee.prototype.close=Ee.prototype.close;Fo.NO_ERROR=0;Fo.TIMEOUT=8;Fo.HTTP_ERROR=6;Jp.COMPLETE="complete";Zp.EventType=Ys;Ys.OPEN="a";Ys.CLOSE="b";Ys.ERROR="c";Ys.MESSAGE="d";jt.prototype.listen=jt.prototype.O;Pt.prototype.listenOnce=Pt.prototype.P;Pt.prototype.getLastError=Pt.prototype.Sa;Pt.prototype.getLastErrorCode=Pt.prototype.Ia;Pt.prototype.getStatus=Pt.prototype.da;Pt.prototype.getResponseJson=Pt.prototype.Wa;Pt.prototype.getResponseText=Pt.prototype.ja;Pt.prototype.send=Pt.prototype.ha;Pt.prototype.setWithCredentials=Pt.prototype.Oa;xe.prototype.digest=xe.prototype.l;xe.prototype.reset=xe.prototype.reset;xe.prototype.update=xe.prototype.j;pt.prototype.add=pt.prototype.add;pt.prototype.multiply=pt.prototype.R;pt.prototype.modulo=pt.prototype.gb;pt.prototype.compare=pt.prototype.X;pt.prototype.toNumber=pt.prototype.ea;pt.prototype.toString=pt.prototype.toString;pt.prototype.getBits=pt.prototype.D;pt.fromNumber=qe;pt.fromString=km;var TA=function(){return new so},AA=function(){return Lo()},Fa=Fo,IA=Jp,RA=nr,Zh={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ai=Zp,bA=Pt,SA=xe,br=pt;const tf="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zr="10.7.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new Ip("@firebase/firestore");function rs(){return Gn.logLevel}function N(e,...t){if(Gn.logLevel<=ot.DEBUG){const n=t.map($l);Gn.debug(`Firestore (${zr}): ${e}`,...n)}}function Qe(e,...t){if(Gn.logLevel<=ot.ERROR){const n=t.map($l);Gn.error(`Firestore (${zr}): ${e}`,...n)}}function kr(e,...t){if(Gn.logLevel<=ot.WARN){const n=t.map($l);Gn.warn(`Firestore (${zr}): ${e}`,...n)}}function $l(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(e="Unexpected state"){const t=`FIRESTORE (${zr}) INTERNAL ASSERTION FAILED: `+e;throw Qe(t),new Error(t)}function wt(e,t){e||z()}function J(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class U extends er{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class CA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Xt.UNAUTHENTICATED))}shutdown(){}}class PA{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class DA{constructor(t){this.t=t,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rn,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{N("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(N("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rn)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(N("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string"),new Mm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return wt(t===null||typeof t=="string"),new Xt(t)}}class VA{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xA{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new VA(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NA{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OA{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=i=>{i.error!=null&&N("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,N("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{N("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):N("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(wt(typeof n.token=="string"),this.R=n.token,new NA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=kA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%t.length))}return r}}function lt(e,t){return e<t?-1:e>t?1:0}function Mr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new U(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new U(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new U(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new U(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Mt.fromMillis(Date.now())}static fromDate(t){return Mt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?lt(this.nanoseconds,t.nanoseconds):lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.timestamp=t}static fromTimestamp(t){return new X(t)}static min(){return new X(new Mt(0,0))}static max(){return new X(new Mt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,n,r){n===void 0?n=0:n>t.length&&z(),r===void 0?r=t.length-n:r>t.length-n&&z(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Fs.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Fs?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=t.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Tt extends Fs{construct(t,n,r){return new Tt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new U(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Tt(n)}static emptyPath(){return new Tt([])}}const MA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Fs{construct(t,n,r){return new Wt(t,n,r)}static isValidIdentifier(t){return MA.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wt(["__name__"])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new U(A.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new U(A.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new U(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new U(A.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(t){this.path=t}static fromPath(t){return new K(Tt.fromString(t))}static fromName(t){return new K(Tt.fromString(t).popFirst(5))}static empty(){return new K(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Tt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Tt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new K(new Tt(t.slice()))}}function LA(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new Mt(n+1,0):new Mt(n,r));return new bn(s,K.empty(),t)}function FA(e){return new bn(e.readTime,e.key,-1)}class bn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new bn(X.min(),K.empty(),-1)}static max(){return new bn(X.max(),K.empty(),-1)}}function UA(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=K.comparator(e.documentKey,t.documentKey),n!==0?n:lt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ei(e){if(e.code!==A.FAILED_PRECONDITION||e.message!==BA)throw e;N("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new b((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof b?n:b.resolve(n)}catch(n){return b.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):b.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):b.reject(n)}static resolve(t){return new b((n,r)=>{n(t)})}static reject(t){return new b((n,r)=>{r(t)})}static waitFor(t){return new b((n,r)=>{let s=0,i=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(t){let n=b.resolve(!1);for(const r of t)n=n.next(s=>s?b.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new b((r,s)=>{const i=t.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(t[l]).next(u=>{o[l]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(t,n){return new b((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new rn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new _s(t,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Kl(r.target.error);this.V.reject(new _s(t,s))}}static open(t,n,r,s){try{return new ql(n,t.transaction(s,r))}catch(i){throw new _s(n,i)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(N("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new qA(n)}}class Un{constructor(t,n,r){this.name=t,this.version=n,this.p=r,Un.S(Zi())===12.2&&Qe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return N("SimpleDb","Removing database:",t),kn(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!Tp())return!1;if(Un.C())return!0;const t=Zi(),n=Un.S(t),r=0<n&&n<10,s=Un.v(t),i=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||i)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(t){const n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(t){return this.db||(N("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new _s(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new U(A.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new U(A.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new _s(t,o))},s.onupgradeneeded=i=>{N("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{N("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(t);const a=ql.open(this.db,t,i?"readonly":"readwrite",r),c=s(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),b.reject(l))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(N("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class $A{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return kn(this.k.delete())}}class _s extends U{constructor(t,n){super(A.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ni(e){return e.name==="IndexedDbTransactionError"}class qA{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(N("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(N("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),kn(r)}add(t){return N("SimpleDb","ADD",this.store.name,t,t),kn(this.store.add(t))}get(t){return kn(this.store.get(t)).next(n=>(n===void 0&&(n=null),N("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return N("SimpleDb","DELETE",this.store.name,t),kn(this.store.delete(t))}count(){return N("SimpleDb","COUNT",this.store.name),kn(this.store.count())}W(t,n){const r=this.options(t,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new b((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,c)=>{o.push(c)}).next(()=>o)}}j(t,n){const r=this.store.getAll(t,n===null?void 0:n);return new b((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(t,n){N("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(t,n){let r;n?r=t:(r={},n=t);const s=this.cursor(r);return this.G(s,n)}Z(t){const n=this.cursor({});return new b((r,s)=>{n.onerror=i=>{const o=Kl(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(t,n){const r=[];return new b((s,i)=>{t.onerror=o=>{i(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new $A(a),l=n(a.primaryKey,a.value,c);if(l instanceof b){const u=l.catch(h=>(c.done(),b.reject(h)));r.push(u)}c.isDone?s():c.$===null?a.continue():a.continue(c.$)}}).next(()=>b.waitFor(r))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const r=this.store.index(t.index);return t.J?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function kn(e){return new b((t,n)=>{e.onsuccess=r=>{const s=r.target.result;t(s)},e.onerror=r=>{const s=Kl(r.target.error);n(s)}})}let ef=!1;function Kl(e){const t=Un.S(Zi());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){const r=new U("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ef||(ef=!0,setTimeout(()=>{throw r},0)),r}}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}Wl._e=-1;function Ho(e){return e==null}function ao(e){return e===0&&1/e==-1/0}function KA(e){return typeof e=="number"&&Number.isInteger(e)&&!ao(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function rr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Fm(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(t,n){this.comparator=t,this.root=n||qt.EMPTY}insert(t,n){return new St(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(t){return new St(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ii(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ii(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ii(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ii(this.root,t,this.comparator,!0)}}class Ii{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class qt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??qt.RED,this.left=s??qt.EMPTY,this.right=i??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new qt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();const t=this.left.check();if(t!==this.right.check())throw z();return t+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(t,n,r,s,i){return this}insert(t,n,r){return new qt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.comparator=t,this.data=new St(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new rf(this.data.getIterator())}getIteratorFrom(t){return new rf(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ht(this.comparator);return n.data=t,n}}class rf{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t){this.fields=t,t.sort(Wt.comparator)}static empty(){return new Pe([])}unionWith(t){let n=new Ht(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Pe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Mr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Um("Invalid base64 string: "+i):i}}(t);return new re(n)}static fromUint8Array(t){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(t);return new re(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}re.EMPTY_BYTE_STRING=new re("");const WA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sn(e){if(wt(!!e),typeof e=="string"){let t=0;const n=WA.exec(e);if(wt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Nt(e.seconds),nanos:Nt(e.nanos)}}function Nt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Qn(e){return typeof e=="string"?re.fromBase64String(e):re.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hl(e){const t=e.mapValue.fields.__previous_value__;return zl(t)?Hl(t):t}function Us(e){const t=Sn(e.mapValue.fields.__local_write_time__.timestampValue);return new Mt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(t,n,r,s,i,o,a,c,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class Bs{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new Bs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Bs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Yn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zl(e)?4:HA(e)?9007199254740991:10:z()}function Ye(e,t){if(e===t)return!0;const n=Yn(e);if(n!==Yn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Us(e).isEqual(Us(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Sn(s.timestampValue),a=Sn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return Qn(s.bytesValue).isEqual(Qn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return Nt(s.geoPointValue.latitude)===Nt(i.geoPointValue.latitude)&&Nt(s.geoPointValue.longitude)===Nt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Nt(s.integerValue)===Nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Nt(s.doubleValue),a=Nt(i.doubleValue);return o===a?ao(o)===ao(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Mr(e.arrayValue.values||[],t.arrayValue.values||[],Ye);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(nf(o)!==nf(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Ye(o[c],a[c])))return!1;return!0}(e,t);default:return z()}}function js(e,t){return(e.values||[]).find(n=>Ye(n,t))!==void 0}function Lr(e,t){if(e===t)return 0;const n=Yn(e),r=Yn(t);if(n!==r)return lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(e.booleanValue,t.booleanValue);case 2:return function(i,o){const a=Nt(i.integerValue||i.doubleValue),c=Nt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return sf(e.timestampValue,t.timestampValue);case 4:return sf(Us(e),Us(t));case 5:return lt(e.stringValue,t.stringValue);case 6:return function(i,o){const a=Qn(i),c=Qn(o);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=lt(a[l],c[l]);if(u!==0)return u}return lt(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const a=lt(Nt(i.latitude),Nt(o.latitude));return a!==0?a:lt(Nt(i.longitude),Nt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){const a=i.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){const u=Lr(a[l],c[l]);if(u)return u}return lt(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===Ri.mapValue&&o===Ri.mapValue)return 0;if(i===Ri.mapValue)return 1;if(o===Ri.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){const f=lt(c[h],u[h]);if(f!==0)return f;const m=Lr(a[c[h]],l[u[h]]);if(m!==0)return m}return lt(c.length,u.length)}(e.mapValue,t.mapValue);default:throw z()}}function sf(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return lt(e,t);const n=Sn(e),r=Sn(t),s=lt(n.seconds,r.seconds);return s!==0?s:lt(n.nanos,r.nanos)}function Fr(e){return Dc(e)}function Dc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Sn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Qn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return K.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Dc(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Dc(n.fields[o])}`;return s+"}"}(e.mapValue):z()}function of(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Vc(e){return!!e&&"integerValue"in e}function Gl(e){return!!e&&"arrayValue"in e}function af(e){return!!e&&"nullValue"in e}function cf(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Fi(e){return!!e&&"mapValue"in e}function ys(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return rr(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=ys(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ys(e.arrayValue.values[n]);return t}return Object.assign({},e)}function HA(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t){this.value=t}static empty(){return new ge({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Fi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ys(n)}setAll(t){let n=Wt.emptyPath(),r={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ys(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Fi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ye(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Fi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){rr(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new ge(ys(this.value))}}function Bm(e){const t=[];return rr(e.fields,(n,r)=>{const s=new Wt([n]);if(Fi(r)){const i=Bm(r.mapValue).fields;if(i.length===0)t.push(s);else for(const o of i)t.push(s.child(o))}else t.push(s)}),new Pe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t,n,r,s,i,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Jt(t,0,X.min(),X.min(),X.min(),ge.empty(),0)}static newFoundDocument(t,n,r,s){return new Jt(t,1,n,X.min(),r,s,0)}static newNoDocument(t,n){return new Jt(t,2,n,X.min(),X.min(),ge.empty(),0)}static newUnknownDocument(t,n){return new Jt(t,3,n,X.min(),X.min(),ge.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ge.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ge.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Jt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(t,n){this.position=t,this.inclusive=n}}function lf(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Lr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function uf(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ye(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t,n="asc"){this.field=t,this.dir=n}}function GA(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{}class Ot extends jm{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new YA(t,n,r):n==="array-contains"?new ZA(t,r):n==="in"?new t0(t,r):n==="not-in"?new e0(t,r):n==="array-contains-any"?new n0(t,r):new Ot(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new XA(t,r):new JA(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Lr(n,this.value)):n!==null&&Yn(this.value)===Yn(n)&&this.matchesComparison(Lr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ne extends jm{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new Ne(t,n)}matches(t){return $m(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function $m(e){return e.op==="and"}function qm(e){return QA(e)&&$m(e)}function QA(e){for(const t of e.filters)if(t instanceof Ne)return!1;return!0}function xc(e){if(e instanceof Ot)return e.field.canonicalString()+e.op.toString()+Fr(e.value);if(qm(e))return e.filters.map(t=>xc(t)).join(",");{const t=e.filters.map(n=>xc(n)).join(",");return`${e.op}(${t})`}}function Km(e,t){return e instanceof Ot?function(r,s){return s instanceof Ot&&r.op===s.op&&r.field.isEqual(s.field)&&Ye(r.value,s.value)}(e,t):e instanceof Ne?function(r,s){return s instanceof Ne&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Km(o,s.filters[a]),!0):!1}(e,t):void z()}function Wm(e){return e instanceof Ot?function(n){return`${n.field.canonicalString()} ${n.op} ${Fr(n.value)}`}(e):e instanceof Ne?function(n){return n.op.toString()+" {"+n.getFilters().map(Wm).join(" ,")+"}"}(e):"Filter"}class YA extends Ot{constructor(t,n,r){super(t,n,r),this.key=K.fromName(r.referenceValue)}matches(t){const n=K.comparator(t.key,this.key);return this.matchesComparison(n)}}class XA extends Ot{constructor(t,n){super(t,"in",n),this.keys=zm("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class JA extends Ot{constructor(t,n){super(t,"not-in",n),this.keys=zm("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function zm(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class ZA extends Ot{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Gl(n)&&js(n.arrayValue,this.value)}}class t0 extends Ot{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&js(this.value.arrayValue,n)}}class e0 extends Ot{constructor(t,n){super(t,"not-in",n)}matches(t){if(js(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!js(this.value.arrayValue,n)}}class n0 extends Ot{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Gl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>js(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(t,n=null,r=[],s=[],i=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function hf(e,t=null,n=[],r=[],s=null,i=null,o=null){return new r0(e,t,n,r,s,i,o)}function Ql(e){const t=J(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>xc(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ho(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Fr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Fr(r)).join(",")),t.ce=n}return t.ce}function Yl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!GA(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Km(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!uf(e.startAt,t.startAt)&&uf(e.endAt,t.endAt)}function Nc(e){return K.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(t,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function s0(e,t,n,r,s,i,o,a){return new ri(e,t,n,r,s,i,o,a)}function Hm(e){return new ri(e)}function ff(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Gm(e){return e.collectionGroup!==null}function Es(e){const t=J(e);if(t.le===null){t.le=[];const n=new Set;for(const i of t.explicitOrderBy)t.le.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ht(Wt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.le.push(new lo(i,r))}),n.has(Wt.keyField().canonicalString())||t.le.push(new lo(Wt.keyField(),r))}return t.le}function ze(e){const t=J(e);return t.he||(t.he=i0(t,Es(e))),t.he}function i0(e,t){if(e.limitType==="F")return hf(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new lo(s.field,i)});const n=e.endAt?new co(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new co(e.startAt.position,e.startAt.inclusive):null;return hf(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Oc(e,t){const n=e.filters.concat([t]);return new ri(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function kc(e,t,n){return new ri(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Go(e,t){return Yl(ze(e),ze(t))&&e.limitType===t.limitType}function Qm(e){return`${Ql(ze(e))}|lt:${e.limitType}`}function mr(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Wm(s)).join(", ")}]`),Ho(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fr(s)).join(",")),`Target(${r})`}(ze(e))}; limitType=${e.limitType})`}function Qo(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of Es(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(o,a,c){const l=lf(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Es(r),s)||r.endAt&&!function(o,a,c){const l=lf(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Es(r),s))}(e,t)}function o0(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ym(e){return(t,n)=>{let r=!1;for(const s of Es(e)){const i=a0(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function a0(e,t,n){const r=e.field.isKeyField()?K.comparator(t.key,n.key):function(i,o,a){const c=o.data.field(i),l=a.data.field(i);return c!==null&&l!==null?Lr(c,l):z()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){rr(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Fm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new St(K.comparator);function cn(){return c0}const Xm=new St(K.comparator);function ls(...e){let t=Xm;for(const n of e)t=t.insert(n.key,n);return t}function Jm(e){let t=Xm;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Bn(){return ws()}function Zm(){return ws()}function ws(){return new Hr(e=>e.toString(),(e,t)=>e.isEqual(t))}const l0=new St(K.comparator),u0=new Ht(K.comparator);function nt(...e){let t=u0;for(const n of e)t=t.add(n);return t}const h0=new Ht(lt);function f0(){return h0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ao(t)?"-0":t}}function eg(e){return{integerValue:""+e}}function d0(e,t){return KA(t)?eg(t):tg(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this._=void 0}}function p0(e,t,n){return e instanceof uo?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&zl(i)&&(i=Hl(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof $s?rg(e,t):e instanceof qs?sg(e,t):function(s,i){const o=ng(s,i),a=df(o)+df(s.Ie);return Vc(o)&&Vc(s.Ie)?eg(a):tg(s.serializer,a)}(e,t)}function m0(e,t,n){return e instanceof $s?rg(e,t):e instanceof qs?sg(e,t):n}function ng(e,t){return e instanceof ho?function(r){return Vc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class uo extends Yo{}class $s extends Yo{constructor(t){super(),this.elements=t}}function rg(e,t){const n=ig(t);for(const r of e.elements)n.some(s=>Ye(s,r))||n.push(r);return{arrayValue:{values:n}}}class qs extends Yo{constructor(t){super(),this.elements=t}}function sg(e,t){let n=ig(t);for(const r of e.elements)n=n.filter(s=>!Ye(s,r));return{arrayValue:{values:n}}}class ho extends Yo{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function df(e){return Nt(e.integerValue||e.doubleValue)}function ig(e){return Gl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function g0(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof $s&&s instanceof $s||r instanceof qs&&s instanceof qs?Mr(r.elements,s.elements,Ye):r instanceof ho&&s instanceof ho?Ye(r.Ie,s.Ie):r instanceof uo&&s instanceof uo}(e.transform,t.transform)}class _0{constructor(t,n){this.version=t,this.transformResults=n}}class sn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new sn}static exists(t){return new sn(void 0,t)}static updateTime(t){return new sn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ui(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Xo{}function og(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new cg(e.key,sn.none()):new Jo(e.key,e.data,sn.none());{const n=e.data,r=ge.empty();let s=new Ht(Wt.comparator);for(let i of t.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new sr(e.key,r,new Pe(s.toArray()),sn.none())}}function y0(e,t,n){e instanceof Jo?function(s,i,o){const a=s.value.clone(),c=mf(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof sr?function(s,i,o){if(!Ui(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=mf(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(ag(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function vs(e,t,n,r){return e instanceof Jo?function(i,o,a,c){if(!Ui(i.precondition,o))return a;const l=i.value.clone(),u=gf(i.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof sr?function(i,o,a,c){if(!Ui(i.precondition,o))return a;const l=gf(i.fieldTransforms,c,o),u=o.data;return u.setAll(ag(i)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(i,o,a){return Ui(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function E0(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=ng(r.transform,s||null);i!=null&&(n===null&&(n=ge.empty()),n.set(r.field,i))}return n||null}function pf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Mr(r,s,(i,o)=>g0(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Jo extends Xo{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class sr extends Xo{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ag(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function mf(e,t,n){const r=new Map;wt(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,m0(o,a,n[s]))}return r}function gf(e,t,n){const r=new Map;for(const s of e){const i=s.transform,o=n.data.field(s.field);r.set(s.field,p0(i,o,t))}return r}class cg extends Xo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w0 extends Xo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&y0(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=vs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=vs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Zm();return this.mutations.forEach(s=>{const i=t.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=og(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),nt())}isEqual(t){return this.batchId===t.batchId&&Mr(this.mutations,t.mutations,(n,r)=>pf(n,r))&&Mr(this.baseMutations,t.baseMutations,(n,r)=>pf(n,r))}}class Xl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){wt(t.mutations.length===r.length);let s=function(){return l0}();const i=t.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Xl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,rt;function I0(e){switch(e){default:return z();case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0}}function lg(e){if(e===void 0)return Qe("GRPC error has no .code"),A.UNKNOWN;switch(e){case xt.OK:return A.OK;case xt.CANCELLED:return A.CANCELLED;case xt.UNKNOWN:return A.UNKNOWN;case xt.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case xt.INTERNAL:return A.INTERNAL;case xt.UNAVAILABLE:return A.UNAVAILABLE;case xt.UNAUTHENTICATED:return A.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case xt.NOT_FOUND:return A.NOT_FOUND;case xt.ALREADY_EXISTS:return A.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return A.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case xt.ABORTED:return A.ABORTED;case xt.OUT_OF_RANGE:return A.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return A.UNIMPLEMENTED;case xt.DATA_LOSS:return A.DATA_LOSS;default:return z()}}(rt=xt||(xt={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new br([4294967295,4294967295],0);function _f(e){const t=R0().encode(e),n=new SA;return n.update(t),new Uint8Array(n.digest())}function yf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new br([n,r],0),new br([s,i],0)]}class Jl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new us(`Invalid padding: ${n}`);if(r<0)throw new us(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new us(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new us(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=br.fromNumber(this.Te)}de(t,n,r){let s=t.add(n.multiply(br.fromNumber(r)));return s.compare(b0)===1&&(s=new br([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=_f(t),[r,s]=yf(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new Jl(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=_f(t),[r,s]=yf(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class us extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,si.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Zo(X.min(),s,new St(lt),cn(),nt())}}class si{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new si(r,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,n,r,s){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=s}}class ug{constructor(t,n){this.targetId=t,this.fe=n}}class hg{constructor(t,n,r=re.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ef{constructor(){this.ge=0,this.pe=vf(),this.ye=re.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=nt(),n=nt(),r=nt();return this.pe.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:z()}}),new si(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=vf()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,wt(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class S0{constructor(t){this.Le=t,this.ke=new Map,this.qe=cn(),this.Qe=wf(),this.Ke=new St(lt)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:z()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(t){const n=t.targetId,r=t.fe.count,s=this.Ye(n);if(s){const i=s.target;if(Nc(i))if(r===0){const o=new K(i.path);this.We(n,o,Jt.newNoDocument(o,X.min()))}else wt(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),c=a?this.et(a,t,o):1;if(c!==0){this.He(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Qn(r).toUint8Array()}catch(c){if(c instanceof Um)return kr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Jl(o,s,i)}catch(c){return kr(c instanceof us?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(a)||(this.We(n,i,null),s++)}),s}it(t){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&Nc(a.target)){const c=new K(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,Jt.newNoDocument(c,t))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=nt();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(t));const s=new Zo(t,n,this.Ke,this.qe,r);return this.qe=cn(),this.Qe=wf(),this.Ke=new St(lt),s}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const s=this.ze(t);this.st(t,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new Ef,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new Ht(lt),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||N("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new Ef),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function wf(){return new St(K.comparator)}function vf(){return new St(K.comparator)}const C0={asc:"ASCENDING",desc:"DESCENDING"},P0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D0={and:"AND",or:"OR"};class V0{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Mc(e,t){return e.useProto3Json||Ho(t)?t:{value:t}}function fo(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function fg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function x0(e,t){return fo(e,t.toTimestamp())}function He(e){return wt(!!e),X.fromTimestamp(function(n){const r=Sn(n);return new Mt(r.seconds,r.nanos)}(e))}function Zl(e,t){return Lc(e,t).canonicalString()}function Lc(e,t){const n=function(s){return new Tt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function dg(e){const t=Tt.fromString(e);return wt(yg(t)),t}function Fc(e,t){return Zl(e.databaseId,t.path)}function Ua(e,t){const n=dg(t);if(n.get(1)!==e.databaseId.projectId)throw new U(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new U(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new K(mg(n))}function pg(e,t){return Zl(e.databaseId,t)}function N0(e){const t=dg(e);return t.length===4?Tt.emptyPath():mg(t)}function Uc(e){return new Tt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function mg(e){return wt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Tf(e,t,n){return{name:Fc(e,t),fields:n.value.mapValue.fields}}function O0(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(l,u){return l.useProto3Json?(wt(u===void 0||typeof u=="string"),re.fromBase64String(u||"")):(wt(u===void 0||u instanceof Uint8Array),re.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const u=l.code===void 0?A.UNKNOWN:lg(l.code);return new U(u,l.message||"")}(o);n=new hg(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ua(e,r.document.name),i=He(r.document.updateTime),o=r.document.createTime?He(r.document.createTime):X.min(),a=new ge({mapValue:{fields:r.document.fields}}),c=Jt.newFoundDocument(s,i,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Bi(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Ua(e,r.document),i=r.readTime?He(r.readTime):X.min(),o=Jt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Bi([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Ua(e,r.document),i=r.removedTargetIds||[];n=new Bi([],i,s,null)}else{if(!("filter"in t))return z();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new A0(s,i),a=r.targetId;n=new ug(a,o)}}return n}function k0(e,t){let n;if(t instanceof Jo)n={update:Tf(e,t.key,t.value)};else if(t instanceof cg)n={delete:Fc(e,t.key)};else if(t instanceof sr)n={update:Tf(e,t.key,t.data),updateMask:K0(t.fieldMask)};else{if(!(t instanceof w0))return z();n={verify:Fc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof uo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $s)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ho)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw z()}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:x0(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:z()}(e,t.precondition)),n}function M0(e,t){return e&&e.length>0?(wt(t!==void 0),e.map(n=>function(s,i){let o=s.updateTime?He(s.updateTime):He(i);return o.isEqual(X.min())&&(o=He(i)),new _0(o,s.transformResults||[])}(n,t))):[]}function L0(e,t){return{documents:[pg(e,t.path)]}}function F0(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pg(e,s);const i=function(l){if(l.length!==0)return _g(Ne.create(l,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(u=>function(f){return{field:gr(f.field),direction:j0(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Mc(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ut:n,parent:s}}function U0(e){let t=N0(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){wt(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let i=[];n.where&&(i=function(h){const f=gg(h);return f instanceof Ne&&qm(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(g){return new lo(_r(g.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Ho(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(h){const f=!!h.before,m=h.values||[];return new co(m,f)}(n.startAt));let l=null;return n.endAt&&(l=function(h){const f=!h.before,m=h.values||[];return new co(m,f)}(n.endAt)),s0(t,s,o,i,a,"F",c,l)}function B0(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function gg(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_r(n.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=_r(n.unaryFilter.field);return Ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_r(n.unaryFilter.field);return Ot.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_r(n.unaryFilter.field);return Ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(e):e.fieldFilter!==void 0?function(n){return Ot.create(_r(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Ne.create(n.compositeFilter.filters.map(r=>gg(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return z()}}(n.compositeFilter.op))}(e):z()}function j0(e){return C0[e]}function $0(e){return P0[e]}function q0(e){return D0[e]}function gr(e){return{fieldPath:e.canonicalString()}}function _r(e){return Wt.fromServerFormat(e.fieldPath)}function _g(e){return e instanceof Ot?function(n){if(n.op==="=="){if(cf(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NAN"}};if(af(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cf(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NAN"}};if(af(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gr(n.field),op:$0(n.op),value:n.value}}}(e):e instanceof Ne?function(n){const r=n.getFilters().map(s=>_g(s));return r.length===1?r[0]:{compositeFilter:{op:q0(n.op),filters:r}}}(e):z()}function K0(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function yg(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t,n,r,s,i=X.min(),o=X.min(),a=re.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new En(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new En(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new En(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new En(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(t){this.ct=t}}function z0(e){const t=U0({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?kc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(){this._n=new G0}addToCollectionParentIndex(t,n){return this._n.add(n),b.resolve()}getCollectionParents(t,n){return b.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return b.resolve()}deleteFieldIndex(t,n){return b.resolve()}deleteAllFieldIndexes(t){return b.resolve()}createTargetIndexes(t,n){return b.resolve()}getDocumentsMatchingTarget(t,n){return b.resolve(null)}getIndexType(t,n){return b.resolve(0)}getFieldIndexes(t,n){return b.resolve([])}getNextCollectionGroupToUpdate(t){return b.resolve(null)}getMinOffset(t,n){return b.resolve(bn.min())}getMinOffsetFromCollectionGroup(t,n){return b.resolve(bn.min())}updateCollectionGroup(t,n,r){return b.resolve()}updateIndexEntries(t,n){return b.resolve()}}class G0{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Ht(Tt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Ht(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Ur(0)}static Bn(){return new Ur(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.changes=new Hr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Jt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?b.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&vs(r.mutation,s,Pe.empty(),Mt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,nt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=nt()){const s=Bn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let o=ls();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Bn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,nt()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,s){let i=cn();const o=ws(),a=function(){return ws()}();return n.forEach((c,l)=>{const u=r.get(l.key);s.has(l.key)&&(u===void 0||u.mutation instanceof sr)?i=i.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),vs(u.mutation,l,u.mutation.getFieldMask(),Mt.now())):o.set(l.key,Pe.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new Y0(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const r=ws();let s=new St((o,a)=>o-a),i=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=r.get(c)||Pe.empty();u=a.applyToLocalView(l,u),r.set(c,u);const h=(s.get(a.batchId)||nt()).add(c);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=Zm();u.forEach(f=>{if(!i.has(f)){const m=og(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,h))}return b.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Gm(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):b.resolve(Bn());let a=-1,c=i;return o.next(l=>b.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?b.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{c=c.insert(u,f)}))).next(()=>this.populateOverlays(t,l,i)).next(()=>this.computeViews(t,c,l,nt())).next(u=>({batchId:a,changes:Jm(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new K(n)).next(r=>{let s=ls();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let o=ls();return this.indexManager.getCollectionParents(t,i).next(a=>b.forEach(a,c=>{const l=function(h,f){return new ri(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,l,r,s).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(o=>{i.forEach((c,l)=>{const u=l.getKey();o.get(u)===null&&(o=o.insert(u,Jt.newInvalidDocument(u)))});let a=ls();return o.forEach((c,l)=>{const u=i.get(c);u!==void 0&&vs(u.mutation,l,Pe.empty(),Mt.now()),Qo(n,l)&&(a=a.insert(c,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return b.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:He(s.createTime)}}(n)),b.resolve()}getNamedQuery(t,n){return b.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(s){return{name:s.name,query:z0(s.bundledQuery),readTime:He(s.readTime)}}(n)),b.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.overlays=new St(K.comparator),this.hr=new Map}getOverlay(t,n){return b.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Bn();return b.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.ht(t,n,i)}),b.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),b.resolve()}getOverlaysForCollection(t,n,r){const s=Bn(),i=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return b.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new St((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=i.get(l.largestBatchId);u===null&&(u=Bn(),i=i.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=Bn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=s)););return b.resolve(a)}ht(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new T0(n,r));let i=this.hr.get(n);i===void 0&&(i=nt(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this.Pr=new Ht(Bt.Ir),this.Tr=new Ht(Bt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Bt(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Bt(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new K(new Tt([])),r=new Bt(n,t),s=new Bt(n,t+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new K(new Tt([])),r=new Bt(n,t),s=new Bt(n,t+1);let i=nt();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new Bt(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Bt{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return K.comparator(t.key,n.key)||lt(t.pr,n.pr)}static Er(t,n){return lt(t.pr,n.pr)||K.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ht(Bt.Ir)}checkEmpty(t){return b.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new v0(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new Bt(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return b.resolve(o)}lookupMutationBatch(t,n){return b.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.br(r),i=s<0?0:s;return b.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Bt(n,0),s=new Bt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),b.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ht(lt);return n.forEach(s=>{const i=new Bt(s,0),o=new Bt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),b.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const o=new Bt(new K(i),0);let a=new Ht(lt);return this.wr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(a=a.add(c.pr)),!0)},o),b.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){wt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return b.forEach(n.mutations,s=>{const i=new Bt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Bt(n,0),s=this.wr.firstAfterOrEqual(r);return b.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,b.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(t){this.vr=t,this.docs=function(){return new St(K.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return b.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(t,n){let r=cn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Jt.newInvalidDocument(s))}),b.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=cn();const o=n.path,a=new K(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||UA(FA(u),r)<=0||(s.has(u.key)||Qo(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return b.resolve(i)}getAllFromCollectionGroup(t,n,r,s){z()}Fr(t,n){return b.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new nI(this)}getSize(t){return b.resolve(this.size)}}class nI extends Q0{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(t,s)):this.ar.removeEntry(r)}),b.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t){this.persistence=t,this.Mr=new Hr(n=>Ql(n),Yl),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Or=0,this.Nr=new tu,this.targetCount=0,this.Br=Ur.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,s)=>n(s)),b.resolve()}getLastRemoteSnapshotVersion(t){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return b.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),b.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Br=new Ur(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,b.resolve()}updateTargetData(t,n){return this.qn(n),b.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,b.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),b.waitFor(i).next(()=>s)}getTargetCount(t){return b.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return b.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),b.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(t,o))}),b.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),b.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return b.resolve(r)}containsKey(t,n){return b.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t,n){this.Lr={},this.overlays={},this.kr=new Wl(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new rI(this),this.indexManager=new H0,this.remoteDocumentCache=function(s){return new eI(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new W0(n),this.$r=new J0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Z0,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Lr[t.toKey()];return r||(r=new tI(n,this.referenceDelegate),this.Lr[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){N("MemoryPersistence","Starting transaction:",t);const s=new iI(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(t,n){return b.or(Object.values(this.Lr).map(r=>()=>r.containsKey(t,n)))}}class iI extends jA{constructor(t){super(),this.currentSequenceNumber=t}}class eu{constructor(t){this.persistence=t,this.zr=new tu,this.jr=null}static Hr(t){return new eu(t)}get Jr(){if(this.jr)return this.jr;throw z()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),b.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),b.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),b.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.Jr,r=>{const s=K.fromPath(r);return this.Yr(t,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return b.or([()=>b.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(t,n){let r=nt(),s=nt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new nu(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return uv()?8:Un.v(Zi())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ji(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(t,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new oI;return this.Ji(t,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>i.result)}Yi(t,n,r,s){return r.documentReadCount<this.Wi?(rs()<=ot.DEBUG&&N("QueryEngine","SDK will not create cache indexes for query:",mr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),b.resolve()):(rs()<=ot.DEBUG&&N("QueryEngine","Query:",mr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(rs()<=ot.DEBUG&&N("QueryEngine","The SDK decides to create cache indexes for query:",mr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ze(n))):b.resolve())}ji(t,n){if(ff(n))return b.resolve(null);let r=ze(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=kc(n,null,"F"),r=ze(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const o=nt(...i);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(c=>{const l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(t,kc(n,null,"F")):this.es(t,l,n,c)}))})))}Hi(t,n,r,s){return ff(n)||s.isEqual(X.min())?b.resolve(null):this.zi.getDocuments(t,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?b.resolve(null):(rs()<=ot.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mr(n)),this.es(t,o,n,LA(s,-1)).next(a=>a))})}Zi(t,n){let r=new Ht(Ym(t));return n.forEach((s,i)=>{Qo(t,i)&&(r=r.add(i))}),r}Xi(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(t,n,r){return rs()<=ot.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",mr(n)),this.zi.getDocumentsMatchingQuery(t,n,bn.min(),r)}es(t,n,r,s){return this.zi.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(t,n,r,s){this.persistence=t,this.ts=n,this.serializer=s,this.ns=new St(lt),this.rs=new Hr(i=>Ql(i),Yl),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new X0(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function lI(e,t,n,r){return new cI(e,t,n,r)}async function Eg(e,t){const n=J(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=nt();for(const l of s){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of i){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function uI(e,t){const n=J(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){const h=l.batch,f=h.keys();let m=b.resolve();return f.forEach(g=>{m=m.next(()=>u.getEntry(c,g)).next(_=>{const E=l.docVersions.get(g);wt(E!==null),_.version.compareTo(E)<0&&(h.applyToRemoteDocument(_,l),_.isValidDocument()&&(_.setReadTime(l.commitVersion),u.addEntry(_)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=nt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function wg(e){const t=J(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function hI(e,t){const n=J(e),r=t.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];t.targetChanges.forEach((u,h)=>{const f=s.get(h);if(!f)return;a.push(n.Qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,u.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(h)!==null?m=m.withResumeToken(re.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(h,m),function(_,E,R){return _.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(f,m,u)&&a.push(n.Qr.updateTargetData(i,m))});let c=cn(),l=nt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(fI(i,o,t.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!r.isEqual(X.min())){const u=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return b.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,l)).next(()=>c)}).then(i=>(n.ns=s,i))}function fI(e,t,n){let r=nt(),s=nt();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let o=cn();return n.forEach((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(X.min())?(t.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(c),o=o.insert(a,c)):N("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:s}})}function dI(e,t){const n=J(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function pI(e,t){const n=J(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,t).next(i=>i?(s=i,b.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new En(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function Bc(e,t,n){const r=J(e),s=r.ns.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ni(o))throw o;N("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(s.target)}function Af(e,t,n){const r=J(e);let s=X.min(),i=nt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){const h=J(c),f=h.rs.get(u);return f!==void 0?b.resolve(h.ns.get(f)):h.Qr.getTargetData(l,u)}(r,o,ze(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?s:X.min(),n?i:nt())).next(a=>(mI(r,o0(t),a),{documents:a,hs:i})))}function mI(e,t,n){let r=e.ss.get(t)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.ss.set(t,r)}class If{constructor(){this.activeTargetIds=f0()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class gI{constructor(){this.no=new If,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new If,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){N("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){N("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bi=null;function Ba(){return bi===null?bi=function(){return 268435456+Math.round(2147483648*Math.random())}():bi++,"0x"+bi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class wI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=Ba(),c=this.bo(n,r.toUriEncodedString());N("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,i,o),this.Co(n,c,l,s).then(u=>(N("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw kr("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",s),u})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=yI[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,r,s){const i=Ba();return new Promise((o,a)=>{const c=new bA;c.setWithCredentials(!0),c.listenOnce(IA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Fa.NO_ERROR:const u=c.getResponseJson();N(Yt,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(u)),o(u);break;case Fa.TIMEOUT:N(Yt,`RPC '${t}' ${i} timed out`),a(new U(A.DEADLINE_EXCEEDED,"Request time out"));break;case Fa.HTTP_ERROR:const h=c.getStatus();if(N(Yt,`RPC '${t}' ${i} failed with status:`,h,"response text:",c.getResponseText()),h>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const g=function(E){const R=E.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(R)>=0?R:A.UNKNOWN}(m.status);a(new U(g,m.message))}else a(new U(A.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new U(A.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{N(Yt,`RPC '${t}' ${i} completed.`)}});const l=JSON.stringify(s);N(Yt,`RPC '${t}' ${i} sending request:`,s),c.send(n,"POST",l,r,15)})}Fo(t,n,r){const s=Ba(),i=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=TA(),a=AA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=i.join("");N(Yt,`Creating RPC '${t}' stream ${s}: ${u}`,c);const h=o.createWebChannel(u,c);let f=!1,m=!1;const g=new EI({lo:E=>{m?N(Yt,`Not sending because RPC '${t}' stream ${s} is closed:`,E):(f||(N(Yt,`Opening RPC '${t}' stream ${s} transport.`),h.open(),f=!0),N(Yt,`RPC '${t}' stream ${s} sending:`,E),h.send(E))},ho:()=>h.close()}),_=(E,R,P)=>{E.listen(R,x=>{try{P(x)}catch(B){setTimeout(()=>{throw B},0)}})};return _(h,Ai.EventType.OPEN,()=>{m||N(Yt,`RPC '${t}' stream ${s} transport opened.`)}),_(h,Ai.EventType.CLOSE,()=>{m||(m=!0,N(Yt,`RPC '${t}' stream ${s} transport closed`),g.Vo())}),_(h,Ai.EventType.ERROR,E=>{m||(m=!0,kr(Yt,`RPC '${t}' stream ${s} transport errored:`,E),g.Vo(new U(A.UNAVAILABLE,"The operation could not be completed")))}),_(h,Ai.EventType.MESSAGE,E=>{var R;if(!m){const P=E.data[0];wt(!!P);const x=P,B=x.error||((R=x[0])===null||R===void 0?void 0:R.error);if(B){N(Yt,`RPC '${t}' stream ${s} received error:`,B);const at=B.status;let $=function(yt){const tt=xt[yt];if(tt!==void 0)return lg(tt)}(at),At=B.message;$===void 0&&($=A.INTERNAL,At="Unknown error status: "+at+" with message "+B.message),m=!0,g.Vo(new U($,At)),h.close()}else N(Yt,`RPC '${t}' stream ${s} received:`,P),g.mo(P)}}),_(a,RA.STAT_EVENT,E=>{E.stat===Zh.PROXY?N(Yt,`RPC '${t}' stream ${s} detected buffering proxy`):E.stat===Zh.NOPROXY&&N(Yt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.Ro()},0),g}}function ja(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(e){return new V0(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(t,n,r=1e3,s=1.5,i=6e4){this.oi=t,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),s=Math.max(0,n-r);s>0&&N("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Lo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(t,n,r,s,i,o,a,c){this.oi=t,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new vg(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(Qe(n.toString()),Qe("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(n)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{t(()=>{const s=new U(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(t,n){const r=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(t){return N("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(N("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vI extends Tg{constructor(t,n,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(t,n){return this.connection.Fo("Listen",t,n)}onMessage(t){this.jo.reset();const n=O0(this.serializer,t),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?He(o.readTime):X.min()}(t);return this.listener.u_(n,r)}c_(t){const n={};n.database=Uc(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Nc(c)?{documents:L0(i,c)}:{query:F0(i,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=fg(i,o.resumeToken);const l=Mc(i,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(X.min())>0){a.readTime=fo(i,o.snapshotVersion.toTimestamp());const l=Mc(i,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=B0(this.serializer,t);r&&(n.labels=r),this.t_(n)}l_(t){const n={};n.database=Uc(this.serializer),n.removeTarget=t,this.t_(n)}}class TI extends Tg{constructor(t,n,r,s,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,n){return this.connection.Fo("Write",t,n)}onMessage(t){if(wt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const n=M0(t.writeResults,t.commitTime),r=He(t.commitTime);return this.listener.T_(r,n)}return wt(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=Uc(this.serializer),this.t_(t)}I_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>k0(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI extends class{}{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new U(A.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(t,Lc(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new U(A.UNKNOWN,i.toString())})}vo(t,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(t,Lc(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(A.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class II{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Qe(n),this.g_=!1):N("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{ir(this)&&(N("RemoteStore","Restarting streams for network reachability change."),await async function(c){const l=J(c);l.v_.add(4),await ii(l),l.x_.set("Unknown"),l.v_.delete(4),await ea(l)}(this))})}),this.x_=new II(r,s)}}async function ea(e){if(ir(e))for(const t of e.F_)await t(!0)}async function ii(e){for(const t of e.F_)await t(!1)}function Ag(e,t){const n=J(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),iu(n)?su(n):Gr(n).Jo()&&ru(n,t))}function Ig(e,t){const n=J(e),r=Gr(n);n.C_.delete(t),r.Jo()&&Rg(n,t),n.C_.size===0&&(r.Jo()?r.Xo():ir(n)&&n.x_.set("Unknown"))}function ru(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(X.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Gr(e).c_(t)}function Rg(e,t){e.O_.Oe(t),Gr(e).l_(t)}function su(e){e.O_=new S0({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Gr(e).start(),e.x_.p_()}function iu(e){return ir(e)&&!Gr(e).Ho()&&e.C_.size>0}function ir(e){return J(e).v_.size===0}function bg(e){e.O_=void 0}async function bI(e){e.C_.forEach((t,n)=>{ru(e,t)})}async function SI(e,t){bg(e),iu(e)?(e.x_.S_(t),su(e)):e.x_.set("Unknown")}async function CI(e,t,n){if(e.x_.set("Online"),t instanceof hg&&t.state===2&&t.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(e,t)}catch(r){N("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await po(e,r)}else if(t instanceof Bi?e.O_.$e(t):t instanceof ug?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(X.min()))try{const r=await wg(e.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=i.C_.get(l);u&&i.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const u=i.C_.get(c);if(!u)return;i.C_.set(c,u.withResumeToken(re.EMPTY_BYTE_STRING,u.snapshotVersion)),Rg(i,c);const h=new En(u.target,c,l,u.sequenceNumber);ru(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){N("RemoteStore","Failed to raise snapshot:",r),await po(e,r)}}async function po(e,t,n){if(!ni(t))throw t;e.v_.add(1),await ii(e),e.x_.set("Offline"),n||(n=()=>wg(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{N("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await ea(e)})}function Sg(e,t){return t().catch(n=>po(e,n,t))}async function na(e){const t=J(e),n=Cn(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;PI(t);)try{const s=await dI(t.localStore,r);if(s===null){t.D_.length===0&&n.Xo();break}r=s.batchId,DI(t,s)}catch(s){await po(t,s)}Cg(t)&&Pg(t)}function PI(e){return ir(e)&&e.D_.length<10}function DI(e,t){e.D_.push(t);const n=Cn(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Cg(e){return ir(e)&&!Cn(e).Ho()&&e.D_.length>0}function Pg(e){Cn(e).start()}async function VI(e){Cn(e).d_()}async function xI(e){const t=Cn(e);for(const n of e.D_)t.I_(n.mutations)}async function NI(e,t,n){const r=e.D_.shift(),s=Xl.from(r,t,n);await Sg(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await na(e)}async function OI(e,t){t&&Cn(e).P_&&await async function(r,s){if(function(o){return I0(o)&&o!==A.ABORTED}(s.code)){const i=r.D_.shift();Cn(r).Zo(),await Sg(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await na(r)}}(e,t),Cg(e)&&Pg(e)}async function bf(e,t){const n=J(e);n.asyncQueue.verifyOperationInProgress(),N("RemoteStore","RemoteStore received new credentials");const r=ir(n);n.v_.add(3),await ii(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await ea(n)}async function kI(e,t){const n=J(e);t?(n.v_.delete(2),await ea(n)):t||(n.v_.add(2),await ii(n),n.x_.set("Unknown"))}function Gr(e){return e.N_||(e.N_=function(n,r,s){const i=J(n);return i.R_(),new vI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Po:bI.bind(null,e),To:SI.bind(null,e),u_:CI.bind(null,e)}),e.F_.push(async t=>{t?(e.N_.Zo(),iu(e)?su(e):e.x_.set("Unknown")):(await e.N_.stop(),bg(e))})),e.N_}function Cn(e){return e.B_||(e.B_=function(n,r,s){const i=J(n);return i.R_(),new TI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Po:VI.bind(null,e),To:OI.bind(null,e),E_:xI.bind(null,e),T_:NI.bind(null,e)}),e.F_.push(async t=>{t?(e.B_.Zo(),await na(e)):(await e.B_.stop(),e.D_.length>0&&(N("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))})),e.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const o=Date.now()+r,a=new ou(t,n,o,s,i);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(A.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function au(e,t){if(Qe("AsyncQueue",`${t}: ${e}`),ni(e))return new U(A.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t){this.comparator=t?(n,r)=>t(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=ls(),this.sortedSet=new St(this.comparator)}static emptySet(t){return new Sr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Sr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Sr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(){this.L_=new St(K.comparator)}track(t){const n=t.doc.key,r=this.L_.get(n);r?t.type!==0&&r.type===3?this.L_=this.L_.insert(n,t):t.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.L_=this.L_.remove(n):t.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:t.doc}):z():this.L_=this.L_.insert(n,t)}k_(){const t=[];return this.L_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Br{constructor(t,n,r,s,i,o,a,c,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Br(t,n,Sr.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Go(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.q_=void 0,this.Q_=[]}}class LI{constructor(){this.queries=new Hr(t=>Qm(t),Go),this.onlineState="Unknown",this.K_=new Set}}async function FI(e,t){const n=J(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new MI),s)try{i.q_=await n.onListen(r)}catch(o){const a=au(o,`Initialization of query '${mr(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,i),i.Q_.push(t),t.U_(n.onlineState),i.q_&&t.W_(i.q_)&&cu(n)}async function UI(e,t){const n=J(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(t);o>=0&&(i.Q_.splice(o,1),s=i.Q_.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function BI(e,t){const n=J(e);let r=!1;for(const s of t){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.W_(s)&&(r=!0);o.q_=s}}r&&cu(n)}function jI(e,t,n){const r=J(e),s=r.queries.get(t);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(t)}function cu(e){e.K_.forEach(t=>{t.next()})}class $I{constructor(t,n,r){this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Br(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.z_?this.H_(t)&&(this.G_.next(t),n=!0):this.J_(t,this.onlineState)&&(this.Y_(t),n=!0),this.j_=t,n}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),n=!0),n}J_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}H_(t){if(t.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(t){t=Br.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(t){this.key=t}}class Vg{constructor(t){this.key=t}}class qI{constructor(t,n){this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=nt(),this.mutatedKeys=nt(),this.ua=Ym(t),this.ca=new Sr(this.ua)}get la(){return this.oa}ha(t,n){const r=n?n.Pa:new Sf,s=n?n.ca:this.ca;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,h)=>{const f=s.get(u),m=Qo(this.query,h)?h:null,g=!!f&&this.mutatedKeys.has(f.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;f&&m?f.data.isEqual(m.data)?g!==_&&(r.track({type:3,doc:m}),E=!0):this.Ia(f,m)||(r.track({type:2,doc:m}),E=!0,(c&&this.ua(m,c)>0||l&&this.ua(m,l)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),E=!0):f&&!m&&(r.track({type:1,doc:f}),E=!0,(c||l)&&(a=!0)),E&&(m?(o=o.add(m),i=_?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{ca:o,Pa:r,Xi:a,mutatedKeys:i}}Ia(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const o=t.Pa.k_();o.sort((u,h)=>function(m,g){const _=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return _(m)-_(g)}(u.type,h.type)||this.ua(u.doc,h.doc)),this.Ta(r),s=s!=null&&s;const a=n&&!s?this.Ea():[],c=this.aa.size===0&&this.current&&!s?1:0,l=c!==this._a;return this._a=c,o.length!==0||l?{snapshot:new Br(this.query,t.ca,i,o,t.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Sf,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=t.current)}Ea(){if(!this.current)return[];const t=this.aa;this.aa=nt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return t.forEach(r=>{this.aa.has(r)||n.push(new Vg(r))}),this.aa.forEach(r=>{t.has(r)||n.push(new Dg(r))}),n}Ra(t){this.oa=t.hs,this.aa=nt();const n=this.ha(t.documents);return this.applyChanges(n,!0)}Va(){return Br.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class KI{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class WI{constructor(t){this.key=t,this.ma=!1}}class zI{constructor(t,n,r,s,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Hr(a=>Qm(a),Go),this.pa=new Map,this.ya=new Set,this.wa=new St(K.comparator),this.Sa=new Map,this.ba=new tu,this.Da={},this.Ca=new Map,this.va=Ur.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function HI(e,t){const n=rR(e);let r,s;const i=n.ga.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Va();else{const o=await pI(n.localStore,ze(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await GI(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&Ag(n.remoteStore,o)}return s}async function GI(e,t,n,r,s){e.Ma=(h,f,m)=>async function(_,E,R,P){let x=E.view.ha(R);x.Xi&&(x=await Af(_.localStore,E.query,!1).then(({documents:At})=>E.view.ha(At,x)));const B=P&&P.targetChanges.get(E.targetId),at=P&&P.targetMismatches.get(E.targetId)!=null,$=E.view.applyChanges(x,_.isPrimaryClient,B,at);return Pf(_,E.targetId,$.da),$.snapshot}(e,h,f,m);const i=await Af(e.localStore,t,!0),o=new qI(t,i.hs),a=o.ha(i.documents),c=si.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),l=o.applyChanges(a,e.isPrimaryClient,c);Pf(e,n,l.da);const u=new KI(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),l.snapshot}async function QI(e,t){const n=J(e),r=n.ga.get(t),s=n.pa.get(r.targetId);if(s.length>1)return n.pa.set(r.targetId,s.filter(i=>!Go(i,t))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Bc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Ig(n.remoteStore,r.targetId),jc(n,r.targetId)}).catch(ei)):(jc(n,r.targetId),await Bc(n.localStore,r.targetId,!0))}async function YI(e,t,n){const r=sR(e);try{const s=await function(o,a){const c=J(o),l=Mt.now(),u=a.reduce((m,g)=>m.add(g.key),nt());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=cn(),_=nt();return c.os.getEntries(m,u).next(E=>{g=E,g.forEach((R,P)=>{P.isValidDocument()||(_=_.add(R))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(E=>{h=E;const R=[];for(const P of a){const x=E0(P,h.get(P.key).overlayedDocument);x!=null&&R.push(new sr(P.key,x,Bm(x.value.mapValue),sn.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,R,a)}).next(E=>{f=E;const R=E.applyToLocalDocumentSet(h,_);return c.documentOverlayCache.saveOverlays(m,E.batchId,R)})}).then(()=>({batchId:f.batchId,changes:Jm(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let l=o.Da[o.currentUser.toKey()];l||(l=new St(lt)),l=l.insert(a,c),o.Da[o.currentUser.toKey()]=l}(r,s.batchId,n),await oi(r,s.changes),await na(r.remoteStore)}catch(s){const i=au(s,"Failed to persist write");n.reject(i)}}async function xg(e,t){const n=J(e);try{const r=await hI(n.localStore,t);t.targetChanges.forEach((s,i)=>{const o=n.Sa.get(i);o&&(wt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ma=!0:s.modifiedDocuments.size>0?wt(o.ma):s.removedDocuments.size>0&&(wt(o.ma),o.ma=!1))}),await oi(n,r,t)}catch(r){await ei(r)}}function Cf(e,t,n){const r=J(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ga.forEach((i,o)=>{const a=o.view.U_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=J(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(const f of h.Q_)f.U_(a)&&(l=!0)}),l&&cu(c)}(r.eventManager,t),s.length&&r.fa.u_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function XI(e,t,n){const r=J(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Sa.get(t),i=s&&s.key;if(i){let o=new St(K.comparator);o=o.insert(i,Jt.newNoDocument(i,X.min()));const a=nt().add(i),c=new Zo(X.min(),new Map,new St(lt),o,a);await xg(r,c),r.wa=r.wa.remove(i),r.Sa.delete(t),lu(r)}else await Bc(r.localStore,t,!1).then(()=>jc(r,t,n)).catch(ei)}async function JI(e,t){const n=J(e),r=t.batch.batchId;try{const s=await uI(n.localStore,t);Og(n,r,null),Ng(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oi(n,s)}catch(s){await ei(s)}}async function ZI(e,t,n){const r=J(e);try{const s=await function(o,a){const c=J(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(wt(h!==null),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,t);Og(r,t,n),Ng(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await oi(r,s)}catch(s){await ei(s)}}function Ng(e,t){(e.Ca.get(t)||[]).forEach(n=>{n.resolve()}),e.Ca.delete(t)}function Og(e,t,n){const r=J(e);let s=r.Da[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Da[r.currentUser.toKey()]=s}}function jc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach(r=>{e.ba.containsKey(r)||kg(e,r)})}function kg(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);n!==null&&(Ig(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),lu(e))}function Pf(e,t,n){for(const r of n)r instanceof Dg?(e.ba.addReference(r.key,t),tR(e,r)):r instanceof Vg?(N("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||kg(e,r.key)):z()}function tR(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(N("SyncEngine","New document in limbo: "+n),e.ya.add(r),lu(e))}function lu(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new K(Tt.fromString(t)),r=e.va.next();e.Sa.set(r,new WI(n)),e.wa=e.wa.insert(n,r),Ag(e.remoteStore,new En(ze(Hm(n.path)),r,"TargetPurposeLimboResolution",Wl._e))}}async function oi(e,t,n){const r=J(e),s=[],i=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{o.push(r.Ma(c,t,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l!=null&&l.fromCache?"not-current":"current"),l){s.push(l);const u=nu.Ki(c.targetId,l);i.push(u)}}))}),await Promise.all(o),r.fa.u_(s),await async function(c,l){const u=J(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>b.forEach(l,f=>b.forEach(f.qi,m=>u.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>b.forEach(f.Qi,m=>u.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!ni(h))throw h;N("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const f=h.targetId;if(!h.fromCache){const m=u.ns.get(f),g=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(g);u.ns=u.ns.insert(f,_)}}}(r.localStore,i))}async function eR(e,t){const n=J(e);if(!n.currentUser.isEqual(t)){N("SyncEngine","User change. New user:",t.toKey());const r=await Eg(n.localStore,t);n.currentUser=t,function(i,o){i.Ca.forEach(a=>{a.forEach(c=>{c.reject(new U(A.CANCELLED,o))})}),i.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await oi(n,r.us)}}function nR(e,t){const n=J(e),r=n.Sa.get(t);if(r&&r.ma)return nt().add(r.key);{let s=nt();const i=n.pa.get(t);if(!i)return s;for(const o of i){const a=n.ga.get(o);s=s.unionWith(a.view.la)}return s}}function rR(e){const t=J(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=XI.bind(null,t),t.fa.u_=BI.bind(null,t.eventManager),t.fa.xa=jI.bind(null,t.eventManager),t}function sR(e){const t=J(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=JI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ZI.bind(null,t),t}class Df{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=ta(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return lI(this.persistence,new aI,t.initialUser,this.serializer)}createPersistence(t){return new sI(eu.Hr,this.serializer)}createSharedClientState(t){return new gI}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class iR{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eR.bind(null,this.syncEngine),await kI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new LI}()}createDatastore(t){const n=ta(t.databaseInfo.databaseId),r=function(i){return new wI(i)}(t.databaseInfo);return function(i,o,a,c){return new AI(i,o,a,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,o,a){return new RI(r,s,i,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Cf(this.syncEngine,n,0),function(){return Rf.D()?new Rf:new _I}())}createSyncEngine(t,n){return function(s,i,o,a,c,l,u){const h=new zI(s,i,o,a,c,l);return u&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const s=J(r);N("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await ii(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):Qe("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(t,n,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Xt.UNAUTHENTICATED,this.clientId=Lm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{N("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(N("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new U(A.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=au(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function $a(e,t){e.asyncQueue.verifyOperationInProgress(),N("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Eg(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Vf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await lR(e);N("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>bf(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>bf(t.remoteStore,s)),e._onlineComponents=t}function cR(e){return e.name==="FirebaseError"?e.code===A.FAILED_PRECONDITION||e.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function lR(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){N("FirestoreClient","Using user provided OfflineComponentProvider");try{await $a(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!cR(n))throw n;kr("Error using user provided cache. Falling back to memory cache: "+n),await $a(e,new Df)}}else N("FirestoreClient","Using default OfflineComponentProvider"),await $a(e,new Df);return e._offlineComponents}async function Mg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(N("FirestoreClient","Using user provided OnlineComponentProvider"),await Vf(e,e._uninitializedComponentsProvider._online)):(N("FirestoreClient","Using default OnlineComponentProvider"),await Vf(e,new iR))),e._onlineComponents}function uR(e){return Mg(e).then(t=>t.syncEngine)}async function hR(e){const t=await Mg(e),n=t.eventManager;return n.onListen=HI.bind(null,t.syncEngine),n.onUnlisten=QI.bind(null,t.syncEngine),n}function fR(e,t,n={}){const r=new rn;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,l){const u=new oR({next:f=>{o.enqueueAndForget(()=>UI(i,h)),f.fromCache&&c.source==="server"?l.reject(new U(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new $I(a,u,{includeMetadataChanges:!0,Z_:!0});return FI(i,h)}(await hR(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(e,t,n){if(!n)throw new U(A.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function dR(e,t,n,r){if(t===!0&&r===!0)throw new U(A.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Nf(e){if(!K.isDocumentKey(e))throw new U(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Of(e){if(K.isDocumentKey(e))throw new U(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ra(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":z()}function Ks(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new U(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ra(e);throw new U(A.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new U(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new U(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}dR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lg((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new U(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new U(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new U(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class sa{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new U(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new U(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kf(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new CA;switch(r.type){case"firstParty":return new xA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xf.get(n);r&&(N("ComponentProvider","Removing Datastore"),xf.delete(n),r.terminate())}(this),Promise.resolve()}}function pR(e,t,n,r={}){var s;const i=(e=Ks(e,sa))._getSettings(),o=`${t}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Xt.MOCK_USER;else{a=vp(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new U(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Xt(l)}e._authCredentials=new PA(new Mm(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Qr(this.firestore,t,this._query)}}class ye{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ye(this.firestore,t,this._key)}}class Rn extends Qr{constructor(t,n,r){super(t,n,Hm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ye(this.firestore,null,new K(t))}withConverter(t){return new Rn(this.firestore,t,this._path)}}function mR(e,t,...n){if(e=ce(e),Fg("collection","path",t),e instanceof sa){const r=Tt.fromString(t,...n);return Of(r),new Rn(e,null,r)}{if(!(e instanceof ye||e instanceof Rn))throw new U(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Tt.fromString(t,...n));return Of(r),new Rn(e.firestore,null,r)}}function gR(e,t,...n){if(e=ce(e),arguments.length===1&&(t=Lm.newId()),Fg("doc","path",t),e instanceof sa){const r=Tt.fromString(t,...n);return Nf(r),new ye(e,null,new K(r))}{if(!(e instanceof ye||e instanceof Rn))throw new U(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Tt.fromString(t,...n));return Nf(r),new ye(e.firestore,e instanceof Rn?e.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new vg(this,"async_queue_retry"),this._u=()=>{const n=ja();n&&N("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const t=ja();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const n=ja();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise(()=>{});const n=new rn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.eu.push(t),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!ni(t))throw t;N("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(t){const n=this.Xa.then(()=>(this.iu=!0,t().catch(r=>{this.ru=r,this.iu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Qe("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(t,n,r){this.au(),this.ou.indexOf(t)>-1&&(n=0);const s=ou.createAndSchedule(this,t,n,r,i=>this.lu(i));return this.nu.push(s),s}au(){this.ru&&z()}verifyOperationInProgress(){}async hu(){let t;do t=this.Xa,await t;while(t!==this.Xa)}Pu(t){for(const n of this.nu)if(n.timerId===t)return!0;return!1}Iu(t){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.hu()})}Tu(t){this.ou.push(t)}lu(t){const n=this.nu.indexOf(t);this.nu.splice(n,1)}}class uu extends sa{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=function(){return new _R}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bg(this),this._firestoreClient.terminate()}}function yR(e,t){const n=typeof e=="object"?e:Dp(),r=typeof e=="string"?e:t||"(default)",s=Sp(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Ep("firestore");i&&pR(s,...i)}return s}function Ug(e){return e._firestoreClient||Bg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Bg(e){var t,n,r;const s=e._freezeSettings(),i=function(a,c,l,u){return new zA(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Lg(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new aR(e._authCredentials,e._appCheckCredentials,e._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new jr(re.fromBase64String(t))}catch(n){throw new U(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new jr(re.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new U(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new U(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new U(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return lt(this._lat,t._lat)||lt(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=/^__.*__$/;class jg{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new sr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function $g(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}class du{constructor(t,n,r,s,i,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new du(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Au({path:r,Vu:!1});return s.mu(t),s}fu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Au({path:r,Vu:!1});return s.Eu(),s}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return mo(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(t.length===0)throw this.pu("Document fields must not be empty");if($g(this.du)&&ER.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class wR{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ta(t)}Su(t,n,r,s=!1){return new du({du:t,methodName:n,wu:r,path:Wt.emptyPath(),Vu:!1,yu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qg(e){const t=e._freezeSettings(),n=ta(e._databaseId);return new wR(e._databaseId,!!t.ignoreUndefinedProperties,n)}class oa extends hu{_toFieldTransform(t){if(t.du!==2)throw t.du===1?t.pu(`${this._methodName}() can only appear at the top level of your update data`):t.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof oa}}function vR(e,t,n,r){const s=e.Su(1,t,n);Wg("Data must be an object, but it was:",s,r);const i=[],o=ge.empty();rr(r,(c,l)=>{const u=pu(t,c,n);l=ce(l);const h=s.fu(u);if(l instanceof oa)i.push(u);else{const f=ai(l,h);f!=null&&(i.push(u),o.set(u,f))}});const a=new Pe(i);return new jg(o,a,s.fieldTransforms)}function TR(e,t,n,r,s,i){const o=e.Su(1,t,n),a=[Mf(t,r,n)],c=[s];if(i.length%2!=0)throw new U(A.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Mf(t,i[f])),c.push(i[f+1]);const l=[],u=ge.empty();for(let f=a.length-1;f>=0;--f)if(!bR(l,a[f])){const m=a[f];let g=c[f];g=ce(g);const _=o.fu(m);if(g instanceof oa)l.push(m);else{const E=ai(g,_);E!=null&&(l.push(m),u.set(m,E))}}const h=new Pe(l);return new jg(u,h,o.fieldTransforms)}function AR(e,t,n,r=!1){return ai(n,e.Su(r?4:3,t))}function ai(e,t){if(Kg(e=ce(e)))return Wg("Unsupported field value:",t,e),IR(e,t);if(e instanceof hu)return function(r,s){if(!$g(s.du))throw s.pu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.pu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&t.du!==4)throw t.pu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=ai(a,s.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return d0(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Mt.fromDate(r);return{timestampValue:fo(s.serializer,i)}}if(r instanceof Mt){const i=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fo(s.serializer,i)}}if(r instanceof fu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jr)return{bytesValue:fg(s.serializer,r._byteString)};if(r instanceof ye){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zl(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.pu(`Unsupported field value: ${ra(r)}`)}(e,t)}function IR(e,t){const n={};return Fm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rr(e,(r,s)=>{const i=ai(s,t.Ru(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Kg(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Mt||e instanceof fu||e instanceof jr||e instanceof ye||e instanceof hu)}function Wg(e,t,n){if(!Kg(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ra(n);throw r==="an object"?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function Mf(e,t,n){if((t=ce(t))instanceof ia)return t._internalPath;if(typeof t=="string")return pu(e,t);throw mo("Field path arguments must be of type string or ",e,!1,void 0,n)}const RR=new RegExp("[~\\*/\\[\\]]");function pu(e,t,n){if(t.search(RR)>=0)throw mo(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ia(...t.split("."))._internalPath}catch{throw mo(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function mo(e,t,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new U(A.INVALID_ARGUMENT,a+e+c)}function bR(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new SR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(mu("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SR extends zg{data(){return super.data()}}function mu(e,t){return typeof t=="string"?pu(e,t):t instanceof ia?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new U(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gu{}class PR extends gu{}function DR(e,t,...n){let r=[];t instanceof gu&&r.push(t),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof _u).length,a=i.filter(c=>c instanceof aa).length;if(o>1||o>0&&a>0)throw new U(A.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class aa extends PR{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new aa(t,n,r)}_apply(t){const n=this._parse(t);return Hg(t._query,n),new Qr(t.firestore,t.converter,Oc(t._query,n))}_parse(t){const n=qg(t.firestore);return function(i,o,a,c,l,u,h){let f;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new U(A.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Uf(h,u);const m=[];for(const g of h)m.push(Ff(c,i,g));f={arrayValue:{values:m}}}else f=Ff(c,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Uf(h,u),f=AR(a,o,h,u==="in"||u==="not-in");return Ot.create(l,u,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Lf(e,t,n){const r=t,s=mu("where",e);return aa._create(s,r,n)}class _u extends gu{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new _u(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ne.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)Hg(o,c),o=Oc(o,c)}(t._query,n),new Qr(t.firestore,t.converter,Oc(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ff(e,t,n){if(typeof(n=ce(n))=="string"){if(n==="")throw new U(A.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gm(t)&&n.indexOf("/")!==-1)throw new U(A.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Tt.fromString(n));if(!K.isDocumentKey(r))throw new U(A.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return of(e,new K(r))}if(n instanceof ye)return of(e,n._key);throw new U(A.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ra(n)}.`)}function Uf(e,t){if(!Array.isArray(e)||e.length===0)throw new U(A.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Hg(e,t){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new U(A.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new U(A.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class VR{convertValue(t,n="none"){switch(Yn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Nt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Qn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw z()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return rr(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(t){return new fu(Nt(t.latitude),Nt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Hl(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Us(t));default:return null}}convertTimestamp(t){const n=Sn(t);return new Mt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Tt.fromString(t);wt(yg(r));const s=new Bs(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||Qe(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class xR extends zg{constructor(t,n,r,s,i,o){super(t,n,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ji(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(mu("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ji extends xR{data(t={}){return super.data(t)}}class NR{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Si(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new ji(this._firestore,this._userDataWriter,r.key,r,new Si(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new U(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new ji(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Si(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new ji(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Si(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:OR(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function OR(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}class kR extends VR{constructor(t){super(),this.firestore=t}convertBytes(t){return new jr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ye(this.firestore,null,n)}}function MR(e){e=Ks(e,Qr);const t=Ks(e.firestore,uu),n=Ug(t),r=new kR(t);return CR(e._query),fR(n,e._query).then(s=>new NR(t,r,e,s))}function LR(e,t,n,...r){e=Ks(e,ye);const s=Ks(e.firestore,uu),i=qg(s);let o;return o=typeof(t=ce(t))=="string"||t instanceof ia?TR(i,"updateDoc",e._key,t,n,r):vR(i,"updateDoc",e._key,t),FR(s,[o.toMutation(e._key,sn.exists(!0))])}function FR(e,t){return function(r,s){const i=new rn;return r.asyncQueue.enqueueAndForget(async()=>YI(await uR(r),s,i)),i.promise}(Ug(e),t)}(function(t,n=!0){(function(s){zr=s})(Cp),Cs(new Nr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new uu(new DA(r.getProvider("auth-internal")),new OA(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new U(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bs(l.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),In(tf,"4.4.1",t),In(tf,"4.4.1","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="firebasestorage.googleapis.com",Qg="storageBucket",UR=2*60*1e3,BR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt extends er{constructor(t,n,r=0){super(qa(t),`Firebase Storage: ${n} (${qa(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vt.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return qa(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dt;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dt||(Dt={}));function qa(e){return"storage/"+e}function yu(){const e="An unknown error occurred, please check the error payload for server response.";return new Vt(Dt.UNKNOWN,e)}function jR(e){return new Vt(Dt.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function $R(e){return new Vt(Dt.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qR(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Vt(Dt.UNAUTHENTICATED,e)}function KR(){return new Vt(Dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function WR(e){return new Vt(Dt.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function zR(){return new Vt(Dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HR(){return new Vt(Dt.CANCELED,"User canceled the upload/download.")}function GR(e){return new Vt(Dt.INVALID_URL,"Invalid URL '"+e+"'.")}function QR(e){return new Vt(Dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function YR(){return new Vt(Dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qg+"' property when initializing the app?")}function XR(){return new Vt(Dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function JR(){return new Vt(Dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ZR(e){return new Vt(Dt.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $c(e){return new Vt(Dt.INVALID_ARGUMENT,e)}function Yg(){return new Vt(Dt.APP_DELETED,"The Firebase app was deleted.")}function tb(e){return new Vt(Dt.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ts(e,t){return new Vt(Dt.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ss(e){throw new Vt(Dt.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=ae.makeFromUrl(t,n)}catch{return new ae(t,"")}if(r.path==="")return r;throw QR(t)}static makeFromUrl(t,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function l(B){B.path_=decodeURIComponent(B.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${u}/b/${s}/o${f}`,"i"),g={bucket:1,path:3},_=n===Gg?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",R=new RegExp(`^https?://${_}/${s}/${E}`,"i"),x=[{regex:a,indices:c,postModify:i},{regex:m,indices:g,postModify:l},{regex:R,indices:{bucket:1,path:2},postModify:l}];for(let B=0;B<x.length;B++){const at=x[B],$=at.regex.exec(t);if($){const At=$[at.indices.bucket];let H=$[at.indices.path];H||(H=""),r=new ae(At,H),at.postModify(r);break}}if(r==null)throw GR(t);return r}}class eb{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(e,t,n){let r=1,s=null,i=null,o=!1,a=0;function c(){return a===2}let l=!1;function u(...E){l||(l=!0,t.apply(null,E))}function h(E){s=setTimeout(()=>{s=null,e(m,c())},E)}function f(){i&&clearTimeout(i)}function m(E,...R){if(l){f();return}if(E){f(),u.call(null,E,...R);return}if(c()||o){f(),u.call(null,E,...R);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,h(x)}let g=!1;function _(E){g||(g=!0,f(),!l&&(s!==null?(E||(a=2),clearTimeout(s),h(0)):E||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function rb(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(e){return e!==void 0}function ib(e){return typeof e=="object"&&!Array.isArray(e)}function Eu(e){return typeof e=="string"||e instanceof String}function Bf(e){return wu()&&e instanceof Blob}function wu(){return typeof Blob<"u"}function qc(e,t,n,r){if(r<t)throw $c(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw $c(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Xg(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const s=t(r)+"="+t(e[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kn;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Kn||(Kn={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(e,t){const n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,i=t.indexOf(e)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t,n,r,s,i,o,a,c,l,u,h,f=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const t=(r,s)=>{if(s){r(!1,new Ci(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Kn.NO_ERROR,c=i.getStatus();if(!a||ob(c,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Kn.ABORT;r(!1,new Ci(!1,null,u));return}const l=this.successCodes_.indexOf(c)!==-1;r(!0,new Ci(l,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());sb(c)?i(c):i()}catch(c){o(c)}else if(a!==null){const c=yu();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){const c=this.appDelete_?Yg():HR();o(c)}else{const c=zR();o(c)}};this.canceled_?n(!1,new Ci(!1,null,!0)):this.backoffId_=nb(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&rb(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ci{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function cb(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function lb(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function ub(e,t){t&&(e["X-Firebase-GMPID"]=t)}function hb(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function fb(e,t,n,r,s,i,o=!0){const a=Xg(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return ub(l,t),cb(l,n),lb(l,i),hb(l,r),new ab(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pb(...e){const t=db();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(wu())return new Blob(e);throw new Vt(Dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function mb(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(e){if(typeof atob>"u")throw ZR("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ka{constructor(t,n){this.data=t,this.contentType=n||null}}function _b(e,t){switch(e){case Ke.RAW:return new Ka(Jg(t));case Ke.BASE64:case Ke.BASE64URL:return new Ka(Zg(e,t));case Ke.DATA_URL:return new Ka(Eb(t),wb(t))}throw yu()}function Jg(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const i=r,o=e.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function yb(e){let t;try{t=decodeURIComponent(e)}catch{throw Ts(Ke.DATA_URL,"Malformed data URL.")}return Jg(t)}function Zg(e,t){switch(e){case Ke.BASE64:{const s=t.indexOf("-")!==-1,i=t.indexOf("_")!==-1;if(s||i)throw Ts(e,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ke.BASE64URL:{const s=t.indexOf("+")!==-1,i=t.indexOf("/")!==-1;if(s||i)throw Ts(e,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=gb(t)}catch(s){throw s.message.includes("polyfill")?s:Ts(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class t_{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Ts(Ke.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=vb(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function Eb(e){const t=new t_(e);return t.base64?Zg(Ke.BASE64,t.rest):yb(t.rest)}function wb(e){return new t_(e).contentType}function vb(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t,n){let r=0,s="";Bf(t)?(this.data_=t,r=t.size,s=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,n){if(Bf(this.data_)){const r=this.data_,s=mb(r,t,n);return s===null?null:new yn(s)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new yn(r,!0)}}static getBlob(...t){if(wu()){const n=t.map(r=>r instanceof yn?r.data_:r);return new yn(pb.apply(null,n))}else{const n=t.map(o=>Eu(o)?_b(Ke.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new yn(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(e){let t;try{t=JSON.parse(e)}catch{return null}return ib(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Ab(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function e_(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(e,t){return t}class se{constructor(t,n,r,s){this.server=t,this.local=n||t,this.writable=!!r,this.xform=s||Ib}}let Pi=null;function Rb(e){return!Eu(e)||e.length<2?e:e_(e)}function n_(){if(Pi)return Pi;const e=[];e.push(new se("bucket")),e.push(new se("generation")),e.push(new se("metageneration")),e.push(new se("name","fullPath",!0));function t(i,o){return Rb(o)}const n=new se("name");n.xform=t,e.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new se("size");return s.xform=r,e.push(s),e.push(new se("timeCreated")),e.push(new se("updated")),e.push(new se("md5Hash",null,!0)),e.push(new se("cacheControl",null,!0)),e.push(new se("contentDisposition",null,!0)),e.push(new se("contentEncoding",null,!0)),e.push(new se("contentLanguage",null,!0)),e.push(new se("contentType",null,!0)),e.push(new se("metadata","customMetadata",!0)),Pi=e,Pi}function bb(e,t){function n(){const r=e.bucket,s=e.fullPath,i=new ae(r,s);return t._makeStorageReference(i)}Object.defineProperty(e,"ref",{get:n})}function Sb(e,t,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,t[o.server])}return bb(r,e),r}function r_(e,t,n){const r=vu(t);return r===null?null:Sb(e,r,n)}function Cb(e,t,n,r){const s=vu(t);if(s===null||!Eu(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(l=>{const u=e.bucket,h=e.fullPath,f="/b/"+o(u)+"/o/"+o(h),m=ci(f,n,r),g=Xg({alt:"media",token:l});return m+g})[0]}function Pb(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const i=t[s];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="prefixes",$f="items";function Db(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[jf])for(const s of n[jf]){const i=s.replace(/\/$/,""),o=e._makeStorageReference(new ae(t,i));r.prefixes.push(o)}if(n[$f])for(const s of n[$f]){const i=e._makeStorageReference(new ae(t,s.name));r.items.push(i)}return r}function Vb(e,t,n){const r=vu(n);return r===null?null:Db(e,t,r)}class ca{constructor(t,n,r,s){this.url=t,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(e){if(!e)throw yu()}function xb(e,t){function n(r,s){const i=r_(e,s,t);return Tu(i!==null),i}return n}function Nb(e,t){function n(r,s){const i=Vb(e,t,s);return Tu(i!==null),i}return n}function Ob(e,t){function n(r,s){const i=r_(e,s,t);return Tu(i!==null),Cb(i,s,e.host,e._protocol)}return n}function Au(e){function t(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=KR():s=qR():n.getStatus()===402?s=$R(e.bucket):n.getStatus()===403?s=WR(e.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return t}function s_(e){const t=Au(e);function n(r,s){let i=t(r,s);return r.getStatus()===404&&(i=jR(e.path)),i.serverResponse=s.serverResponse,i}return n}function kb(e,t,n,r,s){const i={};t.isRoot?i.prefix="":i.prefix=t.path+"/",n&&n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),s&&(i.maxResults=s);const o=t.bucketOnlyServerUrl(),a=ci(o,e.host,e._protocol),c="GET",l=e.maxOperationRetryTime,u=new ca(a,c,Nb(e,t.bucket),l);return u.urlParams=i,u.errorHandler=Au(t),u}function Mb(e,t,n){const r=t.fullServerUrl(),s=ci(r,e.host,e._protocol),i="GET",o=e.maxOperationRetryTime,a=new ca(s,i,Ob(e,n),o);return a.errorHandler=s_(t),a}function Lb(e,t){const n=t.fullServerUrl(),r=ci(n,e.host,e._protocol),s="DELETE",i=e.maxOperationRetryTime;function o(c,l){}const a=new ca(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=s_(t),a}function Fb(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Ub(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=Fb(null,t)),r}function Bb(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let B=0;B<2;B++)x=x+Math.random().toString().slice(2);return x}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const l=Ub(t,r,s),u=Pb(l,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,f=`\r
--`+c+"--",m=yn.getBlob(h,r,f);if(m===null)throw XR();const g={name:l.fullPath},_=ci(i,e.host,e._protocol),E="POST",R=e.maxUploadRetryTime,P=new ca(_,E,xb(e,n),R);return P.urlParams=g,P.headers=o,P.body=m.uploadData(),P.errorHandler=Au(t),P}class jb{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kn.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kn.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kn.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,s){if(this.sent_)throw ss("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ss("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ss("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ss("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ss("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class $b extends jb{initXhr(){this.xhr_.responseType="text"}}function la(){return new $b}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t,n){this._service=t,n instanceof ae?this._location=n:this._location=ae.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Xn(t,n)}get root(){const t=new ae(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return e_(this._location.path)}get storage(){return this._service}get parent(){const t=Tb(this._location.path);if(t===null)return null;const n=new ae(this._location.bucket,t);return new Xn(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw tb(t)}}function qb(e,t,n){e._throwIfRoot("uploadBytes");const r=Bb(e.storage,e._location,n_(),new yn(t,!0),n);return e.storage.makeRequestWithTokens(r,la).then(s=>({metadata:s,ref:e}))}function Kb(e,t){t!=null&&typeof t.maxResults=="number"&&qc("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=kb(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,la)}function Wb(e){e._throwIfRoot("getDownloadURL");const t=Mb(e.storage,e._location,n_());return e.storage.makeRequestWithTokens(t,la).then(n=>{if(n===null)throw JR();return n})}function zb(e){e._throwIfRoot("deleteObject");const t=Lb(e.storage,e._location);return e.storage.makeRequestWithTokens(t,la)}function Hb(e,t){const n=Ab(e._location.path,t),r=new ae(e._location.bucket,n);return new Xn(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(e){return/^[A-Za-z]+:\/\//.test(e)}function Qb(e,t){return new Xn(e,t)}function i_(e,t){if(e instanceof Iu){const n=e;if(n._bucket==null)throw YR();const r=new Xn(n,n._bucket);return t!=null?i_(r,t):r}else return t!==void 0?Hb(e,t):e}function Yb(e,t){if(t&&Gb(t)){if(e instanceof Iu)return Qb(e,t);throw $c("To use ref(service, url), the first argument must be a Storage instance.")}else return i_(e,t)}function qf(e,t){const n=t==null?void 0:t[Qg];return n==null?null:ae.makeFromBucketSpec(n,e)}function Xb(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken=typeof s=="string"?s:vp(s,e.app.options.projectId))}class Iu{constructor(t,n,r,s,i){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Gg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=UR,this._maxUploadRetryTime=BR,this._requests=new Set,s!=null?this._bucket=ae.makeFromBucketSpec(s,this._host):this._bucket=qf(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ae.makeFromBucketSpec(this._url,t):this._bucket=qf(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){qc("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){qc("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Xn(this,t)}_makeRequest(t,n,r,s,i=!0){if(this._deleted)return new eb(Yg());{const o=fb(t,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,s).getPromise()}}const Kf="@firebase/storage",Wf="0.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="storage";function zf(e,t,n){return e=ce(e),qb(e,t,n)}function Hf(e,t){return e=ce(e),Kb(e,t)}function Gf(e){return e=ce(e),Wb(e)}function Jb(e){return e=ce(e),zb(e)}function Di(e,t){return e=ce(e),Yb(e,t)}function Zb(e=Dp(),t){e=ce(e);const r=Sp(e,o_).getImmediate({identifier:t}),s=Ep("storage");return s&&tS(r,...s),r}function tS(e,t,n,r={}){Xb(e,t,n,r)}function eS(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Iu(n,r,s,t,Cp)}function nS(){Cs(new Nr(o_,eS,"PUBLIC").setMultipleInstances(!0)),In(Kf,Wf,""),In(Kf,Wf,"esm2017")}nS();const rS={apiKey:"AIzaSyD6xyq5OpN70Z8r3UYRbTCTpKRixzsmPf0",authDomain:"voice-recording-1fc90.firebaseapp.com",projectId:"voice-recording-1fc90",storageBucket:"voice-recording-1fc90.appspot.com",messagingSenderId:"222717438916",appId:"1:222717438916:web:1d8e1fd4fd4e7ef4b59291"};Pp(rS);const a_=yR(),Vi=Zb(),sS={id:"login"},iS=ct("div",{class:"center pad"},[ct("h2",null,"User Login")],-1),oS={class:"center pad"},aS={class:"center pad"},cS={key:0,class:"center pad"},lS=ct("p",null,"wrong password please try again",-1),uS=[lS],hS={key:1,class:"center pad"},fS=ct("p",null,"(make sure neptun code is in capital letter)",-1),dS=[fS],pS={__name:"login",props:{id:{},idModifiers:{},password:{},passwordModifiers:{}},emits:["update:id","update:password"],setup(e){fl(()=>{var i=sessionStorage.getItem("neptun");i&&_o.push("/audio")});const t=yr(!1),n=rh(e,"id"),r=rh(e,"password"),s=async()=>{const i=DR(mR(a_,"user"),Lf("neptun","==",n.value),Lf("password","==",r.value));await MR(i).then(o=>{if(o.empty)console.log("No such document!"),t.value=!0;else{const a=o.docs[0].data();sessionStorage.setItem("neptun",a.neptun),sessionStorage.setItem("id",o.docs[0].id),a.textComplete?sessionStorage.setItem("textComplete",a.textComplete):sessionStorage.setItem("textComplete",0),_o.push("/audio")}})};return(i,o)=>(we(),Le("div",sS,[iS,ct("div",oS,[Ku(ct("input",{type:"text",placeholder:"neptun ID","onUpdate:modelValue":o[0]||(o[0]=a=>n.value=a)},null,512),[[dh,n.value]])]),ct("div",aS,[Ku(ct("input",{type:"password",placeholder:"password","onUpdate:modelValue":o[1]||(o[1]=a=>r.value=a)},null,512),[[dh,r.value]])]),ct("div",{class:"center pad"},[ct("button",{onClick:s},"login")]),t.value?(we(),Le("div",cS,uS)):Er("",!0),t.value?(we(),Le("div",hS,dS)):Er("",!0)]))}};function c_(e,t){return function(){return e.apply(t,arguments)}}const{toString:mS}=Object.prototype,{getPrototypeOf:Ru}=Object,ua=(e=>t=>{const n=mS.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Xe=e=>(e=e.toLowerCase(),t=>ua(t)===e),ha=e=>t=>typeof t===e,{isArray:Yr}=Array,Ws=ha("undefined");function gS(e){return e!==null&&!Ws(e)&&e.constructor!==null&&!Ws(e.constructor)&&Ae(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const l_=Xe("ArrayBuffer");function _S(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&l_(e.buffer),t}const yS=ha("string"),Ae=ha("function"),u_=ha("number"),fa=e=>e!==null&&typeof e=="object",ES=e=>e===!0||e===!1,$i=e=>{if(ua(e)!=="object")return!1;const t=Ru(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},wS=Xe("Date"),vS=Xe("File"),TS=Xe("Blob"),AS=Xe("FileList"),IS=e=>fa(e)&&Ae(e.pipe),RS=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ae(e.append)&&((t=ua(e))==="formdata"||t==="object"&&Ae(e.toString)&&e.toString()==="[object FormData]"))},bS=Xe("URLSearchParams"),SS=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function li(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Yr(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let a;for(r=0;r<o;r++)a=i[r],t.call(null,e[a],a,e)}}function h_(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const f_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,d_=e=>!Ws(e)&&e!==f_;function Kc(){const{caseless:e}=d_(this)&&this||{},t={},n=(r,s)=>{const i=e&&h_(t,s)||s;$i(t[i])&&$i(r)?t[i]=Kc(t[i],r):$i(r)?t[i]=Kc({},r):Yr(r)?t[i]=r.slice():t[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&li(arguments[r],n);return t}const CS=(e,t,n,{allOwnKeys:r}={})=>(li(t,(s,i)=>{n&&Ae(s)?e[i]=c_(s,n):e[i]=s},{allOwnKeys:r}),e),PS=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),DS=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},VS=(e,t,n,r)=>{let s,i,o;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!r||r(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&Ru(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},xS=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},NS=e=>{if(!e)return null;if(Yr(e))return e;let t=e.length;if(!u_(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},OS=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ru(Uint8Array)),kS=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=r.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},MS=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},LS=Xe("HTMLFormElement"),FS=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Qf=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),US=Xe("RegExp"),p_=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};li(n,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(r[i]=o||s)}),Object.defineProperties(e,r)},BS=e=>{p_(e,(t,n)=>{if(Ae(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Ae(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},jS=(e,t)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Yr(e)?r(e):r(String(e).split(t)),n},$S=()=>{},qS=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Wa="abcdefghijklmnopqrstuvwxyz",Yf="0123456789",m_={DIGIT:Yf,ALPHA:Wa,ALPHA_DIGIT:Wa+Wa.toUpperCase()+Yf},KS=(e=16,t=m_.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function WS(e){return!!(e&&Ae(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const zS=e=>{const t=new Array(10),n=(r,s)=>{if(fa(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const i=Yr(r)?[]:{};return li(r,(o,a)=>{const c=n(o,s+1);!Ws(c)&&(i[a]=c)}),t[s]=void 0,i}}return r};return n(e,0)},HS=Xe("AsyncFunction"),GS=e=>e&&(fa(e)||Ae(e))&&Ae(e.then)&&Ae(e.catch),v={isArray:Yr,isArrayBuffer:l_,isBuffer:gS,isFormData:RS,isArrayBufferView:_S,isString:yS,isNumber:u_,isBoolean:ES,isObject:fa,isPlainObject:$i,isUndefined:Ws,isDate:wS,isFile:vS,isBlob:TS,isRegExp:US,isFunction:Ae,isStream:IS,isURLSearchParams:bS,isTypedArray:OS,isFileList:AS,forEach:li,merge:Kc,extend:CS,trim:SS,stripBOM:PS,inherits:DS,toFlatObject:VS,kindOf:ua,kindOfTest:Xe,endsWith:xS,toArray:NS,forEachEntry:kS,matchAll:MS,isHTMLForm:LS,hasOwnProperty:Qf,hasOwnProp:Qf,reduceDescriptors:p_,freezeMethods:BS,toObjectSet:jS,toCamelCase:FS,noop:$S,toFiniteNumber:qS,findKey:h_,global:f_,isContextDefined:d_,ALPHABET:m_,generateString:KS,isSpecCompliantForm:WS,toJSONObject:zS,isAsyncFn:HS,isThenable:GS};function st(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}v.inherits(st,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:v.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const g_=st.prototype,__={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{__[e]={value:e}});Object.defineProperties(st,__);Object.defineProperty(g_,"isAxiosError",{value:!0});st.from=(e,t,n,r,s,i)=>{const o=Object.create(g_);return v.toFlatObject(e,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),st.call(o,e.message,t,n,r,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const QS=null;function Wc(e){return v.isPlainObject(e)||v.isArray(e)}function y_(e){return v.endsWith(e,"[]")?e.slice(0,-2):e}function Xf(e,t,n){return e?e.concat(t).map(function(s,i){return s=y_(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function YS(e){return v.isArray(e)&&!e.some(Wc)}const XS=v.toFlatObject(v,{},null,function(t){return/^is[A-Z]/.test(t)});function da(e,t,n){if(!v.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=v.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,E){return!v.isUndefined(E[_])});const r=n.metaTokens,s=n.visitor||u,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&v.isSpecCompliantForm(t);if(!v.isFunction(s))throw new TypeError("visitor must be a function");function l(g){if(g===null)return"";if(v.isDate(g))return g.toISOString();if(!c&&v.isBlob(g))throw new st("Blob is not supported. Use a Buffer instead.");return v.isArrayBuffer(g)||v.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,_,E){let R=g;if(g&&!E&&typeof g=="object"){if(v.endsWith(_,"{}"))_=r?_:_.slice(0,-2),g=JSON.stringify(g);else if(v.isArray(g)&&YS(g)||(v.isFileList(g)||v.endsWith(_,"[]"))&&(R=v.toArray(g)))return _=y_(_),R.forEach(function(x,B){!(v.isUndefined(x)||x===null)&&t.append(o===!0?Xf([_],B,i):o===null?_:_+"[]",l(x))}),!1}return Wc(g)?!0:(t.append(Xf(E,_,i),l(g)),!1)}const h=[],f=Object.assign(XS,{defaultVisitor:u,convertValue:l,isVisitable:Wc});function m(g,_){if(!v.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+_.join("."));h.push(g),v.forEach(g,function(R,P){(!(v.isUndefined(R)||R===null)&&s.call(t,R,v.isString(P)?P.trim():P,_,f))===!0&&m(R,_?_.concat(P):[P])}),h.pop()}}if(!v.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Jf(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function bu(e,t){this._pairs=[],e&&da(e,this,t)}const E_=bu.prototype;E_.append=function(t,n){this._pairs.push([t,n])};E_.toString=function(t){const n=t?function(r){return t.call(this,r,Jf)}:Jf;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function JS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function w_(e,t,n){if(!t)return e;const r=n&&n.encode||JS,s=n&&n.serialize;let i;if(s?i=s(t,n):i=v.isURLSearchParams(t)?t.toString():new bu(t,n).toString(r),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Zf{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){v.forEach(this.handlers,function(r){r!==null&&t(r)})}}const v_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ZS=typeof URLSearchParams<"u"?URLSearchParams:bu,tC=typeof FormData<"u"?FormData:null,eC=typeof Blob<"u"?Blob:null,nC={isBrowser:!0,classes:{URLSearchParams:ZS,FormData:tC,Blob:eC},protocols:["http","https","file","blob","url","data"]},T_=typeof window<"u"&&typeof document<"u",rC=(e=>T_&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),sC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",iC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:T_,hasStandardBrowserEnv:rC,hasStandardBrowserWebWorkerEnv:sC},Symbol.toStringTag,{value:"Module"})),We={...iC,...nC};function oC(e,t){return da(e,new We.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return We.isNode&&v.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function aC(e){return v.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function cC(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}function A_(e){function t(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=i>=n.length;return o=!o&&v.isArray(s)?s.length:o,c?(v.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!v.isObject(s[o]))&&(s[o]=[]),t(n,r,s[o],i)&&v.isArray(s[o])&&(s[o]=cC(s[o])),!a)}if(v.isFormData(e)&&v.isFunction(e.entries)){const n={};return v.forEachEntry(e,(r,s)=>{t(aC(r),s,n,0)}),n}return null}function lC(e,t,n){if(v.isString(e))try{return(t||JSON.parse)(e),v.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Su={transitional:v_,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=v.isObject(t);if(i&&v.isHTMLForm(t)&&(t=new FormData(t)),v.isFormData(t))return s?JSON.stringify(A_(t)):t;if(v.isArrayBuffer(t)||v.isBuffer(t)||v.isStream(t)||v.isFile(t)||v.isBlob(t))return t;if(v.isArrayBufferView(t))return t.buffer;if(v.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return oC(t,this.formSerializer).toString();if((a=v.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return da(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),lC(t)):t}],transformResponse:[function(t){const n=this.transitional||Su.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(t&&v.isString(t)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?st.from(a,st.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:We.classes.FormData,Blob:We.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};v.forEach(["delete","get","head","post","put","patch"],e=>{Su.headers[e]={}});const Cu=Su,uC=v.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),hC=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||t[n]&&uC[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},td=Symbol("internals");function is(e){return e&&String(e).trim().toLowerCase()}function qi(e){return e===!1||e==null?e:v.isArray(e)?e.map(qi):String(e)}function fC(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const dC=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function za(e,t,n,r,s){if(v.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!v.isString(t)){if(v.isString(r))return t.indexOf(r)!==-1;if(v.isRegExp(r))return r.test(t)}}function pC(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function mC(e,t){const n=v.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,i,o){return this[r].call(this,t,s,i,o)},configurable:!0})})}class pa{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function i(a,c,l){const u=is(c);if(!u)throw new Error("header name must be a non-empty string");const h=v.findKey(s,u);(!h||s[h]===void 0||l===!0||l===void 0&&s[h]!==!1)&&(s[h||c]=qi(a))}const o=(a,c)=>v.forEach(a,(l,u)=>i(l,u,c));return v.isPlainObject(t)||t instanceof this.constructor?o(t,n):v.isString(t)&&(t=t.trim())&&!dC(t)?o(hC(t),n):t!=null&&i(n,t,r),this}get(t,n){if(t=is(t),t){const r=v.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return fC(s);if(v.isFunction(n))return n.call(this,s,r);if(v.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=is(t),t){const r=v.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||za(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function i(o){if(o=is(o),o){const a=v.findKey(r,o);a&&(!n||za(r,r[a],a,n))&&(delete r[a],s=!0)}}return v.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!t||za(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,r={};return v.forEach(this,(s,i)=>{const o=v.findKey(r,i);if(o){n[o]=qi(s),delete n[i];return}const a=t?pC(i):String(i).trim();a!==i&&delete n[i],n[a]=qi(s),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return v.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&v.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[td]=this[td]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=is(o);r[a]||(mC(s,o),r[a]=!0)}return v.isArray(t)?t.forEach(i):i(t),this}}pa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);v.reduceDescriptors(pa.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});v.freezeMethods(pa);const on=pa;function Ha(e,t){const n=this||Cu,r=t||n,s=on.from(r.headers);let i=r.data;return v.forEach(e,function(a){i=a.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function I_(e){return!!(e&&e.__CANCEL__)}function ui(e,t,n){st.call(this,e??"canceled",st.ERR_CANCELED,t,n),this.name="CanceledError"}v.inherits(ui,st,{__CANCEL__:!0});function gC(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new st("Request failed with status code "+n.status,[st.ERR_BAD_REQUEST,st.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const _C=We.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const o=[e+"="+encodeURIComponent(t)];v.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),v.isString(r)&&o.push("path="+r),v.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yC(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function EC(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function R_(e,t){return e&&!yC(t)?EC(e,t):t}const wC=We.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=v.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function vC(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function TC(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),u=r[i];o||(o=l),n[s]=c,r[s]=l;let h=i,f=0;for(;h!==s;)f+=n[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-o<t)return;const m=u&&l-u;return m?Math.round(f*1e3/m):void 0}}function ed(e,t){let n=0;const r=TC(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,c=r(a),l=i<=o;n=i;const u={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&l?(o-i)/c:void 0,event:s};u[t?"download":"upload"]=!0,e(u)}}const AC=typeof XMLHttpRequest<"u",IC=AC&&function(e){return new Promise(function(n,r){let s=e.data;const i=on.from(e.headers).normalize();let{responseType:o,withXSRFToken:a}=e,c;function l(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}let u;if(v.isFormData(s)){if(We.hasStandardBrowserEnv||We.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((u=i.getContentType())!==!1){const[_,...E]=u?u.split(";").map(R=>R.trim()).filter(Boolean):[];i.setContentType([_||"multipart/form-data",...E].join("; "))}}let h=new XMLHttpRequest;if(e.auth){const _=e.auth.username||"",E=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(_+":"+E))}const f=R_(e.baseURL,e.url);h.open(e.method.toUpperCase(),w_(f,e.params,e.paramsSerializer),!0),h.timeout=e.timeout;function m(){if(!h)return;const _=on.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),R={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:_,config:e,request:h};gC(function(x){n(x),l()},function(x){r(x),l()},R),h=null}if("onloadend"in h?h.onloadend=m:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(m)},h.onabort=function(){h&&(r(new st("Request aborted",st.ECONNABORTED,e,h)),h=null)},h.onerror=function(){r(new st("Network Error",st.ERR_NETWORK,e,h)),h=null},h.ontimeout=function(){let E=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const R=e.transitional||v_;e.timeoutErrorMessage&&(E=e.timeoutErrorMessage),r(new st(E,R.clarifyTimeoutError?st.ETIMEDOUT:st.ECONNABORTED,e,h)),h=null},We.hasStandardBrowserEnv&&(a&&v.isFunction(a)&&(a=a(e)),a||a!==!1&&wC(f))){const _=e.xsrfHeaderName&&e.xsrfCookieName&&_C.read(e.xsrfCookieName);_&&i.set(e.xsrfHeaderName,_)}s===void 0&&i.setContentType(null),"setRequestHeader"in h&&v.forEach(i.toJSON(),function(E,R){h.setRequestHeader(R,E)}),v.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),o&&o!=="json"&&(h.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&h.addEventListener("progress",ed(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",ed(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=_=>{h&&(r(!_||_.type?new ui(null,e,h):_),h.abort(),h=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const g=vC(f);if(g&&We.protocols.indexOf(g)===-1){r(new st("Unsupported protocol "+g+":",st.ERR_BAD_REQUEST,e));return}h.send(s||null)})},zc={http:QS,xhr:IC};v.forEach(zc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const nd=e=>`- ${e}`,RC=e=>v.isFunction(e)||e===null||e===!1,b_={getAdapter:e=>{e=v.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let i=0;i<t;i++){n=e[i];let o;if(r=n,!RC(n)&&(r=zc[(o=String(n)).toLowerCase()],r===void 0))throw new st(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(nd).join(`
`):" "+nd(i[0]):"as no adapter specified";throw new st("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:zc};function Ga(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ui(null,e)}function rd(e){return Ga(e),e.headers=on.from(e.headers),e.data=Ha.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),b_.getAdapter(e.adapter||Cu.adapter)(e).then(function(r){return Ga(e),r.data=Ha.call(e,e.transformResponse,r),r.headers=on.from(r.headers),r},function(r){return I_(r)||(Ga(e),r&&r.response&&(r.response.data=Ha.call(e,e.transformResponse,r.response),r.response.headers=on.from(r.response.headers))),Promise.reject(r)})}const sd=e=>e instanceof on?e.toJSON():e;function $r(e,t){t=t||{};const n={};function r(l,u,h){return v.isPlainObject(l)&&v.isPlainObject(u)?v.merge.call({caseless:h},l,u):v.isPlainObject(u)?v.merge({},u):v.isArray(u)?u.slice():u}function s(l,u,h){if(v.isUndefined(u)){if(!v.isUndefined(l))return r(void 0,l,h)}else return r(l,u,h)}function i(l,u){if(!v.isUndefined(u))return r(void 0,u)}function o(l,u){if(v.isUndefined(u)){if(!v.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function a(l,u,h){if(h in t)return r(l,u);if(h in e)return r(void 0,l)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u)=>s(sd(l),sd(u),!0)};return v.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=c[u]||s,f=h(e[u],t[u],u);v.isUndefined(f)&&h!==a||(n[u]=f)}),n}const S_="1.6.7",Pu={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Pu[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const id={};Pu.transitional=function(t,n,r){function s(i,o){return"[Axios v"+S_+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(t===!1)throw new st(s(o," has been removed"+(n?" in "+n:"")),st.ERR_DEPRECATED);return n&&!id[o]&&(id[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,a):!0}};function bC(e,t,n){if(typeof e!="object")throw new st("options must be an object",st.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],o=t[i];if(o){const a=e[i],c=a===void 0||o(a,i,e);if(c!==!0)throw new st("option "+i+" must be "+c,st.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new st("Unknown option "+i,st.ERR_BAD_OPTION)}}const Hc={assertOptions:bC,validators:Pu},dn=Hc.validators;class go{constructor(t){this.defaults=t,this.interceptors={request:new Zf,response:new Zf}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=$r(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Hc.assertOptions(r,{silentJSONParsing:dn.transitional(dn.boolean),forcedJSONParsing:dn.transitional(dn.boolean),clarifyTimeoutError:dn.transitional(dn.boolean)},!1),s!=null&&(v.isFunction(s)?n.paramsSerializer={serialize:s}:Hc.assertOptions(s,{encode:dn.function,serialize:dn.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&v.merge(i.common,i[n.method]);i&&v.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=on.concat(o,i);const a=[];let c=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(c=c&&_.synchronous,a.unshift(_.fulfilled,_.rejected))});const l=[];this.interceptors.response.forEach(function(_){l.push(_.fulfilled,_.rejected)});let u,h=0,f;if(!c){const g=[rd.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,l),f=g.length,u=Promise.resolve(n);h<f;)u=u.then(g[h++],g[h++]);return u}f=a.length;let m=n;for(h=0;h<f;){const g=a[h++],_=a[h++];try{m=g(m)}catch(E){_.call(this,E);break}}try{u=rd.call(this,m)}catch(g){return Promise.reject(g)}for(h=0,f=l.length;h<f;)u=u.then(l[h++],l[h++]);return u}getUri(t){t=$r(this.defaults,t);const n=R_(t.baseURL,t.url);return w_(n,t.params,t.paramsSerializer)}}v.forEach(["delete","get","head","options"],function(t){go.prototype[t]=function(n,r){return this.request($r(r||{},{method:t,url:n,data:(r||{}).data}))}});v.forEach(["post","put","patch"],function(t){function n(r){return function(i,o,a){return this.request($r(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}go.prototype[t]=n(),go.prototype[t+"Form"]=n(!0)});const Ki=go;class Du{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i,o,a){r.reason||(r.reason=new ui(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Du(function(s){t=s}),cancel:t}}}const SC=Du;function CC(e){return function(n){return e.apply(null,n)}}function PC(e){return v.isObject(e)&&e.isAxiosError===!0}const Gc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gc).forEach(([e,t])=>{Gc[t]=e});const DC=Gc;function C_(e){const t=new Ki(e),n=c_(Ki.prototype.request,t);return v.extend(n,Ki.prototype,t,{allOwnKeys:!0}),v.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return C_($r(e,s))},n}const kt=C_(Cu);kt.Axios=Ki;kt.CanceledError=ui;kt.CancelToken=SC;kt.isCancel=I_;kt.VERSION=S_;kt.toFormData=da;kt.AxiosError=st;kt.Cancel=kt.CanceledError;kt.all=function(t){return Promise.all(t)};kt.spread=CC;kt.isAxiosError=PC;kt.mergeConfig=$r;kt.AxiosHeaders=on;kt.formToJSON=e=>A_(v.isHTMLForm(e)?new FormData(e):e);kt.getAdapter=b_.getAdapter;kt.HttpStatusCode=DC;kt.default=kt;const VC="data:text/plain;base64,YWNlciAgKMOhY2VyKQ0KYWVzY3VsdXMgICjDqXN6a3VsdXN6KQ0KYWlsYW50aHVzICAoYWppbGFudHVzeikNCmFsbnVzICAow6FsbnVzeikNCmFtYnJvc2lhICAoYW1icsOzemlhKQ0KYXJ0ZW1pc2lhICAoYXJ0ZW3DrXppYSkNCmFzdGVyYWNlYWUgIChhc3p0ZXLDoWNlasOpKQ0KYmV0dWxhICAoYmV0dWxhKQ0KY2FubmFiYWNlYWUgIChrYW5uYWLDoWNlasOpKQ0KY2FycGludXMgIChrYXJww61udXN6KQ0KY2FzdGFuZWEgIChrYXN6dGFueWUpDQpjaGVub3BvZGlhY2VhZSAgKGtlbm9wb2Rpw6FjZWrDqSkNCmNvcnlsdXMgIChrb3JpbHVzeikNCmN1cHJlc3NhY2VhZSAgKGt1cHJlc3N6w6FjZWrDqSkNCnRheGFjZWFlICAodGF4w6FjZWrDqSkNCmZhYmFjZWFlICAoZmFiw6FjZWrDqSkNCmdsZWRpdHNpYSAgKGdsZWTDrWNpYSkNCnJvYmluaWEgIChyb2LDrW5pYSkNCnNvcGhvcmEgIChzem9mw7NyYSkNCmFtb3JwaGEgIChhbW9yZmEpDQpmYWd1cyAgKGbDoWd1c3opDQpmcmF4aW51cyAgKGZyYXjDrW51c3opDQpqdWdsYW5zICAoanVnbGFuc3opDQptb3JhY2VhZSAgKG1vcsOhY2Vqw6kpDQpvbGVhY2VhZSAgKG9sZcOhY2Vqw6kpDQpwaW5hY2VhZSAgKHDDrW7DoWNlasOpKQ0KcGxhbnRhZ28gIChwbGFudMOhZ8OzKQ0KcGxhdGFudXMgIChwbGF0w6FudXN6KQ0KcG9hY2VhZSAgKHBvw6FjZWrDqSkNCnBvcHVsdXMgIChwb3B1bHVzeikNCnF1ZXJjdXMgIChrdmVya3VzeikNCnJ1bWV4ICAocnVtZXgpDQpzYWxpeCAgKHN6YWxpeCkNCnNhbWJ1Y3VzICAoc3phbWLDumt1c3opDQp0aWxpYSAgKHTDrWxpYSkNCnVsbXVzICAow7psbXVzeikNCnVtYmVsbGlmZXJhZSAgKHVtYmVsbGlmZXLDqSkNCnVydGljYWNlYWUgICjDunJ0aWvDoWNlasOpKQ0KY2VsdGlzICAoY2VsdGlzeikNCmN5cGVyYWNlYWUgIChjaXBlcsOhY2Vqw6kpDQp0eXBoYSAgKHRpZmEpDQp4YW50aGl1bSAgKHhhbnRpdW0pDQppdmEgIChpdmEpDQpvc3RyeWEgIChvc3p0cmlqYSkNCmdpbmtnbyAgKGdpbmvDsykNCmV1cm9wYWVhICAoZXVyw7NwZWEpDQplZ3nDqWINCmlzbWVyZXRsZW4NCmFlc2MgICjDqXN6aykNCmFpbCAgKGFpbCkNCmFsbiAgKGFsbikNCmFtYiAgKGFtYikNCmFydCAgKGFydCkNCmFzdGVyICAoYXN6dGVyKQ0KYmV0ICAoYmV0KQ0KY2FubmEgIChrYW5uYSkNCmNhcnAgIChrYXJwKQ0KY2FzdCAgKGthc3p0KQ0KY2hlbm8gIChrZW7DsykNCmNvcnkgIChrb3JpKQ0KY3VwICAoa3VwKQ0KdGF4ICAodGF4KQ0KZmFiYSAgKGZhYmEpDQpmYWcgIChmw6FnKQ0KZnJheCAgKGZyYXgpDQpqdWcgIChqdWcpDQptb3IgIChtw7NyKQ0KbW9ydXMgIChtw7NydXN6KQ0Kb2xlYSAgKG9sZWEpDQpwaW4gIChww61uKQ0KcGxhbnQgIChwbGFudCkNCnBsYXQgIChwbGF0KQ0KcG9hICAocG9hKQ0KcG9wICAocG9wKQ0KcXVlciAgKGt2ZXIpDQpydW0gIChydW0pDQpzYWwgIChzemFsKQ0Kc2FtYiAgKHN6YW1iKQ0KdGlsaWEgICh0w61saWEpDQp1bG0gICjDumxtKQ0KdW1iICAow7ptYikNCnVtYmkgICjDum1iaSkNCnVydCAgKMO6cnQpDQp1cnRpICAow7pydGkpDQpjZWx0ICAoY2VsdCkNCmN5cCAgKGNpcCkNCnR5cGhhICAodGlmYSkNCnhhbnQgICh4YW50KQ0KaXZhICAoaXZhKQ0Kb3N0cnlhICAob3N6dHJpamEpDQpudWxsYQ0KZWd5DQprw6l0DQprZXR0xZENCmjDoXJvbQ0KbsOpZ3kNCsO2dA0KaGF0DQpow6l0DQpueW9sYw0Ka2lsZW5jDQp0w616DQp0aXplbg0KaHVzem9uDQpoYXJtaW5jDQpuZWd5dmVuDQrDtnR2ZW4NCmhhdHZhbg0KaGV0dmVuDQpueW9sY3Zhbg0Ka2lsZW5jdmVuDQpzesOheg0KamFudcOhcg0KZmVicnXDoXINCm3DoXJjaXVzDQrDoXByaWxpcw0KbcOhanVzDQpqw7puaXVzDQpqw7psaXVzDQphdWd1c3p0dXMNCnN6ZXB0ZW1iZXINCm9rdMOzYmVyDQpub3ZlbWJlcg0KZGVjZW1iZXINCkLDqWvDqXNjc2FiYQ0KQnVkYXBlc3QNCkRlYnJlY2VuDQpFZ2VyDQpHecWRcg0KS2Fwb3N2w6FyDQpLZWNza2Vtw6l0DQpNaXNrb2xjDQpOecOtcmVneWjDoXphDQpQw6ljcw0KU2FsZ8OzdGFyasOhbg0KU2nDs2Zvaw0KU3plZ2VkDQpTesOpa2VzZmVow6lydsOhcg0KU3pla3N6w6FyZA0KU3pvbG5vaw0KU3pvbWJhdGhlbHkNClRhdGFiw6FueWENClZlc3pwcsOpbQ0KWmFsYWVnZXJzemVnDQpzdGFydA0Ka2V6ZMOpcw0KbGXDoWxsw610w6FzDQpwbHVzeg0KbcOpZw0KbcOtbnVzeg0KaGliYQ0KZWd5ZXMNCmtldHRlcw0KaMOhcm1hcw0KbsOpZ3llcw0Kw7Z0w7ZzDQppbmRleA0Kc3RvcA0KdsOpZ2U=",xC=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},hi=e=>(wy("data-v-e9343f2c"),e=e(),vy(),e),NC={class:"center"},OC={style:{"max-width":"28em"}},kC={class:"white-bold"},MC=hi(()=>ct("p",null,"Read out the text below:",-1)),LC={class:"textToRead"},FC={key:0},UC=hi(()=>ct("strong",{class:"white-bold"},"Record",-1)),BC={key:1},jC={key:2},$C=hi(()=>ct("strong",{class:"white-bold"},"Stop",-1)),qC={id:"controls"},KC=["disabled"],WC=["disabled"],zC={style:{"margin-top":"20px"}},HC=hi(()=>ct("h2",{style:{"margin-top":"20px"}},"Recordings",-1)),GC=hi(()=>ct("ol",{id:"recordingsList"},null,-1)),QC={class:"center"},YC=["src"],XC=["onClick","disabled"],JC={class:"center"},ZC=["disabled"],tP={__name:"audio",setup(e){const t=parseInt(sessionStorage.getItem("id")),n=yr(sessionStorage.getItem("neptun")),r=yr(null);var s=Cr([]),i=0+parseInt(sessionStorage.getItem("textComplete"));const o=Cr([]);var a=null,c=!1;fl(()=>{n.value?(l(),u()):_o.push("/")});const l=async()=>{kt.get(VC).then(H=>{s=H.data,s=s.split(`
`),t%2==0&&s.reverse(),r.value=s[i]})},u=async()=>{const H=Di(Vi,"audio/"+n.value),yt=await Hf(H,{maxResults:5});yt.nextPageToken&&(a=yt.nextPageToken),yt.items.forEach(tt=>{const _t=tt._location.path_.split("/").pop();Gf(tt).then(Ct=>{o.unshift({ref:tt,url:Ct,audioName:_t,disabled:!0,saveState:"uploaded !"})})})},h=async()=>{c=!0;const H=Di(Vi,"audio/"+n.value),yt=await Hf(H,{maxResults:5,pageToken:a});a=null,yt.nextPageToken&&(a=yt.nextPageToken),yt.items.forEach(tt=>{const _t=tt._location.path_.split("/").pop();Gf(tt).then(Ct=>{o.push({ref:tt,url:Ct,audioName:_t,disabled:!0,saveState:"uploaded !"})})}),c=!1},f=H=>{if(H.audioTextNumber==i){if(confirm(`Do you want to save the record to database!
Enter OK to confirm`)==!0){H.disabled=!0,H.saveState="uploading...";const tt=Di(Vi,"audio/"+n.value+"/"+H.audioName);zf(tt,H.blob).then(Ct=>{H.ref=Ct.ref,H.saveState="uploaded !"}),i==s.length-1&&alert("you finish all the word! the next word will start over again"),i=i+1,sessionStorage.setItem("textComplete",i),r.value=s[i],console.log(t.toString());const _t=gR(a_,"user",t.toString());console.log(i),LR(_t,{textComplete:i})}}else{let yt="You already upload audio for the word "+H.text+`
Do you want to replace it?
Enter OK to confirm`;if(confirm(yt)==!0){H.disabled=!0,H.saveState="uploading...";const tt=Di(Vi,"audio/"+n.value+"/"+H.audioName);zf(tt,H.blob).then(_t=>{H.ref=_t.ref,H.saveState="uploaded !"});for(let _t=0;_t<o.length;_t++){let Ct=o[_t];if(Ct.audioName.includes(H.text.trim())&&Ct.saveState=="uploaded !"){Jb(Ct.ref).then(()=>{const pe=o.indexOf(Ct);pe!==-1&&o.splice(pe,1)});break}}}}};URL=window.URL||window.webkitURL;var m,g,_,E=window.AudioContext||window.webkitAudioContext;const R=yr(!1),P=yr(!0);var x="wav",B=!0;const at=()=>{var H={audio:!0,video:!1};navigator.mediaDevices.getUserMedia(H).then(function(yt){m=yt;var tt=new E;_=tt.createMediaStreamSource(yt),g=new WebAudioRecorder(_,{workerDir:"public/lib/",encoding:x,numChannels:2,onEncoderLoading:async function(_t,Ct){},onEncoderLoaded:async function(_t,Ct){}}),g.onComplete=function(_t,Ct){At(Ct,_t.encoding)},g.setOptions({timeLimit:120,encodeAfterRecord:B,ogg:{quality:.5},mp3:{bitRate:160}}),g.startRecording()}).catch(function(yt){R.value=!1,P.value=!0}),R.value=!0,P.value=!1},$=()=>{m.getAudioTracks()[0].stop(),P.value=!0,R.value=!1,g.finishRecording()},At=(H,yt)=>{var tt=URL.createObjectURL(H),_t=(n.value+"_"+r.value+"_"+new Date().valueOf()+".").replace(/\s/g,"")+yt;o.unshift({text:r.value,url:tt,audioName:_t,blob:H,saveState:"save",disabled:!1,audioTextNumber:i})};return(H,yt)=>(we(),Le("div",NC,[ct("div",OC,[ct("div",null,[ct("h3",null,[fr(" Welcomeback "),ct("strong",kC,ur(n.value),1)]),MC,ct("h1",LC,ur(r.value),1)]),P.value?(we(),Le("p",FC,[fr(" Click "),UC,fr(" button to start recording ")])):Er("",!0),R.value?(we(),Le("p",BC,"Recording . . .")):Er("",!0),R.value?(we(),Le("p",jC,[fr(" Click "),$C,fr(" button to stop recording ")])):Er("",!0),ct("div",qC,[ct("button",{id:"recordButton",onClick:at,disabled:R.value,style:{width:"200px",height:"40px"}}," Record ",8,KC),ct("button",{id:"stopButton",disabled:P.value,onClick:$,style:{width:"200px",height:"40px"}}," Stop ",8,WC)]),ct("h2",zC," Recorded "+ur(Se(i))+" words over "+ur(Se(s).length),1),HC,GC,(we(!0),Le(Fe,null,Wy(o,tt=>(we(),Le("li",{key:tt},[ct("div",QC,[ct("audio",{src:tt.url,controls:""},null,8,YC),ct("button",{class:"save",onClick:_t=>f(tt),disabled:tt.disabled},ur(tt.saveState),9,XC)]),ct("p",null,ur(tt.audioName),1)]))),128)),ct("div",JC,[Se(a)?(we(),Le("button",{key:0,class:"list-more",onClick:h,disabled:Se(c)}," list more records ",8,ZC)):Er("",!0)])])]))}},eP=xC(tP,[["__scopeId","data-v-e9343f2c"]]),_o=Yw({history:dw("/"),routes:[{path:"/",name:"login",component:pS},{path:"/audio",name:"audio",component:eP}]}),nP=HE(Jw);nP.use(_o).mount("#app");
