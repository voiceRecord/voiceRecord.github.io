(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();(function(e){var t=function(){for(var i=arguments[0],o=[].slice.call(arguments,1),a=0;a<o.length;++a){var c=o[a];for(Object.key in c){var l=c[Object.key];i[Object.key]=typeof l=="object"?t(typeof i[Object.key]=="object"?i[Object.key]:{},l):l}}return i},n={wav:"WebAudioRecorderWav.min.js",ogg:"WebAudioRecorderOgg.min.js",mp3:"WebAudioRecorderMp3.min.js"},r={workerDir:"/",numChannels:2,encoding:"wav",options:{timeLimit:300,encodeAfterRecord:!1,progressInterval:1e3,bufferSize:void 0,wav:{mimeType:"audio/wav"},ogg:{mimeType:"audio/ogg",quality:.5},mp3:{mimeType:"audio/mpeg",bitRate:160}}},s=function(i,o){t(this,r,o||{}),this.context=i.context,this.context.createScriptProcessor==null&&(this.context.createScriptProcessor=this.context.createJavaScriptNode),this.input=this.context.createGain(),i.connect(this.input),this.buffer=[],this.initWorker()};t(s.prototype,{isRecording:function(){return this.processor!=null},setEncoding:function(i){this.isRecording()?this.error("setEncoding: cannot set encoding during recording"):this.encoding!==i&&(this.encoding=i,this.initWorker())},setOptions:function(i){this.isRecording()?this.error("setOptions: cannot set options during recording"):(t(this.options,i),this.worker.postMessage({command:"options",options:this.options}))},startRecording:function(){if(this.isRecording())this.error("startRecording: previous recording is running");else{var i=this.numChannels,o=this.buffer,a=this.worker;this.processor=this.context.createScriptProcessor(this.options.bufferSize,this.numChannels,this.numChannels),this.input.connect(this.processor),this.processor.connect(this.context.destination),this.processor.onaudioprocess=function(c){for(var l=0;l<i;++l)o[l]=c.inputBuffer.getChannelData(l);a.postMessage({command:"record",buffer:o})},this.worker.postMessage({command:"start",bufferSize:this.processor.bufferSize}),this.startTime=Date.now()}},recordingTime:function(){return this.isRecording()?(Date.now()-this.startTime)*.001:null},cancelRecording:function(){this.isRecording()?(this.input.disconnect(),this.processor.disconnect(),delete this.processor,this.worker.postMessage({command:"cancel"})):this.error("cancelRecording: no recording is running")},finishRecording:function(){this.isRecording()?(this.input.disconnect(),this.processor.disconnect(),delete this.processor,this.worker.postMessage({command:"finish"})):this.error("finishRecording: no recording is running")},cancelEncoding:function(){this.options.encodeAfterRecord?this.isRecording()?this.error("cancelEncoding: recording is not finished"):(this.onEncodingCanceled(this),this.initWorker()):this.error("cancelEncoding: invalid method call")},initWorker:function(){this.worker!=null&&this.worker.terminate(),this.onEncoderLoading(this,this.encoding);const i=import.meta.url;console.log(i);const o=i.split("/");o.pop(),o.pop();const a=o.join("/");console.log(a),this.worker=new Worker(a+"/"+n[this.encoding]);var c=this;this.worker.onmessage=function(l){var u=l.data;switch(u.command){case"loaded":c.onEncoderLoaded(c,c.encoding);break;case"timeout":c.onTimeout(c);break;case"progress":c.onEncodingProgress(c,u.progress);break;case"complete":c.onComplete(c,u.blob);break;case"error":c.error(u.message)}},this.worker.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:this.numChannels},options:this.options})},error:function(i){this.onError(this,"WebAudioRecorder.min.js:"+i)},onEncoderLoading:function(i,o){},onEncoderLoaded:function(i,o){},onTimeout:function(i){i.finishRecording()},onEncodingProgress:function(i,o){},onEncodingCanceled:function(i){},onComplete:function(i,o){i.onError(i,"WebAudioRecorder.min.js: You must override .onComplete event")},onError:function(i,o){console.log(o)}}),e.WebAudioRecorder=s})(window);/**
* @vue/shared v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qc(e,t){const n=new Set(e.split(","));return t?r=>n.has(r.toLowerCase()):r=>n.has(r)}const _t={},wr=[],ye=()=>{},S_=()=>!1,go=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Yc=e=>e.startsWith("onUpdate:"),Kt=Object.assign,Xc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},C_=Object.prototype.hasOwnProperty,ot=(e,t)=>C_.call(e,t),Q=Array.isArray,vr=e=>_o(e)==="[object Map]",sd=e=>_o(e)==="[object Set]",tt=e=>typeof e=="function",xt=e=>typeof e=="string",$r=e=>typeof e=="symbol",At=e=>e!==null&&typeof e=="object",id=e=>(At(e)||tt(e))&&tt(e.then)&&tt(e.catch),od=Object.prototype.toString,_o=e=>od.call(e),P_=e=>_o(e).slice(8,-1),ad=e=>_o(e)==="[object Object]",Jc=e=>xt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Vi=Qc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yo=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},D_=/-(\w)/g,zn=yo(e=>e.replace(D_,(t,n)=>n?n.toUpperCase():"")),V_=/\B([A-Z])/g,Zn=yo(e=>e.replace(V_,"-$1").toLowerCase()),cd=yo(e=>e.charAt(0).toUpperCase()+e.slice(1)),da=yo(e=>e?`on${cd(e)}`:""),We=(e,t)=>!Object.is(e,t),Ni=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Ki=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Qa=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ou;const ld=()=>Ou||(Ou=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Zc(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=xt(r)?k_(r):Zc(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(xt(e)||At(e))return e}const N_=/;(?![^(]*\))/g,x_=/:([^]+)/,O_=/\/\*[^]*?\*\//g;function k_(e){const t={};return e.replace(O_,"").split(N_).forEach(n=>{if(n){const r=n.split(x_);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function tl(e){let t="";if(xt(e))t=e;else if(Q(e))for(let n=0;n<e.length;n++){const r=tl(e[n]);r&&(t+=r+" ")}else if(At(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const M_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",L_=Qc(M_);function ud(e){return!!e||e===""}const hr=e=>xt(e)?e:e==null?"":Q(e)||At(e)&&(e.toString===od||!tt(e.toString))?JSON.stringify(e,hd,2):String(e),hd=(e,t)=>t&&t.__v_isRef?hd(e,t.value):vr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[pa(r,i)+" =>"]=s,n),{})}:sd(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>pa(n))}:$r(t)?pa(t):At(t)&&!Q(t)&&!ad(t)?String(t):t,pa=(e,t="")=>{var n;return $r(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Te;class F_{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Te,!t&&Te&&(this.index=(Te.scopes||(Te.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Te;try{return Te=this,t()}finally{Te=n}}}on(){Te=this}off(){Te=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function U_(e,t=Te){t&&t.active&&t.effects.push(e)}function B_(){return Te}let $n;class el{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=2,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,U_(this,s)}get dirty(){if(this._dirtyLevel===1){tr();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(j_(n.computed),this._dirtyLevel>=2))break}this._dirtyLevel<2&&(this._dirtyLevel=0),er()}return this._dirtyLevel>=2}set dirty(t){this._dirtyLevel=t?2:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=En,n=$n;try{return En=!0,$n=this,this._runnings++,ku(this),this.fn()}finally{Mu(this),this._runnings--,$n=n,En=t}}stop(){var t;this.active&&(ku(this),Mu(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function j_(e){return e.value}function ku(e){e._trackId++,e._depsLength=0}function Mu(e){if(e.deps&&e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)fd(e.deps[t],e);e.deps.length=e._depsLength}}function fd(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let En=!0,Ya=0;const dd=[];function tr(){dd.push(En),En=!1}function er(){const e=dd.pop();En=e===void 0?!0:e}function nl(){Ya++}function rl(){for(Ya--;!Ya&&Xa.length;)Xa.shift()()}function pd(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&fd(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Xa=[];function md(e,t,n){nl();for(const r of e.keys())if(r._dirtyLevel<t&&e.get(r)===r._trackId){const s=r._dirtyLevel;r._dirtyLevel=t,s===0&&(r._shouldSchedule=!0,r.trigger())}gd(e),rl()}function gd(e){for(const t of e.keys())t.scheduler&&t._shouldSchedule&&(!t._runnings||t.allowRecurse)&&e.get(t)===t._trackId&&(t._shouldSchedule=!1,Xa.push(t.scheduler))}const _d=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},Ja=new WeakMap,qn=Symbol(""),Za=Symbol("");function ce(e,t,n){if(En&&$n){let r=Ja.get(e);r||Ja.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=_d(()=>r.delete(n))),pd($n,s)}}function Je(e,t,n,r,s,i){const o=Ja.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&Q(e)){const c=Number(r);o.forEach((l,u)=>{(u==="length"||!$r(u)&&u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":Q(e)?Jc(n)&&a.push(o.get("length")):(a.push(o.get(qn)),vr(e)&&a.push(o.get(Za)));break;case"delete":Q(e)||(a.push(o.get(qn)),vr(e)&&a.push(o.get(Za)));break;case"set":vr(e)&&a.push(o.get(qn));break}nl();for(const c of a)c&&md(c,2);rl()}const $_=Qc("__proto__,__v_isRef,__isVue"),yd=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter($r)),Lu=q_();function q_(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=ut(this);for(let i=0,o=this.length;i<o;i++)ce(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(ut)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){tr(),nl();const r=ut(this)[t].apply(this,n);return rl(),er(),r}}),e}function K_(e){const t=ut(this);return ce(t,"has",e),t.hasOwnProperty(e)}class Ed{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,r){const s=this._isReadonly,i=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?ry:Ad:i?Td:vd).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=Q(t);if(!s){if(o&&ot(Lu,n))return Reflect.get(Lu,n,r);if(n==="hasOwnProperty")return K_}const a=Reflect.get(t,n,r);return($r(n)?yd.has(n):$_(n))||(s||ce(t,"get",n),i)?a:le(a)?o&&Jc(n)?a:a.value:At(a)?s?Rd(a):Sr(a):a}}class wd extends Ed{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._shallow){const c=Cr(i);if(!Wi(r)&&!Cr(r)&&(i=ut(i),r=ut(r)),!Q(t)&&le(i)&&!le(r))return c?!1:(i.value=r,!0)}const o=Q(t)&&Jc(n)?Number(n)<t.length:ot(t,n),a=Reflect.set(t,n,r,s);return t===ut(s)&&(o?We(r,i)&&Je(t,"set",n,r):Je(t,"add",n,r)),a}deleteProperty(t,n){const r=ot(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Je(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!$r(n)||!yd.has(n))&&ce(t,"has",n),r}ownKeys(t){return ce(t,"iterate",Q(t)?"length":qn),Reflect.ownKeys(t)}}class W_ extends Ed{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const z_=new wd,H_=new W_,G_=new wd(!0),sl=e=>e,Eo=e=>Reflect.getPrototypeOf(e);function pi(e,t,n=!1,r=!1){e=e.__v_raw;const s=ut(e),i=ut(t);n||(We(t,i)&&ce(s,"get",t),ce(s,"get",i));const{has:o}=Eo(s),a=r?sl:n?al:As;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function mi(e,t=!1){const n=this.__v_raw,r=ut(n),s=ut(e);return t||(We(e,s)&&ce(r,"has",e),ce(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function gi(e,t=!1){return e=e.__v_raw,!t&&ce(ut(e),"iterate",qn),Reflect.get(e,"size",e)}function Fu(e){e=ut(e);const t=ut(this);return Eo(t).has.call(t,e)||(t.add(e),Je(t,"add",e,e)),this}function Uu(e,t){t=ut(t);const n=ut(this),{has:r,get:s}=Eo(n);let i=r.call(n,e);i||(e=ut(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?We(t,o)&&Je(n,"set",e,t):Je(n,"add",e,t),this}function Bu(e){const t=ut(this),{has:n,get:r}=Eo(t);let s=n.call(t,e);s||(e=ut(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&Je(t,"delete",e,void 0),i}function ju(){const e=ut(this),t=e.size!==0,n=e.clear();return t&&Je(e,"clear",void 0,void 0),n}function _i(e,t){return function(r,s){const i=this,o=i.__v_raw,a=ut(o),c=t?sl:e?al:As;return!e&&ce(a,"iterate",qn),o.forEach((l,u)=>r.call(s,c(l),c(u),i))}}function yi(e,t,n){return function(...r){const s=this.__v_raw,i=ut(s),o=vr(i),a=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,l=s[e](...r),u=n?sl:t?al:As;return!t&&ce(i,"iterate",c?Za:qn),{next(){const{value:h,done:f}=l.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function un(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Q_(){const e={get(i){return pi(this,i)},get size(){return gi(this)},has:mi,add:Fu,set:Uu,delete:Bu,clear:ju,forEach:_i(!1,!1)},t={get(i){return pi(this,i,!1,!0)},get size(){return gi(this)},has:mi,add:Fu,set:Uu,delete:Bu,clear:ju,forEach:_i(!1,!0)},n={get(i){return pi(this,i,!0)},get size(){return gi(this,!0)},has(i){return mi.call(this,i,!0)},add:un("add"),set:un("set"),delete:un("delete"),clear:un("clear"),forEach:_i(!0,!1)},r={get(i){return pi(this,i,!0,!0)},get size(){return gi(this,!0)},has(i){return mi.call(this,i,!0)},add:un("add"),set:un("set"),delete:un("delete"),clear:un("clear"),forEach:_i(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=yi(i,!1,!1),n[i]=yi(i,!0,!1),t[i]=yi(i,!1,!0),r[i]=yi(i,!0,!0)}),[e,n,t,r]}const[Y_,X_,J_,Z_]=Q_();function il(e,t){const n=t?e?Z_:J_:e?X_:Y_;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(ot(n,s)&&s in r?n:r,s,i)}const ty={get:il(!1,!1)},ey={get:il(!1,!0)},ny={get:il(!0,!1)},vd=new WeakMap,Td=new WeakMap,Ad=new WeakMap,ry=new WeakMap;function sy(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function iy(e){return e.__v_skip||!Object.isExtensible(e)?0:sy(P_(e))}function Sr(e){return Cr(e)?e:ol(e,!1,z_,ty,vd)}function Id(e){return ol(e,!1,G_,ey,Td)}function Rd(e){return ol(e,!0,H_,ny,Ad)}function ol(e,t,n,r,s){if(!At(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=iy(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function Tr(e){return Cr(e)?Tr(e.__v_raw):!!(e&&e.__v_isReactive)}function Cr(e){return!!(e&&e.__v_isReadonly)}function Wi(e){return!!(e&&e.__v_isShallow)}function bd(e){return Tr(e)||Cr(e)}function ut(e){const t=e&&e.__v_raw;return t?ut(t):e}function Sd(e){return Ki(e,"__v_skip",!0),e}const As=e=>At(e)?Sr(e):e,al=e=>At(e)?Rd(e):e;class Cd{constructor(t,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new el(()=>t(this._value),()=>us(this,1),()=>this.dep&&gd(this.dep)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=ut(this);return(!t._cacheable||t.effect.dirty)&&We(t._value,t._value=t.effect.run())&&us(t,2),cl(t),t.effect._dirtyLevel>=1&&us(t,1),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function oy(e,t,n=!1){let r,s;const i=tt(e);return i?(r=e,s=ye):(r=e.get,s=e.set),new Cd(r,s,i||!s,n)}function cl(e){En&&$n&&(e=ut(e),pd($n,e.dep||(e.dep=_d(()=>e.dep=void 0,e instanceof Cd?e:void 0))))}function us(e,t=2,n){e=ut(e);const r=e.dep;r&&md(r,t)}function le(e){return!!(e&&e.__v_isRef===!0)}function yr(e){return Pd(e,!1)}function ay(e){return Pd(e,!0)}function Pd(e,t){return le(e)?e:new cy(e,t)}class cy{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:ut(t),this._value=n?t:As(t)}get value(){return cl(this),this._value}set value(t){const n=this.__v_isShallow||Wi(t)||Cr(t);t=n?t:ut(t),We(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:As(t),us(this,2))}}function Ze(e){return le(e)?e.value:e}const ly={get:(e,t,n)=>Ze(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return le(s)&&!le(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Dd(e){return Tr(e)?e:new Proxy(e,ly)}class uy{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=t(()=>cl(this),()=>us(this));this._get=n,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function hy(e){return new uy(e)}/**
* @vue/runtime-core v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function wn(e,t,n,r){let s;try{s=r?e(...r):e()}catch(i){wo(i,t,n)}return s}function be(e,t,n,r){if(tt(e)){const i=wn(e,t,n,r);return i&&id(i)&&i.catch(o=>{wo(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(be(e[i],t,n,r));return s}function wo(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](e,o,a)===!1)return}i=i.parent}const c=t.appContext.config.errorHandler;if(c){wn(c,null,10,[e,o,a]);return}}fy(e,n,s,r)}function fy(e,t,n,r=!0){console.error(e)}let Is=!1,tc=!1;const Qt=[];let Le=0;const Ar=[];let dn=null,kn=0;const Vd=Promise.resolve();let ll=null;function Nd(e){const t=ll||Vd;return e?t.then(this?e.bind(this):e):t}function dy(e){let t=Le+1,n=Qt.length;for(;t<n;){const r=t+n>>>1,s=Qt[r],i=Rs(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function ul(e){(!Qt.length||!Qt.includes(e,Is&&e.allowRecurse?Le+1:Le))&&(e.id==null?Qt.push(e):Qt.splice(dy(e.id),0,e),xd())}function xd(){!Is&&!tc&&(tc=!0,ll=Vd.then(kd))}function py(e){const t=Qt.indexOf(e);t>Le&&Qt.splice(t,1)}function my(e){Q(e)?Ar.push(...e):(!dn||!dn.includes(e,e.allowRecurse?kn+1:kn))&&Ar.push(e),xd()}function $u(e,t,n=Is?Le+1:0){for(;n<Qt.length;n++){const r=Qt[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;Qt.splice(n,1),n--,r()}}}function Od(e){if(Ar.length){const t=[...new Set(Ar)].sort((n,r)=>Rs(n)-Rs(r));if(Ar.length=0,dn){dn.push(...t);return}for(dn=t,kn=0;kn<dn.length;kn++)dn[kn]();dn=null,kn=0}}const Rs=e=>e.id==null?1/0:e.id,gy=(e,t)=>{const n=Rs(e)-Rs(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function kd(e){tc=!1,Is=!0,Qt.sort(gy);try{for(Le=0;Le<Qt.length;Le++){const t=Qt[Le];t&&t.active!==!1&&wn(t,null,14)}}finally{Le=0,Qt.length=0,Od(),Is=!1,ll=null,(Qt.length||Ar.length)&&kd()}}function _y(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||_t;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=r[u]||_t;f&&(s=n.map(m=>xt(m)?m.trim():m)),h&&(s=n.map(Qa))}let a,c=r[a=da(t)]||r[a=da(zn(t))];!c&&i&&(c=r[a=da(Zn(t))]),c&&be(c,e,6,s);const l=r[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,be(l,e,6,s)}}function Md(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!tt(e)){const c=l=>{const u=Md(l,t,!0);u&&(a=!0,Kt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!a?(At(e)&&r.set(e,null),null):(Q(i)?i.forEach(c=>o[c]=null):Kt(o,i),At(e)&&r.set(e,o),o)}function vo(e,t){return!e||!go(t)?!1:(t=t.slice(2).replace(/Once$/,""),ot(e,t[0].toLowerCase()+t.slice(1))||ot(e,Zn(t))||ot(e,t))}let ae=null,To=null;function zi(e){const t=ae;return ae=e,To=e&&e.type.__scopeId||null,t}function yy(e){To=e}function Ey(){To=null}function wy(e,t=ae,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Zu(-1);const i=zi(t);let o;try{o=e(...s)}finally{zi(i),r._d&&Zu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ma(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:f,setupState:m,ctx:g,inheritAttrs:_}=e;let E,b;const V=zi(e);try{if(n.shapeFlag&4){const P=s||r,z=P;E=Me(u.call(z,P,h,i,m,f,g)),b=c}else{const P=t;E=Me(P.length>1?P(i,{attrs:c,slots:a,emit:l}):P(i,null)),b=t.props?c:vy(c)}}catch(P){fs.length=0,wo(P,e,1),E=de(Hn)}let x=E;if(b&&_!==!1){const P=Object.keys(b),{shapeFlag:z}=x;P.length&&z&7&&(o&&P.some(Yc)&&(b=Ty(b,o)),x=Pr(x,b))}return n.dirs&&(x=Pr(x),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),E=x,zi(V),E}const vy=e=>{let t;for(const n in e)(n==="class"||n==="style"||go(n))&&((t||(t={}))[n]=e[n]);return t},Ty=(e,t)=>{const n={};for(const r in e)(!Yc(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Ay(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?qu(r,o,l):!!o;if(c&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==r[f]&&!vo(l,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?qu(r,o,l):!0:!!o;return!1}function qu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!vo(n,i))return!0}return!1}function Iy({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Ry=Symbol.for("v-ndc"),by=e=>e.__isSuspense;function Sy(e,t){t&&t.pendingBranch?Q(e)?t.effects.push(...e):t.effects.push(e):my(e)}const Cy=Symbol.for("v-scx"),Py=()=>tn(Cy);function Dy(e,t){return hl(e,null,{flush:"sync"})}const Ei={};function xi(e,t,n){return hl(e,t,n)}function hl(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=_t){if(t&&i){const O=t;t=(...J)=>{O(...J),z()}}const c=Yt,l=O=>r===!0?O:Ln(O,r===!1?1:void 0);let u,h=!1,f=!1;if(le(e)?(u=()=>e.value,h=Wi(e)):Tr(e)?(u=()=>l(e),h=!0):Q(e)?(f=!0,h=e.some(O=>Tr(O)||Wi(O)),u=()=>e.map(O=>{if(le(O))return O.value;if(Tr(O))return l(O);if(tt(O))return wn(O,c,2)})):tt(e)?t?u=()=>wn(e,c,2):u=()=>(m&&m(),be(e,c,3,[g])):u=ye,t&&r){const O=u;u=()=>Ln(O())}let m,g=O=>{m=x.onStop=()=>{wn(O,c,4),m=x.onStop=void 0}},_;if(bo)if(g=ye,t?n&&be(t,c,3,[u(),f?[]:void 0,g]):u(),s==="sync"){const O=Py();_=O.__watcherHandles||(O.__watcherHandles=[])}else return ye;let E=f?new Array(e.length).fill(Ei):Ei;const b=()=>{if(!(!x.active||!x.dirty))if(t){const O=x.run();(r||h||(f?O.some((J,ct)=>We(J,E[ct])):We(O,E)))&&(m&&m(),be(t,c,3,[O,E===Ei?void 0:f&&E[0]===Ei?[]:E,g]),E=O)}else x.run()};b.allowRecurse=!!t;let V;s==="sync"?V=b:s==="post"?V=()=>oe(b,c&&c.suspense):(b.pre=!0,c&&(b.id=c.uid),V=()=>ul(b));const x=new el(u,ye,V),P=B_(),z=()=>{x.stop(),P&&Xc(P.effects,x)};return t?n?b():E=x.run():s==="post"?oe(x.run.bind(x),c&&c.suspense):x.run(),_&&_.push(z),z}function Vy(e,t,n){const r=this.proxy,s=xt(e)?e.includes(".")?Ld(r,e):()=>r[e]:e.bind(r,r);let i;tt(t)?i=t:(i=t.handler,n=t);const o=Hs(this),a=hl(s,i.bind(r),n);return o(),a}function Ld(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Ln(e,t,n=0,r){if(!At(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(r=r||new Set,r.has(e))return e;if(r.add(e),le(e))Ln(e.value,t,n,r);else if(Q(e))for(let s=0;s<e.length;s++)Ln(e[s],t,n,r);else if(sd(e)||vr(e))e.forEach(s=>{Ln(s,t,n,r)});else if(ad(e))for(const s in e)Ln(e[s],t,n,r);return e}function Ku(e,t){if(ae===null)return e;const n=So(ae)||ae.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,a,c=_t]=t[s];i&&(tt(i)&&(i={mounted:i,updated:i}),i.deep&&Ln(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function Vn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(tr(),be(c,n,8,[e.el,a,e,t]),er())}}/*! #__NO_SIDE_EFFECTS__ */function Fd(e,t){return tt(e)?Kt({name:e.name},t,{setup:e}):e}const Oi=e=>!!e.type.__asyncLoader,Ud=e=>e.type.__isKeepAlive;function Ny(e,t){Bd(e,"a",t)}function xy(e,t){Bd(e,"da",t)}function Bd(e,t,n=Yt){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Ao(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Ud(s.parent.vnode)&&Oy(r,t,n,s),s=s.parent}}function Oy(e,t,n,r){const s=Ao(t,e,r,!0);jd(()=>{Xc(r[t],s)},n)}function Ao(e,t,n=Yt,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;tr();const a=Hs(n),c=be(t,n,e,o);return a(),er(),c});return r?s.unshift(i):s.push(i),i}}const an=e=>(t,n=Yt)=>(!bo||e==="sp")&&Ao(e,(...r)=>t(...r),n),ky=an("bm"),fl=an("m"),My=an("bu"),Ly=an("u"),Fy=an("bum"),jd=an("um"),Uy=an("sp"),By=an("rtg"),jy=an("rtc");function $y(e,t=Yt){Ao("ec",e,t)}function qy(e,t,n,r){let s;const i=n&&n[r];if(Q(e)||xt(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(At(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i&&i[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];s[a]=t(e[l],l,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const ec=e=>e?tp(e)?So(e)||e.proxy:ec(e.parent):null,hs=Kt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ec(e.parent),$root:e=>ec(e.root),$emit:e=>e.emit,$options:e=>dl(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,ul(e.update)}),$nextTick:e=>e.n||(e.n=Nd.bind(e.proxy)),$watch:e=>Vy.bind(e)}),ga=(e,t)=>e!==_t&&!e.__isScriptSetup&&ot(e,t),Ky={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(ga(r,t))return o[t]=1,r[t];if(s!==_t&&ot(s,t))return o[t]=2,s[t];if((l=e.propsOptions[0])&&ot(l,t))return o[t]=3,i[t];if(n!==_t&&ot(n,t))return o[t]=4,n[t];nc&&(o[t]=0)}}const u=hs[t];let h,f;if(u)return t==="$attrs"&&ce(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==_t&&ot(n,t))return o[t]=4,n[t];if(f=c.config.globalProperties,ot(f,t))return f[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return ga(s,t)?(s[t]=n,!0):r!==_t&&ot(r,t)?(r[t]=n,!0):ot(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==_t&&ot(e,o)||ga(t,o)||(a=i[0])&&ot(a,o)||ot(r,o)||ot(hs,o)||ot(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ot(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Wu(e){return Q(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let nc=!0;function Wy(e){const t=dl(e),n=e.proxy,r=e.ctx;nc=!1,t.beforeCreate&&zu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:f,beforeUpdate:m,updated:g,activated:_,deactivated:E,beforeDestroy:b,beforeUnmount:V,destroyed:x,unmounted:P,render:z,renderTracked:O,renderTriggered:J,errorCaptured:ct,serverPrefetch:we,expose:ue,inheritAttrs:cn,components:Dn,directives:De,filters:Yr}=t;if(l&&zy(l,r,null),o)for(const mt in o){const ht=o[mt];tt(ht)&&(r[mt]=ht.bind(n))}if(s){const mt=s.call(n,n);At(mt)&&(e.data=Sr(mt))}if(nc=!0,i)for(const mt in i){const ht=i[mt],Qe=tt(ht)?ht.bind(n,n):tt(ht.get)?ht.get.bind(n,n):ye,ln=!tt(ht)&&tt(ht.set)?ht.set.bind(n):ye,Ve=Ae({get:Qe,set:ln});Object.defineProperty(r,mt,{enumerable:!0,configurable:!0,get:()=>Ve.value,set:ie=>Ve.value=ie})}if(a)for(const mt in a)$d(a[mt],r,n,mt);if(c){const mt=tt(c)?c.call(n):c;Reflect.ownKeys(mt).forEach(ht=>{ki(ht,mt[ht])})}u&&zu(u,e,"c");function Ot(mt,ht){Q(ht)?ht.forEach(Qe=>mt(Qe.bind(n))):ht&&mt(ht.bind(n))}if(Ot(ky,h),Ot(fl,f),Ot(My,m),Ot(Ly,g),Ot(Ny,_),Ot(xy,E),Ot($y,ct),Ot(jy,O),Ot(By,J),Ot(Fy,V),Ot(jd,P),Ot(Uy,we),Q(ue))if(ue.length){const mt=e.exposed||(e.exposed={});ue.forEach(ht=>{Object.defineProperty(mt,ht,{get:()=>n[ht],set:Qe=>n[ht]=Qe})})}else e.exposed||(e.exposed={});z&&e.render===ye&&(e.render=z),cn!=null&&(e.inheritAttrs=cn),Dn&&(e.components=Dn),De&&(e.directives=De)}function zy(e,t,n=ye){Q(e)&&(e=rc(e));for(const r in e){const s=e[r];let i;At(s)?"default"in s?i=tn(s.from||r,s.default,!0):i=tn(s.from||r):i=tn(s),le(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function zu(e,t,n){be(Q(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function $d(e,t,n,r){const s=r.includes(".")?Ld(n,r):()=>n[r];if(xt(e)){const i=t[e];tt(i)&&xi(s,i)}else if(tt(e))xi(s,e.bind(n));else if(At(e))if(Q(e))e.forEach(i=>$d(i,t,n,r));else{const i=tt(e.handler)?e.handler.bind(n):t[e.handler];tt(i)&&xi(s,i,e)}}function dl(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let c;return a?c=a:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(l=>Hi(c,l,o,!0)),Hi(c,t,o)),At(t)&&i.set(t,c),c}function Hi(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Hi(e,i,n,!0),s&&s.forEach(o=>Hi(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=Hy[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const Hy={data:Hu,props:Gu,emits:Gu,methods:is,computed:is,beforeCreate:ee,created:ee,beforeMount:ee,mounted:ee,beforeUpdate:ee,updated:ee,beforeDestroy:ee,beforeUnmount:ee,destroyed:ee,unmounted:ee,activated:ee,deactivated:ee,errorCaptured:ee,serverPrefetch:ee,components:is,directives:is,watch:Qy,provide:Hu,inject:Gy};function Hu(e,t){return t?e?function(){return Kt(tt(e)?e.call(this,this):e,tt(t)?t.call(this,this):t)}:t:e}function Gy(e,t){return is(rc(e),rc(t))}function rc(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ee(e,t){return e?[...new Set([].concat(e,t))]:t}function is(e,t){return e?Kt(Object.create(null),e,t):t}function Gu(e,t){return e?Q(e)&&Q(t)?[...new Set([...e,...t])]:Kt(Object.create(null),Wu(e),Wu(t??{})):t}function Qy(e,t){if(!e)return t;if(!t)return e;const n=Kt(Object.create(null),e);for(const r in t)n[r]=ee(e[r],t[r]);return n}function qd(){return{app:null,config:{isNativeTag:S_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Yy=0;function Xy(e,t){return function(r,s=null){tt(r)||(r=Kt({},r)),s!=null&&!At(s)&&(s=null);const i=qd(),o=new WeakSet;let a=!1;const c=i.app={_uid:Yy++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:vE,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&tt(l.install)?(o.add(l),l.install(c,...u)):tt(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const f=de(r,s);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&t?t(f,l):e(f,l,h),a=!0,c._container=l,l.__vue_app__=c,So(f.component)||f.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c},runWithContext(l){Gi=c;try{return l()}finally{Gi=null}}};return c}}let Gi=null;function ki(e,t){if(Yt){let n=Yt.provides;const r=Yt.parent&&Yt.parent.provides;r===n&&(n=Yt.provides=Object.create(r)),n[e]=t}}function tn(e,t,n=!1){const r=Yt||ae;if(r||Gi){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Gi._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&tt(t)?t.call(r&&r.proxy):t}}function Jy(e,t,n,r=!1){const s={},i={};Ki(i,Ro,1),e.propsDefaults=Object.create(null),Kd(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:Id(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function Zy(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=ut(s),[c]=e.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(vo(e.emitsOptions,f))continue;const m=t[f];if(c)if(ot(i,f))m!==i[f]&&(i[f]=m,l=!0);else{const g=zn(f);s[g]=sc(c,a,g,m,e,!1)}else m!==i[f]&&(i[f]=m,l=!0)}}}else{Kd(e,t,s,i)&&(l=!0);let u;for(const h in a)(!t||!ot(t,h)&&((u=Zn(h))===h||!ot(t,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=sc(c,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!t||!ot(t,h))&&(delete i[h],l=!0)}l&&Je(e,"set","$attrs")}function Kd(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let c in t){if(Vi(c))continue;const l=t[c];let u;s&&ot(s,u=zn(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:vo(e.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=ut(n),l=a||_t;for(let u=0;u<i.length;u++){const h=i[u];n[h]=sc(s,c,h,l[h],e,!ot(l,h))}}return o}function sc(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=ot(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&tt(c)){const{propsDefaults:l}=s;if(n in l)r=l[n];else{const u=Hs(s);r=l[n]=c.call(null,t),u()}}else r=c}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Zn(n))&&(r=!0))}return r}function Wd(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let c=!1;if(!tt(e)){const u=h=>{c=!0;const[f,m]=Wd(h,t,!0);Kt(o,f),m&&a.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!c)return At(e)&&r.set(e,wr),wr;if(Q(i))for(let u=0;u<i.length;u++){const h=zn(i[u]);Qu(h)&&(o[h]=_t)}else if(i)for(const u in i){const h=zn(u);if(Qu(h)){const f=i[u],m=o[h]=Q(f)||tt(f)?{type:f}:Kt({},f);if(m){const g=Ju(Boolean,m.type),_=Ju(String,m.type);m[0]=g>-1,m[1]=_<0||g<_,(g>-1||ot(m,"default"))&&a.push(h)}}}const l=[o,a];return At(e)&&r.set(e,l),l}function Qu(e){return e[0]!=="$"}function Yu(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Xu(e,t){return Yu(e)===Yu(t)}function Ju(e,t){return Q(t)?t.findIndex(n=>Xu(n,e)):tt(t)&&Xu(t,e)?0:-1}const zd=e=>e[0]==="_"||e==="$stable",pl=e=>Q(e)?e.map(Me):[Me(e)],tE=(e,t,n)=>{if(t._n)return t;const r=wy((...s)=>pl(t(...s)),n);return r._c=!1,r},Hd=(e,t,n)=>{const r=e._ctx;for(const s in e){if(zd(s))continue;const i=e[s];if(tt(i))t[s]=tE(s,i,r);else if(i!=null){const o=pl(i);t[s]=()=>o}}},Gd=(e,t)=>{const n=pl(t);e.slots.default=()=>n},eE=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=ut(t),Ki(t,"_",n)):Hd(t,e.slots={})}else e.slots={},t&&Gd(e,t);Ki(e.slots,Ro,1)},nE=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=_t;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(Kt(s,t),!n&&a===1&&delete s._):(i=!t.$stable,Hd(t,s)),o=t}else t&&(Gd(e,t),o={default:1});if(i)for(const a in s)!zd(a)&&o[a]==null&&delete s[a]};function ic(e,t,n,r,s=!1){if(Q(e)){e.forEach((f,m)=>ic(f,t&&(Q(t)?t[m]:t),n,r,s));return}if(Oi(r)&&!s)return;const i=r.shapeFlag&4?So(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:c}=e,l=t&&t.r,u=a.refs===_t?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(xt(l)?(u[l]=null,ot(h,l)&&(h[l]=null)):le(l)&&(l.value=null)),tt(c))wn(c,a,12,[o,u]);else{const f=xt(c),m=le(c),g=e.f;if(f||m){const _=()=>{if(g){const E=f?ot(h,c)?h[c]:u[c]:c.value;s?Q(E)&&Xc(E,i):Q(E)?E.includes(i)||E.push(i):f?(u[c]=[i],ot(h,c)&&(h[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else f?(u[c]=o,ot(h,c)&&(h[c]=o)):m&&(c.value=o,e.k&&(u[e.k]=o))};s||g?_():(_.id=-1,oe(_,n))}}}const oe=Sy;function rE(e){return sE(e)}function sE(e,t){const n=ld();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:f,setScopeId:m=ye,insertStaticContent:g}=e,_=(d,p,y,I=null,w=null,D=null,F=void 0,C=null,N=!!p.dynamicChildren)=>{if(d===p)return;d&&!Jr(d,p)&&(I=T(d),ie(d,w,D,!0),d=null),p.patchFlag===-2&&(N=!1,p.dynamicChildren=null);const{type:S,ref:B,shapeFlag:W}=p;switch(S){case Io:E(d,p,y,I);break;case Hn:b(d,p,y,I);break;case ya:d==null&&V(p,y,I,F);break;case Oe:Dn(d,p,y,I,w,D,F,C,N);break;default:W&1?z(d,p,y,I,w,D,F,C,N):W&6?De(d,p,y,I,w,D,F,C,N):(W&64||W&128)&&S.process(d,p,y,I,w,D,F,C,N,$)}B!=null&&w&&ic(B,d&&d.ref,D,p||d,!p)},E=(d,p,y,I)=>{if(d==null)r(p.el=a(p.children),y,I);else{const w=p.el=d.el;p.children!==d.children&&l(w,p.children)}},b=(d,p,y,I)=>{d==null?r(p.el=c(p.children||""),y,I):p.el=d.el},V=(d,p,y,I)=>{[d.el,d.anchor]=g(d.children,p,y,I,d.el,d.anchor)},x=({el:d,anchor:p},y,I)=>{let w;for(;d&&d!==p;)w=f(d),r(d,y,I),d=w;r(p,y,I)},P=({el:d,anchor:p})=>{let y;for(;d&&d!==p;)y=f(d),s(d),d=y;s(p)},z=(d,p,y,I,w,D,F,C,N)=>{p.type==="svg"?F="svg":p.type==="math"&&(F="mathml"),d==null?O(p,y,I,w,D,F,C,N):we(d,p,w,D,F,C,N)},O=(d,p,y,I,w,D,F,C)=>{let N,S;const{props:B,shapeFlag:W,transition:q,dirs:Y}=d;if(N=d.el=o(d.type,D,B&&B.is,B),W&8?u(N,d.children):W&16&&ct(d.children,N,null,I,w,_a(d,D),F,C),Y&&Vn(d,null,I,"created"),J(N,d,d.scopeId,F,I),B){for(const gt in B)gt!=="value"&&!Vi(gt)&&i(N,gt,null,B[gt],D,d.children,I,w,Wt);"value"in B&&i(N,"value",null,B.value,D),(S=B.onVnodeBeforeMount)&&xe(S,I,d)}Y&&Vn(d,null,I,"beforeMount");const et=iE(w,q);et&&q.beforeEnter(N),r(N,p,y),((S=B&&B.onVnodeMounted)||et||Y)&&oe(()=>{S&&xe(S,I,d),et&&q.enter(N),Y&&Vn(d,null,I,"mounted")},w)},J=(d,p,y,I,w)=>{if(y&&m(d,y),I)for(let D=0;D<I.length;D++)m(d,I[D]);if(w){let D=w.subTree;if(p===D){const F=w.vnode;J(d,F,F.scopeId,F.slotScopeIds,w.parent)}}},ct=(d,p,y,I,w,D,F,C,N=0)=>{for(let S=N;S<d.length;S++){const B=d[S]=C?pn(d[S]):Me(d[S]);_(null,B,p,y,I,w,D,F,C)}},we=(d,p,y,I,w,D,F)=>{const C=p.el=d.el;let{patchFlag:N,dynamicChildren:S,dirs:B}=p;N|=d.patchFlag&16;const W=d.props||_t,q=p.props||_t;let Y;if(y&&Nn(y,!1),(Y=q.onVnodeBeforeUpdate)&&xe(Y,y,p,d),B&&Vn(p,d,y,"beforeUpdate"),y&&Nn(y,!0),S?ue(d.dynamicChildren,S,C,y,I,_a(p,w),D):F||ht(d,p,C,null,y,I,_a(p,w),D,!1),N>0){if(N&16)cn(C,p,W,q,y,I,w);else if(N&2&&W.class!==q.class&&i(C,"class",null,q.class,w),N&4&&i(C,"style",W.style,q.style,w),N&8){const et=p.dynamicProps;for(let gt=0;gt<et.length;gt++){const Tt=et[gt],kt=W[Tt],ve=q[Tt];(ve!==kt||Tt==="value")&&i(C,Tt,kt,ve,w,d.children,y,I,Wt)}}N&1&&d.children!==p.children&&u(C,p.children)}else!F&&S==null&&cn(C,p,W,q,y,I,w);((Y=q.onVnodeUpdated)||B)&&oe(()=>{Y&&xe(Y,y,p,d),B&&Vn(p,d,y,"updated")},I)},ue=(d,p,y,I,w,D,F)=>{for(let C=0;C<p.length;C++){const N=d[C],S=p[C],B=N.el&&(N.type===Oe||!Jr(N,S)||N.shapeFlag&70)?h(N.el):y;_(N,S,B,null,I,w,D,F,!0)}},cn=(d,p,y,I,w,D,F)=>{if(y!==I){if(y!==_t)for(const C in y)!Vi(C)&&!(C in I)&&i(d,C,y[C],null,F,p.children,w,D,Wt);for(const C in I){if(Vi(C))continue;const N=I[C],S=y[C];N!==S&&C!=="value"&&i(d,C,S,N,F,p.children,w,D,Wt)}"value"in I&&i(d,"value",y.value,I.value,F)}},Dn=(d,p,y,I,w,D,F,C,N)=>{const S=p.el=d?d.el:a(""),B=p.anchor=d?d.anchor:a("");let{patchFlag:W,dynamicChildren:q,slotScopeIds:Y}=p;Y&&(C=C?C.concat(Y):Y),d==null?(r(S,y,I),r(B,y,I),ct(p.children||[],y,B,w,D,F,C,N)):W>0&&W&64&&q&&d.dynamicChildren?(ue(d.dynamicChildren,q,y,w,D,F,C),(p.key!=null||w&&p===w.subTree)&&Qd(d,p,!0)):ht(d,p,y,B,w,D,F,C,N)},De=(d,p,y,I,w,D,F,C,N)=>{p.slotScopeIds=C,d==null?p.shapeFlag&512?w.ctx.activate(p,y,I,F,N):Yr(p,y,I,w,D,F,N):ar(d,p,N)},Yr=(d,p,y,I,w,D,F)=>{const C=d.component=pE(d,I,w);if(Ud(d)&&(C.ctx.renderer=$),gE(C),C.asyncDep){if(w&&w.registerDep(C,Ot),!d.el){const N=C.subTree=de(Hn);b(null,N,p,y)}}else Ot(C,d,p,y,w,D,F)},ar=(d,p,y)=>{const I=p.component=d.component;if(Ay(d,p,y))if(I.asyncDep&&!I.asyncResolved){mt(I,p,y);return}else I.next=p,py(I.update),I.effect.dirty=!0,I.update();else p.el=d.el,I.vnode=p},Ot=(d,p,y,I,w,D,F)=>{const C=()=>{if(d.isMounted){let{next:B,bu:W,u:q,parent:Y,vnode:et}=d;{const ur=Yd(d);if(ur){B&&(B.el=et.el,mt(d,B,F)),ur.asyncDep.then(()=>{d.isUnmounted||C()});return}}let gt=B,Tt;Nn(d,!1),B?(B.el=et.el,mt(d,B,F)):B=et,W&&Ni(W),(Tt=B.props&&B.props.onVnodeBeforeUpdate)&&xe(Tt,Y,B,et),Nn(d,!0);const kt=ma(d),ve=d.subTree;d.subTree=kt,_(ve,kt,h(ve.el),T(ve),d,w,D),B.el=kt.el,gt===null&&Iy(d,kt.el),q&&oe(q,w),(Tt=B.props&&B.props.onVnodeUpdated)&&oe(()=>xe(Tt,Y,B,et),w)}else{let B;const{el:W,props:q}=p,{bm:Y,m:et,parent:gt}=d,Tt=Oi(p);if(Nn(d,!1),Y&&Ni(Y),!Tt&&(B=q&&q.onVnodeBeforeMount)&&xe(B,gt,p),Nn(d,!0),W&&vt){const kt=()=>{d.subTree=ma(d),vt(W,d.subTree,d,w,null)};Tt?p.type.__asyncLoader().then(()=>!d.isUnmounted&&kt()):kt()}else{const kt=d.subTree=ma(d);_(null,kt,y,I,d,w,D),p.el=kt.el}if(et&&oe(et,w),!Tt&&(B=q&&q.onVnodeMounted)){const kt=p;oe(()=>xe(B,gt,kt),w)}(p.shapeFlag&256||gt&&Oi(gt.vnode)&&gt.vnode.shapeFlag&256)&&d.a&&oe(d.a,w),d.isMounted=!0,p=y=I=null}},N=d.effect=new el(C,ye,()=>ul(S),d.scope),S=d.update=()=>{N.dirty&&N.run()};S.id=d.uid,Nn(d,!0),S()},mt=(d,p,y)=>{p.component=d;const I=d.vnode.props;d.vnode=p,d.next=null,Zy(d,p.props,I,y),nE(d,p.children,y),tr(),$u(d),er()},ht=(d,p,y,I,w,D,F,C,N=!1)=>{const S=d&&d.children,B=d?d.shapeFlag:0,W=p.children,{patchFlag:q,shapeFlag:Y}=p;if(q>0){if(q&128){ln(S,W,y,I,w,D,F,C,N);return}else if(q&256){Qe(S,W,y,I,w,D,F,C,N);return}}Y&8?(B&16&&Wt(S,w,D),W!==S&&u(y,W)):B&16?Y&16?ln(S,W,y,I,w,D,F,C,N):Wt(S,w,D,!0):(B&8&&u(y,""),Y&16&&ct(W,y,I,w,D,F,C,N))},Qe=(d,p,y,I,w,D,F,C,N)=>{d=d||wr,p=p||wr;const S=d.length,B=p.length,W=Math.min(S,B);let q;for(q=0;q<W;q++){const Y=p[q]=N?pn(p[q]):Me(p[q]);_(d[q],Y,y,null,w,D,F,C,N)}S>B?Wt(d,w,D,!0,!1,W):ct(p,y,I,w,D,F,C,N,W)},ln=(d,p,y,I,w,D,F,C,N)=>{let S=0;const B=p.length;let W=d.length-1,q=B-1;for(;S<=W&&S<=q;){const Y=d[S],et=p[S]=N?pn(p[S]):Me(p[S]);if(Jr(Y,et))_(Y,et,y,null,w,D,F,C,N);else break;S++}for(;S<=W&&S<=q;){const Y=d[W],et=p[q]=N?pn(p[q]):Me(p[q]);if(Jr(Y,et))_(Y,et,y,null,w,D,F,C,N);else break;W--,q--}if(S>W){if(S<=q){const Y=q+1,et=Y<B?p[Y].el:I;for(;S<=q;)_(null,p[S]=N?pn(p[S]):Me(p[S]),y,et,w,D,F,C,N),S++}}else if(S>q)for(;S<=W;)ie(d[S],w,D,!0),S++;else{const Y=S,et=S,gt=new Map;for(S=et;S<=q;S++){const he=p[S]=N?pn(p[S]):Me(p[S]);he.key!=null&&gt.set(he.key,S)}let Tt,kt=0;const ve=q-et+1;let ur=!1,Vu=0;const Xr=new Array(ve);for(S=0;S<ve;S++)Xr[S]=0;for(S=Y;S<=W;S++){const he=d[S];if(kt>=ve){ie(he,w,D,!0);continue}let Ne;if(he.key!=null)Ne=gt.get(he.key);else for(Tt=et;Tt<=q;Tt++)if(Xr[Tt-et]===0&&Jr(he,p[Tt])){Ne=Tt;break}Ne===void 0?ie(he,w,D,!0):(Xr[Ne-et]=S+1,Ne>=Vu?Vu=Ne:ur=!0,_(he,p[Ne],y,null,w,D,F,C,N),kt++)}const Nu=ur?oE(Xr):wr;for(Tt=Nu.length-1,S=ve-1;S>=0;S--){const he=et+S,Ne=p[he],xu=he+1<B?p[he+1].el:I;Xr[S]===0?_(null,Ne,y,xu,w,D,F,C,N):ur&&(Tt<0||S!==Nu[Tt]?Ve(Ne,y,xu,2):Tt--)}}},Ve=(d,p,y,I,w=null)=>{const{el:D,type:F,transition:C,children:N,shapeFlag:S}=d;if(S&6){Ve(d.component.subTree,p,y,I);return}if(S&128){d.suspense.move(p,y,I);return}if(S&64){F.move(d,p,y,$);return}if(F===Oe){r(D,p,y);for(let W=0;W<N.length;W++)Ve(N[W],p,y,I);r(d.anchor,p,y);return}if(F===ya){x(d,p,y);return}if(I!==2&&S&1&&C)if(I===0)C.beforeEnter(D),r(D,p,y),oe(()=>C.enter(D),w);else{const{leave:W,delayLeave:q,afterLeave:Y}=C,et=()=>r(D,p,y),gt=()=>{W(D,()=>{et(),Y&&Y()})};q?q(D,et,gt):gt()}else r(D,p,y)},ie=(d,p,y,I=!1,w=!1)=>{const{type:D,props:F,ref:C,children:N,dynamicChildren:S,shapeFlag:B,patchFlag:W,dirs:q}=d;if(C!=null&&ic(C,null,y,d,!0),B&256){p.ctx.deactivate(d);return}const Y=B&1&&q,et=!Oi(d);let gt;if(et&&(gt=F&&F.onVnodeBeforeUnmount)&&xe(gt,p,d),B&6)di(d.component,y,I);else{if(B&128){d.suspense.unmount(y,I);return}Y&&Vn(d,null,p,"beforeUnmount"),B&64?d.type.remove(d,p,y,w,$,I):S&&(D!==Oe||W>0&&W&64)?Wt(S,p,y,!1,!0):(D===Oe&&W&384||!w&&B&16)&&Wt(N,p,y),I&&cr(d)}(et&&(gt=F&&F.onVnodeUnmounted)||Y)&&oe(()=>{gt&&xe(gt,p,d),Y&&Vn(d,null,p,"unmounted")},y)},cr=d=>{const{type:p,el:y,anchor:I,transition:w}=d;if(p===Oe){lr(y,I);return}if(p===ya){P(d);return}const D=()=>{s(y),w&&!w.persisted&&w.afterLeave&&w.afterLeave()};if(d.shapeFlag&1&&w&&!w.persisted){const{leave:F,delayLeave:C}=w,N=()=>F(y,D);C?C(d.el,D,N):N()}else D()},lr=(d,p)=>{let y;for(;d!==p;)y=f(d),s(d),d=y;s(p)},di=(d,p,y)=>{const{bum:I,scope:w,update:D,subTree:F,um:C}=d;I&&Ni(I),w.stop(),D&&(D.active=!1,ie(F,d,p,y)),C&&oe(C,p),oe(()=>{d.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Wt=(d,p,y,I=!1,w=!1,D=0)=>{for(let F=D;F<d.length;F++)ie(d[F],p,y,I,w)},T=d=>d.shapeFlag&6?T(d.component.subTree):d.shapeFlag&128?d.suspense.next():f(d.anchor||d.el);let U=!1;const L=(d,p,y)=>{d==null?p._vnode&&ie(p._vnode,null,null,!0):_(p._vnode||null,d,p,null,null,null,y),U||(U=!0,$u(),Od(),U=!1),p._vnode=d},$={p:_,um:ie,m:Ve,r:cr,mt:Yr,mc:ct,pc:ht,pbc:ue,n:T,o:e};let ft,vt;return t&&([ft,vt]=t($)),{render:L,hydrate:ft,createApp:Xy(L,ft)}}function _a({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Nn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function iE(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Qd(e,t,n=!1){const r=e.children,s=t.children;if(Q(r)&&Q(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=pn(s[i]),a.el=o.el),n||Qd(o,a)),a.type===Io&&(a.el=o.el)}}function oE(e){const t=e.slice(),n=[0];let r,s,i,o,a;const c=e.length;for(r=0;r<c;r++){const l=e[r];if(l!==0){if(s=n[n.length-1],e[s]<l){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<l?i=a+1:o=a;l<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function Yd(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Yd(t)}const aE=e=>e.__isTeleport,Oe=Symbol.for("v-fgt"),Io=Symbol.for("v-txt"),Hn=Symbol.for("v-cmt"),ya=Symbol.for("v-stc"),fs=[];let Ie=null;function ge(e=!1){fs.push(Ie=e?null:[])}function cE(){fs.pop(),Ie=fs[fs.length-1]||null}let bs=1;function Zu(e){bs+=e}function Xd(e){return e.dynamicChildren=bs>0?Ie||wr:null,cE(),bs>0&&Ie&&Ie.push(e),e}function ke(e,t,n,r,s,i){return Xd(rt(e,t,n,r,s,i,!0))}function Jd(e,t,n,r,s){return Xd(de(e,t,n,r,s,!0))}function oc(e){return e?e.__v_isVNode===!0:!1}function Jr(e,t){return e.type===t.type&&e.key===t.key}const Ro="__vInternal",Zd=({key:e})=>e??null,Mi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?xt(e)||le(e)||tt(e)?{i:ae,r:e,k:t,f:!!n}:e:null);function rt(e,t=null,n=null,r=0,s=null,i=e===Oe?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Zd(t),ref:t&&Mi(t),scopeId:To,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ae};return a?(ml(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=xt(n)?8:16),bs>0&&!o&&Ie&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ie.push(c),c}const de=lE;function lE(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Ry)&&(e=Hn),oc(e)){const a=Pr(e,t,!0);return n&&ml(a,n),bs>0&&!i&&Ie&&(a.shapeFlag&6?Ie[Ie.indexOf(e)]=a:Ie.push(a)),a.patchFlag|=-2,a}if(wE(e)&&(e=e.__vccOpts),t){t=uE(t);let{class:a,style:c}=t;a&&!xt(a)&&(t.class=tl(a)),At(c)&&(bd(c)&&!Q(c)&&(c=Kt({},c)),t.style=Zc(c))}const o=xt(e)?1:by(e)?128:aE(e)?64:At(e)?4:tt(e)?2:0;return rt(e,t,n,r,s,o,i,!0)}function uE(e){return e?bd(e)||Ro in e?Kt({},e):e:null}function Pr(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,a=t?hE(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Zd(a),ref:t&&t.ref?n&&s?Q(s)?s.concat(Mi(t)):[s,Mi(t)]:Mi(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Oe?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Pr(e.ssContent),ssFallback:e.ssFallback&&Pr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function xn(e=" ",t=0){return de(Io,null,e,t)}function ds(e="",t=!1){return t?(ge(),Jd(Hn,null,e)):de(Hn,null,e)}function Me(e){return e==null||typeof e=="boolean"?de(Hn):Q(e)?de(Oe,null,e.slice()):typeof e=="object"?pn(e):de(Io,null,String(e))}function pn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Pr(e)}function ml(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Q(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),ml(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(Ro in t)?t._ctx=ae:s===3&&ae&&(ae.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else tt(t)?(t={default:t,_ctx:ae},n=32):(t=String(t),r&64?(n=16,t=[xn(t)]):n=8);e.children=t,e.shapeFlag|=n}function hE(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=tl([t.class,r.class]));else if(s==="style")t.style=Zc([t.style,r.style]);else if(go(s)){const i=t[s],o=r[s];o&&i!==o&&!(Q(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function xe(e,t,n,r=null){be(e,t,7,[n,r])}const fE=qd();let dE=0;function pE(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||fE,i={uid:dE++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new F_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Wd(r,s),emitsOptions:Md(r,s),emit:null,emitted:null,propsDefaults:_t,inheritAttrs:r.inheritAttrs,ctx:_t,data:_t,props:_t,attrs:_t,slots:_t,refs:_t,setupState:_t,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=_y.bind(null,i),e.ce&&e.ce(i),i}let Yt=null;const mE=()=>Yt||ae;let Qi,ac;{const e=ld(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Qi=t("__VUE_INSTANCE_SETTERS__",n=>Yt=n),ac=t("__VUE_SSR_SETTERS__",n=>bo=n)}const Hs=e=>{const t=Yt;return Qi(e),e.scope.on(),()=>{e.scope.off(),Qi(t)}},th=()=>{Yt&&Yt.scope.off(),Qi(null)};function tp(e){return e.vnode.shapeFlag&4}let bo=!1;function gE(e,t=!1){t&&ac(t);const{props:n,children:r}=e.vnode,s=tp(e);Jy(e,n,s,t),eE(e,r);const i=s?_E(e,t):void 0;return t&&ac(!1),i}function _E(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Sd(new Proxy(e.ctx,Ky));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?EE(e):null,i=Hs(e);tr();const o=wn(r,e,0,[e.props,s]);if(er(),i(),id(o)){if(o.then(th,th),t)return o.then(a=>{eh(e,a,t)}).catch(a=>{wo(a,e,0)});e.asyncDep=o}else eh(e,o,t)}else ep(e,t)}function eh(e,t,n){tt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:At(t)&&(e.setupState=Dd(t)),ep(e,n)}let nh;function ep(e,t,n){const r=e.type;if(!e.render){if(!t&&nh&&!r.render){const s=r.template||dl(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:c}=r,l=Kt(Kt({isCustomElement:i,delimiters:a},o),c);r.render=nh(s,l)}}e.render=r.render||ye}{const s=Hs(e);tr();try{Wy(e)}finally{er(),s()}}}function yE(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return ce(e,"get","$attrs"),t[n]}}))}function EE(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return yE(e)},slots:e.slots,emit:e.emit,expose:t}}function So(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Dd(Sd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in hs)return hs[n](e)},has(t,n){return n in t||n in hs}}))}function wE(e){return tt(e)&&"__vccOpts"in e}const Ae=(e,t)=>oy(e,t,bo);function rh(e,t,n=_t){const r=mE(),s=zn(t),i=Zn(t),o=hy((c,l)=>{let u;return Dy(()=>{const h=e[t];We(u,h)&&(u=h,l())}),{get(){return c(),n.get?n.get(u):u},set(h){const f=r.vnode.props;!(f&&(t in f||s in f||i in f)&&(`onUpdate:${t}`in f||`onUpdate:${s}`in f||`onUpdate:${i}`in f))&&We(h,u)&&(u=h,l()),r.emit(`update:${t}`,n.set?n.set(h):h)}}}),a=t==="modelValue"?"modelModifiers":`${t}Modifiers`;return o[Symbol.iterator]=()=>{let c=0;return{next(){return c<2?{value:c++?e[a]||{}:o,done:!1}:{done:!0}}}},o}function np(e,t,n){const r=arguments.length;return r===2?At(t)&&!Q(t)?oc(t)?de(e,null,[t]):de(e,t):de(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&oc(n)&&(n=[n]),de(e,t,n))}const vE="3.4.15";/**
* @vue/runtime-dom v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const TE="http://www.w3.org/2000/svg",AE="http://www.w3.org/1998/Math/MathML",mn=typeof document<"u"?document:null,sh=mn&&mn.createElement("template"),IE={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?mn.createElementNS(TE,e):t==="mathml"?mn.createElementNS(AE,e):mn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>mn.createTextNode(e),createComment:e=>mn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>mn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{sh.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const a=sh.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},RE=Symbol("_vtc");function bE(e,t,n){const r=e[RE];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const SE=Symbol("_vod"),CE=Symbol("");function PE(e,t,n){const r=e.style,s=r.display,i=xt(n);if(n&&!i){if(t&&!xt(t))for(const o in t)n[o]==null&&cc(r,o,"");for(const o in n)cc(r,o,n[o])}else if(i){if(t!==n){const o=r[CE];o&&(n+=";"+o),r.cssText=n}}else t&&e.removeAttribute("style");SE in e&&(r.display=s)}const ih=/\s*!important$/;function cc(e,t,n){if(Q(n))n.forEach(r=>cc(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=DE(e,t);ih.test(n)?e.setProperty(Zn(r),n.replace(ih,""),"important"):e[r]=n}}const oh=["Webkit","Moz","ms"],Ea={};function DE(e,t){const n=Ea[t];if(n)return n;let r=zn(t);if(r!=="filter"&&r in e)return Ea[t]=r;r=cd(r);for(let s=0;s<oh.length;s++){const i=oh[s]+r;if(i in e)return Ea[t]=i}return t}const ah="http://www.w3.org/1999/xlink";function VE(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(ah,t.slice(6,t.length)):e.setAttributeNS(ah,t,n);else{const i=L_(t);n==null||i&&!ud(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function NE(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const l=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";l!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let c=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=ud(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function dr(e,t,n,r){e.addEventListener(t,n,r)}function xE(e,t,n,r){e.removeEventListener(t,n,r)}const ch=Symbol("_vei");function OE(e,t,n,r,s=null){const i=e[ch]||(e[ch]={}),o=i[t];if(r&&o)o.value=r;else{const[a,c]=kE(t);if(r){const l=i[t]=FE(r,s);dr(e,a,l,c)}else o&&(xE(e,a,o,c),i[t]=void 0)}}const lh=/(?:Once|Passive|Capture)$/;function kE(e){let t;if(lh.test(e)){t={};let r;for(;r=e.match(lh);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Zn(e.slice(2)),t]}let wa=0;const ME=Promise.resolve(),LE=()=>wa||(ME.then(()=>wa=0),wa=Date.now());function FE(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;be(UE(r,n.value),t,5,[r])};return n.value=e,n.attached=LE(),n}function UE(e,t){if(Q(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const uh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,BE=(e,t,n,r,s,i,o,a,c)=>{const l=s==="svg";t==="class"?bE(e,r,l):t==="style"?PE(e,n,r):go(t)?Yc(t)||OE(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):jE(e,t,r,l))?NE(e,t,r,i,o,a,c):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),VE(e,t,r,l))};function jE(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&uh(t)&&tt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return uh(t)&&xt(n)?!1:t in e}const hh=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Q(t)?n=>Ni(t,n):t};function $E(e){e.target.composing=!0}function fh(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const va=Symbol("_assign"),dh={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[va]=hh(s);const i=r||s.props&&s.props.type==="number";dr(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=Qa(a)),e[va](a)}),n&&dr(e,"change",()=>{e.value=e.value.trim()}),t||(dr(e,"compositionstart",$E),dr(e,"compositionend",fh),dr(e,"change",fh))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e[va]=hh(i),e.composing)return;const o=s||e.type==="number"?Qa(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===a)||(e.value=a))}},qE=Kt({patchProp:BE},IE);let ph;function KE(){return ph||(ph=rE(qE))}const WE=(...e)=>{const t=KE().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=HE(r);if(!s)return;const i=t._component;!tt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,zE(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function zE(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function HE(e){return xt(e)?document.querySelector(e):e}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const pr=typeof window<"u";function GE(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const dt=Object.assign;function Ta(e,t){const n={};for(const r in t){const s=t[r];n[r]=Se(s)?s.map(e):e(s)}return n}const ps=()=>{},Se=Array.isArray,QE=/\/$/,YE=e=>e.replace(QE,"");function Aa(e,t,n="/"){let r,s={},i="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,a>-1?a:t.length),s=e(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=tw(r??t,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function XE(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function mh(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function JE(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Dr(t.matched[r],n.matched[s])&&rp(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Dr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function rp(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!ZE(e[n],t[n]))return!1;return!0}function ZE(e,t){return Se(e)?gh(e,t):Se(t)?gh(t,e):e===t}function gh(e,t){return Se(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function tw(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var Ss;(function(e){e.pop="pop",e.push="push"})(Ss||(Ss={}));var ms;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ms||(ms={}));function ew(e){if(!e)if(pr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),YE(e)}const nw=/^[^#]+#/;function rw(e,t){return e.replace(nw,"#")+t}function sw(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Co=()=>({left:window.pageXOffset,top:window.pageYOffset});function iw(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=sw(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function _h(e,t){return(history.state?history.state.position-t:-1)+e}const lc=new Map;function ow(e,t){lc.set(e,t)}function aw(e){const t=lc.get(e);return lc.delete(e),t}let cw=()=>location.protocol+"//"+location.host;function sp(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),mh(c,"")}return mh(n,e)+r+s}function lw(e,t,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const m=sp(e,location),g=n.value,_=t.value;let E=0;if(f){if(n.value=m,t.value=f,o&&o===g){o=null;return}E=_?f.position-_.position:0}else r(m);s.forEach(b=>{b(n.value,g,{delta:E,type:Ss.pop,direction:E?E>0?ms.forward:ms.back:ms.unknown})})};function c(){o=n.value}function l(f){s.push(f);const m=()=>{const g=s.indexOf(f);g>-1&&s.splice(g,1)};return i.push(m),m}function u(){const{history:f}=window;f.state&&f.replaceState(dt({},f.state,{scroll:Co()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:h}}function yh(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?Co():null}}function uw(e){const{history:t,location:n}=window,r={value:sp(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const h=e.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+c:cw()+e+c;try{t[u?"replaceState":"pushState"](l,"",f),s.value=l}catch(m){console.error(m),n[u?"replace":"assign"](f)}}function o(c,l){const u=dt({},t.state,yh(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});i(c,u,!0),r.value=c}function a(c,l){const u=dt({},s.value,t.state,{forward:c,scroll:Co()});i(u.current,u,!0);const h=dt({},yh(r.value,c,null),{position:u.position+1},l);i(c,h,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function hw(e){e=ew(e);const t=uw(e),n=lw(e,t.state,t.location,t.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=dt({location:"",base:e,go:r,createHref:rw.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function fw(e){return typeof e=="string"||e&&typeof e=="object"}function ip(e){return typeof e=="string"||typeof e=="symbol"}const hn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},op=Symbol("");var Eh;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Eh||(Eh={}));function Vr(e,t){return dt(new Error,{type:e,[op]:!0},t)}function Ye(e,t){return e instanceof Error&&op in e&&(t==null||!!(e.type&t))}const wh="[^/]+?",dw={sensitive:!1,strict:!1,start:!0,end:!0},pw=/[.+*?^${}()[\]/\\]/g;function mw(e,t){const n=dt({},dw,t),r=[];let s=n.start?"^":"";const i=[];for(const l of e){const u=l.length?[]:[90];n.strict&&!l.length&&(s+="/");for(let h=0;h<l.length;h++){const f=l[h];let m=40+(n.sensitive?.25:0);if(f.type===0)h||(s+="/"),s+=f.value.replace(pw,"\\$&"),m+=40;else if(f.type===1){const{value:g,repeatable:_,optional:E,regexp:b}=f;i.push({name:g,repeatable:_,optional:E});const V=b||wh;if(V!==wh){m+=10;try{new RegExp(`(${V})`)}catch(P){throw new Error(`Invalid custom RegExp for param "${g}" (${V}): `+P.message)}}let x=_?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;h||(x=E&&l.length<2?`(?:/${x})`:"/"+x),E&&(x+="?"),s+=x,m+=20,E&&(m+=-8),_&&(m+=-20),V===".*"&&(m+=-50)}u.push(m)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const m=u[f]||"",g=i[f-1];h[g.name]=m&&g.repeatable?m.split("/"):m}return h}function c(l){let u="",h=!1;for(const f of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const m of f)if(m.type===0)u+=m.value;else if(m.type===1){const{value:g,repeatable:_,optional:E}=m,b=g in l?l[g]:"";if(Se(b)&&!_)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const V=Se(b)?b.join("/"):b;if(!V)if(E)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=V}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function gw(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function _w(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=gw(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(vh(r))return 1;if(vh(s))return-1}return s.length-r.length}function vh(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const yw={type:0,value:""},Ew=/[a-zA-Z0-9_]/;function ww(e){if(!e)return[[]];if(e==="/")return[[yw]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${n})/"${l}": ${m}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",u="";function h(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),l="")}function f(){l+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:c==="("?n=2:Ew.test(c)?f():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${l}"`),h(),o(),s}function vw(e,t,n){const r=mw(ww(e.path),n),s=dt(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Tw(e,t){const n=[],r=new Map;t=Ih({strict:!1,end:!0,sensitive:!1},t);function s(u){return r.get(u)}function i(u,h,f){const m=!f,g=Aw(u);g.aliasOf=f&&f.record;const _=Ih(t,u),E=[g];if("alias"in u){const x=typeof u.alias=="string"?[u.alias]:u.alias;for(const P of x)E.push(dt({},g,{components:f?f.record.components:g.components,path:P,aliasOf:f?f.record:g}))}let b,V;for(const x of E){const{path:P}=x;if(h&&P[0]!=="/"){const z=h.record.path,O=z[z.length-1]==="/"?"":"/";x.path=h.record.path+(P&&O+P)}if(b=vw(x,h,_),f?f.alias.push(b):(V=V||b,V!==b&&V.alias.push(b),m&&u.name&&!Ah(b)&&o(u.name)),g.children){const z=g.children;for(let O=0;O<z.length;O++)i(z[O],b,f&&f.children[O])}f=f||b,(b.record.components&&Object.keys(b.record.components).length||b.record.name||b.record.redirect)&&c(b)}return V?()=>{o(V)}:ps}function o(u){if(ip(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let h=0;for(;h<n.length&&_w(u,n[h])>=0&&(u.record.path!==n[h].record.path||!ap(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Ah(u)&&r.set(u.record.name,u)}function l(u,h){let f,m={},g,_;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw Vr(1,{location:u});_=f.record.name,m=dt(Th(h.params,f.keys.filter(V=>!V.optional).map(V=>V.name)),u.params&&Th(u.params,f.keys.map(V=>V.name))),g=f.stringify(m)}else if("path"in u)g=u.path,f=n.find(V=>V.re.test(g)),f&&(m=f.parse(g),_=f.record.name);else{if(f=h.name?r.get(h.name):n.find(V=>V.re.test(h.path)),!f)throw Vr(1,{location:u,currentLocation:h});_=f.record.name,m=dt({},h.params,u.params),g=f.stringify(m)}const E=[];let b=f;for(;b;)E.unshift(b.record),b=b.parent;return{name:_,path:g,params:m,matched:E,meta:Rw(E)}}return e.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Th(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Aw(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Iw(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Iw(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Ah(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Rw(e){return e.reduce((t,n)=>dt(t,n.meta),{})}function Ih(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function ap(e,t){return t.children.some(n=>n===e||ap(e,n))}const cp=/#/g,bw=/&/g,Sw=/\//g,Cw=/=/g,Pw=/\?/g,lp=/\+/g,Dw=/%5B/g,Vw=/%5D/g,up=/%5E/g,Nw=/%60/g,hp=/%7B/g,xw=/%7C/g,fp=/%7D/g,Ow=/%20/g;function gl(e){return encodeURI(""+e).replace(xw,"|").replace(Dw,"[").replace(Vw,"]")}function kw(e){return gl(e).replace(hp,"{").replace(fp,"}").replace(up,"^")}function uc(e){return gl(e).replace(lp,"%2B").replace(Ow,"+").replace(cp,"%23").replace(bw,"%26").replace(Nw,"`").replace(hp,"{").replace(fp,"}").replace(up,"^")}function Mw(e){return uc(e).replace(Cw,"%3D")}function Lw(e){return gl(e).replace(cp,"%23").replace(Pw,"%3F")}function Fw(e){return e==null?"":Lw(e).replace(Sw,"%2F")}function Yi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Uw(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(lp," "),o=i.indexOf("="),a=Yi(o<0?i:i.slice(0,o)),c=o<0?null:Yi(i.slice(o+1));if(a in t){let l=t[a];Se(l)||(l=t[a]=[l]),l.push(c)}else t[a]=c}return t}function Rh(e){let t="";for(let n in e){const r=e[n];if(n=Mw(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Se(r)?r.map(i=>i&&uc(i)):[r&&uc(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function Bw(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Se(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const jw=Symbol(""),bh=Symbol(""),_l=Symbol(""),dp=Symbol(""),hc=Symbol("");function Zr(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function gn(e,t,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(Vr(4,{from:n,to:t})):h instanceof Error?a(h):fw(h)?a(Vr(2,{from:t,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},l=e.call(r&&r.instances[s],t,n,c);let u=Promise.resolve(l);e.length<3&&(u=u.then(c)),u.catch(h=>a(h))})}function Ia(e,t,n,r){const s=[];for(const i of e)for(const o in i.components){let a=i.components[o];if(!(t!=="beforeRouteEnter"&&!i.instances[o]))if($w(a)){const l=(a.__vccOpts||a)[t];l&&s.push(gn(l,n,r,i,o))}else{let c=a();s.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=GE(l)?l.default:l;i.components[o]=u;const f=(u.__vccOpts||u)[t];return f&&gn(f,n,r,i,o)()}))}}return s}function $w(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Sh(e){const t=tn(_l),n=tn(dp),r=Ae(()=>t.resolve(Ze(e.to))),s=Ae(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(Dr.bind(null,u));if(f>-1)return f;const m=Ch(c[l-2]);return l>1&&Ch(u)===m&&h[h.length-1].path!==m?h.findIndex(Dr.bind(null,c[l-2])):f}),i=Ae(()=>s.value>-1&&zw(n.params,r.value.params)),o=Ae(()=>s.value>-1&&s.value===n.matched.length-1&&rp(n.params,r.value.params));function a(c={}){return Ww(c)?t[Ze(e.replace)?"replace":"push"](Ze(e.to)).catch(ps):Promise.resolve()}return{route:r,href:Ae(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const qw=Fd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Sh,setup(e,{slots:t}){const n=Sr(Sh(e)),{options:r}=tn(_l),s=Ae(()=>({[Ph(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Ph(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:np("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Kw=qw;function Ww(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function zw(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Se(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Ch(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ph=(e,t,n)=>e??t??n,Hw=Fd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=tn(hc),s=Ae(()=>e.route||r.value),i=tn(bh,0),o=Ae(()=>{let l=Ze(i);const{matched:u}=s.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=Ae(()=>s.value.matched[o.value]);ki(bh,Ae(()=>o.value+1)),ki(jw,a),ki(hc,s);const c=yr();return xi(()=>[c.value,a.value,e.name],([l,u,h],[f,m,g])=>{u&&(u.instances[h]=l,m&&m!==u&&l&&l===f&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),l&&u&&(!m||!Dr(u,m)||!f)&&(u.enterCallbacks[h]||[]).forEach(_=>_(l))},{flush:"post"}),()=>{const l=s.value,u=e.name,h=a.value,f=h&&h.components[u];if(!f)return Dh(n.default,{Component:f,route:l});const m=h.props[u],g=m?m===!0?l.params:typeof m=="function"?m(l):m:null,E=np(f,dt({},g,t,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return Dh(n.default,{Component:E,route:l})||E}}});function Dh(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const pp=Hw;function Gw(e){const t=Tw(e.routes,e),n=e.parseQuery||Uw,r=e.stringifyQuery||Rh,s=e.history,i=Zr(),o=Zr(),a=Zr(),c=ay(hn);let l=hn;pr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Ta.bind(null,T=>""+T),h=Ta.bind(null,Fw),f=Ta.bind(null,Yi);function m(T,U){let L,$;return ip(T)?(L=t.getRecordMatcher(T),$=U):$=T,t.addRoute($,L)}function g(T){const U=t.getRecordMatcher(T);U&&t.removeRoute(U)}function _(){return t.getRoutes().map(T=>T.record)}function E(T){return!!t.getRecordMatcher(T)}function b(T,U){if(U=dt({},U||c.value),typeof T=="string"){const p=Aa(n,T,U.path),y=t.resolve({path:p.path},U),I=s.createHref(p.fullPath);return dt(p,y,{params:f(y.params),hash:Yi(p.hash),redirectedFrom:void 0,href:I})}let L;if("path"in T)L=dt({},T,{path:Aa(n,T.path,U.path).path});else{const p=dt({},T.params);for(const y in p)p[y]==null&&delete p[y];L=dt({},T,{params:h(p)}),U.params=h(U.params)}const $=t.resolve(L,U),ft=T.hash||"";$.params=u(f($.params));const vt=XE(r,dt({},T,{hash:kw(ft),path:$.path})),d=s.createHref(vt);return dt({fullPath:vt,hash:ft,query:r===Rh?Bw(T.query):T.query||{}},$,{redirectedFrom:void 0,href:d})}function V(T){return typeof T=="string"?Aa(n,T,c.value.path):dt({},T)}function x(T,U){if(l!==T)return Vr(8,{from:U,to:T})}function P(T){return J(T)}function z(T){return P(dt(V(T),{replace:!0}))}function O(T){const U=T.matched[T.matched.length-1];if(U&&U.redirect){const{redirect:L}=U;let $=typeof L=="function"?L(T):L;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=V($):{path:$},$.params={}),dt({query:T.query,hash:T.hash,params:"path"in $?{}:T.params},$)}}function J(T,U){const L=l=b(T),$=c.value,ft=T.state,vt=T.force,d=T.replace===!0,p=O(L);if(p)return J(dt(V(p),{state:typeof p=="object"?dt({},ft,p.state):ft,force:vt,replace:d}),U||L);const y=L;y.redirectedFrom=U;let I;return!vt&&JE(r,$,L)&&(I=Vr(16,{to:y,from:$}),Ve($,$,!0,!1)),(I?Promise.resolve(I):ue(y,$)).catch(w=>Ye(w)?Ye(w,2)?w:ln(w):ht(w,y,$)).then(w=>{if(w){if(Ye(w,2))return J(dt({replace:d},V(w.to),{state:typeof w.to=="object"?dt({},ft,w.to.state):ft,force:vt}),U||y)}else w=Dn(y,$,!0,d,ft);return cn(y,$,w),w})}function ct(T,U){const L=x(T,U);return L?Promise.reject(L):Promise.resolve()}function we(T){const U=lr.values().next().value;return U&&typeof U.runWithContext=="function"?U.runWithContext(T):T()}function ue(T,U){let L;const[$,ft,vt]=Qw(T,U);L=Ia($.reverse(),"beforeRouteLeave",T,U);for(const p of $)p.leaveGuards.forEach(y=>{L.push(gn(y,T,U))});const d=ct.bind(null,T,U);return L.push(d),Wt(L).then(()=>{L=[];for(const p of i.list())L.push(gn(p,T,U));return L.push(d),Wt(L)}).then(()=>{L=Ia(ft,"beforeRouteUpdate",T,U);for(const p of ft)p.updateGuards.forEach(y=>{L.push(gn(y,T,U))});return L.push(d),Wt(L)}).then(()=>{L=[];for(const p of vt)if(p.beforeEnter)if(Se(p.beforeEnter))for(const y of p.beforeEnter)L.push(gn(y,T,U));else L.push(gn(p.beforeEnter,T,U));return L.push(d),Wt(L)}).then(()=>(T.matched.forEach(p=>p.enterCallbacks={}),L=Ia(vt,"beforeRouteEnter",T,U),L.push(d),Wt(L))).then(()=>{L=[];for(const p of o.list())L.push(gn(p,T,U));return L.push(d),Wt(L)}).catch(p=>Ye(p,8)?p:Promise.reject(p))}function cn(T,U,L){a.list().forEach($=>we(()=>$(T,U,L)))}function Dn(T,U,L,$,ft){const vt=x(T,U);if(vt)return vt;const d=U===hn,p=pr?history.state:{};L&&($||d?s.replace(T.fullPath,dt({scroll:d&&p&&p.scroll},ft)):s.push(T.fullPath,ft)),c.value=T,Ve(T,U,L,d),ln()}let De;function Yr(){De||(De=s.listen((T,U,L)=>{if(!di.listening)return;const $=b(T),ft=O($);if(ft){J(dt(ft,{replace:!0}),$).catch(ps);return}l=$;const vt=c.value;pr&&ow(_h(vt.fullPath,L.delta),Co()),ue($,vt).catch(d=>Ye(d,12)?d:Ye(d,2)?(J(d.to,$).then(p=>{Ye(p,20)&&!L.delta&&L.type===Ss.pop&&s.go(-1,!1)}).catch(ps),Promise.reject()):(L.delta&&s.go(-L.delta,!1),ht(d,$,vt))).then(d=>{d=d||Dn($,vt,!1),d&&(L.delta&&!Ye(d,8)?s.go(-L.delta,!1):L.type===Ss.pop&&Ye(d,20)&&s.go(-1,!1)),cn($,vt,d)}).catch(ps)}))}let ar=Zr(),Ot=Zr(),mt;function ht(T,U,L){ln(T);const $=Ot.list();return $.length?$.forEach(ft=>ft(T,U,L)):console.error(T),Promise.reject(T)}function Qe(){return mt&&c.value!==hn?Promise.resolve():new Promise((T,U)=>{ar.add([T,U])})}function ln(T){return mt||(mt=!T,Yr(),ar.list().forEach(([U,L])=>T?L(T):U()),ar.reset()),T}function Ve(T,U,L,$){const{scrollBehavior:ft}=e;if(!pr||!ft)return Promise.resolve();const vt=!L&&aw(_h(T.fullPath,0))||($||!L)&&history.state&&history.state.scroll||null;return Nd().then(()=>ft(T,U,vt)).then(d=>d&&iw(d)).catch(d=>ht(d,T,U))}const ie=T=>s.go(T);let cr;const lr=new Set,di={currentRoute:c,listening:!0,addRoute:m,removeRoute:g,hasRoute:E,getRoutes:_,resolve:b,options:e,push:P,replace:z,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Ot.add,isReady:Qe,install(T){const U=this;T.component("RouterLink",Kw),T.component("RouterView",pp),T.config.globalProperties.$router=U,Object.defineProperty(T.config.globalProperties,"$route",{enumerable:!0,get:()=>Ze(c)}),pr&&!cr&&c.value===hn&&(cr=!0,P(s.location).catch(ft=>{}));const L={};for(const ft in hn)Object.defineProperty(L,ft,{get:()=>c.value[ft],enumerable:!0});T.provide(_l,U),T.provide(dp,Id(L)),T.provide(hc,c);const $=T.unmount;lr.add(T),T.unmount=function(){lr.delete(T),lr.size<1&&(l=hn,De&&De(),De=null,c.value=hn,cr=!1,mt=!1),$()}}};function Wt(T){return T.reduce((U,L)=>U.then(()=>we(L)),Promise.resolve())}return di}function Qw(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(l=>Dr(l,a))?r.push(a):n.push(a));const c=e.matched[o];c&&(t.matched.find(l=>Dr(l,c))||s.push(c))}return[n,r,s]}const Yw={__name:"App",setup(e){return(t,n)=>(ge(),Jd(Ze(pp)))}};var Vh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Xw=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],o=e[n++],a=e[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},gp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,a=o?e[s+1]:0,c=s+2<e.length,l=c?e[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(f=64)),r.push(n[u],n[h],n[f],n[m])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(mp(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Xw(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const l=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||a==null||l==null||h==null)throw new Jw;const f=i<<2|a>>4;if(r.push(f),l!==64){const m=a<<4&240|l>>2;if(r.push(m),h!==64){const g=l<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Jw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Zw=function(e){const t=mp(e);return gp.encodeByteArray(t,!0)},Xi=function(e){return Zw(e).replace(/\./g,"")},tv=function(e){try{return gp.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=()=>ev().__FIREBASE_DEFAULTS__,rv=()=>{if(typeof process>"u"||typeof Vh>"u")return;const e=Vh.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},sv=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&tv(e[1]);return t&&JSON.parse(t)},yl=()=>{try{return nv()||rv()||sv()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},iv=e=>{var t,n;return(n=(t=yl())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},_p=e=>{const t=iv(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},yp=()=>{var e;return(e=yl())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Xi(JSON.stringify(n)),Xi(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function av(){var e;const t=(e=yl())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cv(){return!av()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wp(){try{return typeof indexedDB=="object"}catch{return!1}}function lv(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="FirebaseError";class nr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=uv,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vp.prototype.create)}}class vp{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?hv(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new nr(s,a,r)}}function hv(e,t){return e.replace(fv,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const fv=/\{\$([^}]+)}/g;function fc(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],o=t[s];if(Nh(i)&&Nh(o)){if(!fc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Nh(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(e){return e&&e._delegate?e._delegate:e}class Nr{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new ov;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(mv(t))try{this.getOrInitializeService({instanceIdentifier:On})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=On){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=On){return this.instances.has(t)}getOptions(t=On){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pv(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=On){return this.component?this.component.multipleInstances?t:On:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pv(e){return e===On?void 0:e}function mv(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new dv(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(at||(at={}));const _v={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},yv=at.INFO,Ev={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},wv=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Ev[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Tp{constructor(t){this.name=t,this._logLevel=yv,this._logHandler=wv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in at))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?_v[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...t),this._logHandler(this,at.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...t),this._logHandler(this,at.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,at.INFO,...t),this._logHandler(this,at.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,at.WARN,...t),this._logHandler(this,at.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...t),this._logHandler(this,at.ERROR,...t)}}const vv=(e,t)=>t.some(n=>e instanceof n);let xh,Oh;function Tv(){return xh||(xh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Av(){return Oh||(Oh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ap=new WeakMap,dc=new WeakMap,Ip=new WeakMap,Ra=new WeakMap,El=new WeakMap;function Iv(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(vn(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Ap.set(n,e)}).catch(()=>{}),El.set(t,e),t}function Rv(e){if(dc.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});dc.set(e,t)}let pc={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return dc.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Ip.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function bv(e){pc=e(pc)}function Sv(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(ba(this),t,...n);return Ip.set(r,t.sort?t.sort():[t]),vn(r)}:Av().includes(e)?function(...t){return e.apply(ba(this),t),vn(Ap.get(this))}:function(...t){return vn(e.apply(ba(this),t))}}function Cv(e){return typeof e=="function"?Sv(e):(e instanceof IDBTransaction&&Rv(e),vv(e,Tv())?new Proxy(e,pc):e)}function vn(e){if(e instanceof IDBRequest)return Iv(e);if(Ra.has(e))return Ra.get(e);const t=Cv(e);return t!==e&&(Ra.set(e,t),El.set(t,e)),t}const ba=e=>El.get(e);function Pv(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=vn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(vn(o.result),c.oldVersion,c.newVersion,vn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Dv=["get","getKey","getAll","getAllKeys","count"],Vv=["put","add","delete","clear"],Sa=new Map;function kh(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Sa.get(t))return Sa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Vv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Dv.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return Sa.set(t,i),i}bv(e=>({...e,get:(t,n,r)=>kh(t,n)||e.get(t,n,r),has:(t,n)=>!!kh(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xv(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const mc="@firebase/app",Mh="0.9.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new Tp("@firebase/app"),Ov="@firebase/app-compat",kv="@firebase/analytics-compat",Mv="@firebase/analytics",Lv="@firebase/app-check-compat",Fv="@firebase/app-check",Uv="@firebase/auth",Bv="@firebase/auth-compat",jv="@firebase/database",$v="@firebase/database-compat",qv="@firebase/functions",Kv="@firebase/functions-compat",Wv="@firebase/installations",zv="@firebase/installations-compat",Hv="@firebase/messaging",Gv="@firebase/messaging-compat",Qv="@firebase/performance",Yv="@firebase/performance-compat",Xv="@firebase/remote-config",Jv="@firebase/remote-config-compat",Zv="@firebase/storage",tT="@firebase/storage-compat",eT="@firebase/firestore",nT="@firebase/firestore-compat",rT="firebase",sT="10.7.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc="[DEFAULT]",iT={[mc]:"fire-core",[Ov]:"fire-core-compat",[Mv]:"fire-analytics",[kv]:"fire-analytics-compat",[Fv]:"fire-app-check",[Lv]:"fire-app-check-compat",[Uv]:"fire-auth",[Bv]:"fire-auth-compat",[jv]:"fire-rtdb",[$v]:"fire-rtdb-compat",[qv]:"fire-fn",[Kv]:"fire-fn-compat",[Wv]:"fire-iid",[zv]:"fire-iid-compat",[Hv]:"fire-fcm",[Gv]:"fire-fcm-compat",[Qv]:"fire-perf",[Yv]:"fire-perf-compat",[Xv]:"fire-rc",[Jv]:"fire-rc-compat",[Zv]:"fire-gcs",[tT]:"fire-gcs-compat",[eT]:"fire-fst",[nT]:"fire-fst-compat","fire-js":"fire-js",[rT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new Map,_c=new Map;function oT(e,t){try{e.container.addComponent(t)}catch(n){Gn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Cs(e){const t=e.name;if(_c.has(t))return Gn.debug(`There were multiple attempts to register component ${t}.`),!1;_c.set(t,e);for(const n of Zi.values())oT(n,e);return!0}function Rp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Tn=new vp("app","Firebase",aT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp=sT;function Sp(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:gc,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw Tn.create("bad-app-name",{appName:String(s)});if(n||(n=yp()),!n)throw Tn.create("no-options");const i=Zi.get(s);if(i){if(fc(n,i.options)&&fc(r,i.config))return i;throw Tn.create("duplicate-app",{appName:s})}const o=new gv(s);for(const c of _c.values())o.addComponent(c);const a=new cT(n,r,o);return Zi.set(s,a),a}function Cp(e=gc){const t=Zi.get(e);if(!t&&e===gc&&yp())return Sp();if(!t)throw Tn.create("no-app",{appName:e});return t}function An(e,t,n){var r;let s=(r=iT[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${t}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Gn.warn(a.join(" "));return}Cs(new Nr(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="firebase-heartbeat-database",uT=1,Ps="firebase-heartbeat-store";let Ca=null;function Pp(){return Ca||(Ca=Pv(lT,uT,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ps)}catch(n){console.warn(n)}}}}).catch(e=>{throw Tn.create("idb-open",{originalErrorMessage:e.message})})),Ca}async function hT(e){try{return await(await Pp()).transaction(Ps).objectStore(Ps).get(Dp(e))}catch(t){if(t instanceof nr)Gn.warn(t.message);else{const n=Tn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Gn.warn(n.message)}}}async function Lh(e,t){try{const r=(await Pp()).transaction(Ps,"readwrite");await r.objectStore(Ps).put(t,Dp(e)),await r.done}catch(n){if(n instanceof nr)Gn.warn(n.message);else{const r=Tn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gn.warn(r.message)}}}function Dp(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=1024,dT=30*24*60*60*1e3;class pT{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Fh();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=dT}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fh(),{heartbeatsToSend:r,unsentEntries:s}=mT(this._heartbeatsCache.heartbeats),i=Xi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Fh(){return new Date().toISOString().substring(0,10)}function mT(e,t=fT){const n=[];let r=e.slice();for(const s of e){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Uh(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Uh(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wp()?lv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lh(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lh(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Uh(e){return Xi(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(e){Cs(new Nr("platform-logger",t=>new Nv(t),"PRIVATE")),Cs(new Nr("heartbeat",t=>new pT(t),"PRIVATE")),An(mc,Mh,e),An(mc,Mh,"esm2017"),An("fire-js","")}_T("");var yT="firebase",ET="10.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An(yT,ET,"app");var wT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},M,wl=wl||{},G=wT||self;function Po(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Gs(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function vT(e){return Object.prototype.hasOwnProperty.call(e,Pa)&&e[Pa]||(e[Pa]=++TT)}var Pa="closure_uid_"+(1e9*Math.random()>>>0),TT=0;function AT(e,t,n){return e.call.apply(e.bind,arguments)}function IT(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),e.apply(t,s)}}return function(){return e.apply(t,arguments)}}function Xt(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Xt=AT:Xt=IT,Xt.apply(null,arguments)}function wi(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Ft(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[s].apply(r,o)}}function Cn(){this.s=this.s,this.o=this.o}var RT=0;Cn.prototype.s=!1;Cn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),RT!=0)&&vT(this)};Cn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Vp=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function vl(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Bh(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Po(r)){const s=e.length||0,i=r.length||0;e.length=s+i;for(let o=0;o<i;o++)e[s+o]=r[o]}else e.push(r)}}function Jt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Jt.prototype.h=function(){this.defaultPrevented=!0};var bT=function(){if(!G.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};G.addEventListener("test",n,t),G.removeEventListener("test",n,t)}catch{}return e}();function Ds(e){return/^[\s\xa0]*$/.test(e)}function Do(){var e=G.navigator;return e&&(e=e.userAgent)?e:""}function Fe(e){return Do().indexOf(e)!=-1}function Tl(e){return Tl[" "](e),e}Tl[" "]=function(){};function ST(e,t){var n=EA;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var CT=Fe("Opera"),xr=Fe("Trident")||Fe("MSIE"),Np=Fe("Edge"),yc=Np||xr,xp=Fe("Gecko")&&!(Do().toLowerCase().indexOf("webkit")!=-1&&!Fe("Edge"))&&!(Fe("Trident")||Fe("MSIE"))&&!Fe("Edge"),PT=Do().toLowerCase().indexOf("webkit")!=-1&&!Fe("Edge");function Op(){var e=G.document;return e?e.documentMode:void 0}var Ec;t:{var Da="",Va=function(){var e=Do();if(xp)return/rv:([^\);]+)(\)|;)/.exec(e);if(Np)return/Edge\/([\d\.]+)/.exec(e);if(xr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(PT)return/WebKit\/(\S+)/.exec(e);if(CT)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(Va&&(Da=Va?Va[1]:""),xr){var Na=Op();if(Na!=null&&Na>parseFloat(Da)){Ec=String(Na);break t}}Ec=Da}var wc;if(G.document&&xr){var jh=Op();wc=jh||parseInt(Ec,10)||void 0}else wc=void 0;var DT=wc;function Vs(e,t){if(Jt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(xp){t:{try{Tl(t.nodeName);var s=!0;break t}catch{}s=!1}s||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:VT[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Vs.$.h.call(this)}}Ft(Vs,Jt);var VT={2:"touch",3:"pen",4:"mouse"};Vs.prototype.h=function(){Vs.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Qs="closure_listenable_"+(1e6*Math.random()|0),NT=0;function xT(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++NT,this.fa=this.ia=!1}function Vo(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Al(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function OT(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function kp(e){const t={};for(const n in e)t[n]=e[n];return t}const $h="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mp(e,t){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)e[n]=r[n];for(let i=0;i<$h.length;i++)n=$h[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function No(e){this.src=e,this.g={},this.h=0}No.prototype.add=function(e,t,n,r,s){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var o=Tc(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new xT(t,this.src,i,!!r,s),t.ia=n,e.push(t)),t};function vc(e,t){var n=t.type;if(n in e.g){var r=e.g[n],s=Vp(r,t),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Vo(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Tc(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}var Il="closure_lm_"+(1e6*Math.random()|0),xa={};function Lp(e,t,n,r,s){if(r&&r.once)return Up(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Lp(e,t[i],n,r,s);return null}return n=Sl(n),e&&e[Qs]?e.O(t,n,Gs(r)?!!r.capture:!!r,s):Fp(e,t,n,!1,r,s)}function Fp(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=Gs(s)?!!s.capture:!!s,a=bl(e);if(a||(e[Il]=a=new No(e)),n=a.add(t,n,r,o,i),n.proxy)return n;if(r=kT(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)bT||(s=o),s===void 0&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(jp(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function kT(){function e(n){return t.call(e.src,e.listener,n)}const t=MT;return e}function Up(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Up(e,t[i],n,r,s);return null}return n=Sl(n),e&&e[Qs]?e.P(t,n,Gs(r)?!!r.capture:!!r,s):Fp(e,t,n,!0,r,s)}function Bp(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Bp(e,t[i],n,r,s);else r=Gs(r)?!!r.capture:!!r,n=Sl(n),e&&e[Qs]?(e=e.i,t=String(t).toString(),t in e.g&&(i=e.g[t],n=Tc(i,n,r,s),-1<n&&(Vo(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=bl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Tc(t,n,r,s)),(n=-1<e?t[e]:null)&&Rl(n))}function Rl(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Qs])vc(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(jp(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=bl(t))?(vc(n,e),n.h==0&&(n.src=null,t[Il]=null)):Vo(e)}}}function jp(e){return e in xa?xa[e]:xa[e]="on"+e}function MT(e,t){if(e.fa)e=!0;else{t=new Vs(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Rl(e),e=n.call(r,t)}return e}function bl(e){return e=e[Il],e instanceof No?e:null}var Oa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sl(e){return typeof e=="function"?e:(e[Oa]||(e[Oa]=function(t){return e.handleEvent(t)}),e[Oa])}function Lt(){Cn.call(this),this.i=new No(this),this.S=this,this.J=null}Ft(Lt,Cn);Lt.prototype[Qs]=!0;Lt.prototype.removeEventListener=function(e,t,n,r){Bp(this,e,t,n,r)};function $t(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Jt(t,e);else if(t instanceof Jt)t.target=t.target||e;else{var s=t;t=new Jt(r,e),Mp(t,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=vi(o,r,!0,t)&&s}if(o=t.g=e,s=vi(o,r,!0,t)&&s,s=vi(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)o=t.g=n[i],s=vi(o,r,!1,t)&&s}Lt.prototype.N=function(){if(Lt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Vo(n[r]);delete e.g[t],e.h--}}this.J=null};Lt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Lt.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function vi(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&vc(e.i,o),s=a.call(c,r)!==!1&&s}}return s&&!r.defaultPrevented}var Cl=G.JSON.stringify;class LT{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function FT(){var e=Pl;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class UT{constructor(){this.h=this.g=null}add(t,n){const r=$p.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var $p=new LT(()=>new BT,e=>e.reset());class BT{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function jT(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function $T(e){G.setTimeout(()=>{throw e},0)}let Ns,xs=!1,Pl=new UT,qp=()=>{const e=G.Promise.resolve(void 0);Ns=()=>{e.then(qT)}};var qT=()=>{for(var e;e=FT();){try{e.h.call(e.g)}catch(n){$T(n)}var t=$p;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}xs=!1};function xo(e,t){Lt.call(this),this.h=e||1,this.g=t||G,this.j=Xt(this.qb,this),this.l=Date.now()}Ft(xo,Lt);M=xo.prototype;M.ga=!1;M.T=null;M.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),$t(this,"tick"),this.ga&&(Dl(this),this.start()))}};M.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Dl(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}M.N=function(){xo.$.N.call(this),Dl(this),delete this.g};function Vl(e,t,n){if(typeof e=="function")n&&(e=Xt(e,n));else if(e&&typeof e.handleEvent=="function")e=Xt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:G.setTimeout(e,t||0)}function Kp(e){e.g=Vl(()=>{e.g=null,e.i&&(e.i=!1,Kp(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class KT extends Cn{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Kp(this)}N(){super.N(),this.g&&(G.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(e){Cn.call(this),this.h=e,this.g={}}Ft(Os,Cn);var qh=[];function Wp(e,t,n,r){Array.isArray(n)||(n&&(qh[0]=n.toString()),n=qh);for(var s=0;s<n.length;s++){var i=Lp(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function zp(e){Al(e.g,function(t,n){this.g.hasOwnProperty(n)&&Rl(t)},e),e.g={}}Os.prototype.N=function(){Os.$.N.call(this),zp(this)};Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Oo(){this.g=!0}Oo.prototype.Ea=function(){this.g=!1};function WT(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+`
`+n+`
`+o})}function zT(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+`
`+n+`
`+i+" "+o})}function Er(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+GT(e,n)+(r?" "+r:"")})}function HT(e,t){e.info(function(){return"TIMEOUT: "+t})}Oo.prototype.info=function(){};function GT(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Cl(n)}catch{return t}}var rr={},Kh=null;function ko(){return Kh=Kh||new Lt}rr.Ta="serverreachability";function Hp(e){Jt.call(this,rr.Ta,e)}Ft(Hp,Jt);function ks(e){const t=ko();$t(t,new Hp(t))}rr.STAT_EVENT="statevent";function Gp(e,t){Jt.call(this,rr.STAT_EVENT,e),this.stat=t}Ft(Gp,Jt);function ne(e){const t=ko();$t(t,new Gp(t,e))}rr.Ua="timingevent";function Qp(e,t){Jt.call(this,rr.Ua,e),this.size=t}Ft(Qp,Jt);function Ys(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return G.setTimeout(function(){e()},t)}var Mo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Yp={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Nl(){}Nl.prototype.h=null;function Wh(e){return e.h||(e.h=e.i())}function Xp(){}var Xs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function xl(){Jt.call(this,"d")}Ft(xl,Jt);function Ol(){Jt.call(this,"c")}Ft(Ol,Jt);var Ac;function Lo(){}Ft(Lo,Nl);Lo.prototype.g=function(){return new XMLHttpRequest};Lo.prototype.i=function(){return{}};Ac=new Lo;function Js(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Os(this),this.P=QT,e=yc?125:void 0,this.V=new xo(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Jp}function Jp(){this.i=null,this.g="",this.h=!1}var QT=45e3,Zp={},Ic={};M=Js.prototype;M.setTimeout=function(e){this.P=e};function Rc(e,t,n){e.L=1,e.A=Uo(sn(t)),e.u=n,e.S=!0,tm(e,null)}function tm(e,t){e.G=Date.now(),Zs(e),e.B=sn(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),cm(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Jp,e.g=Pm(e.l,n?t:null,!e.u),0<e.O&&(e.M=new KT(Xt(e.Pa,e,e.g),e.O)),Wp(e.U,e.g,"readystatechange",e.nb),t=e.I?kp(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),ks(),WT(e.j,e.v,e.B,e.m,e.W,e.u)}M.nb=function(e){e=e.target;const t=this.M;t&&Ue(e)==3?t.l():this.Pa(e)};M.Pa=function(e){try{if(e==this.g)t:{const u=Ue(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||yc||this.g&&(this.h.h||this.g.ja()||Qh(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?ks(3):ks(2)),Fo(this);var n=this.g.da();this.ca=n;e:if(em(this)){var r=Qh(this.g);e="";var s=r.length,i=Ue(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fn(this),gs(this);var o="";break e}this.h.i=new G.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,zT(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ds(a)){var l=a;break e}}l=null}if(n=l)Er(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bc(this,n);else{this.i=!1,this.s=3,ne(12),Fn(this),gs(this);break t}}this.S?(nm(this,u,o),yc&&this.i&&u==3&&(Wp(this.U,this.V,"tick",this.mb),this.V.start())):(Er(this.j,this.m,o,null),bc(this,o)),u==4&&Fn(this),this.i&&!this.J&&(u==4?Rm(this.l,this):(this.i=!1,Zs(this)))}else gA(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Fn(this),gs(this)}}}catch{}finally{}};function em(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function nm(e,t,n){let r=!0,s;for(;!e.J&&e.o<n.length;)if(s=YT(e,n),s==Ic){t==4&&(e.s=4,ne(14),r=!1),Er(e.j,e.m,null,"[Incomplete Response]");break}else if(s==Zp){e.s=4,ne(15),Er(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else Er(e.j,e.m,s,null),bc(e,s);em(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,ne(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bl(t),t.M=!0,ne(11))):(Er(e.j,e.m,n,"[Invalid Chunked Response]"),Fn(e),gs(e))}M.mb=function(){if(this.g){var e=Ue(this.g),t=this.g.ja();this.o<t.length&&(Fo(this),nm(this,e,t),this.i&&e!=4&&Zs(this))}};function YT(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?Ic:(n=Number(t.substring(n,r)),isNaN(n)?Zp:(r+=1,r+n>t.length?Ic:(t=t.slice(r,r+n),e.o=r+n,t)))}M.cancel=function(){this.J=!0,Fn(this)};function Zs(e){e.Y=Date.now()+e.P,rm(e,e.P)}function rm(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=Ys(Xt(e.lb,e),t)}function Fo(e){e.C&&(G.clearTimeout(e.C),e.C=null)}M.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(HT(this.j,this.B),this.L!=2&&(ks(),ne(17)),Fn(this),this.s=2,gs(this)):rm(this,this.Y-e)};function gs(e){e.l.H==0||e.J||Rm(e.l,e)}function Fn(e){Fo(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Dl(e.V),zp(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function bc(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||Sc(n.i,e))){if(!e.K&&Sc(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)no(n),qo(n);else break t;Ul(n),ne(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ys(Xt(n.ib,n),6e3));if(1>=hm(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Un(n,11)}else if((e.K||n.g==e)&&no(n),!Ds(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=l[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=l[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=e.g;if(m){const g=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.i;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(kl(i,i.h),i.h=null))}if(r.F){const _=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,Et(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=Cm(r,r.J?r.pa:null,r.Y),o.K){fm(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Fo(a),Zs(a)),r.g=o}else Am(r);0<n.j.length&&Ko(n)}else l[0]!="stop"&&l[0]!="close"||Un(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Un(n,7):Fl(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}ks(4)}catch{}}function XT(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Po(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function JT(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Po(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function sm(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Po(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=JT(e),r=XT(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}var im=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZT(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Kn(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Kn){this.h=e.h,to(this,e.j),this.s=e.s,this.g=e.g,eo(this,e.m),this.l=e.l;var t=e.i,n=new Ms;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),zh(this,n),this.o=e.o}else e&&(t=String(e).match(im))?(this.h=!1,to(this,t[1]||"",!0),this.s=os(t[2]||""),this.g=os(t[3]||"",!0),eo(this,t[4]),this.l=os(t[5]||"",!0),zh(this,t[6]||"",!0),this.o=os(t[7]||"")):(this.h=!1,this.i=new Ms(null,this.h))}Kn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(as(t,Hh,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(as(t,Hh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(as(n,n.charAt(0)=="/"?nA:eA,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",as(n,sA)),e.join("")};function sn(e){return new Kn(e)}function to(e,t,n){e.j=n?os(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function eo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function zh(e,t,n){t instanceof Ms?(e.i=t,iA(e.i,e.h)):(n||(t=as(t,rA)),e.i=new Ms(t,e.h))}function Et(e,t,n){e.i.set(t,n)}function Uo(e){return Et(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function os(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function as(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,tA),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function tA(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Hh=/[#\/\?@]/g,eA=/[#\?:]/g,nA=/[#\?]/g,rA=/[#\?@]/g,sA=/#/g;function Ms(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Pn(e){e.g||(e.g=new Map,e.h=0,e.i&&ZT(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}M=Ms.prototype;M.add=function(e,t){Pn(this),this.i=null,e=qr(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function om(e,t){Pn(e),t=qr(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function am(e,t){return Pn(e),t=qr(e,t),e.g.has(t)}M.forEach=function(e,t){Pn(this),this.g.forEach(function(n,r){n.forEach(function(s){e.call(t,s,r,this)},this)},this)};M.ta=function(){Pn(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let i=0;i<s.length;i++)n.push(t[r])}return n};M.Z=function(e){Pn(this);let t=[];if(typeof e=="string")am(this,e)&&(t=t.concat(this.g.get(qr(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};M.set=function(e,t){return Pn(this),this.i=null,e=qr(this,e),am(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};M.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function cm(e,t,n){om(e,t),0<n.length&&(e.i=null,e.g.set(qr(e,t),vl(n)),e.h+=n.length)}M.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};function qr(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function iA(e,t){t&&!e.j&&(Pn(e),e.i=null,e.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(om(this,r),cm(this,s,n))},e)),e.j=t}var oA=class{constructor(e,t){this.g=e,this.map=t}};function lm(e){this.l=e||aA,G.PerformanceNavigationTiming?(e=G.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(G.g&&G.g.Ka&&G.g.Ka()&&G.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var aA=10;function um(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function hm(e){return e.h?1:e.g?e.g.size:0}function Sc(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function kl(e,t){e.g?e.g.add(t):e.h=t}function fm(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}lm.prototype.cancel=function(){if(this.i=dm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function dm(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return vl(e.i)}var cA=class{stringify(e){return G.JSON.stringify(e,void 0)}parse(e){return G.JSON.parse(e,void 0)}};function lA(){this.g=new cA}function uA(e,t,n){const r=n||"";try{sm(e,function(s,i){let o=s;Gs(s)&&(o=Cl(s)),t.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function hA(e,t){const n=new Oo;if(G.Image){const r=new Image;r.onload=wi(Ti,n,r,"TestLoadImage: loaded",!0,t),r.onerror=wi(Ti,n,r,"TestLoadImage: error",!1,t),r.onabort=wi(Ti,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=wi(Ti,n,r,"TestLoadImage: timeout",!1,t),G.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Ti(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch{}}function Bo(e){this.l=e.ec||null,this.j=e.ob||!1}Ft(Bo,Nl);Bo.prototype.g=function(){return new jo(this.l,this.j)};Bo.prototype.i=function(e){return function(){return e}}({});function jo(e,t){Lt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ml,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ft(jo,Lt);var Ml=0;M=jo.prototype;M.open=function(e,t){if(this.readyState!=Ml)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ls(this)};M.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||G).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};M.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=Ml};M.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ls(this)),this.g&&(this.readyState=3,Ls(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof G.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pm(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function pm(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}M.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ti(this):Ls(this),this.readyState==3&&pm(this)}};M.Za=function(e){this.g&&(this.response=this.responseText=e,ti(this))};M.Ya=function(e){this.g&&(this.response=e,ti(this))};M.ka=function(){this.g&&ti(this)};function ti(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ls(e)}M.setRequestHeader=function(e,t){this.v.append(e,t)};M.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};M.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Ls(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var fA=G.JSON.parse;function Rt(e){Lt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=mm,this.L=this.M=!1}Ft(Rt,Lt);var mm="",dA=/^https?$/i,pA=["POST","PUT"];M=Rt.prototype;M.Oa=function(e){this.M=e};M.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ac.g(),this.C=this.u?Wh(this.u):Wh(Ac),this.g.onreadystatechange=Xt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){Gh(this,i);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=G.FormData&&e instanceof G.FormData,!(0<=Vp(pA,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ym(this),0<this.B&&((this.L=mA(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xt(this.ua,this)):this.A=Vl(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Gh(this,i)}};function mA(e){return xr&&typeof e.timeout=="number"&&e.ontimeout!==void 0}M.ua=function(){typeof wl<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$t(this,"timeout"),this.abort(8))};function Gh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,gm(e),$o(e)}function gm(e){e.F||(e.F=!0,$t(e,"complete"),$t(e,"error"))}M.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,$t(this,"complete"),$t(this,"abort"),$o(this))};M.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$o(this,!0)),Rt.$.N.call(this)};M.La=function(){this.s||(this.G||this.v||this.l?_m(this):this.kb())};M.kb=function(){_m(this)};function _m(e){if(e.h&&typeof wl<"u"&&(!e.C[1]||Ue(e)!=4||e.da()!=2)){if(e.v&&Ue(e)==4)Vl(e.La,0,e);else if($t(e,"readystatechange"),Ue(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var s=String(e.I).match(im)[1]||null;!s&&G.self&&G.self.location&&(s=G.self.location.protocol.slice(0,-1)),r=!dA.test(s?s.toLowerCase():"")}n=r}if(n)$t(e,"complete"),$t(e,"success");else{e.m=6;try{var i=2<Ue(e)?e.g.statusText:""}catch{i=""}e.j=i+" ["+e.da()+"]",gm(e)}}finally{$o(e)}}}}function $o(e,t){if(e.g){ym(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||$t(e,"ready");try{n.onreadystatechange=r}catch{}}}function ym(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(G.clearTimeout(e.A),e.A=null)}M.isActive=function(){return!!this.g};function Ue(e){return e.g?e.g.readyState:0}M.da=function(){try{return 2<Ue(this)?this.g.status:-1}catch{return-1}};M.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};M.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),fA(t)}};function Qh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case mm:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function gA(e){const t={};e=(e.g&&2<=Ue(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(Ds(e[r]))continue;var n=jT(e[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}OT(t,function(r){return r.join(", ")})}M.Ia=function(){return this.m};M.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Em(e){let t="";return Al(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function Ll(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Em(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Et(e,t,n))}function ts(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function wm(e){this.Ga=0,this.j=[],this.l=new Oo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ts("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ts("baseRetryDelayMs",5e3,e),this.hb=ts("retryDelaySeedMs",1e4,e),this.eb=ts("forwardChannelMaxRetries",2,e),this.xa=ts("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new lm(e&&e.concurrentRequestLimit),this.Ja=new lA,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}M=wm.prototype;M.ra=8;M.H=1;function Fl(e){if(vm(e),e.H==3){var t=e.W++,n=sn(e.I);if(Et(n,"SID",e.K),Et(n,"RID",t),Et(n,"TYPE","terminate"),ei(e,n),t=new Js(e,e.l,t),t.L=2,t.A=Uo(sn(n)),n=!1,G.navigator&&G.navigator.sendBeacon)try{n=G.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&G.Image&&(new Image().src=t.A,n=!0),n||(t.g=Pm(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Zs(t)}Sm(e)}function qo(e){e.g&&(Bl(e),e.g.cancel(),e.g=null)}function vm(e){qo(e),e.u&&(G.clearTimeout(e.u),e.u=null),no(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&G.clearTimeout(e.m),e.m=null)}function Ko(e){if(!um(e.i)&&!e.m){e.m=!0;var t=e.Na;Ns||qp(),xs||(Ns(),xs=!0),Pl.add(t,e),e.C=0}}function _A(e,t){return hm(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Ys(Xt(e.Na,e,t),bm(e,e.C)),e.C++,!0)}M.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Js(this,this.l,e);let i=this.s;if(this.U&&(i?(i=kp(i),Mp(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Tm(this,s,t),n=sn(this.I),Et(n,"RID",e),Et(n,"CVER",22),this.F&&Et(n,"X-HTTP-Session-Id",this.F),ei(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Em(i)))+"&"+t:this.o&&Ll(n,this.o,i)),kl(this.i,s),this.bb&&Et(n,"TYPE","init"),this.P?(Et(n,"$req",t),Et(n,"SID","null"),s.aa=!0,Rc(s,n,null)):Rc(s,n,t),this.H=2}}else this.H==3&&(e?Yh(this,e):this.j.length==0||um(this.i)||Yh(this))};function Yh(e,t){var n;t?n=t.m:n=e.W++;const r=sn(e.I);Et(r,"SID",e.K),Et(r,"RID",n),Et(r,"AID",e.V),ei(e,r),e.o&&e.s&&Ll(r,e.o,e.s),n=new Js(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Tm(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),kl(e.i,n),Rc(n,r,t)}function ei(e,t){e.na&&Al(e.na,function(n,r){Et(t,r,n)}),e.h&&sm({},function(n,r){Et(t,r,n)})}function Tm(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Xt(e.h.Va,e.h,e):null;t:{var s=e.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let c=0;c<n;c++){let l=s[c].g;const u=s[c].map;if(l-=i,0>l)i=Math.max(0,s[c].g-100),a=!1;else try{uA(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function Am(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ns||qp(),xs||(Ns(),xs=!0),Pl.add(t,e),e.A=0}}function Ul(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Ys(Xt(e.Ma,e),bm(e,e.A)),e.A++,!0)}M.Ma=function(){if(this.u=null,Im(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ys(Xt(this.jb,this),e)}};M.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ne(10),qo(this),Im(this))};function Bl(e){e.B!=null&&(G.clearTimeout(e.B),e.B=null)}function Im(e){e.g=new Js(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=sn(e.wa);Et(t,"RID","rpc"),Et(t,"SID",e.K),Et(t,"AID",e.V),Et(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Et(t,"TO",e.qa),Et(t,"TYPE","xmlhttp"),ei(e,t),e.o&&e.s&&Ll(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Uo(sn(t)),n.u=null,n.S=!0,tm(n,e)}M.ib=function(){this.v!=null&&(this.v=null,qo(this),Ul(this),ne(19))};function no(e){e.v!=null&&(G.clearTimeout(e.v),e.v=null)}function Rm(e,t){var n=null;if(e.g==t){no(e),Bl(e),e.g=null;var r=2}else if(Sc(e.i,t))n=t.F,fm(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var s=e.C;r=ko(),$t(r,new Qp(r,n)),Ko(e)}else Am(e);else if(s=t.s,s==3||s==0&&0<t.ca||!(r==1&&_A(e,t)||r==2&&Ul(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:Un(e,5);break;case 4:Un(e,10);break;case 3:Un(e,6);break;default:Un(e,2)}}}function bm(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Un(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Xt(e.pb,e);n||(n=new Kn("//www.google.com/images/cleardot.gif"),G.location&&G.location.protocol=="http"||to(n,"https"),Uo(n)),hA(n.toString(),r)}else ne(2);e.H=0,e.h&&e.h.za(t),Sm(e),vm(e)}M.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ne(2)):(this.l.info("Failed to ping google.com"),ne(1))};function Sm(e){if(e.H=0,e.ma=[],e.h){const t=dm(e.i);(t.length!=0||e.j.length!=0)&&(Bh(e.ma,t),Bh(e.ma,e.j),e.i.i.length=0,vl(e.j),e.j.length=0),e.h.ya()}}function Cm(e,t,n){var r=n instanceof Kn?sn(n):new Kn(n);if(r.g!="")t&&(r.g=t+"."+r.g),eo(r,r.m);else{var s=G.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new Kn(null);r&&to(i,r),t&&(i.g=t),s&&eo(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&Et(r,n,t),Et(r,"VER",e.ra),ei(e,r),r}function Pm(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Rt(new Bo({ob:n})):new Rt(e.va),t.Oa(e.J),t}M.isActive=function(){return!!this.h&&this.h.isActive(this)};function Dm(){}M=Dm.prototype;M.Ba=function(){};M.Aa=function(){};M.za=function(){};M.ya=function(){};M.isActive=function(){return!0};M.Va=function(){};function ro(){if(xr&&!(10<=Number(DT)))throw Error("Environmental error: no available transport.")}ro.prototype.g=function(e,t){return new me(e,t)};function me(e,t){Lt.call(this),this.g=new wm(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ds(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ds(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Kr(this)}Ft(me,Lt);me.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ne(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Cm(e,null,e.Y),Ko(e)};me.prototype.close=function(){Fl(this.g)};me.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Cl(e),e=n);t.j.push(new oA(t.fb++,e)),t.H==3&&Ko(t)};me.prototype.N=function(){this.g.h=null,delete this.j,Fl(this.g),delete this.g,me.$.N.call(this)};function Vm(e){xl.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Ft(Vm,xl);function Nm(){Ol.call(this),this.status=1}Ft(Nm,Ol);function Kr(e){this.g=e}Ft(Kr,Dm);Kr.prototype.Ba=function(){$t(this.g,"a")};Kr.prototype.Aa=function(e){$t(this.g,new Vm(e))};Kr.prototype.za=function(e){$t(this.g,new Nm)};Kr.prototype.ya=function(){$t(this.g,"b")};function yA(){this.blockSize=-1}function Ce(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ft(Ce,yA);Ce.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ka(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[1]+3905402710&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[5]+1200080426&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[9]+2336552879&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[13]+4254626195&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(s^i&(n^s))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[6]+3225465664&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[10]+38016083&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[14]+3275163606&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[2]+4243563512&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(n^s^i)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[8]+2272392833&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[4]+1272893353&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[0]+3936430074&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[12]+3873151461&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(s^(n|~i))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[7]+1126891415&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[3]+2399980690&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[15]+4264355552&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[11]+3174756917&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}Ce.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(s==0)for(;i<=n;)ka(this,e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){ka(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){ka(this,r),s=0;break}}this.h=s,this.i+=t};Ce.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function pt(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=e[s]|0;r&&i==t||(n[s]=i,r=!1)}this.g=n}var EA={};function jl(e){return-128<=e&&128>e?ST(e,function(t){return new pt([t|0],0>t?-1:0)}):new pt([e|0],0>e?-1:0)}function Be(e){if(isNaN(e)||!isFinite(e))return Ir;if(0>e)return Bt(Be(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Cc;return new pt(t,0)}function xm(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Bt(xm(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Be(Math.pow(t,8)),r=Ir,s=0;s<e.length;s+=8){var i=Math.min(8,e.length-s),o=parseInt(e.substring(s,s+i),t);8>i?(i=Be(Math.pow(t,i)),r=r.R(i).add(Be(o))):(r=r.R(n),r=r.add(Be(o)))}return r}var Cc=4294967296,Ir=jl(0),Pc=jl(1),Xh=jl(16777216);M=pt.prototype;M.ea=function(){if(_e(this))return-Bt(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Cc+r)*t,t*=Cc}return e};M.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Xe(this))return"0";if(_e(this))return"-"+Bt(this).toString(e);for(var t=Be(Math.pow(e,6)),n=this,r="";;){var s=io(n,t).g;n=so(n,s.R(t));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=s,Xe(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};M.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Xe(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function _e(e){return e.h==-1}M.X=function(e){return e=so(this,e),_e(e)?-1:Xe(e)?0:1};function Bt(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new pt(n,~e.h).add(Pc)}M.abs=function(){return _e(this)?Bt(this):this};M.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(this.D(s)&65535)+(e.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new pt(n,n[n.length-1]&-2147483648?-1:0)};function so(e,t){return e.add(Bt(t))}M.R=function(e){if(Xe(this)||Xe(e))return Ir;if(_e(this))return _e(e)?Bt(this).R(Bt(e)):Bt(Bt(this).R(e));if(_e(e))return Bt(this.R(Bt(e)));if(0>this.X(Xh)&&0>e.X(Xh))return Be(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(s)>>>16,c=e.D(s)&65535;n[2*r+2*s]+=o*c,Ai(n,2*r+2*s),n[2*r+2*s+1]+=i*c,Ai(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Ai(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Ai(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new pt(n,0)};function Ai(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function es(e,t){this.g=e,this.h=t}function io(e,t){if(Xe(t))throw Error("division by zero");if(Xe(e))return new es(Ir,Ir);if(_e(e))return t=io(Bt(e),t),new es(Bt(t.g),Bt(t.h));if(_e(t))return t=io(e,Bt(t)),new es(Bt(t.g),t.h);if(30<e.g.length){if(_e(e)||_e(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Pc,r=t;0>=r.X(e);)n=Jh(n),r=Jh(r);var s=fr(n,1),i=fr(r,1);for(r=fr(r,2),n=fr(n,2);!Xe(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=fr(r,1),n=fr(n,1)}return t=so(e,s.R(t)),new es(s,t)}for(s=Ir;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Be(n),o=i.R(t);_e(o)||0<o.X(e);)n-=r,i=Be(n),o=i.R(t);Xe(i)&&(i=Pc),s=s.add(i),e=so(e,o)}return new es(s,e)}M.gb=function(e){return io(this,e).h};M.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new pt(n,this.h&e.h)};M.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new pt(n,this.h|e.h)};M.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new pt(n,this.h^e.h)};function Jh(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new pt(n,e.h)}function fr(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new pt(s,e.h)}ro.prototype.createWebChannel=ro.prototype.g;me.prototype.send=me.prototype.u;me.prototype.open=me.prototype.m;me.prototype.close=me.prototype.close;Mo.NO_ERROR=0;Mo.TIMEOUT=8;Mo.HTTP_ERROR=6;Yp.COMPLETE="complete";Xp.EventType=Xs;Xs.OPEN="a";Xs.CLOSE="b";Xs.ERROR="c";Xs.MESSAGE="d";Lt.prototype.listen=Lt.prototype.O;Rt.prototype.listenOnce=Rt.prototype.P;Rt.prototype.getLastError=Rt.prototype.Sa;Rt.prototype.getLastErrorCode=Rt.prototype.Ia;Rt.prototype.getStatus=Rt.prototype.da;Rt.prototype.getResponseJson=Rt.prototype.Wa;Rt.prototype.getResponseText=Rt.prototype.ja;Rt.prototype.send=Rt.prototype.ha;Rt.prototype.setWithCredentials=Rt.prototype.Oa;Ce.prototype.digest=Ce.prototype.l;Ce.prototype.reset=Ce.prototype.reset;Ce.prototype.update=Ce.prototype.j;pt.prototype.add=pt.prototype.add;pt.prototype.multiply=pt.prototype.R;pt.prototype.modulo=pt.prototype.gb;pt.prototype.compare=pt.prototype.X;pt.prototype.toNumber=pt.prototype.ea;pt.prototype.toString=pt.prototype.toString;pt.prototype.getBits=pt.prototype.D;pt.fromNumber=Be;pt.fromString=xm;var wA=function(){return new ro},vA=function(){return ko()},Ma=Mo,TA=Yp,AA=rr,Zh={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ii=Xp,IA=Rt,RA=Ce,Rr=pt;const tf="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wr="10.7.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new Tp("@firebase/firestore");function ns(){return Qn.logLevel}function k(e,...t){if(Qn.logLevel<=at.DEBUG){const n=t.map($l);Qn.debug(`Firestore (${Wr}): ${e}`,...n)}}function ze(e,...t){if(Qn.logLevel<=at.ERROR){const n=t.map($l);Qn.error(`Firestore (${Wr}): ${e}`,...n)}}function Or(e,...t){if(Qn.logLevel<=at.WARN){const n=t.map($l);Qn.warn(`Firestore (${Wr}): ${e}`,...n)}}function $l(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(e="Unexpected state"){const t=`FIRESTORE (${Wr}) INTERNAL ASSERTION FAILED: `+e;throw ze(t),new Error(t)}function yt(e,t){e||H()}function Z(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends nr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class bA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ht.UNAUTHENTICATED))}shutdown(){}}class SA{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CA{constructor(t){this.t=t,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new en;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new en,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new en)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string"),new Om(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string"),new Ht(t)}}class PA{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class DA{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new PA(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VA{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NA{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=i=>{i.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,k("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(yt(typeof n.token=="string"),this.R=n.token,new VA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=xA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%t.length))}return r}}function lt(e,t){return e<t?-1:e>t?1:0}function kr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new j(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new j(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new j(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Nt.fromMillis(Date.now())}static fromDate(t){return Nt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Nt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?lt(this.nanoseconds,t.nanoseconds):lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.timestamp=t}static fromTimestamp(t){return new X(t)}static min(){return new X(new Nt(0,0))}static max(){return new X(new Nt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,n,r){n===void 0?n=0:n>t.length&&H(),r===void 0?r=t.length-n:r>t.length-n&&H(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Fs.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Fs?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=t.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class wt extends Fs{construct(t,n,r){return new wt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new j(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new wt(n)}static emptyPath(){return new wt([])}}const OA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends Fs{construct(t,n,r){return new jt(t,n,r)}static isValidIdentifier(t){return OA.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new jt(["__name__"])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new j(A.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new j(A.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new j(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new j(A.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new jt(n)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(t){this.path=t}static fromPath(t){return new K(wt.fromString(t))}static fromName(t){return new K(wt.fromString(t).popFirst(5))}static empty(){return new K(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&wt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return wt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new K(new wt(t.slice()))}}function kA(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new Nt(n+1,0):new Nt(n,r));return new Rn(s,K.empty(),t)}function MA(e){return new Rn(e.readTime,e.key,-1)}class Rn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Rn(X.min(),K.empty(),-1)}static max(){return new Rn(X.max(),K.empty(),-1)}}function LA(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=K.comparator(e.documentKey,t.documentKey),n!==0?n:lt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ni(e){if(e.code!==A.FAILED_PRECONDITION||e.message!==FA)throw e;k("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new R((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof R?n:R.resolve(n)}catch(n){return R.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):R.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):R.reject(n)}static resolve(t){return new R((n,r)=>{n(t)})}static reject(t){return new R((n,r)=>{r(t)})}static waitFor(t){return new R((n,r)=>{let s=0,i=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(t){let n=R.resolve(!1);for(const r of t)n=n.next(s=>s?R.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new R((r,s)=>{const i=t.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(t[l]).next(u=>{o[l]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(t,n){return new R((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new en,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new _s(t,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Kl(r.target.error);this.V.reject(new _s(t,s))}}static open(t,n,r,s){try{return new ql(n,t.transaction(s,r))}catch(i){throw new _s(n,i)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(k("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new jA(n)}}class Bn{constructor(t,n,r){this.name=t,this.version=n,this.p=r,Bn.S(Ji())===12.2&&ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return k("SimpleDb","Removing database:",t),Mn(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!wp())return!1;if(Bn.C())return!0;const t=Ji(),n=Bn.S(t),r=0<n&&n<10,s=Bn.v(t),i=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||i)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(t){const n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(t){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new _s(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new j(A.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new j(A.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new _s(t,o))},s.onupgradeneeded=i=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(t);const a=ql.open(this.db,t,i?"readonly":"readwrite",r),c=s(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),R.reject(l))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(k("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class BA{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Mn(this.k.delete())}}class _s extends j{constructor(t,n){super(A.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ri(e){return e.name==="IndexedDbTransactionError"}class jA{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(k("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Mn(r)}add(t){return k("SimpleDb","ADD",this.store.name,t,t),Mn(this.store.add(t))}get(t){return Mn(this.store.get(t)).next(n=>(n===void 0&&(n=null),k("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return k("SimpleDb","DELETE",this.store.name,t),Mn(this.store.delete(t))}count(){return k("SimpleDb","COUNT",this.store.name),Mn(this.store.count())}W(t,n){const r=this.options(t,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new R((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,c)=>{o.push(c)}).next(()=>o)}}j(t,n){const r=this.store.getAll(t,n===null?void 0:n);return new R((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(t,n){k("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(t,n){let r;n?r=t:(r={},n=t);const s=this.cursor(r);return this.G(s,n)}Z(t){const n=this.cursor({});return new R((r,s)=>{n.onerror=i=>{const o=Kl(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(t,n){const r=[];return new R((s,i)=>{t.onerror=o=>{i(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new BA(a),l=n(a.primaryKey,a.value,c);if(l instanceof R){const u=l.catch(h=>(c.done(),R.reject(h)));r.push(u)}c.isDone?s():c.$===null?a.continue():a.continue(c.$)}}).next(()=>R.waitFor(r))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const r=this.store.index(t.index);return t.J?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function Mn(e){return new R((t,n)=>{e.onsuccess=r=>{const s=r.target.result;t(s)},e.onerror=r=>{const s=Kl(r.target.error);n(s)}})}let ef=!1;function Kl(e){const t=Bn.S(Ji());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){const r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ef||(ef=!0,setTimeout(()=>{throw r},0)),r}}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}Wl._e=-1;function Wo(e){return e==null}function oo(e){return e===0&&1/e==-1/0}function $A(e){return typeof e=="number"&&Number.isInteger(e)&&!oo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function sr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Mm(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(t,n){this.comparator=t,this.root=n||Ut.EMPTY}insert(t,n){return new It(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(t){return new It(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ri(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ri(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ri(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ri(this.root,t,this.comparator,!0)}}class Ri{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ut{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Ut.RED,this.left=s??Ut.EMPTY,this.right=i??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Ut(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const t=this.left.check();if(t!==this.right.check())throw H();return t+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(t,n,r,s,i){return this}insert(t,n,r){return new Ut(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t){this.comparator=t,this.data=new It(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new rf(this.data.getIterator())}getIteratorFrom(t){return new rf(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof qt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new qt(this.comparator);return n.data=t,n}}class rf{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.fields=t,t.sort(jt.comparator)}static empty(){return new Re([])}unionWith(t){let n=new qt(jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Re(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return kr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Lm("Invalid base64 string: "+i):i}}(t);return new Zt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(t);return new Zt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const qA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bn(e){if(yt(!!e),typeof e=="string"){let t=0;const n=qA.exec(e);if(yt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Pt(e.seconds),nanos:Pt(e.nanos)}}function Pt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Yn(e){return typeof e=="string"?Zt.fromBase64String(e):Zt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hl(e){const t=e.mapValue.fields.__previous_value__;return zl(t)?Hl(t):t}function Us(e){const t=bn(e.mapValue.fields.__local_write_time__.timestampValue);return new Nt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(t,n,r,s,i,o,a,c,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class Bs{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new Bs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Bs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zl(e)?4:WA(e)?9007199254740991:10:H()}function He(e,t){if(e===t)return!0;const n=Xn(e);if(n!==Xn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Us(e).isEqual(Us(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=bn(s.timestampValue),a=bn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return Yn(s.bytesValue).isEqual(Yn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return Pt(s.geoPointValue.latitude)===Pt(i.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Pt(s.integerValue)===Pt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Pt(s.doubleValue),a=Pt(i.doubleValue);return o===a?oo(o)===oo(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return kr(e.arrayValue.values||[],t.arrayValue.values||[],He);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(nf(o)!==nf(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!He(o[c],a[c])))return!1;return!0}(e,t);default:return H()}}function js(e,t){return(e.values||[]).find(n=>He(n,t))!==void 0}function Mr(e,t){if(e===t)return 0;const n=Xn(e),r=Xn(t);if(n!==r)return lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(e.booleanValue,t.booleanValue);case 2:return function(i,o){const a=Pt(i.integerValue||i.doubleValue),c=Pt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return sf(e.timestampValue,t.timestampValue);case 4:return sf(Us(e),Us(t));case 5:return lt(e.stringValue,t.stringValue);case 6:return function(i,o){const a=Yn(i),c=Yn(o);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=lt(a[l],c[l]);if(u!==0)return u}return lt(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const a=lt(Pt(i.latitude),Pt(o.latitude));return a!==0?a:lt(Pt(i.longitude),Pt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){const a=i.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){const u=Mr(a[l],c[l]);if(u)return u}return lt(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===bi.mapValue&&o===bi.mapValue)return 0;if(i===bi.mapValue)return 1;if(o===bi.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){const f=lt(c[h],u[h]);if(f!==0)return f;const m=Mr(a[c[h]],l[u[h]]);if(m!==0)return m}return lt(c.length,u.length)}(e.mapValue,t.mapValue);default:throw H()}}function sf(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return lt(e,t);const n=bn(e),r=bn(t),s=lt(n.seconds,r.seconds);return s!==0?s:lt(n.nanos,r.nanos)}function Lr(e){return Dc(e)}function Dc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=bn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Yn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return K.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Dc(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Dc(n.fields[o])}`;return s+"}"}(e.mapValue):H()}function of(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Vc(e){return!!e&&"integerValue"in e}function Gl(e){return!!e&&"arrayValue"in e}function af(e){return!!e&&"nullValue"in e}function cf(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Li(e){return!!e&&"mapValue"in e}function ys(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return sr(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=ys(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ys(e.arrayValue.values[n]);return t}return Object.assign({},e)}function WA(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t){this.value=t}static empty(){return new fe({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Li(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ys(n)}setAll(t){let n=jt.emptyPath(),r={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ys(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Li(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return He(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Li(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){sr(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new fe(ys(this.value))}}function Fm(e){const t=[];return sr(e.fields,(n,r)=>{const s=new jt([n]);if(Li(r)){const i=Fm(r.mapValue).fields;if(i.length===0)t.push(s);else for(const o of i)t.push(s.child(o))}else t.push(s)}),new Re(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t,n,r,s,i,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Gt(t,0,X.min(),X.min(),X.min(),fe.empty(),0)}static newFoundDocument(t,n,r,s){return new Gt(t,1,n,X.min(),r,s,0)}static newNoDocument(t,n){return new Gt(t,2,n,X.min(),X.min(),fe.empty(),0)}static newUnknownDocument(t,n){return new Gt(t,3,n,X.min(),X.min(),fe.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Gt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(t,n){this.position=t,this.inclusive=n}}function lf(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Mr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function uf(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!He(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(t,n="asc"){this.field=t,this.dir=n}}function zA(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{}class Dt extends Um{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new GA(t,n,r):n==="array-contains"?new XA(t,r):n==="in"?new JA(t,r):n==="not-in"?new ZA(t,r):n==="array-contains-any"?new t0(t,r):new Dt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new QA(t,r):new YA(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mr(n,this.value)):n!==null&&Xn(this.value)===Xn(n)&&this.matchesComparison(Mr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pe extends Um{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new Pe(t,n)}matches(t){return Bm(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Bm(e){return e.op==="and"}function jm(e){return HA(e)&&Bm(e)}function HA(e){for(const t of e.filters)if(t instanceof Pe)return!1;return!0}function Nc(e){if(e instanceof Dt)return e.field.canonicalString()+e.op.toString()+Lr(e.value);if(jm(e))return e.filters.map(t=>Nc(t)).join(",");{const t=e.filters.map(n=>Nc(n)).join(",");return`${e.op}(${t})`}}function $m(e,t){return e instanceof Dt?function(r,s){return s instanceof Dt&&r.op===s.op&&r.field.isEqual(s.field)&&He(r.value,s.value)}(e,t):e instanceof Pe?function(r,s){return s instanceof Pe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&$m(o,s.filters[a]),!0):!1}(e,t):void H()}function qm(e){return e instanceof Dt?function(n){return`${n.field.canonicalString()} ${n.op} ${Lr(n.value)}`}(e):e instanceof Pe?function(n){return n.op.toString()+" {"+n.getFilters().map(qm).join(" ,")+"}"}(e):"Filter"}class GA extends Dt{constructor(t,n,r){super(t,n,r),this.key=K.fromName(r.referenceValue)}matches(t){const n=K.comparator(t.key,this.key);return this.matchesComparison(n)}}class QA extends Dt{constructor(t,n){super(t,"in",n),this.keys=Km("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class YA extends Dt{constructor(t,n){super(t,"not-in",n),this.keys=Km("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Km(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class XA extends Dt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Gl(n)&&js(n.arrayValue,this.value)}}class JA extends Dt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&js(this.value.arrayValue,n)}}class ZA extends Dt{constructor(t,n){super(t,"not-in",n)}matches(t){if(js(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!js(this.value.arrayValue,n)}}class t0 extends Dt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Gl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>js(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(t,n=null,r=[],s=[],i=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function hf(e,t=null,n=[],r=[],s=null,i=null,o=null){return new e0(e,t,n,r,s,i,o)}function Ql(e){const t=Z(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Nc(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Wo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Lr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Lr(r)).join(",")),t.ce=n}return t.ce}function Yl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!zA(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!$m(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!uf(e.startAt,t.startAt)&&uf(e.endAt,t.endAt)}function xc(e){return K.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(t,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function n0(e,t,n,r,s,i,o,a){return new si(e,t,n,r,s,i,o,a)}function Wm(e){return new si(e)}function ff(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function zm(e){return e.collectionGroup!==null}function Es(e){const t=Z(e);if(t.le===null){t.le=[];const n=new Set;for(const i of t.explicitOrderBy)t.le.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qt(jt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.le.push(new co(i,r))}),n.has(jt.keyField().canonicalString())||t.le.push(new co(jt.keyField(),r))}return t.le}function qe(e){const t=Z(e);return t.he||(t.he=r0(t,Es(e))),t.he}function r0(e,t){if(e.limitType==="F")return hf(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new co(s.field,i)});const n=e.endAt?new ao(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ao(e.startAt.position,e.startAt.inclusive):null;return hf(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Oc(e,t){const n=e.filters.concat([t]);return new si(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function kc(e,t,n){return new si(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zo(e,t){return Yl(qe(e),qe(t))&&e.limitType===t.limitType}function Hm(e){return`${Ql(qe(e))}|lt:${e.limitType}`}function mr(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>qm(s)).join(", ")}]`),Wo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Lr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Lr(s)).join(",")),`Target(${r})`}(qe(e))}; limitType=${e.limitType})`}function Ho(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of Es(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(o,a,c){const l=lf(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Es(r),s)||r.endAt&&!function(o,a,c){const l=lf(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Es(r),s))}(e,t)}function s0(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Gm(e){return(t,n)=>{let r=!1;for(const s of Es(e)){const i=i0(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function i0(e,t,n){const r=e.field.isKeyField()?K.comparator(t.key,n.key):function(i,o,a){const c=o.data.field(i),l=a.data.field(i);return c!==null&&l!==null?Mr(c,l):H()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){sr(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Mm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new It(K.comparator);function on(){return o0}const Qm=new It(K.comparator);function cs(...e){let t=Qm;for(const n of e)t=t.insert(n.key,n);return t}function Ym(e){let t=Qm;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function jn(){return ws()}function Xm(){return ws()}function ws(){return new zr(e=>e.toString(),(e,t)=>e.isEqual(t))}const a0=new It(K.comparator),c0=new qt(K.comparator);function nt(...e){let t=c0;for(const n of e)t=t.add(n);return t}const l0=new qt(lt);function u0(){return l0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oo(t)?"-0":t}}function Zm(e){return{integerValue:""+e}}function h0(e,t){return $A(t)?Zm(t):Jm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this._=void 0}}function f0(e,t,n){return e instanceof lo?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&zl(i)&&(i=Hl(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof $s?eg(e,t):e instanceof qs?ng(e,t):function(s,i){const o=tg(s,i),a=df(o)+df(s.Ie);return Vc(o)&&Vc(s.Ie)?Zm(a):Jm(s.serializer,a)}(e,t)}function d0(e,t,n){return e instanceof $s?eg(e,t):e instanceof qs?ng(e,t):n}function tg(e,t){return e instanceof uo?function(r){return Vc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class lo extends Go{}class $s extends Go{constructor(t){super(),this.elements=t}}function eg(e,t){const n=rg(t);for(const r of e.elements)n.some(s=>He(s,r))||n.push(r);return{arrayValue:{values:n}}}class qs extends Go{constructor(t){super(),this.elements=t}}function ng(e,t){let n=rg(t);for(const r of e.elements)n=n.filter(s=>!He(s,r));return{arrayValue:{values:n}}}class uo extends Go{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function df(e){return Pt(e.integerValue||e.doubleValue)}function rg(e){return Gl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function p0(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof $s&&s instanceof $s||r instanceof qs&&s instanceof qs?kr(r.elements,s.elements,He):r instanceof uo&&s instanceof uo?He(r.Ie,s.Ie):r instanceof lo&&s instanceof lo}(e.transform,t.transform)}class m0{constructor(t,n){this.version=t,this.transformResults=n}}class nn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new nn}static exists(t){return new nn(void 0,t)}static updateTime(t){return new nn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Fi(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Qo{}function sg(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new og(e.key,nn.none()):new Yo(e.key,e.data,nn.none());{const n=e.data,r=fe.empty();let s=new qt(jt.comparator);for(let i of t.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ir(e.key,r,new Re(s.toArray()),nn.none())}}function g0(e,t,n){e instanceof Yo?function(s,i,o){const a=s.value.clone(),c=mf(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof ir?function(s,i,o){if(!Fi(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=mf(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(ig(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function vs(e,t,n,r){return e instanceof Yo?function(i,o,a,c){if(!Fi(i.precondition,o))return a;const l=i.value.clone(),u=gf(i.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof ir?function(i,o,a,c){if(!Fi(i.precondition,o))return a;const l=gf(i.fieldTransforms,c,o),u=o.data;return u.setAll(ig(i)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(i,o,a){return Fi(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function _0(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=tg(r.transform,s||null);i!=null&&(n===null&&(n=fe.empty()),n.set(r.field,i))}return n||null}function pf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&kr(r,s,(i,o)=>p0(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Yo extends Qo{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ir extends Qo{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ig(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function mf(e,t,n){const r=new Map;yt(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,d0(o,a,n[s]))}return r}function gf(e,t,n){const r=new Map;for(const s of e){const i=s.transform,o=n.data.field(s.field);r.set(s.field,f0(i,o,t))}return r}class og extends Qo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y0 extends Qo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&g0(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=vs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=vs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Xm();return this.mutations.forEach(s=>{const i=t.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=sg(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),nt())}isEqual(t){return this.batchId===t.batchId&&kr(this.mutations,t.mutations,(n,r)=>pf(n,r))&&kr(this.baseMutations,t.baseMutations,(n,r)=>pf(n,r))}}class Xl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){yt(t.mutations.length===r.length);let s=function(){return a0}();const i=t.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Xl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,st;function T0(e){switch(e){default:return H();case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0}}function ag(e){if(e===void 0)return ze("GRPC error has no .code"),A.UNKNOWN;switch(e){case Ct.OK:return A.OK;case Ct.CANCELLED:return A.CANCELLED;case Ct.UNKNOWN:return A.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return A.INTERNAL;case Ct.UNAVAILABLE:return A.UNAVAILABLE;case Ct.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Ct.NOT_FOUND:return A.NOT_FOUND;case Ct.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Ct.ABORTED:return A.ABORTED;case Ct.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Ct.DATA_LOSS:return A.DATA_LOSS;default:return H()}}(st=Ct||(Ct={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=new Rr([4294967295,4294967295],0);function _f(e){const t=A0().encode(e),n=new RA;return n.update(t),new Uint8Array(n.digest())}function yf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Rr([n,r],0),new Rr([s,i],0)]}class Jl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ls(`Invalid padding: ${n}`);if(r<0)throw new ls(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ls(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new ls(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=Rr.fromNumber(this.Te)}de(t,n,r){let s=t.add(n.multiply(Rr.fromNumber(r)));return s.compare(I0)===1&&(s=new Rr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=_f(t),[r,s]=yf(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new Jl(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=_f(t),[r,s]=yf(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class ls extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,ii.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Xo(X.min(),s,new It(lt),on(),nt())}}class ii{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new ii(r,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t,n,r,s){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=s}}class cg{constructor(t,n){this.targetId=t,this.fe=n}}class lg{constructor(t,n,r=Zt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ef{constructor(){this.ge=0,this.pe=vf(),this.ye=Zt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=nt(),n=nt(),r=nt();return this.pe.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:H()}}),new ii(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=vf()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,yt(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class R0{constructor(t){this.Le=t,this.ke=new Map,this.qe=on(),this.Qe=wf(),this.Ke=new It(lt)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:H()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(t){const n=t.targetId,r=t.fe.count,s=this.Ye(n);if(s){const i=s.target;if(xc(i))if(r===0){const o=new K(i.path);this.We(n,o,Gt.newNoDocument(o,X.min()))}else yt(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),c=a?this.et(a,t,o):1;if(c!==0){this.He(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Yn(r).toUint8Array()}catch(c){if(c instanceof Lm)return Or("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Jl(o,s,i)}catch(c){return Or(c instanceof ls?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(a)||(this.We(n,i,null),s++)}),s}it(t){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&xc(a.target)){const c=new K(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,Gt.newNoDocument(c,t))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=nt();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(t));const s=new Xo(t,n,this.Ke,this.qe,r);return this.qe=on(),this.Qe=wf(),this.Ke=new It(lt),s}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const s=this.ze(t);this.st(t,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new Ef,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new qt(lt),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||k("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new Ef),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function wf(){return new It(K.comparator)}function vf(){return new It(K.comparator)}const b0={asc:"ASCENDING",desc:"DESCENDING"},S0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C0={and:"AND",or:"OR"};class P0{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Mc(e,t){return e.useProto3Json||Wo(t)?t:{value:t}}function ho(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ug(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function D0(e,t){return ho(e,t.toTimestamp())}function Ke(e){return yt(!!e),X.fromTimestamp(function(n){const r=bn(n);return new Nt(r.seconds,r.nanos)}(e))}function Zl(e,t){return Lc(e,t).canonicalString()}function Lc(e,t){const n=function(s){return new wt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function hg(e){const t=wt.fromString(e);return yt(gg(t)),t}function Fc(e,t){return Zl(e.databaseId,t.path)}function La(e,t){const n=hg(t);if(n.get(1)!==e.databaseId.projectId)throw new j(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new j(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new K(dg(n))}function fg(e,t){return Zl(e.databaseId,t)}function V0(e){const t=hg(e);return t.length===4?wt.emptyPath():dg(t)}function Uc(e){return new wt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dg(e){return yt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Tf(e,t,n){return{name:Fc(e,t),fields:n.value.mapValue.fields}}function N0(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(l,u){return l.useProto3Json?(yt(u===void 0||typeof u=="string"),Zt.fromBase64String(u||"")):(yt(u===void 0||u instanceof Uint8Array),Zt.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const u=l.code===void 0?A.UNKNOWN:ag(l.code);return new j(u,l.message||"")}(o);n=new lg(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=La(e,r.document.name),i=Ke(r.document.updateTime),o=r.document.createTime?Ke(r.document.createTime):X.min(),a=new fe({mapValue:{fields:r.document.fields}}),c=Gt.newFoundDocument(s,i,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Ui(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=La(e,r.document),i=r.readTime?Ke(r.readTime):X.min(),o=Gt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ui([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=La(e,r.document),i=r.removedTargetIds||[];n=new Ui([],i,s,null)}else{if(!("filter"in t))return H();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new v0(s,i),a=r.targetId;n=new cg(a,o)}}return n}function x0(e,t){let n;if(t instanceof Yo)n={update:Tf(e,t.key,t.value)};else if(t instanceof og)n={delete:Fc(e,t.key)};else if(t instanceof ir)n={update:Tf(e,t.key,t.data),updateMask:$0(t.fieldMask)};else{if(!(t instanceof y0))return H();n={verify:Fc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof lo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $s)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof uo)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw H()}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:D0(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:H()}(e,t.precondition)),n}function O0(e,t){return e&&e.length>0?(yt(t!==void 0),e.map(n=>function(s,i){let o=s.updateTime?Ke(s.updateTime):Ke(i);return o.isEqual(X.min())&&(o=Ke(i)),new m0(o,s.transformResults||[])}(n,t))):[]}function k0(e,t){return{documents:[fg(e,t.path)]}}function M0(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fg(e,s);const i=function(l){if(l.length!==0)return mg(Pe.create(l,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(u=>function(f){return{field:gr(f.field),direction:U0(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Mc(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ut:n,parent:s}}function L0(e){let t=V0(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){yt(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let i=[];n.where&&(i=function(h){const f=pg(h);return f instanceof Pe&&jm(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(g){return new co(_r(g.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Wo(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(h){const f=!!h.before,m=h.values||[];return new ao(m,f)}(n.startAt));let l=null;return n.endAt&&(l=function(h){const f=!h.before,m=h.values||[];return new ao(m,f)}(n.endAt)),n0(t,s,o,i,a,"F",c,l)}function F0(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function pg(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_r(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=_r(n.unaryFilter.field);return Dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_r(n.unaryFilter.field);return Dt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_r(n.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(e):e.fieldFilter!==void 0?function(n){return Dt.create(_r(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Pe.create(n.compositeFilter.filters.map(r=>pg(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return H()}}(n.compositeFilter.op))}(e):H()}function U0(e){return b0[e]}function B0(e){return S0[e]}function j0(e){return C0[e]}function gr(e){return{fieldPath:e.canonicalString()}}function _r(e){return jt.fromServerFormat(e.fieldPath)}function mg(e){return e instanceof Dt?function(n){if(n.op==="=="){if(cf(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NAN"}};if(af(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cf(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NAN"}};if(af(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gr(n.field),op:B0(n.op),value:n.value}}}(e):e instanceof Pe?function(n){const r=n.getFilters().map(s=>mg(s));return r.length===1?r[0]:{compositeFilter:{op:j0(n.op),filters:r}}}(e):H()}function $0(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function gg(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t,n,r,s,i=X.min(),o=X.min(),a=Zt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new yn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(t){this.ct=t}}function K0(e){const t=L0({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?kc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this._n=new z0}addToCollectionParentIndex(t,n){return this._n.add(n),R.resolve()}getCollectionParents(t,n){return R.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return R.resolve()}deleteFieldIndex(t,n){return R.resolve()}deleteAllFieldIndexes(t){return R.resolve()}createTargetIndexes(t,n){return R.resolve()}getDocumentsMatchingTarget(t,n){return R.resolve(null)}getIndexType(t,n){return R.resolve(0)}getFieldIndexes(t,n){return R.resolve([])}getNextCollectionGroupToUpdate(t){return R.resolve(null)}getMinOffset(t,n){return R.resolve(Rn.min())}getMinOffsetFromCollectionGroup(t,n){return R.resolve(Rn.min())}updateCollectionGroup(t,n,r){return R.resolve()}updateIndexEntries(t,n){return R.resolve()}}class z0{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new qt(wt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new qt(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Fr(0)}static Bn(){return new Fr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(){this.changes=new zr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Gt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&vs(r.mutation,s,Re.empty(),Nt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,nt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=nt()){const s=jn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let o=cs();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=jn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,nt()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,s){let i=on();const o=ws(),a=function(){return ws()}();return n.forEach((c,l)=>{const u=r.get(l.key);s.has(l.key)&&(u===void 0||u.mutation instanceof ir)?i=i.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),vs(u.mutation,l,u.mutation.getFieldMask(),Nt.now())):o.set(l.key,Re.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new G0(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const r=ws();let s=new It((o,a)=>o-a),i=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=r.get(c)||Re.empty();u=a.applyToLocalView(l,u),r.set(c,u);const h=(s.get(a.batchId)||nt()).add(c);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=Xm();u.forEach(f=>{if(!i.has(f)){const m=sg(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,h))}return R.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):zm(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):R.resolve(jn());let a=-1,c=i;return o.next(l=>R.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?R.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{c=c.insert(u,f)}))).next(()=>this.populateOverlays(t,l,i)).next(()=>this.computeViews(t,c,l,nt())).next(u=>({batchId:a,changes:Ym(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new K(n)).next(r=>{let s=cs();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let o=cs();return this.indexManager.getCollectionParents(t,i).next(a=>R.forEach(a,c=>{const l=function(h,f){return new si(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,l,r,s).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(o=>{i.forEach((c,l)=>{const u=l.getKey();o.get(u)===null&&(o=o.insert(u,Gt.newInvalidDocument(u)))});let a=cs();return o.forEach((c,l)=>{const u=i.get(c);u!==void 0&&vs(u.mutation,l,Re.empty(),Nt.now()),Ho(n,l)&&(a=a.insert(c,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return R.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ke(s.createTime)}}(n)),R.resolve()}getNamedQuery(t,n){return R.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(s){return{name:s.name,query:K0(s.bundledQuery),readTime:Ke(s.readTime)}}(n)),R.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.overlays=new It(K.comparator),this.hr=new Map}getOverlay(t,n){return R.resolve(this.overlays.get(n))}getOverlays(t,n){const r=jn();return R.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.ht(t,n,i)}),R.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),R.resolve()}getOverlaysForCollection(t,n,r){const s=jn(),i=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return R.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new It((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=i.get(l.largestBatchId);u===null&&(u=jn(),i=i.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=jn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=s)););return R.resolve(a)}ht(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new w0(n,r));let i=this.hr.get(n);i===void 0&&(i=nt(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this.Pr=new qt(Mt.Ir),this.Tr=new qt(Mt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Mt(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Mt(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new K(new wt([])),r=new Mt(n,t),s=new Mt(n,t+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new K(new wt([])),r=new Mt(n,t),s=new Mt(n,t+1);let i=nt();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new Mt(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Mt{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return K.comparator(t.key,n.key)||lt(t.pr,n.pr)}static Er(t,n){return lt(t.pr,n.pr)||K.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new qt(Mt.Ir)}checkEmpty(t){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new E0(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new Mt(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return R.resolve(o)}lookupMutationBatch(t,n){return R.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.br(r),i=s<0?0:s;return R.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Mt(n,0),s=new Mt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),R.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new qt(lt);return n.forEach(s=>{const i=new Mt(s,0),o=new Mt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),R.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const o=new Mt(new K(i),0);let a=new qt(lt);return this.wr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(a=a.add(c.pr)),!0)},o),R.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){yt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return R.forEach(n.mutations,s=>{const i=new Mt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Mt(n,0),s=this.wr.firstAfterOrEqual(r);return R.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,R.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(t){this.vr=t,this.docs=function(){return new It(K.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(n))}getEntries(t,n){let r=on();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Gt.newInvalidDocument(s))}),R.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=on();const o=n.path,a=new K(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||LA(MA(u),r)<=0||(s.has(u.key)||Ho(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return R.resolve(i)}getAllFromCollectionGroup(t,n,r,s){H()}Fr(t,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new tI(this)}getSize(t){return R.resolve(this.size)}}class tI extends H0{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(t,s)):this.ar.removeEntry(r)}),R.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(t){this.persistence=t,this.Mr=new zr(n=>Ql(n),Yl),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Or=0,this.Nr=new tu,this.targetCount=0,this.Br=Fr.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,s)=>n(s)),R.resolve()}getLastRemoteSnapshotVersion(t){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return R.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),R.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Br=new Fr(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,R.resolve()}updateTargetData(t,n){return this.qn(n),R.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),R.waitFor(i).next(()=>s)}getTargetCount(t){return R.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return R.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),R.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(t,o))}),R.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),R.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return R.resolve(r)}containsKey(t,n){return R.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(t,n){this.Lr={},this.overlays={},this.kr=new Wl(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new eI(this),this.indexManager=new W0,this.remoteDocumentCache=function(s){return new Z0(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new q0(n),this.$r=new Y0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new X0,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Lr[t.toKey()];return r||(r=new J0(n,this.referenceDelegate),this.Lr[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){k("MemoryPersistence","Starting transaction:",t);const s=new rI(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(t,n){return R.or(Object.values(this.Lr).map(r=>()=>r.containsKey(t,n)))}}class rI extends UA{constructor(t){super(),this.currentSequenceNumber=t}}class eu{constructor(t){this.persistence=t,this.zr=new tu,this.jr=null}static Hr(t){return new eu(t)}get Jr(){if(this.jr)return this.jr;throw H()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),R.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),R.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Jr,r=>{const s=K.fromPath(r);return this.Yr(t,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return R.or([()=>R.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(t,n){let r=nt(),s=nt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new nu(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return cv()?8:Bn.v(Ji())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ji(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(t,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new sI;return this.Ji(t,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>i.result)}Yi(t,n,r,s){return r.documentReadCount<this.Wi?(ns()<=at.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",mr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),R.resolve()):(ns()<=at.DEBUG&&k("QueryEngine","Query:",mr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(ns()<=at.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",mr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,qe(n))):R.resolve())}ji(t,n){if(ff(n))return R.resolve(null);let r=qe(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=kc(n,null,"F"),r=qe(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const o=nt(...i);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(c=>{const l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(t,kc(n,null,"F")):this.es(t,l,n,c)}))})))}Hi(t,n,r,s){return ff(n)||s.isEqual(X.min())?R.resolve(null):this.zi.getDocuments(t,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?R.resolve(null):(ns()<=at.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mr(n)),this.es(t,o,n,kA(s,-1)).next(a=>a))})}Zi(t,n){let r=new qt(Gm(t));return n.forEach((s,i)=>{Ho(t,i)&&(r=r.add(i))}),r}Xi(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(t,n,r){return ns()<=at.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",mr(n)),this.zi.getDocumentsMatchingQuery(t,n,Rn.min(),r)}es(t,n,r,s){return this.zi.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(t,n,r,s){this.persistence=t,this.ts=n,this.serializer=s,this.ns=new It(lt),this.rs=new zr(i=>Ql(i),Yl),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Q0(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function aI(e,t,n,r){return new oI(e,t,n,r)}async function _g(e,t){const n=Z(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=nt();for(const l of s){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of i){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function cI(e,t){const n=Z(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){const h=l.batch,f=h.keys();let m=R.resolve();return f.forEach(g=>{m=m.next(()=>u.getEntry(c,g)).next(_=>{const E=l.docVersions.get(g);yt(E!==null),_.version.compareTo(E)<0&&(h.applyToRemoteDocument(_,l),_.isValidDocument()&&(_.setReadTime(l.commitVersion),u.addEntry(_)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=nt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function yg(e){const t=Z(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function lI(e,t){const n=Z(e),r=t.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];t.targetChanges.forEach((u,h)=>{const f=s.get(h);if(!f)return;a.push(n.Qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,u.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(h)!==null?m=m.withResumeToken(Zt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(h,m),function(_,E,b){return _.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,m,u)&&a.push(n.Qr.updateTargetData(i,m))});let c=on(),l=nt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(uI(i,o,t.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!r.isEqual(X.min())){const u=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return R.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,l)).next(()=>c)}).then(i=>(n.ns=s,i))}function uI(e,t,n){let r=nt(),s=nt();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let o=on();return n.forEach((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(X.min())?(t.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(c),o=o.insert(a,c)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:s}})}function hI(e,t){const n=Z(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function fI(e,t){const n=Z(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,t).next(i=>i?(s=i,R.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new yn(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function Bc(e,t,n){const r=Z(e),s=r.ns.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ri(o))throw o;k("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(s.target)}function Af(e,t,n){const r=Z(e);let s=X.min(),i=nt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){const h=Z(c),f=h.rs.get(u);return f!==void 0?R.resolve(h.ns.get(f)):h.Qr.getTargetData(l,u)}(r,o,qe(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?s:X.min(),n?i:nt())).next(a=>(dI(r,s0(t),a),{documents:a,hs:i})))}function dI(e,t,n){let r=e.ss.get(t)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.ss.set(t,r)}class If{constructor(){this.activeTargetIds=u0()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class pI{constructor(){this.no=new If,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new If,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Si=null;function Fa(){return Si===null?Si=function(){return 268435456+Math.round(2147483648*Math.random())}():Si++,"0x"+Si.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class yI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=Fa(),c=this.bo(n,r.toUriEncodedString());k("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,i,o),this.Co(n,c,l,s).then(u=>(k("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Or("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",s),u})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=gI[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,r,s){const i=Fa();return new Promise((o,a)=>{const c=new IA;c.setWithCredentials(!0),c.listenOnce(TA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ma.NO_ERROR:const u=c.getResponseJson();k(zt,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(u)),o(u);break;case Ma.TIMEOUT:k(zt,`RPC '${t}' ${i} timed out`),a(new j(A.DEADLINE_EXCEEDED,"Request time out"));break;case Ma.HTTP_ERROR:const h=c.getStatus();if(k(zt,`RPC '${t}' ${i} failed with status:`,h,"response text:",c.getResponseText()),h>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const g=function(E){const b=E.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(b)>=0?b:A.UNKNOWN}(m.status);a(new j(g,m.message))}else a(new j(A.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new j(A.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{k(zt,`RPC '${t}' ${i} completed.`)}});const l=JSON.stringify(s);k(zt,`RPC '${t}' ${i} sending request:`,s),c.send(n,"POST",l,r,15)})}Fo(t,n,r){const s=Fa(),i=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=wA(),a=vA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=i.join("");k(zt,`Creating RPC '${t}' stream ${s}: ${u}`,c);const h=o.createWebChannel(u,c);let f=!1,m=!1;const g=new _I({lo:E=>{m?k(zt,`Not sending because RPC '${t}' stream ${s} is closed:`,E):(f||(k(zt,`Opening RPC '${t}' stream ${s} transport.`),h.open(),f=!0),k(zt,`RPC '${t}' stream ${s} sending:`,E),h.send(E))},ho:()=>h.close()}),_=(E,b,V)=>{E.listen(b,x=>{try{V(x)}catch(P){setTimeout(()=>{throw P},0)}})};return _(h,Ii.EventType.OPEN,()=>{m||k(zt,`RPC '${t}' stream ${s} transport opened.`)}),_(h,Ii.EventType.CLOSE,()=>{m||(m=!0,k(zt,`RPC '${t}' stream ${s} transport closed`),g.Vo())}),_(h,Ii.EventType.ERROR,E=>{m||(m=!0,Or(zt,`RPC '${t}' stream ${s} transport errored:`,E),g.Vo(new j(A.UNAVAILABLE,"The operation could not be completed")))}),_(h,Ii.EventType.MESSAGE,E=>{var b;if(!m){const V=E.data[0];yt(!!V);const x=V,P=x.error||((b=x[0])===null||b===void 0?void 0:b.error);if(P){k(zt,`RPC '${t}' stream ${s} received error:`,P);const z=P.status;let O=function(we){const ue=Ct[we];if(ue!==void 0)return ag(ue)}(z),J=P.message;O===void 0&&(O=A.INTERNAL,J="Unknown error status: "+z+" with message "+P.message),m=!0,g.Vo(new j(O,J)),h.close()}else k(zt,`RPC '${t}' stream ${s} received:`,V),g.mo(V)}}),_(a,AA.STAT_EVENT,E=>{E.stat===Zh.PROXY?k(zt,`RPC '${t}' stream ${s} detected buffering proxy`):E.stat===Zh.NOPROXY&&k(zt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.Ro()},0),g}}function Ua(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(e){return new P0(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(t,n,r=1e3,s=1.5,i=6e4){this.oi=t,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),s=Math.max(0,n-r);s>0&&k("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Lo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(t,n,r,s,i,o,a,c){this.oi=t,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Eg(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(ze(n.toString()),ze("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(n)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{t(()=>{const s=new j(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(t,n){const r=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(t){return k("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EI extends wg{constructor(t,n,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(t,n){return this.connection.Fo("Listen",t,n)}onMessage(t){this.jo.reset();const n=N0(this.serializer,t),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?Ke(o.readTime):X.min()}(t);return this.listener.u_(n,r)}c_(t){const n={};n.database=Uc(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=xc(c)?{documents:k0(i,c)}:{query:M0(i,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ug(i,o.resumeToken);const l=Mc(i,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(X.min())>0){a.readTime=ho(i,o.snapshotVersion.toTimestamp());const l=Mc(i,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=F0(this.serializer,t);r&&(n.labels=r),this.t_(n)}l_(t){const n={};n.database=Uc(this.serializer),n.removeTarget=t,this.t_(n)}}class wI extends wg{constructor(t,n,r,s,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,n){return this.connection.Fo("Write",t,n)}onMessage(t){if(yt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const n=O0(t.writeResults,t.commitTime),r=Ke(t.commitTime);return this.listener.T_(r,n)}return yt(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=Uc(this.serializer),this.t_(t)}I_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>x0(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI extends class{}{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new j(A.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(t,Lc(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new j(A.UNKNOWN,i.toString())})}vo(t,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(t,Lc(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(A.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class TI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ze(n),this.g_=!1):k("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{or(this)&&(k("RemoteStore","Restarting streams for network reachability change."),await async function(c){const l=Z(c);l.v_.add(4),await oi(l),l.x_.set("Unknown"),l.v_.delete(4),await Zo(l)}(this))})}),this.x_=new TI(r,s)}}async function Zo(e){if(or(e))for(const t of e.F_)await t(!0)}async function oi(e){for(const t of e.F_)await t(!1)}function vg(e,t){const n=Z(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),iu(n)?su(n):Hr(n).Jo()&&ru(n,t))}function Tg(e,t){const n=Z(e),r=Hr(n);n.C_.delete(t),r.Jo()&&Ag(n,t),n.C_.size===0&&(r.Jo()?r.Xo():or(n)&&n.x_.set("Unknown"))}function ru(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(X.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hr(e).c_(t)}function Ag(e,t){e.O_.Oe(t),Hr(e).l_(t)}function su(e){e.O_=new R0({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Hr(e).start(),e.x_.p_()}function iu(e){return or(e)&&!Hr(e).Ho()&&e.C_.size>0}function or(e){return Z(e).v_.size===0}function Ig(e){e.O_=void 0}async function II(e){e.C_.forEach((t,n)=>{ru(e,t)})}async function RI(e,t){Ig(e),iu(e)?(e.x_.S_(t),su(e)):e.x_.set("Unknown")}async function bI(e,t,n){if(e.x_.set("Online"),t instanceof lg&&t.state===2&&t.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(e,t)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await fo(e,r)}else if(t instanceof Ui?e.O_.$e(t):t instanceof cg?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(X.min()))try{const r=await yg(e.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=i.C_.get(l);u&&i.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const u=i.C_.get(c);if(!u)return;i.C_.set(c,u.withResumeToken(Zt.EMPTY_BYTE_STRING,u.snapshotVersion)),Ag(i,c);const h=new yn(u.target,c,l,u.sequenceNumber);ru(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){k("RemoteStore","Failed to raise snapshot:",r),await fo(e,r)}}async function fo(e,t,n){if(!ri(t))throw t;e.v_.add(1),await oi(e),e.x_.set("Offline"),n||(n=()=>yg(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{k("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Zo(e)})}function Rg(e,t){return t().catch(n=>fo(e,n,t))}async function ta(e){const t=Z(e),n=Sn(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;SI(t);)try{const s=await hI(t.localStore,r);if(s===null){t.D_.length===0&&n.Xo();break}r=s.batchId,CI(t,s)}catch(s){await fo(t,s)}bg(t)&&Sg(t)}function SI(e){return or(e)&&e.D_.length<10}function CI(e,t){e.D_.push(t);const n=Sn(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function bg(e){return or(e)&&!Sn(e).Ho()&&e.D_.length>0}function Sg(e){Sn(e).start()}async function PI(e){Sn(e).d_()}async function DI(e){const t=Sn(e);for(const n of e.D_)t.I_(n.mutations)}async function VI(e,t,n){const r=e.D_.shift(),s=Xl.from(r,t,n);await Rg(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await ta(e)}async function NI(e,t){t&&Sn(e).P_&&await async function(r,s){if(function(o){return T0(o)&&o!==A.ABORTED}(s.code)){const i=r.D_.shift();Sn(r).Zo(),await Rg(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ta(r)}}(e,t),bg(e)&&Sg(e)}async function bf(e,t){const n=Z(e);n.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");const r=or(n);n.v_.add(3),await oi(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Zo(n)}async function xI(e,t){const n=Z(e);t?(n.v_.delete(2),await Zo(n)):t||(n.v_.add(2),await oi(n),n.x_.set("Unknown"))}function Hr(e){return e.N_||(e.N_=function(n,r,s){const i=Z(n);return i.R_(),new EI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Po:II.bind(null,e),To:RI.bind(null,e),u_:bI.bind(null,e)}),e.F_.push(async t=>{t?(e.N_.Zo(),iu(e)?su(e):e.x_.set("Unknown")):(await e.N_.stop(),Ig(e))})),e.N_}function Sn(e){return e.B_||(e.B_=function(n,r,s){const i=Z(n);return i.R_(),new wI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Po:PI.bind(null,e),To:NI.bind(null,e),E_:DI.bind(null,e),T_:VI.bind(null,e)}),e.F_.push(async t=>{t?(e.B_.Zo(),await ta(e)):(await e.B_.stop(),e.D_.length>0&&(k("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))})),e.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new en,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const o=Date.now()+r,a=new ou(t,n,o,s,i);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(A.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function au(e,t){if(ze("AsyncQueue",`${t}: ${e}`),ri(e))return new j(A.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t){this.comparator=t?(n,r)=>t(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=cs(),this.sortedSet=new It(this.comparator)}static emptySet(t){return new br(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof br)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new br;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(){this.L_=new It(K.comparator)}track(t){const n=t.doc.key,r=this.L_.get(n);r?t.type!==0&&r.type===3?this.L_=this.L_.insert(n,t):t.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.L_=this.L_.remove(n):t.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:t.doc}):H():this.L_=this.L_.insert(n,t)}k_(){const t=[];return this.L_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Ur{constructor(t,n,r,s,i,o,a,c,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ur(t,n,br.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&zo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.q_=void 0,this.Q_=[]}}class kI{constructor(){this.queries=new zr(t=>Hm(t),zo),this.onlineState="Unknown",this.K_=new Set}}async function MI(e,t){const n=Z(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new OI),s)try{i.q_=await n.onListen(r)}catch(o){const a=au(o,`Initialization of query '${mr(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,i),i.Q_.push(t),t.U_(n.onlineState),i.q_&&t.W_(i.q_)&&cu(n)}async function LI(e,t){const n=Z(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(t);o>=0&&(i.Q_.splice(o,1),s=i.Q_.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function FI(e,t){const n=Z(e);let r=!1;for(const s of t){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.W_(s)&&(r=!0);o.q_=s}}r&&cu(n)}function UI(e,t,n){const r=Z(e),s=r.queries.get(t);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(t)}function cu(e){e.K_.forEach(t=>{t.next()})}class BI{constructor(t,n,r){this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Ur(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.z_?this.H_(t)&&(this.G_.next(t),n=!0):this.J_(t,this.onlineState)&&(this.Y_(t),n=!0),this.j_=t,n}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),n=!0),n}J_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}H_(t){if(t.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(t){t=Ur.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(t){this.key=t}}class Pg{constructor(t){this.key=t}}class jI{constructor(t,n){this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=nt(),this.mutatedKeys=nt(),this.ua=Gm(t),this.ca=new br(this.ua)}get la(){return this.oa}ha(t,n){const r=n?n.Pa:new Sf,s=n?n.ca:this.ca;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,h)=>{const f=s.get(u),m=Ho(this.query,h)?h:null,g=!!f&&this.mutatedKeys.has(f.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;f&&m?f.data.isEqual(m.data)?g!==_&&(r.track({type:3,doc:m}),E=!0):this.Ia(f,m)||(r.track({type:2,doc:m}),E=!0,(c&&this.ua(m,c)>0||l&&this.ua(m,l)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),E=!0):f&&!m&&(r.track({type:1,doc:f}),E=!0,(c||l)&&(a=!0)),E&&(m?(o=o.add(m),i=_?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{ca:o,Pa:r,Xi:a,mutatedKeys:i}}Ia(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const o=t.Pa.k_();o.sort((u,h)=>function(m,g){const _=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return _(m)-_(g)}(u.type,h.type)||this.ua(u.doc,h.doc)),this.Ta(r),s=s!=null&&s;const a=n&&!s?this.Ea():[],c=this.aa.size===0&&this.current&&!s?1:0,l=c!==this._a;return this._a=c,o.length!==0||l?{snapshot:new Ur(this.query,t.ca,i,o,t.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Sf,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=t.current)}Ea(){if(!this.current)return[];const t=this.aa;this.aa=nt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return t.forEach(r=>{this.aa.has(r)||n.push(new Pg(r))}),this.aa.forEach(r=>{t.has(r)||n.push(new Cg(r))}),n}Ra(t){this.oa=t.hs,this.aa=nt();const n=this.ha(t.documents);return this.applyChanges(n,!0)}Va(){return Ur.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class $I{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class qI{constructor(t){this.key=t,this.ma=!1}}class KI{constructor(t,n,r,s,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new zr(a=>Hm(a),zo),this.pa=new Map,this.ya=new Set,this.wa=new It(K.comparator),this.Sa=new Map,this.ba=new tu,this.Da={},this.Ca=new Map,this.va=Fr.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function WI(e,t){const n=eR(e);let r,s;const i=n.ga.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Va();else{const o=await fI(n.localStore,qe(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await zI(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&vg(n.remoteStore,o)}return s}async function zI(e,t,n,r,s){e.Ma=(h,f,m)=>async function(_,E,b,V){let x=E.view.ha(b);x.Xi&&(x=await Af(_.localStore,E.query,!1).then(({documents:J})=>E.view.ha(J,x)));const P=V&&V.targetChanges.get(E.targetId),z=V&&V.targetMismatches.get(E.targetId)!=null,O=E.view.applyChanges(x,_.isPrimaryClient,P,z);return Pf(_,E.targetId,O.da),O.snapshot}(e,h,f,m);const i=await Af(e.localStore,t,!0),o=new jI(t,i.hs),a=o.ha(i.documents),c=ii.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),l=o.applyChanges(a,e.isPrimaryClient,c);Pf(e,n,l.da);const u=new $I(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),l.snapshot}async function HI(e,t){const n=Z(e),r=n.ga.get(t),s=n.pa.get(r.targetId);if(s.length>1)return n.pa.set(r.targetId,s.filter(i=>!zo(i,t))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Bc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Tg(n.remoteStore,r.targetId),jc(n,r.targetId)}).catch(ni)):(jc(n,r.targetId),await Bc(n.localStore,r.targetId,!0))}async function GI(e,t,n){const r=nR(e);try{const s=await function(o,a){const c=Z(o),l=Nt.now(),u=a.reduce((m,g)=>m.add(g.key),nt());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=on(),_=nt();return c.os.getEntries(m,u).next(E=>{g=E,g.forEach((b,V)=>{V.isValidDocument()||(_=_.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(E=>{h=E;const b=[];for(const V of a){const x=_0(V,h.get(V.key).overlayedDocument);x!=null&&b.push(new ir(V.key,x,Fm(x.value.mapValue),nn.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,b,a)}).next(E=>{f=E;const b=E.applyToLocalDocumentSet(h,_);return c.documentOverlayCache.saveOverlays(m,E.batchId,b)})}).then(()=>({batchId:f.batchId,changes:Ym(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let l=o.Da[o.currentUser.toKey()];l||(l=new It(lt)),l=l.insert(a,c),o.Da[o.currentUser.toKey()]=l}(r,s.batchId,n),await ai(r,s.changes),await ta(r.remoteStore)}catch(s){const i=au(s,"Failed to persist write");n.reject(i)}}async function Dg(e,t){const n=Z(e);try{const r=await lI(n.localStore,t);t.targetChanges.forEach((s,i)=>{const o=n.Sa.get(i);o&&(yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ma=!0:s.modifiedDocuments.size>0?yt(o.ma):s.removedDocuments.size>0&&(yt(o.ma),o.ma=!1))}),await ai(n,r,t)}catch(r){await ni(r)}}function Cf(e,t,n){const r=Z(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ga.forEach((i,o)=>{const a=o.view.U_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=Z(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(const f of h.Q_)f.U_(a)&&(l=!0)}),l&&cu(c)}(r.eventManager,t),s.length&&r.fa.u_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function QI(e,t,n){const r=Z(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Sa.get(t),i=s&&s.key;if(i){let o=new It(K.comparator);o=o.insert(i,Gt.newNoDocument(i,X.min()));const a=nt().add(i),c=new Xo(X.min(),new Map,new It(lt),o,a);await Dg(r,c),r.wa=r.wa.remove(i),r.Sa.delete(t),lu(r)}else await Bc(r.localStore,t,!1).then(()=>jc(r,t,n)).catch(ni)}async function YI(e,t){const n=Z(e),r=t.batch.batchId;try{const s=await cI(n.localStore,t);Ng(n,r,null),Vg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ai(n,s)}catch(s){await ni(s)}}async function XI(e,t,n){const r=Z(e);try{const s=await function(o,a){const c=Z(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(yt(h!==null),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,t);Ng(r,t,n),Vg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ai(r,s)}catch(s){await ni(s)}}function Vg(e,t){(e.Ca.get(t)||[]).forEach(n=>{n.resolve()}),e.Ca.delete(t)}function Ng(e,t,n){const r=Z(e);let s=r.Da[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Da[r.currentUser.toKey()]=s}}function jc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach(r=>{e.ba.containsKey(r)||xg(e,r)})}function xg(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);n!==null&&(Tg(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),lu(e))}function Pf(e,t,n){for(const r of n)r instanceof Cg?(e.ba.addReference(r.key,t),JI(e,r)):r instanceof Pg?(k("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||xg(e,r.key)):H()}function JI(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(k("SyncEngine","New document in limbo: "+n),e.ya.add(r),lu(e))}function lu(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new K(wt.fromString(t)),r=e.va.next();e.Sa.set(r,new qI(n)),e.wa=e.wa.insert(n,r),vg(e.remoteStore,new yn(qe(Wm(n.path)),r,"TargetPurposeLimboResolution",Wl._e))}}async function ai(e,t,n){const r=Z(e),s=[],i=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{o.push(r.Ma(c,t,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l!=null&&l.fromCache?"not-current":"current"),l){s.push(l);const u=nu.Ki(c.targetId,l);i.push(u)}}))}),await Promise.all(o),r.fa.u_(s),await async function(c,l){const u=Z(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>R.forEach(l,f=>R.forEach(f.qi,m=>u.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>R.forEach(f.Qi,m=>u.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!ri(h))throw h;k("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const f=h.targetId;if(!h.fromCache){const m=u.ns.get(f),g=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(g);u.ns=u.ns.insert(f,_)}}}(r.localStore,i))}async function ZI(e,t){const n=Z(e);if(!n.currentUser.isEqual(t)){k("SyncEngine","User change. New user:",t.toKey());const r=await _g(n.localStore,t);n.currentUser=t,function(i,o){i.Ca.forEach(a=>{a.forEach(c=>{c.reject(new j(A.CANCELLED,o))})}),i.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ai(n,r.us)}}function tR(e,t){const n=Z(e),r=n.Sa.get(t);if(r&&r.ma)return nt().add(r.key);{let s=nt();const i=n.pa.get(t);if(!i)return s;for(const o of i){const a=n.ga.get(o);s=s.unionWith(a.view.la)}return s}}function eR(e){const t=Z(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=QI.bind(null,t),t.fa.u_=FI.bind(null,t.eventManager),t.fa.xa=UI.bind(null,t.eventManager),t}function nR(e){const t=Z(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=YI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=XI.bind(null,t),t}class Df{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Jo(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return aI(this.persistence,new iI,t.initialUser,this.serializer)}createPersistence(t){return new nI(eu.Hr,this.serializer)}createSharedClientState(t){return new pI}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class rR{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZI.bind(null,this.syncEngine),await xI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new kI}()}createDatastore(t){const n=Jo(t.databaseInfo.databaseId),r=function(i){return new yI(i)}(t.databaseInfo);return function(i,o,a,c){return new vI(i,o,a,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,o,a){return new AI(r,s,i,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Cf(this.syncEngine,n,0),function(){return Rf.D()?new Rf:new mI}())}createSyncEngine(t,n){return function(s,i,o,a,c,l,u){const h=new KI(s,i,o,a,c,l);return u&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const s=Z(r);k("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await oi(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):ze("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(t,n,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ht.UNAUTHENTICATED,this.clientId=km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{k("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(k("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(A.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new en;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=au(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Ba(e,t){e.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await _g(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Vf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await aR(e);k("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>bf(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>bf(t.remoteStore,s)),e._onlineComponents=t}function oR(e){return e.name==="FirebaseError"?e.code===A.FAILED_PRECONDITION||e.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function aR(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ba(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!oR(n))throw n;Or("Error using user provided cache. Falling back to memory cache: "+n),await Ba(e,new Df)}}else k("FirestoreClient","Using default OfflineComponentProvider"),await Ba(e,new Df);return e._offlineComponents}async function Og(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),await Vf(e,e._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),await Vf(e,new rR))),e._onlineComponents}function cR(e){return Og(e).then(t=>t.syncEngine)}async function lR(e){const t=await Og(e),n=t.eventManager;return n.onListen=WI.bind(null,t.syncEngine),n.onUnlisten=HI.bind(null,t.syncEngine),n}function uR(e,t,n={}){const r=new en;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,l){const u=new sR({next:f=>{o.enqueueAndForget(()=>LI(i,h)),f.fromCache&&c.source==="server"?l.reject(new j(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new BI(a,u,{includeMetadataChanges:!0,Z_:!0});return MI(i,h)}(await lR(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(e,t,n){if(!n)throw new j(A.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function hR(e,t,n,r){if(t===!0&&r===!0)throw new j(A.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function xf(e){if(!K.isDocumentKey(e))throw new j(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Of(e){if(K.isDocumentKey(e))throw new j(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ea(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":H()}function Ks(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new j(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ea(e);throw new j(A.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new j(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new j(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}hR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kg((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new j(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new j(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new j(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class na{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new j(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new j(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kf(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bA;switch(r.type){case"firstParty":return new DA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Nf.get(n);r&&(k("ComponentProvider","Removing Datastore"),Nf.delete(n),r.terminate())}(this),Promise.resolve()}}function fR(e,t,n,r={}){var s;const i=(e=Ks(e,na))._getSettings(),o=`${t}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ht.MOCK_USER;else{a=Ep(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new j(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ht(l)}e._authCredentials=new SA(new Om(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Gr(this.firestore,t,this._query)}}class pe{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new In(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new pe(this.firestore,t,this._key)}}class In extends Gr{constructor(t,n,r){super(t,n,Wm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new pe(this.firestore,null,new K(t))}withConverter(t){return new In(this.firestore,t,this._path)}}function dR(e,t,...n){if(e=se(e),Mg("collection","path",t),e instanceof na){const r=wt.fromString(t,...n);return Of(r),new In(e,null,r)}{if(!(e instanceof pe||e instanceof In))throw new j(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(wt.fromString(t,...n));return Of(r),new In(e.firestore,null,r)}}function pR(e,t,...n){if(e=se(e),arguments.length===1&&(t=km.newId()),Mg("doc","path",t),e instanceof na){const r=wt.fromString(t,...n);return xf(r),new pe(e,null,new K(r))}{if(!(e instanceof pe||e instanceof In))throw new j(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(wt.fromString(t,...n));return xf(r),new pe(e.firestore,e instanceof In?e.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Eg(this,"async_queue_retry"),this._u=()=>{const n=Ua();n&&k("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const t=Ua();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const n=Ua();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise(()=>{});const n=new en;return this.uu(()=>this.tu&&this.su?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.eu.push(t),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!ri(t))throw t;k("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(t){const n=this.Xa.then(()=>(this.iu=!0,t().catch(r=>{this.ru=r,this.iu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ze("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(t,n,r){this.au(),this.ou.indexOf(t)>-1&&(n=0);const s=ou.createAndSchedule(this,t,n,r,i=>this.lu(i));return this.nu.push(s),s}au(){this.ru&&H()}verifyOperationInProgress(){}async hu(){let t;do t=this.Xa,await t;while(t!==this.Xa)}Pu(t){for(const n of this.nu)if(n.timerId===t)return!0;return!1}Iu(t){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.hu()})}Tu(t){this.ou.push(t)}lu(t){const n=this.nu.indexOf(t);this.nu.splice(n,1)}}class uu extends na{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=function(){return new mR}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Fg(this),this._firestoreClient.terminate()}}function gR(e,t){const n=typeof e=="object"?e:Cp(),r=typeof e=="string"?e:t||"(default)",s=Rp(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=_p("firestore");i&&fR(s,...i)}return s}function Lg(e){return e._firestoreClient||Fg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Fg(e){var t,n,r;const s=e._freezeSettings(),i=function(a,c,l,u){return new KA(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,kg(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new iR(e._authCredentials,e._appCheckCredentials,e._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Br(Zt.fromBase64String(t))}catch(n){throw new j(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Br(Zt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new j(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new j(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new j(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return lt(this._lat,t._lat)||lt(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=/^__.*__$/;class Ug{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new ir(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Bg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class du{constructor(t,n,r,s,i,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new du(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Au({path:r,Vu:!1});return s.mu(t),s}fu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Au({path:r,Vu:!1});return s.Eu(),s}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return po(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(t.length===0)throw this.pu("Document fields must not be empty");if(Bg(this.du)&&_R.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class yR{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Jo(t)}Su(t,n,r,s=!1){return new du({du:t,methodName:n,wu:r,path:jt.emptyPath(),Vu:!1,yu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jg(e){const t=e._freezeSettings(),n=Jo(e._databaseId);return new yR(e._databaseId,!!t.ignoreUndefinedProperties,n)}class sa extends hu{_toFieldTransform(t){if(t.du!==2)throw t.du===1?t.pu(`${this._methodName}() can only appear at the top level of your update data`):t.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof sa}}function ER(e,t,n,r){const s=e.Su(1,t,n);qg("Data must be an object, but it was:",s,r);const i=[],o=fe.empty();sr(r,(c,l)=>{const u=pu(t,c,n);l=se(l);const h=s.fu(u);if(l instanceof sa)i.push(u);else{const f=ci(l,h);f!=null&&(i.push(u),o.set(u,f))}});const a=new Re(i);return new Ug(o,a,s.fieldTransforms)}function wR(e,t,n,r,s,i){const o=e.Su(1,t,n),a=[Mf(t,r,n)],c=[s];if(i.length%2!=0)throw new j(A.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Mf(t,i[f])),c.push(i[f+1]);const l=[],u=fe.empty();for(let f=a.length-1;f>=0;--f)if(!IR(l,a[f])){const m=a[f];let g=c[f];g=se(g);const _=o.fu(m);if(g instanceof sa)l.push(m);else{const E=ci(g,_);E!=null&&(l.push(m),u.set(m,E))}}const h=new Re(l);return new Ug(u,h,o.fieldTransforms)}function vR(e,t,n,r=!1){return ci(n,e.Su(r?4:3,t))}function ci(e,t){if($g(e=se(e)))return qg("Unsupported field value:",t,e),TR(e,t);if(e instanceof hu)return function(r,s){if(!Bg(s.du))throw s.pu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.pu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&t.du!==4)throw t.pu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=ci(a,s.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=se(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return h0(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Nt.fromDate(r);return{timestampValue:ho(s.serializer,i)}}if(r instanceof Nt){const i=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ho(s.serializer,i)}}if(r instanceof fu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Br)return{bytesValue:ug(s.serializer,r._byteString)};if(r instanceof pe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zl(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.pu(`Unsupported field value: ${ea(r)}`)}(e,t)}function TR(e,t){const n={};return Mm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sr(e,(r,s)=>{const i=ci(s,t.Ru(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function $g(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Nt||e instanceof fu||e instanceof Br||e instanceof pe||e instanceof hu)}function qg(e,t,n){if(!$g(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ea(n);throw r==="an object"?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function Mf(e,t,n){if((t=se(t))instanceof ra)return t._internalPath;if(typeof t=="string")return pu(e,t);throw po("Field path arguments must be of type string or ",e,!1,void 0,n)}const AR=new RegExp("[~\\*/\\[\\]]");function pu(e,t,n){if(t.search(AR)>=0)throw po(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ra(...t.split("."))._internalPath}catch{throw po(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function po(e,t,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new j(A.INVALID_ARGUMENT,a+e+c)}function IR(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new RR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(mu("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RR extends Kg{data(){return super.data()}}function mu(e,t){return typeof t=="string"?pu(e,t):t instanceof ra?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new j(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gu{}class SR extends gu{}function CR(e,t,...n){let r=[];t instanceof gu&&r.push(t),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof _u).length,a=i.filter(c=>c instanceof ia).length;if(o>1||o>0&&a>0)throw new j(A.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class ia extends SR{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new ia(t,n,r)}_apply(t){const n=this._parse(t);return Wg(t._query,n),new Gr(t.firestore,t.converter,Oc(t._query,n))}_parse(t){const n=jg(t.firestore);return function(i,o,a,c,l,u,h){let f;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new j(A.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Uf(h,u);const m=[];for(const g of h)m.push(Ff(c,i,g));f={arrayValue:{values:m}}}else f=Ff(c,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Uf(h,u),f=vR(a,o,h,u==="in"||u==="not-in");return Dt.create(l,u,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Lf(e,t,n){const r=t,s=mu("where",e);return ia._create(s,r,n)}class _u extends gu{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new _u(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pe.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)Wg(o,c),o=Oc(o,c)}(t._query,n),new Gr(t.firestore,t.converter,Oc(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ff(e,t,n){if(typeof(n=se(n))=="string"){if(n==="")throw new j(A.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zm(t)&&n.indexOf("/")!==-1)throw new j(A.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(wt.fromString(n));if(!K.isDocumentKey(r))throw new j(A.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return of(e,new K(r))}if(n instanceof pe)return of(e,n._key);throw new j(A.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ea(n)}.`)}function Uf(e,t){if(!Array.isArray(e)||e.length===0)throw new j(A.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Wg(e,t){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new j(A.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new j(A.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class PR{convertValue(t,n="none"){switch(Xn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Pt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Yn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw H()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return sr(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(t){return new fu(Pt(t.latitude),Pt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Hl(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Us(t));default:return null}}convertTimestamp(t){const n=bn(t);return new Nt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=wt.fromString(t);yt(gg(r));const s=new Bs(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||ze(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class DR extends Kg{constructor(t,n,r,s,i,o){super(t,n,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Bi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(mu("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Bi extends DR{data(t={}){return super.data(t)}}class VR{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ci(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Bi(this._firestore,this._userDataWriter,r.key,r,new Ci(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new Bi(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ci(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Bi(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ci(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:NR(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function NR(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}class xR extends PR{constructor(t){super(),this.firestore=t}convertBytes(t){return new Br(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new pe(this.firestore,null,n)}}function OR(e){e=Ks(e,Gr);const t=Ks(e.firestore,uu),n=Lg(t),r=new xR(t);return bR(e._query),uR(n,e._query).then(s=>new VR(t,r,e,s))}function kR(e,t,n,...r){e=Ks(e,pe);const s=Ks(e.firestore,uu),i=jg(s);let o;return o=typeof(t=se(t))=="string"||t instanceof ra?wR(i,"updateDoc",e._key,t,n,r):ER(i,"updateDoc",e._key,t),MR(s,[o.toMutation(e._key,nn.exists(!0))])}function MR(e,t){return function(r,s){const i=new en;return r.asyncQueue.enqueueAndForget(async()=>GI(await cR(r),s,i)),i.promise}(Lg(e),t)}(function(t,n=!0){(function(s){Wr=s})(bp),Cs(new Nr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new uu(new CA(r.getProvider("auth-internal")),new NA(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bs(l.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),An(tf,"4.4.1",t),An(tf,"4.4.1","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="firebasestorage.googleapis.com",Hg="storageBucket",LR=2*60*1e3,FR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St extends nr{constructor(t,n,r=0){super(ja(t),`Firebase Storage: ${n} (${ja(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,St.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return ja(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var bt;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(bt||(bt={}));function ja(e){return"storage/"+e}function yu(){const e="An unknown error occurred, please check the error payload for server response.";return new St(bt.UNKNOWN,e)}function UR(e){return new St(bt.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function BR(e){return new St(bt.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function jR(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new St(bt.UNAUTHENTICATED,e)}function $R(){return new St(bt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function qR(e){return new St(bt.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function KR(){return new St(bt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WR(){return new St(bt.CANCELED,"User canceled the upload/download.")}function zR(e){return new St(bt.INVALID_URL,"Invalid URL '"+e+"'.")}function HR(e){return new St(bt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function GR(){return new St(bt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Hg+"' property when initializing the app?")}function QR(){return new St(bt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YR(){return new St(bt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function XR(e){return new St(bt.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $c(e){return new St(bt.INVALID_ARGUMENT,e)}function Gg(){return new St(bt.APP_DELETED,"The Firebase app was deleted.")}function JR(e){return new St(bt.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ts(e,t){return new St(bt.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function rs(e){throw new St(bt.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=re.makeFromUrl(t,n)}catch{return new re(t,"")}if(r.path==="")return r;throw HR(t)}static makeFromUrl(t,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function l(P){P.path_=decodeURIComponent(P.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${u}/b/${s}/o${f}`,"i"),g={bucket:1,path:3},_=n===zg?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",b=new RegExp(`^https?://${_}/${s}/${E}`,"i"),x=[{regex:a,indices:c,postModify:i},{regex:m,indices:g,postModify:l},{regex:b,indices:{bucket:1,path:2},postModify:l}];for(let P=0;P<x.length;P++){const z=x[P],O=z.regex.exec(t);if(O){const J=O[z.indices.bucket];let ct=O[z.indices.path];ct||(ct=""),r=new re(J,ct),z.postModify(r);break}}if(r==null)throw zR(t);return r}}class ZR{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(e,t,n){let r=1,s=null,i=null,o=!1,a=0;function c(){return a===2}let l=!1;function u(...E){l||(l=!0,t.apply(null,E))}function h(E){s=setTimeout(()=>{s=null,e(m,c())},E)}function f(){i&&clearTimeout(i)}function m(E,...b){if(l){f();return}if(E){f(),u.call(null,E,...b);return}if(c()||o){f(),u.call(null,E,...b);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,h(x)}let g=!1;function _(E){g||(g=!0,f(),!l&&(s!==null?(E||(a=2),clearTimeout(s),h(0)):E||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function eb(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(e){return e!==void 0}function rb(e){return typeof e=="object"&&!Array.isArray(e)}function Eu(e){return typeof e=="string"||e instanceof String}function Bf(e){return wu()&&e instanceof Blob}function wu(){return typeof Blob<"u"}function qc(e,t,n,r){if(r<t)throw $c(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw $c(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Qg(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const s=t(r)+"="+t(e[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Wn||(Wn={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(e,t){const n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,i=t.indexOf(e)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(t,n,r,s,i,o,a,c,l,u,h,f=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const t=(r,s)=>{if(s){r(!1,new Pi(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Wn.NO_ERROR,c=i.getStatus();if(!a||sb(c,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Wn.ABORT;r(!1,new Pi(!1,null,u));return}const l=this.successCodes_.indexOf(c)!==-1;r(!0,new Pi(l,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());nb(c)?i(c):i()}catch(c){o(c)}else if(a!==null){const c=yu();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){const c=this.appDelete_?Gg():WR();o(c)}else{const c=KR();o(c)}};this.canceled_?n(!1,new Pi(!1,null,!0)):this.backoffId_=tb(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&eb(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pi{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function ob(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function ab(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function cb(e,t){t&&(e["X-Firebase-GMPID"]=t)}function lb(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function ub(e,t,n,r,s,i,o=!0){const a=Qg(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return cb(l,t),ob(l,n),ab(l,i),lb(l,r),new ib(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fb(...e){const t=hb();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(wu())return new Blob(e);throw new St(bt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function db(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(e){if(typeof atob>"u")throw XR("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $a{constructor(t,n){this.data=t,this.contentType=n||null}}function mb(e,t){switch(e){case je.RAW:return new $a(Yg(t));case je.BASE64:case je.BASE64URL:return new $a(Xg(e,t));case je.DATA_URL:return new $a(_b(t),yb(t))}throw yu()}function Yg(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const i=r,o=e.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function gb(e){let t;try{t=decodeURIComponent(e)}catch{throw Ts(je.DATA_URL,"Malformed data URL.")}return Yg(t)}function Xg(e,t){switch(e){case je.BASE64:{const s=t.indexOf("-")!==-1,i=t.indexOf("_")!==-1;if(s||i)throw Ts(e,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case je.BASE64URL:{const s=t.indexOf("+")!==-1,i=t.indexOf("/")!==-1;if(s||i)throw Ts(e,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=pb(t)}catch(s){throw s.message.includes("polyfill")?s:Ts(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Jg{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Ts(je.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Eb(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function _b(e){const t=new Jg(e);return t.base64?Xg(je.BASE64,t.rest):gb(t.rest)}function yb(e){return new Jg(e).contentType}function Eb(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t,n){let r=0,s="";Bf(t)?(this.data_=t,r=t.size,s=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,n){if(Bf(this.data_)){const r=this.data_,s=db(r,t,n);return s===null?null:new _n(s)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new _n(r,!0)}}static getBlob(...t){if(wu()){const n=t.map(r=>r instanceof _n?r.data_:r);return new _n(fb.apply(null,n))}else{const n=t.map(o=>Eu(o)?mb(je.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new _n(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(e){let t;try{t=JSON.parse(e)}catch{return null}return rb(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function vb(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function Zg(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(e,t){return t}class te{constructor(t,n,r,s){this.server=t,this.local=n||t,this.writable=!!r,this.xform=s||Tb}}let Di=null;function Ab(e){return!Eu(e)||e.length<2?e:Zg(e)}function t_(){if(Di)return Di;const e=[];e.push(new te("bucket")),e.push(new te("generation")),e.push(new te("metageneration")),e.push(new te("name","fullPath",!0));function t(i,o){return Ab(o)}const n=new te("name");n.xform=t,e.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new te("size");return s.xform=r,e.push(s),e.push(new te("timeCreated")),e.push(new te("updated")),e.push(new te("md5Hash",null,!0)),e.push(new te("cacheControl",null,!0)),e.push(new te("contentDisposition",null,!0)),e.push(new te("contentEncoding",null,!0)),e.push(new te("contentLanguage",null,!0)),e.push(new te("contentType",null,!0)),e.push(new te("metadata","customMetadata",!0)),Di=e,Di}function Ib(e,t){function n(){const r=e.bucket,s=e.fullPath,i=new re(r,s);return t._makeStorageReference(i)}Object.defineProperty(e,"ref",{get:n})}function Rb(e,t,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,t[o.server])}return Ib(r,e),r}function e_(e,t,n){const r=vu(t);return r===null?null:Rb(e,r,n)}function bb(e,t,n,r){const s=vu(t);if(s===null||!Eu(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(l=>{const u=e.bucket,h=e.fullPath,f="/b/"+o(u)+"/o/"+o(h),m=li(f,n,r),g=Qg({alt:"media",token:l});return m+g})[0]}function Sb(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const i=t[s];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="prefixes",$f="items";function Cb(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[jf])for(const s of n[jf]){const i=s.replace(/\/$/,""),o=e._makeStorageReference(new re(t,i));r.prefixes.push(o)}if(n[$f])for(const s of n[$f]){const i=e._makeStorageReference(new re(t,s.name));r.items.push(i)}return r}function Pb(e,t,n){const r=vu(n);return r===null?null:Cb(e,t,r)}class oa{constructor(t,n,r,s){this.url=t,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(e){if(!e)throw yu()}function Db(e,t){function n(r,s){const i=e_(e,s,t);return Tu(i!==null),i}return n}function Vb(e,t){function n(r,s){const i=Pb(e,t,s);return Tu(i!==null),i}return n}function Nb(e,t){function n(r,s){const i=e_(e,s,t);return Tu(i!==null),bb(i,s,e.host,e._protocol)}return n}function Au(e){function t(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=$R():s=jR():n.getStatus()===402?s=BR(e.bucket):n.getStatus()===403?s=qR(e.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return t}function n_(e){const t=Au(e);function n(r,s){let i=t(r,s);return r.getStatus()===404&&(i=UR(e.path)),i.serverResponse=s.serverResponse,i}return n}function xb(e,t,n,r,s){const i={};t.isRoot?i.prefix="":i.prefix=t.path+"/",n&&n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),s&&(i.maxResults=s);const o=t.bucketOnlyServerUrl(),a=li(o,e.host,e._protocol),c="GET",l=e.maxOperationRetryTime,u=new oa(a,c,Vb(e,t.bucket),l);return u.urlParams=i,u.errorHandler=Au(t),u}function Ob(e,t,n){const r=t.fullServerUrl(),s=li(r,e.host,e._protocol),i="GET",o=e.maxOperationRetryTime,a=new oa(s,i,Nb(e,n),o);return a.errorHandler=n_(t),a}function kb(e,t){const n=t.fullServerUrl(),r=li(n,e.host,e._protocol),s="DELETE",i=e.maxOperationRetryTime;function o(c,l){}const a=new oa(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=n_(t),a}function Mb(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Lb(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=Mb(null,t)),r}function Fb(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let P=0;P<2;P++)x=x+Math.random().toString().slice(2);return x}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const l=Lb(t,r,s),u=Sb(l,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,f=`\r
--`+c+"--",m=_n.getBlob(h,r,f);if(m===null)throw QR();const g={name:l.fullPath},_=li(i,e.host,e._protocol),E="POST",b=e.maxUploadRetryTime,V=new oa(_,E,Db(e,n),b);return V.urlParams=g,V.headers=o,V.body=m.uploadData(),V.errorHandler=Au(t),V}class Ub{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wn.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wn.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wn.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,s){if(this.sent_)throw rs("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rs("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rs("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rs("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rs("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Bb extends Ub{initXhr(){this.xhr_.responseType="text"}}function aa(){return new Bb}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(t,n){this._service=t,n instanceof re?this._location=n:this._location=re.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Jn(t,n)}get root(){const t=new re(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Zg(this._location.path)}get storage(){return this._service}get parent(){const t=wb(this._location.path);if(t===null)return null;const n=new re(this._location.bucket,t);return new Jn(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw JR(t)}}function jb(e,t,n){e._throwIfRoot("uploadBytes");const r=Fb(e.storage,e._location,t_(),new _n(t,!0),n);return e.storage.makeRequestWithTokens(r,aa).then(s=>({metadata:s,ref:e}))}function $b(e,t){t!=null&&typeof t.maxResults=="number"&&qc("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=xb(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,aa)}function qb(e){e._throwIfRoot("getDownloadURL");const t=Ob(e.storage,e._location,t_());return e.storage.makeRequestWithTokens(t,aa).then(n=>{if(n===null)throw YR();return n})}function Kb(e){e._throwIfRoot("deleteObject");const t=kb(e.storage,e._location);return e.storage.makeRequestWithTokens(t,aa)}function Wb(e,t){const n=vb(e._location.path,t),r=new re(e._location.bucket,n);return new Jn(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(e){return/^[A-Za-z]+:\/\//.test(e)}function Hb(e,t){return new Jn(e,t)}function r_(e,t){if(e instanceof Iu){const n=e;if(n._bucket==null)throw GR();const r=new Jn(n,n._bucket);return t!=null?r_(r,t):r}else return t!==void 0?Wb(e,t):e}function Gb(e,t){if(t&&zb(t)){if(e instanceof Iu)return Hb(e,t);throw $c("To use ref(service, url), the first argument must be a Storage instance.")}else return r_(e,t)}function qf(e,t){const n=t==null?void 0:t[Hg];return n==null?null:re.makeFromBucketSpec(n,e)}function Qb(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken=typeof s=="string"?s:Ep(s,e.app.options.projectId))}class Iu{constructor(t,n,r,s,i){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=zg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=LR,this._maxUploadRetryTime=FR,this._requests=new Set,s!=null?this._bucket=re.makeFromBucketSpec(s,this._host):this._bucket=qf(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=re.makeFromBucketSpec(this._url,t):this._bucket=qf(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){qc("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){qc("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Jn(this,t)}_makeRequest(t,n,r,s,i=!0){if(this._deleted)return new ZR(Gg());{const o=ub(t,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,s).getPromise()}}const Kf="@firebase/storage",Wf="0.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="storage";function zf(e,t,n){return e=se(e),jb(e,t,n)}function Yb(e,t){return e=se(e),$b(e,t)}function Xb(e){return e=se(e),qb(e)}function Jb(e){return e=se(e),Kb(e)}function qa(e,t){return e=se(e),Gb(e,t)}function Zb(e=Cp(),t){e=se(e);const r=Rp(e,s_).getImmediate({identifier:t}),s=_p("storage");return s&&tS(r,...s),r}function tS(e,t,n,r={}){Qb(e,t,n,r)}function eS(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Iu(n,r,s,t,bp)}function nS(){Cs(new Nr(s_,eS,"PUBLIC").setMultipleInstances(!0)),An(Kf,Wf,""),An(Kf,Wf,"esm2017")}nS();const rS={apiKey:"AIzaSyD6xyq5OpN70Z8r3UYRbTCTpKRixzsmPf0",authDomain:"voice-recording-1fc90.firebaseapp.com",projectId:"voice-recording-1fc90",storageBucket:"voice-recording-1fc90.appspot.com",messagingSenderId:"222717438916",appId:"1:222717438916:web:1d8e1fd4fd4e7ef4b59291"};Sp(rS);const i_=gR(),Ka=Zb(),sS={id:"login"},iS=rt("div",{class:"center pad"},[rt("h2",null,"User Login")],-1),oS={class:"center pad"},aS={class:"center pad"},cS={key:0,class:"center pad"},lS=rt("p",null,"wrong password please try again",-1),uS=[lS],hS={key:1,class:"center pad"},fS=rt("p",null,"(make sure neptun code is in capital letter)",-1),dS=[fS],pS={__name:"login",props:{id:{},idModifiers:{},password:{},passwordModifiers:{}},emits:["update:id","update:password"],setup(e){fl(()=>{var i=sessionStorage.getItem("neptun");i&&zs.push("/audio")});const t=yr(!1),n=rh(e,"id"),r=rh(e,"password"),s=async()=>{const i=CR(dR(i_,"user"),Lf("neptun","==",n.value),Lf("password","==",r.value));await OR(i).then(o=>{if(o.empty)console.log("No such document!"),t.value=!0;else{const a=o.docs[0].data();sessionStorage.setItem("neptun",a.neptun),a.textComplete?sessionStorage.setItem("textComplete",a.textComplete):sessionStorage.setItem("textComplete",0),zs.push("/audio")}})};return(i,o)=>(ge(),ke("div",sS,[iS,rt("div",oS,[Ku(rt("input",{type:"text",placeholder:"neptun ID","onUpdate:modelValue":o[0]||(o[0]=a=>n.value=a)},null,512),[[dh,n.value]])]),rt("div",aS,[Ku(rt("input",{type:"password",placeholder:"password","onUpdate:modelValue":o[1]||(o[1]=a=>r.value=a)},null,512),[[dh,r.value]])]),rt("div",{class:"center pad"},[rt("button",{onClick:s},"login")]),t.value?(ge(),ke("div",cS,uS)):ds("",!0),t.value?(ge(),ke("div",hS,dS)):ds("",!0)]))}},mS={class:"admin center"},gS=rt("h1",null,"admin",-1),_S={__name:"admin",setup(e){const t=()=>{zs.push("/")};return(n,r)=>(ge(),ke("div",mS,[gS,rt("div",null,[rt("button",{onClick:t}," go login")])]))}};function o_(e,t){return function(){return e.apply(t,arguments)}}const{toString:yS}=Object.prototype,{getPrototypeOf:Ru}=Object,ca=(e=>t=>{const n=yS.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ge=e=>(e=e.toLowerCase(),t=>ca(t)===e),la=e=>t=>typeof t===e,{isArray:Qr}=Array,Ws=la("undefined");function ES(e){return e!==null&&!Ws(e)&&e.constructor!==null&&!Ws(e.constructor)&&Ee(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const a_=Ge("ArrayBuffer");function wS(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&a_(e.buffer),t}const vS=la("string"),Ee=la("function"),c_=la("number"),ua=e=>e!==null&&typeof e=="object",TS=e=>e===!0||e===!1,ji=e=>{if(ca(e)!=="object")return!1;const t=Ru(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},AS=Ge("Date"),IS=Ge("File"),RS=Ge("Blob"),bS=Ge("FileList"),SS=e=>ua(e)&&Ee(e.pipe),CS=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ee(e.append)&&((t=ca(e))==="formdata"||t==="object"&&Ee(e.toString)&&e.toString()==="[object FormData]"))},PS=Ge("URLSearchParams"),DS=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ui(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Qr(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let a;for(r=0;r<o;r++)a=i[r],t.call(null,e[a],a,e)}}function l_(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const u_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,h_=e=>!Ws(e)&&e!==u_;function Kc(){const{caseless:e}=h_(this)&&this||{},t={},n=(r,s)=>{const i=e&&l_(t,s)||s;ji(t[i])&&ji(r)?t[i]=Kc(t[i],r):ji(r)?t[i]=Kc({},r):Qr(r)?t[i]=r.slice():t[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&ui(arguments[r],n);return t}const VS=(e,t,n,{allOwnKeys:r}={})=>(ui(t,(s,i)=>{n&&Ee(s)?e[i]=o_(s,n):e[i]=s},{allOwnKeys:r}),e),NS=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),xS=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},OS=(e,t,n,r)=>{let s,i,o;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!r||r(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&Ru(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kS=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},MS=e=>{if(!e)return null;if(Qr(e))return e;let t=e.length;if(!c_(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},LS=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ru(Uint8Array)),FS=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=r.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},US=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},BS=Ge("HTMLFormElement"),jS=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Hf=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),$S=Ge("RegExp"),f_=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ui(n,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(r[i]=o||s)}),Object.defineProperties(e,r)},qS=e=>{f_(e,(t,n)=>{if(Ee(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Ee(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},KS=(e,t)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Qr(e)?r(e):r(String(e).split(t)),n},WS=()=>{},zS=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Wa="abcdefghijklmnopqrstuvwxyz",Gf="0123456789",d_={DIGIT:Gf,ALPHA:Wa,ALPHA_DIGIT:Wa+Wa.toUpperCase()+Gf},HS=(e=16,t=d_.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function GS(e){return!!(e&&Ee(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const QS=e=>{const t=new Array(10),n=(r,s)=>{if(ua(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const i=Qr(r)?[]:{};return ui(r,(o,a)=>{const c=n(o,s+1);!Ws(c)&&(i[a]=c)}),t[s]=void 0,i}}return r};return n(e,0)},YS=Ge("AsyncFunction"),XS=e=>e&&(ua(e)||Ee(e))&&Ee(e.then)&&Ee(e.catch),v={isArray:Qr,isArrayBuffer:a_,isBuffer:ES,isFormData:CS,isArrayBufferView:wS,isString:vS,isNumber:c_,isBoolean:TS,isObject:ua,isPlainObject:ji,isUndefined:Ws,isDate:AS,isFile:IS,isBlob:RS,isRegExp:$S,isFunction:Ee,isStream:SS,isURLSearchParams:PS,isTypedArray:LS,isFileList:bS,forEach:ui,merge:Kc,extend:VS,trim:DS,stripBOM:NS,inherits:xS,toFlatObject:OS,kindOf:ca,kindOfTest:Ge,endsWith:kS,toArray:MS,forEachEntry:FS,matchAll:US,isHTMLForm:BS,hasOwnProperty:Hf,hasOwnProp:Hf,reduceDescriptors:f_,freezeMethods:qS,toObjectSet:KS,toCamelCase:jS,noop:WS,toFiniteNumber:zS,findKey:l_,global:u_,isContextDefined:h_,ALPHABET:d_,generateString:HS,isSpecCompliantForm:GS,toJSONObject:QS,isAsyncFn:YS,isThenable:XS};function it(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}v.inherits(it,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:v.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const p_=it.prototype,m_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{m_[e]={value:e}});Object.defineProperties(it,m_);Object.defineProperty(p_,"isAxiosError",{value:!0});it.from=(e,t,n,r,s,i)=>{const o=Object.create(p_);return v.toFlatObject(e,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),it.call(o,e.message,t,n,r,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const JS=null;function Wc(e){return v.isPlainObject(e)||v.isArray(e)}function g_(e){return v.endsWith(e,"[]")?e.slice(0,-2):e}function Qf(e,t,n){return e?e.concat(t).map(function(s,i){return s=g_(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function ZS(e){return v.isArray(e)&&!e.some(Wc)}const tC=v.toFlatObject(v,{},null,function(t){return/^is[A-Z]/.test(t)});function ha(e,t,n){if(!v.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=v.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,E){return!v.isUndefined(E[_])});const r=n.metaTokens,s=n.visitor||u,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&v.isSpecCompliantForm(t);if(!v.isFunction(s))throw new TypeError("visitor must be a function");function l(g){if(g===null)return"";if(v.isDate(g))return g.toISOString();if(!c&&v.isBlob(g))throw new it("Blob is not supported. Use a Buffer instead.");return v.isArrayBuffer(g)||v.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,_,E){let b=g;if(g&&!E&&typeof g=="object"){if(v.endsWith(_,"{}"))_=r?_:_.slice(0,-2),g=JSON.stringify(g);else if(v.isArray(g)&&ZS(g)||(v.isFileList(g)||v.endsWith(_,"[]"))&&(b=v.toArray(g)))return _=g_(_),b.forEach(function(x,P){!(v.isUndefined(x)||x===null)&&t.append(o===!0?Qf([_],P,i):o===null?_:_+"[]",l(x))}),!1}return Wc(g)?!0:(t.append(Qf(E,_,i),l(g)),!1)}const h=[],f=Object.assign(tC,{defaultVisitor:u,convertValue:l,isVisitable:Wc});function m(g,_){if(!v.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+_.join("."));h.push(g),v.forEach(g,function(b,V){(!(v.isUndefined(b)||b===null)&&s.call(t,b,v.isString(V)?V.trim():V,_,f))===!0&&m(b,_?_.concat(V):[V])}),h.pop()}}if(!v.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Yf(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function bu(e,t){this._pairs=[],e&&ha(e,this,t)}const __=bu.prototype;__.append=function(t,n){this._pairs.push([t,n])};__.toString=function(t){const n=t?function(r){return t.call(this,r,Yf)}:Yf;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function eC(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function y_(e,t,n){if(!t)return e;const r=n&&n.encode||eC,s=n&&n.serialize;let i;if(s?i=s(t,n):i=v.isURLSearchParams(t)?t.toString():new bu(t,n).toString(r),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Xf{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){v.forEach(this.handlers,function(r){r!==null&&t(r)})}}const E_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nC=typeof URLSearchParams<"u"?URLSearchParams:bu,rC=typeof FormData<"u"?FormData:null,sC=typeof Blob<"u"?Blob:null,iC={isBrowser:!0,classes:{URLSearchParams:nC,FormData:rC,Blob:sC},protocols:["http","https","file","blob","url","data"]},w_=typeof window<"u"&&typeof document<"u",oC=(e=>w_&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),aC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",cC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:w_,hasStandardBrowserEnv:oC,hasStandardBrowserWebWorkerEnv:aC},Symbol.toStringTag,{value:"Module"})),$e={...cC,...iC};function lC(e,t){return ha(e,new $e.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return $e.isNode&&v.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function uC(e){return v.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function hC(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}function v_(e){function t(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=i>=n.length;return o=!o&&v.isArray(s)?s.length:o,c?(v.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!v.isObject(s[o]))&&(s[o]=[]),t(n,r,s[o],i)&&v.isArray(s[o])&&(s[o]=hC(s[o])),!a)}if(v.isFormData(e)&&v.isFunction(e.entries)){const n={};return v.forEachEntry(e,(r,s)=>{t(uC(r),s,n,0)}),n}return null}function fC(e,t,n){if(v.isString(e))try{return(t||JSON.parse)(e),v.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Su={transitional:E_,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=v.isObject(t);if(i&&v.isHTMLForm(t)&&(t=new FormData(t)),v.isFormData(t))return s?JSON.stringify(v_(t)):t;if(v.isArrayBuffer(t)||v.isBuffer(t)||v.isStream(t)||v.isFile(t)||v.isBlob(t))return t;if(v.isArrayBufferView(t))return t.buffer;if(v.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return lC(t,this.formSerializer).toString();if((a=v.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ha(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),fC(t)):t}],transformResponse:[function(t){const n=this.transitional||Su.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(t&&v.isString(t)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?it.from(a,it.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$e.classes.FormData,Blob:$e.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};v.forEach(["delete","get","head","post","put","patch"],e=>{Su.headers[e]={}});const Cu=Su,dC=v.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pC=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||t[n]&&dC[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Jf=Symbol("internals");function ss(e){return e&&String(e).trim().toLowerCase()}function $i(e){return e===!1||e==null?e:v.isArray(e)?e.map($i):String(e)}function mC(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const gC=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function za(e,t,n,r,s){if(v.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!v.isString(t)){if(v.isString(r))return t.indexOf(r)!==-1;if(v.isRegExp(r))return r.test(t)}}function _C(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function yC(e,t){const n=v.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,i,o){return this[r].call(this,t,s,i,o)},configurable:!0})})}class fa{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function i(a,c,l){const u=ss(c);if(!u)throw new Error("header name must be a non-empty string");const h=v.findKey(s,u);(!h||s[h]===void 0||l===!0||l===void 0&&s[h]!==!1)&&(s[h||c]=$i(a))}const o=(a,c)=>v.forEach(a,(l,u)=>i(l,u,c));return v.isPlainObject(t)||t instanceof this.constructor?o(t,n):v.isString(t)&&(t=t.trim())&&!gC(t)?o(pC(t),n):t!=null&&i(n,t,r),this}get(t,n){if(t=ss(t),t){const r=v.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return mC(s);if(v.isFunction(n))return n.call(this,s,r);if(v.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ss(t),t){const r=v.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||za(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function i(o){if(o=ss(o),o){const a=v.findKey(r,o);a&&(!n||za(r,r[a],a,n))&&(delete r[a],s=!0)}}return v.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!t||za(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,r={};return v.forEach(this,(s,i)=>{const o=v.findKey(r,i);if(o){n[o]=$i(s),delete n[i];return}const a=t?_C(i):String(i).trim();a!==i&&delete n[i],n[a]=$i(s),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return v.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&v.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[Jf]=this[Jf]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=ss(o);r[a]||(yC(s,o),r[a]=!0)}return v.isArray(t)?t.forEach(i):i(t),this}}fa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);v.reduceDescriptors(fa.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});v.freezeMethods(fa);const rn=fa;function Ha(e,t){const n=this||Cu,r=t||n,s=rn.from(r.headers);let i=r.data;return v.forEach(e,function(a){i=a.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function T_(e){return!!(e&&e.__CANCEL__)}function hi(e,t,n){it.call(this,e??"canceled",it.ERR_CANCELED,t,n),this.name="CanceledError"}v.inherits(hi,it,{__CANCEL__:!0});function EC(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new it("Request failed with status code "+n.status,[it.ERR_BAD_REQUEST,it.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const wC=$e.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const o=[e+"="+encodeURIComponent(t)];v.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),v.isString(r)&&o.push("path="+r),v.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function vC(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function TC(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function A_(e,t){return e&&!vC(t)?TC(e,t):t}const AC=$e.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=v.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function IC(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function RC(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),u=r[i];o||(o=l),n[s]=c,r[s]=l;let h=i,f=0;for(;h!==s;)f+=n[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-o<t)return;const m=u&&l-u;return m?Math.round(f*1e3/m):void 0}}function Zf(e,t){let n=0;const r=RC(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,c=r(a),l=i<=o;n=i;const u={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&l?(o-i)/c:void 0,event:s};u[t?"download":"upload"]=!0,e(u)}}const bC=typeof XMLHttpRequest<"u",SC=bC&&function(e){return new Promise(function(n,r){let s=e.data;const i=rn.from(e.headers).normalize();let{responseType:o,withXSRFToken:a}=e,c;function l(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}let u;if(v.isFormData(s)){if($e.hasStandardBrowserEnv||$e.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((u=i.getContentType())!==!1){const[_,...E]=u?u.split(";").map(b=>b.trim()).filter(Boolean):[];i.setContentType([_||"multipart/form-data",...E].join("; "))}}let h=new XMLHttpRequest;if(e.auth){const _=e.auth.username||"",E=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(_+":"+E))}const f=A_(e.baseURL,e.url);h.open(e.method.toUpperCase(),y_(f,e.params,e.paramsSerializer),!0),h.timeout=e.timeout;function m(){if(!h)return;const _=rn.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),b={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:_,config:e,request:h};EC(function(x){n(x),l()},function(x){r(x),l()},b),h=null}if("onloadend"in h?h.onloadend=m:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(m)},h.onabort=function(){h&&(r(new it("Request aborted",it.ECONNABORTED,e,h)),h=null)},h.onerror=function(){r(new it("Network Error",it.ERR_NETWORK,e,h)),h=null},h.ontimeout=function(){let E=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const b=e.transitional||E_;e.timeoutErrorMessage&&(E=e.timeoutErrorMessage),r(new it(E,b.clarifyTimeoutError?it.ETIMEDOUT:it.ECONNABORTED,e,h)),h=null},$e.hasStandardBrowserEnv&&(a&&v.isFunction(a)&&(a=a(e)),a||a!==!1&&AC(f))){const _=e.xsrfHeaderName&&e.xsrfCookieName&&wC.read(e.xsrfCookieName);_&&i.set(e.xsrfHeaderName,_)}s===void 0&&i.setContentType(null),"setRequestHeader"in h&&v.forEach(i.toJSON(),function(E,b){h.setRequestHeader(b,E)}),v.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),o&&o!=="json"&&(h.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&h.addEventListener("progress",Zf(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",Zf(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=_=>{h&&(r(!_||_.type?new hi(null,e,h):_),h.abort(),h=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const g=IC(f);if(g&&$e.protocols.indexOf(g)===-1){r(new it("Unsupported protocol "+g+":",it.ERR_BAD_REQUEST,e));return}h.send(s||null)})},zc={http:JS,xhr:SC};v.forEach(zc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const td=e=>`- ${e}`,CC=e=>v.isFunction(e)||e===null||e===!1,I_={getAdapter:e=>{e=v.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let i=0;i<t;i++){n=e[i];let o;if(r=n,!CC(n)&&(r=zc[(o=String(n)).toLowerCase()],r===void 0))throw new it(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(td).join(`
`):" "+td(i[0]):"as no adapter specified";throw new it("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:zc};function Ga(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hi(null,e)}function ed(e){return Ga(e),e.headers=rn.from(e.headers),e.data=Ha.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),I_.getAdapter(e.adapter||Cu.adapter)(e).then(function(r){return Ga(e),r.data=Ha.call(e,e.transformResponse,r),r.headers=rn.from(r.headers),r},function(r){return T_(r)||(Ga(e),r&&r.response&&(r.response.data=Ha.call(e,e.transformResponse,r.response),r.response.headers=rn.from(r.response.headers))),Promise.reject(r)})}const nd=e=>e instanceof rn?e.toJSON():e;function jr(e,t){t=t||{};const n={};function r(l,u,h){return v.isPlainObject(l)&&v.isPlainObject(u)?v.merge.call({caseless:h},l,u):v.isPlainObject(u)?v.merge({},u):v.isArray(u)?u.slice():u}function s(l,u,h){if(v.isUndefined(u)){if(!v.isUndefined(l))return r(void 0,l,h)}else return r(l,u,h)}function i(l,u){if(!v.isUndefined(u))return r(void 0,u)}function o(l,u){if(v.isUndefined(u)){if(!v.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function a(l,u,h){if(h in t)return r(l,u);if(h in e)return r(void 0,l)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u)=>s(nd(l),nd(u),!0)};return v.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=c[u]||s,f=h(e[u],t[u],u);v.isUndefined(f)&&h!==a||(n[u]=f)}),n}const R_="1.6.7",Pu={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Pu[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const rd={};Pu.transitional=function(t,n,r){function s(i,o){return"[Axios v"+R_+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(t===!1)throw new it(s(o," has been removed"+(n?" in "+n:"")),it.ERR_DEPRECATED);return n&&!rd[o]&&(rd[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,a):!0}};function PC(e,t,n){if(typeof e!="object")throw new it("options must be an object",it.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],o=t[i];if(o){const a=e[i],c=a===void 0||o(a,i,e);if(c!==!0)throw new it("option "+i+" must be "+c,it.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new it("Unknown option "+i,it.ERR_BAD_OPTION)}}const Hc={assertOptions:PC,validators:Pu},fn=Hc.validators;class mo{constructor(t){this.defaults=t,this.interceptors={request:new Xf,response:new Xf}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=jr(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Hc.assertOptions(r,{silentJSONParsing:fn.transitional(fn.boolean),forcedJSONParsing:fn.transitional(fn.boolean),clarifyTimeoutError:fn.transitional(fn.boolean)},!1),s!=null&&(v.isFunction(s)?n.paramsSerializer={serialize:s}:Hc.assertOptions(s,{encode:fn.function,serialize:fn.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&v.merge(i.common,i[n.method]);i&&v.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=rn.concat(o,i);const a=[];let c=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(c=c&&_.synchronous,a.unshift(_.fulfilled,_.rejected))});const l=[];this.interceptors.response.forEach(function(_){l.push(_.fulfilled,_.rejected)});let u,h=0,f;if(!c){const g=[ed.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,l),f=g.length,u=Promise.resolve(n);h<f;)u=u.then(g[h++],g[h++]);return u}f=a.length;let m=n;for(h=0;h<f;){const g=a[h++],_=a[h++];try{m=g(m)}catch(E){_.call(this,E);break}}try{u=ed.call(this,m)}catch(g){return Promise.reject(g)}for(h=0,f=l.length;h<f;)u=u.then(l[h++],l[h++]);return u}getUri(t){t=jr(this.defaults,t);const n=A_(t.baseURL,t.url);return y_(n,t.params,t.paramsSerializer)}}v.forEach(["delete","get","head","options"],function(t){mo.prototype[t]=function(n,r){return this.request(jr(r||{},{method:t,url:n,data:(r||{}).data}))}});v.forEach(["post","put","patch"],function(t){function n(r){return function(i,o,a){return this.request(jr(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}mo.prototype[t]=n(),mo.prototype[t+"Form"]=n(!0)});const qi=mo;class Du{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i,o,a){r.reason||(r.reason=new hi(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Du(function(s){t=s}),cancel:t}}}const DC=Du;function VC(e){return function(n){return e.apply(null,n)}}function NC(e){return v.isObject(e)&&e.isAxiosError===!0}const Gc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gc).forEach(([e,t])=>{Gc[t]=e});const xC=Gc;function b_(e){const t=new qi(e),n=o_(qi.prototype.request,t);return v.extend(n,qi.prototype,t,{allOwnKeys:!0}),v.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return b_(jr(e,s))},n}const Vt=b_(Cu);Vt.Axios=qi;Vt.CanceledError=hi;Vt.CancelToken=DC;Vt.isCancel=T_;Vt.VERSION=R_;Vt.toFormData=ha;Vt.AxiosError=it;Vt.Cancel=Vt.CanceledError;Vt.all=function(t){return Promise.all(t)};Vt.spread=VC;Vt.isAxiosError=NC;Vt.mergeConfig=jr;Vt.AxiosHeaders=rn;Vt.formToJSON=e=>v_(v.isHTMLForm(e)?new FormData(e):e);Vt.getAdapter=I_.getAdapter;Vt.HttpStatusCode=xC;Vt.default=Vt;const OC="data:text/plain;base64,YWNlciAgKMOhY2VyKQ0KYWVzY3VsdXMgICjDqXN6a3VsdXN6KQ0KYWlsYW50aHVzICAoYWppbGFudHVzeikNCmFsbnVzICAow6FsbnVzeikNCmFtYnJvc2lhICAoYW1icsOzemlhKQ0KYXJ0ZW1pc2lhICAoYXJ0ZW3DrXppYSkNCmFzdGVyYWNlYWUgIChhc3p0ZXLDoWNlasOpKQ0KYmV0dWxhICAoYmV0dWxhKQ0KY2FubmFiYWNlYWUgIChrYW5uYWLDoWNlasOpKQ0KY2FycGludXMgIChrYXJww61udXN6KQ0KY2FzdGFuZWEgIChrYXN6dGFueWUpDQpjaGVub3BvZGlhY2VhZSAgKGtlbm9wb2Rpw6FjZWrDqSkNCmNvcnlsdXMgIChrb3JpbHVzeikNCmN1cHJlc3NhY2VhZSAgKGt1cHJlc3N6w6FjZWrDqSkNCnRheGFjZWFlICAodGF4w6FjZWrDqSkNCmZhYmFjZWFlICAoZmFiw6FjZWrDqSkNCmdsZWRpdHNpYSAgKGdsZWTDrWNpYSkNCnJvYmluaWEgIChyb2LDrW5pYSkNCnNvcGhvcmEgIChzem9mw7NyYSkNCmFtb3JwaGEgIChhbW9yZmEpDQpmYWd1cyAgKGbDoWd1c3opDQpmcmF4aW51cyAgKGZyYXjDrW51c3opDQpqdWdsYW5zICAoanVnbGFuc3opDQptb3JhY2VhZSAgKG1vcsOhY2Vqw6kpDQpvbGVhY2VhZSAgKG9sZcOhY2Vqw6kpDQpwaW5hY2VhZSAgKHDDrW7DoWNlasOpKQ0KcGxhbnRhZ28gIChwbGFudMOhZ8OzKQ0KcGxhdGFudXMgIChwbGF0w6FudXN6KQ0KcG9hY2VhZSAgKHBvw6FjZWrDqSkNCnBvcHVsdXMgIChwb3B1bHVzeikNCnF1ZXJjdXMgIChrdmVya3VzeikNCnJ1bWV4ICAocnVtZXgpDQpzYWxpeCAgKHN6YWxpeCkNCnNhbWJ1Y3VzICAoc3phbWLDumt1c3opDQp0aWxpYSAgKHTDrWxpYSkNCnVsbXVzICAow7psbXVzeikNCnVtYmVsbGlmZXJhZSAgKHVtYmVsbGlmZXLDqSkNCnVydGljYWNlYWUgICjDunJ0aWvDoWNlasOpKQ0KY2VsdGlzICAoY2VsdGlzeikNCmN5cGVyYWNlYWUgIChjaXBlcsOhY2Vqw6kpDQp0eXBoYSAgKHRpZmEpDQp4YW50aGl1bSAgKHhhbnRpdW0pDQppdmEgIChpdmEpDQpvc3RyeWEgIChvc3p0cmlqYSkNCmdpbmtnbyAgKGdpbmvDsykNCmV1cm9wYWVhICAoZXVyw7NwZWEpDQplZ3nDqWINCmlzbWVyZXRsZW4NCmFlc2MgICjDqXN6aykNCmFpbCAgKGFpbCkNCmFsbiAgKGFsbikNCmFtYiAgKGFtYikNCmFydCAgKGFydCkNCmFzdGVyICAoYXN6dGVyKQ0KYmV0ICAoYmV0KQ0KY2FubmEgIChrYW5uYSkNCmNhcnAgIChrYXJwKQ0KY2FzdCAgKGthc3p0KQ0KY2hlbm8gIChrZW7DsykNCmNvcnkgIChrb3JpKQ0KY3VwICAoa3VwKQ0KdGF4ICAodGF4KQ0KZmFiYSAgKGZhYmEpDQpmYWcgIChmw6FnKQ0KZnJheCAgKGZyYXgpDQpqdWcgIChqdWcpDQptb3IgIChtw7NyKQ0KbW9ydXMgIChtw7NydXN6KQ0Kb2xlYSAgKG9sZWEpDQpwaW4gIChww61uKQ0KcGxhbnQgIChwbGFudCkNCnBsYXQgIChwbGF0KQ0KcG9hICAocG9hKQ0KcG9wICAocG9wKQ0KcXVlciAgKGt2ZXIpDQpydW0gIChydW0pDQpzYWwgIChzemFsKQ0Kc2FtYiAgKHN6YW1iKQ0KdGlsaWEgICh0w61saWEpDQp1bG0gICjDumxtKQ0KdW1iICAow7ptYikNCnVtYmkgICjDum1iaSkNCnVydCAgKMO6cnQpDQp1cnRpICAow7pydGkpDQpjZWx0ICAoY2VsdCkNCmN5cCAgKGNpcCkNCnR5cGhhICAodGlmYSkNCnhhbnQgICh4YW50KQ0KaXZhICAoaXZhKQ0Kb3N0cnlhICAob3N6dHJpamEpDQpudWxsYQ0KZWd5DQprw6l0DQprZXR0xZENCmjDoXJvbQ0KbsOpZ3kNCsO2dA0KaGF0DQpow6l0DQpueW9sYw0Ka2lsZW5jDQp0w616DQp0aXplbg0KaHVzem9uDQpoYXJtaW5jDQpuZWd5dmVuDQrDtnR2ZW4NCmhhdHZhbg0KaGV0dmVuDQpueW9sY3Zhbg0Ka2lsZW5jdmVuDQpzesOheg0KamFudcOhcg0KZmVicnXDoXINCm3DoXJjaXVzDQrDoXByaWxpcw0KbcOhanVzDQpqw7puaXVzDQpqw7psaXVzDQphdWd1c3p0dXMNCnN6ZXB0ZW1iZXINCm9rdMOzYmVyDQpub3ZlbWJlcg0KZGVjZW1iZXINCkLDqWvDqXNjc2FiYQ0KQnVkYXBlc3QNCkRlYnJlY2VuDQpFZ2VyDQpHecWRcg0KS2Fwb3N2w6FyDQpLZWNza2Vtw6l0DQpNaXNrb2xjDQpOecOtcmVneWjDoXphDQpQw6ljcw0KU2FsZ8OzdGFyasOhbg0KU2nDs2Zvaw0KU3plZ2VkDQpTesOpa2VzZmVow6lydsOhcg0KU3pla3N6w6FyZA0KU3pvbG5vaw0KU3pvbWJhdGhlbHkNClRhdGFiw6FueWENClZlc3pwcsOpbQ0KWmFsYWVnZXJzemVnDQpzdGFydA0Ka2V6ZMOpcw0KbGXDoWxsw610w6FzDQpwbHVzeg0KbcOpZw0KbcOtbnVzeg0KaGliYQ0KZWd5ZXMNCmtldHRlcw0KaMOhcm1hcw0KbsOpZ3llcw0Kw7Z0w7ZzDQppbmRleA0Kc3RvcA0KdsOpZ2U=",kC=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},fi=e=>(yy("data-v-15b18552"),e=e(),Ey(),e),MC={class:"center"},LC={style:{"max-width":"28em"}},FC={class:"white-bold"},UC=fi(()=>rt("p",null,"Read out the text below:",-1)),BC={class:"center"},jC={style:{"font-size":"70px"}},$C={key:0},qC=fi(()=>rt("strong",{class:"white-bold"},"Record",-1)),KC={key:1},WC={key:2},zC=fi(()=>rt("strong",{class:"white-bold"},"Stop",-1)),HC={id:"controls"},GC=["disabled"],QC=["disabled"],YC={style:{"margin-top":"20px"}},XC=fi(()=>rt("h2",{style:{"margin-top":"20px"}},"Recordings",-1)),JC=fi(()=>rt("ol",{id:"recordingsList"},null,-1)),ZC={class:"center"},tP=["src"],eP=["onClick","disabled"],nP=["href","download"],rP={__name:"audio",setup(e){const t=yr(sessionStorage.getItem("neptun")),n=yr(null);var r=Sr([]),s=0+parseInt(sessionStorage.getItem("textComplete"));const i=Sr([]);fl(()=>{t.value?(o(),a()):zs.push("/")});const o=async()=>{Vt.get(OC).then(P=>{r=P.data;let z=0,O=t;for(let J=0;J<O.length;J++){const ct=O.charCodeAt(J);z=(z<<5)-z+ct,z|=0}z=Math.abs(z)%10,r=r.split(`
`),z%2==0&&r.reverse(),n.value=r[s]})},a=async()=>{const P=qa(Ka,"audio/"+t.value);(await Yb(P,{maxResults:5})).items.forEach(O=>{const J=O._location.path_.split("/").pop();Xb(O).then(ct=>{i.unshift({ref:O,url:ct,audioName:J,disabled:!0,saveState:"uploaded !"})})})},c=P=>{if(P.audioTextNumber==s){if(confirm(`Do you want to save the record to database!
Enter OK to confirm`)==!0){P.disabled=!0,P.saveState="uploading...";const O=qa(Ka,"audio/"+t.value+"/"+P.audioName);zf(O,P.blob).then(ct=>{P.ref=ct.ref,P.saveState="uploaded !"}),s==r.length-1&&alert("you finish all the word! the next word will start over again"),s=s+1,sessionStorage.setItem("textComplete",s),n.value=r[s];const J=pR(i_,"user",t.value);kR(J,{textComplete:s})}}else{let z="You already upload audio for the word "+P.text+`
Do you want to replace it?
Enter OK to confirm`;if(confirm(z)==!0){P.disabled=!0,P.saveState="uploading...";const O=qa(Ka,"audio/"+t.value+"/"+P.audioName);zf(O,P.blob).then(J=>{P.ref=J.ref,P.saveState="uploaded !"});for(let J=0;J<i.length;J++){let ct=i[J];if(ct.audioName.includes(P.text.trim())&&ct.saveState=="uploaded !"){Jb(ct.ref).then(()=>{const we=i.indexOf(ct);we!==-1&&i.splice(we,1)});break}}}}};URL=window.URL||window.webkitURL;var l,u,h,f=window.AudioContext||window.webkitAudioContext;const m=yr(!1),g=yr(!0);var _="wav",E=!0;const b=()=>{console.log("startRecording() called");var P={audio:!0,video:!1};navigator.mediaDevices.getUserMedia(P).then(function(z){l=z;var O=new f;h=O.createMediaStreamSource(z),u=new WebAudioRecorder(h,{workerDir:"public/lib/",encoding:_,numChannels:2,onEncoderLoading:async function(J,ct){},onEncoderLoaded:async function(J,ct){}}),u.onComplete=function(J,ct){x(ct,J.encoding)},u.setOptions({timeLimit:120,encodeAfterRecord:E,ogg:{quality:.5},mp3:{bitRate:160}}),u.startRecording()}).catch(function(z){m.value=!1,g.value=!0}),m.value=!0,g.value=!1},V=()=>{l.getAudioTracks()[0].stop(),g.value=!0,m.value=!1,u.finishRecording()},x=(P,z)=>{var O=URL.createObjectURL(P),J=(t.value+"_"+n.value+"_"+new Date().valueOf()+".").replace(/\s/g,"")+z;i.unshift({text:n.value,url:O,audioName:J,blob:P,saveState:"save",disabled:!1,audioTextNumber:s})};return(P,z)=>(ge(),ke("div",MC,[rt("div",LC,[rt("div",null,[rt("h3",null,[xn(" Welcomeback "),rt("strong",FC,hr(t.value),1)]),UC,rt("div",BC,[rt("h1",jC,hr(n.value),1)])]),g.value?(ge(),ke("p",$C,[xn(" Click "),qC,xn(" button to start recording ")])):ds("",!0),m.value?(ge(),ke("p",KC,"Recording . . .")):ds("",!0),m.value?(ge(),ke("p",WC,[xn(" Click "),zC,xn(" button to stop recording ")])):ds("",!0),rt("div",HC,[rt("button",{id:"recordButton",onClick:b,disabled:m.value,style:{width:"200px",height:"40px"}}," Record ",8,GC),rt("button",{id:"stopButton",disabled:g.value,onClick:V,style:{width:"200px",height:"40px"}}," Stop ",8,QC)]),rt("h2",YC," Recorded "+hr(Ze(s))+" words over "+hr(Ze(r).length),1),XC,JC,(ge(!0),ke(Oe,null,qy(i,O=>(ge(),ke("li",{key:O},[rt("div",ZC,[rt("audio",{src:O.url,controls:""},null,8,tP),rt("button",{class:"save",onClick:J=>c(O),disabled:O.disabled},hr(O.saveState),9,eP)]),rt("p",null,[xn(" download link: "),rt("a",{href:O.url,download:O.audioName},hr(O.audioName),9,nP)])]))),128))])]))}},sP=kC(rP,[["__scopeId","data-v-15b18552"]]),zs=Gw({history:hw("/"),routes:[{path:"/",name:"login",component:pS},{path:"/admin",name:"admin",component:_S},{path:"/audio",name:"audio",component:sP}]}),iP=WE(Yw);iP.use(zs).mount("#app");
