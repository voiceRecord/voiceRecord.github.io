(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();(function(e){var t=function(){for(var i=arguments[0],o=[].slice.call(arguments,1),a=0;a<o.length;++a){var c=o[a];for(Object.key in c){var l=c[Object.key];i[Object.key]=typeof l=="object"?t(typeof i[Object.key]=="object"?i[Object.key]:{},l):l}}return i},n={wav:"WebAudioRecorderWav.min.js",ogg:"WebAudioRecorderOgg.min.js",mp3:"WebAudioRecorderMp3.min.js"},r={workerDir:"/",numChannels:2,encoding:"wav",options:{timeLimit:300,encodeAfterRecord:!1,progressInterval:1e3,bufferSize:void 0,wav:{mimeType:"audio/wav"},ogg:{mimeType:"audio/ogg",quality:.5},mp3:{mimeType:"audio/mpeg",bitRate:160}}},s=function(i,o){t(this,r,o||{}),this.context=i.context,this.context.createScriptProcessor==null&&(this.context.createScriptProcessor=this.context.createJavaScriptNode),this.input=this.context.createGain(),i.connect(this.input),this.buffer=[],this.initWorker()};t(s.prototype,{isRecording:function(){return this.processor!=null},setEncoding:function(i){this.isRecording()?this.error("setEncoding: cannot set encoding during recording"):this.encoding!==i&&(this.encoding=i,this.initWorker())},setOptions:function(i){this.isRecording()?this.error("setOptions: cannot set options during recording"):(t(this.options,i),this.worker.postMessage({command:"options",options:this.options}))},startRecording:function(){if(this.isRecording())this.error("startRecording: previous recording is running");else{var i=this.numChannels,o=this.buffer,a=this.worker;this.processor=this.context.createScriptProcessor(this.options.bufferSize,this.numChannels,this.numChannels),this.input.connect(this.processor),this.processor.connect(this.context.destination),this.processor.onaudioprocess=function(c){for(var l=0;l<i;++l)o[l]=c.inputBuffer.getChannelData(l);a.postMessage({command:"record",buffer:o})},this.worker.postMessage({command:"start",bufferSize:this.processor.bufferSize}),this.startTime=Date.now()}},recordingTime:function(){return this.isRecording()?(Date.now()-this.startTime)*.001:null},cancelRecording:function(){this.isRecording()?(this.input.disconnect(),this.processor.disconnect(),delete this.processor,this.worker.postMessage({command:"cancel"})):this.error("cancelRecording: no recording is running")},finishRecording:function(){this.isRecording()?(this.input.disconnect(),this.processor.disconnect(),delete this.processor,this.worker.postMessage({command:"finish"})):this.error("finishRecording: no recording is running")},cancelEncoding:function(){this.options.encodeAfterRecord?this.isRecording()?this.error("cancelEncoding: recording is not finished"):(this.onEncodingCanceled(this),this.initWorker()):this.error("cancelEncoding: invalid method call")},initWorker:function(){this.worker!=null&&this.worker.terminate(),this.onEncoderLoading(this,this.encoding),this.worker=new Worker("/src/lib/"+n[this.encoding]);var i=this;this.worker.onmessage=function(o){var a=o.data;switch(a.command){case"loaded":i.onEncoderLoaded(i,i.encoding);break;case"timeout":i.onTimeout(i);break;case"progress":i.onEncodingProgress(i,a.progress);break;case"complete":i.onComplete(i,a.blob);break;case"error":i.error(a.message)}},this.worker.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:this.numChannels},options:this.options})},error:function(i){this.onError(this,"WebAudioRecorder.min.js:"+i)},onEncoderLoading:function(i,o){},onEncoderLoaded:function(i,o){},onTimeout:function(i){i.finishRecording()},onEncodingProgress:function(i,o){},onEncodingCanceled:function(i){},onComplete:function(i,o){i.onError(i,"WebAudioRecorder.min.js: You must override .onComplete event")},onError:function(i,o){console.log(o)}}),e.WebAudioRecorder=s})(window);/**
* @vue/shared v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function La(e,t){const n=new Set(e.split(","));return t?r=>n.has(r.toLowerCase()):r=>n.has(r)}const ft={},Gn=[],ce=()=>{},Up=()=>!1,Si=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Fa=e=>e.startsWith("onUpdate:"),Lt=Object.assign,Ua=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Bp=Object.prototype.hasOwnProperty,tt=(e,t)=>Bp.call(e,t),K=Array.isArray,Wn=e=>Ci(e)==="[object Map]",fh=e=>Ci(e)==="[object Set]",Q=e=>typeof e=="function",St=e=>typeof e=="string",mr=e=>typeof e=="symbol",_t=e=>e!==null&&typeof e=="object",dh=e=>(_t(e)||Q(e))&&Q(e.then)&&Q(e.catch),ph=Object.prototype.toString,Ci=e=>ph.call(e),$p=e=>Ci(e).slice(8,-1),gh=e=>Ci(e)==="[object Object]",Ba=e=>St(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Hs=La(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Pi=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},jp=/-(\w)/g,Rn=Pi(e=>e.replace(jp,(t,n)=>n?n.toUpperCase():"")),qp=/\B([A-Z])/g,Dn=Pi(e=>e.replace(qp,"-$1").toLowerCase()),mh=Pi(e=>e.charAt(0).toUpperCase()+e.slice(1)),ho=Pi(e=>e?`on${mh(e)}`:""),Ve=(e,t)=>!Object.is(e,t),Gs=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ni=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Bo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let cl;const _h=()=>cl||(cl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $a(e){if(K(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=St(r)?Gp(r):$a(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(St(e)||_t(e))return e}const zp=/;(?![^(]*\))/g,Kp=/:([^]+)/,Hp=/\/\*[^]*?\*\//g;function Gp(e){const t={};return e.replace(Hp,"").split(zp).forEach(n=>{if(n){const r=n.split(Kp);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ja(e){let t="";if(St(e))t=e;else if(K(e))for(let n=0;n<e.length;n++){const r=ja(e[n]);r&&(t+=r+" ")}else if(_t(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Wp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qp=La(Wp);function yh(e){return!!e||e===""}const $o=e=>St(e)?e:e==null?"":K(e)||_t(e)&&(e.toString===ph||!Q(e.toString))?JSON.stringify(e,vh,2):String(e),vh=(e,t)=>t&&t.__v_isRef?vh(e,t.value):Wn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[fo(r,i)+" =>"]=s,n),{})}:fh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>fo(n))}:mr(t)?fo(t):_t(t)&&!K(t)&&!gh(t)?String(t):t,fo=(e,t="")=>{var n;return mr(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ue;class Yp{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ue,!t&&ue&&(this.index=(ue.scopes||(ue.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=ue;try{return ue=this,t()}finally{ue=n}}}on(){ue=this}off(){ue=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Xp(e,t=ue){t&&t.active&&t.effects.push(e)}function Jp(){return ue}let wn;class qa{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=2,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Xp(this,s)}get dirty(){if(this._dirtyLevel===1){xn();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(Zp(n.computed),this._dirtyLevel>=2))break}this._dirtyLevel<2&&(this._dirtyLevel=0),Nn()}return this._dirtyLevel>=2}set dirty(t){this._dirtyLevel=t?2:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Je,n=wn;try{return Je=!0,wn=this,this._runnings++,ll(this),this.fn()}finally{ul(this),this._runnings--,wn=n,Je=t}}stop(){var t;this.active&&(ll(this),ul(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function Zp(e){return e.value}function ll(e){e._trackId++,e._depsLength=0}function ul(e){if(e.deps&&e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Eh(e.deps[t],e);e.deps.length=e._depsLength}}function Eh(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let Je=!0,jo=0;const wh=[];function xn(){wh.push(Je),Je=!1}function Nn(){const e=wh.pop();Je=e===void 0?!0:e}function za(){jo++}function Ka(){for(jo--;!jo&&qo.length;)qo.shift()()}function Th(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&Eh(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const qo=[];function Ih(e,t,n){za();for(const r of e.keys())if(r._dirtyLevel<t&&e.get(r)===r._trackId){const s=r._dirtyLevel;r._dirtyLevel=t,s===0&&(r._shouldSchedule=!0,r.trigger())}Ah(e),Ka()}function Ah(e){for(const t of e.keys())t.scheduler&&t._shouldSchedule&&(!t._runnings||t.allowRecurse)&&e.get(t)===t._trackId&&(t._shouldSchedule=!1,qo.push(t.scheduler))}const Rh=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},zo=new WeakMap,Tn=Symbol(""),Ko=Symbol("");function te(e,t,n){if(Je&&wn){let r=zo.get(e);r||zo.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=Rh(()=>r.delete(n))),Th(wn,s)}}function Me(e,t,n,r,s,i){const o=zo.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&K(e)){const c=Number(r);o.forEach((l,u)=>{(u==="length"||!mr(u)&&u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":K(e)?Ba(n)&&a.push(o.get("length")):(a.push(o.get(Tn)),Wn(e)&&a.push(o.get(Ko)));break;case"delete":K(e)||(a.push(o.get(Tn)),Wn(e)&&a.push(o.get(Ko)));break;case"set":Wn(e)&&a.push(o.get(Tn));break}za();for(const c of a)c&&Ih(c,2);Ka()}const tg=La("__proto__,__v_isRef,__isVue"),Sh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(mr)),hl=eg();function eg(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=st(this);for(let i=0,o=this.length;i<o;i++)te(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(st)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){xn(),za();const r=st(this)[t].apply(this,n);return Ka(),Nn(),r}}),e}function ng(e){const t=st(this);return te(t,"has",e),t.hasOwnProperty(e)}class Ch{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,r){const s=this._isReadonly,i=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?gg:Dh:i?Vh:bh).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=K(t);if(!s){if(o&&tt(hl,n))return Reflect.get(hl,n,r);if(n==="hasOwnProperty")return ng}const a=Reflect.get(t,n,r);return(mr(n)?Sh.has(n):tg(n))||(s||te(t,"get",n),i)?a:ee(a)?o&&Ba(n)?a:a.value:_t(a)?s?Nh(a):ps(a):a}}class Ph extends Ch{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._shallow){const c=sr(i);if(!ri(r)&&!sr(r)&&(i=st(i),r=st(r)),!K(t)&&ee(i)&&!ee(r))return c?!1:(i.value=r,!0)}const o=K(t)&&Ba(n)?Number(n)<t.length:tt(t,n),a=Reflect.set(t,n,r,s);return t===st(s)&&(o?Ve(r,i)&&Me(t,"set",n,r):Me(t,"add",n,r)),a}deleteProperty(t,n){const r=tt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Me(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!mr(n)||!Sh.has(n))&&te(t,"has",n),r}ownKeys(t){return te(t,"iterate",K(t)?"length":Tn),Reflect.ownKeys(t)}}class rg extends Ch{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const sg=new Ph,ig=new rg,og=new Ph(!0),Ha=e=>e,bi=e=>Reflect.getPrototypeOf(e);function Ds(e,t,n=!1,r=!1){e=e.__v_raw;const s=st(e),i=st(t);n||(Ve(t,i)&&te(s,"get",t),te(s,"get",i));const{has:o}=bi(s),a=r?Ha:n?Qa:Qr;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function xs(e,t=!1){const n=this.__v_raw,r=st(n),s=st(e);return t||(Ve(e,s)&&te(r,"has",e),te(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function Ns(e,t=!1){return e=e.__v_raw,!t&&te(st(e),"iterate",Tn),Reflect.get(e,"size",e)}function fl(e){e=st(e);const t=st(this);return bi(t).has.call(t,e)||(t.add(e),Me(t,"add",e,e)),this}function dl(e,t){t=st(t);const n=st(this),{has:r,get:s}=bi(n);let i=r.call(n,e);i||(e=st(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?Ve(t,o)&&Me(n,"set",e,t):Me(n,"add",e,t),this}function pl(e){const t=st(this),{has:n,get:r}=bi(t);let s=n.call(t,e);s||(e=st(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&Me(t,"delete",e,void 0),i}function gl(){const e=st(this),t=e.size!==0,n=e.clear();return t&&Me(e,"clear",void 0,void 0),n}function Os(e,t){return function(r,s){const i=this,o=i.__v_raw,a=st(o),c=t?Ha:e?Qa:Qr;return!e&&te(a,"iterate",Tn),o.forEach((l,u)=>r.call(s,c(l),c(u),i))}}function ks(e,t,n){return function(...r){const s=this.__v_raw,i=st(s),o=Wn(i),a=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,l=s[e](...r),u=n?Ha:t?Qa:Qr;return!t&&te(i,"iterate",c?Ko:Tn),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function ze(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ag(){const e={get(i){return Ds(this,i)},get size(){return Ns(this)},has:xs,add:fl,set:dl,delete:pl,clear:gl,forEach:Os(!1,!1)},t={get(i){return Ds(this,i,!1,!0)},get size(){return Ns(this)},has:xs,add:fl,set:dl,delete:pl,clear:gl,forEach:Os(!1,!0)},n={get(i){return Ds(this,i,!0)},get size(){return Ns(this,!0)},has(i){return xs.call(this,i,!0)},add:ze("add"),set:ze("set"),delete:ze("delete"),clear:ze("clear"),forEach:Os(!0,!1)},r={get(i){return Ds(this,i,!0,!0)},get size(){return Ns(this,!0)},has(i){return xs.call(this,i,!0)},add:ze("add"),set:ze("set"),delete:ze("delete"),clear:ze("clear"),forEach:Os(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=ks(i,!1,!1),n[i]=ks(i,!0,!1),t[i]=ks(i,!1,!0),r[i]=ks(i,!0,!0)}),[e,n,t,r]}const[cg,lg,ug,hg]=ag();function Ga(e,t){const n=t?e?hg:ug:e?lg:cg;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(tt(n,s)&&s in r?n:r,s,i)}const fg={get:Ga(!1,!1)},dg={get:Ga(!1,!0)},pg={get:Ga(!0,!1)},bh=new WeakMap,Vh=new WeakMap,Dh=new WeakMap,gg=new WeakMap;function mg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _g(e){return e.__v_skip||!Object.isExtensible(e)?0:mg($p(e))}function ps(e){return sr(e)?e:Wa(e,!1,sg,fg,bh)}function xh(e){return Wa(e,!1,og,dg,Vh)}function Nh(e){return Wa(e,!0,ig,pg,Dh)}function Wa(e,t,n,r,s){if(!_t(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=_g(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function Qn(e){return sr(e)?Qn(e.__v_raw):!!(e&&e.__v_isReactive)}function sr(e){return!!(e&&e.__v_isReadonly)}function ri(e){return!!(e&&e.__v_isShallow)}function Oh(e){return Qn(e)||sr(e)}function st(e){const t=e&&e.__v_raw;return t?st(t):e}function kh(e){return ni(e,"__v_skip",!0),e}const Qr=e=>_t(e)?ps(e):e,Qa=e=>_t(e)?Nh(e):e;class Mh{constructor(t,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new qa(()=>t(this._value),()=>Lr(this,1),()=>this.dep&&Ah(this.dep)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=st(this);return(!t._cacheable||t.effect.dirty)&&Ve(t._value,t._value=t.effect.run())&&Lr(t,2),Ya(t),t.effect._dirtyLevel>=1&&Lr(t,1),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function yg(e,t,n=!1){let r,s;const i=Q(e);return i?(r=e,s=ce):(r=e.get,s=e.set),new Mh(r,s,i||!s,n)}function Ya(e){Je&&wn&&(e=st(e),Th(wn,e.dep||(e.dep=Rh(()=>e.dep=void 0,e instanceof Mh?e:void 0))))}function Lr(e,t=2,n){e=st(e);const r=e.dep;r&&Ih(r,t)}function ee(e){return!!(e&&e.__v_isRef===!0)}function Yn(e){return Lh(e,!1)}function vg(e){return Lh(e,!0)}function Lh(e,t){return ee(e)?e:new Eg(e,t)}class Eg{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:st(t),this._value=n?t:Qr(t)}get value(){return Ya(this),this._value}set value(t){const n=this.__v_isShallow||ri(t)||sr(t);t=n?t:st(t),Ve(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Qr(t),Lr(this,2))}}function Ze(e){return ee(e)?e.value:e}const wg={get:(e,t,n)=>Ze(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return ee(s)&&!ee(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Fh(e){return Qn(e)?e:new Proxy(e,wg)}class Tg{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=t(()=>Ya(this),()=>Lr(this));this._get=n,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function Ig(e){return new Tg(e)}/**
* @vue/runtime-core v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function tn(e,t,n,r){let s;try{s=r?e(...r):e()}catch(i){Vi(i,t,n)}return s}function pe(e,t,n,r){if(Q(e)){const i=tn(e,t,n,r);return i&&dh(i)&&i.catch(o=>{Vi(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(pe(e[i],t,n,r));return s}function Vi(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](e,o,a)===!1)return}i=i.parent}const c=t.appContext.config.errorHandler;if(c){tn(c,null,10,[e,o,a]);return}}Ag(e,n,s,r)}function Ag(e,t,n,r=!0){console.error(e)}let Yr=!1,Ho=!1;const jt=[];let Ae=0;const Xn=[];let He=null,pn=0;const Uh=Promise.resolve();let Xa=null;function Bh(e){const t=Xa||Uh;return e?t.then(this?e.bind(this):e):t}function Rg(e){let t=Ae+1,n=jt.length;for(;t<n;){const r=t+n>>>1,s=jt[r],i=Xr(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function Ja(e){(!jt.length||!jt.includes(e,Yr&&e.allowRecurse?Ae+1:Ae))&&(e.id==null?jt.push(e):jt.splice(Rg(e.id),0,e),$h())}function $h(){!Yr&&!Ho&&(Ho=!0,Xa=Uh.then(qh))}function Sg(e){const t=jt.indexOf(e);t>Ae&&jt.splice(t,1)}function Cg(e){K(e)?Xn.push(...e):(!He||!He.includes(e,e.allowRecurse?pn+1:pn))&&Xn.push(e),$h()}function ml(e,t,n=Yr?Ae+1:0){for(;n<jt.length;n++){const r=jt[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;jt.splice(n,1),n--,r()}}}function jh(e){if(Xn.length){const t=[...new Set(Xn)].sort((n,r)=>Xr(n)-Xr(r));if(Xn.length=0,He){He.push(...t);return}for(He=t,pn=0;pn<He.length;pn++)He[pn]();He=null,pn=0}}const Xr=e=>e.id==null?1/0:e.id,Pg=(e,t)=>{const n=Xr(e)-Xr(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function qh(e){Ho=!1,Yr=!0,jt.sort(Pg);try{for(Ae=0;Ae<jt.length;Ae++){const t=jt[Ae];t&&t.active!==!1&&tn(t,null,14)}}finally{Ae=0,jt.length=0,jh(),Yr=!1,Xa=null,(jt.length||Xn.length)&&qh()}}function bg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||ft;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||ft;d&&(s=n.map(g=>St(g)?g.trim():g)),h&&(s=n.map(Bo))}let a,c=r[a=ho(t)]||r[a=ho(Rn(t))];!c&&i&&(c=r[a=ho(Dn(t))]),c&&pe(c,e,6,s);const l=r[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,pe(l,e,6,s)}}function zh(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!Q(e)){const c=l=>{const u=zh(l,t,!0);u&&(a=!0,Lt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!a?(_t(e)&&r.set(e,null),null):(K(i)?i.forEach(c=>o[c]=null):Lt(o,i),_t(e)&&r.set(e,o),o)}function Di(e,t){return!e||!Si(t)?!1:(t=t.slice(2).replace(/Once$/,""),tt(e,t[0].toLowerCase()+t.slice(1))||tt(e,Dn(t))||tt(e,t))}let Jt=null,xi=null;function si(e){const t=Jt;return Jt=e,xi=e&&e.type.__scopeId||null,t}function Vg(e){xi=e}function Dg(){xi=null}function xg(e,t=Jt,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Cl(-1);const i=si(t);let o;try{o=e(...s)}finally{si(i),r._d&&Cl(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function po(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:d,setupState:g,ctx:I,inheritAttrs:C}=e;let T,b;const L=si(e);try{if(n.shapeFlag&4){const Y=s||r,dt=Y;T=Ie(u.call(dt,Y,h,i,g,d,I)),b=c}else{const Y=t;T=Ie(Y.length>1?Y(i,{attrs:c,slots:a,emit:l}):Y(i,null)),b=t.props?c:Ng(c)}}catch(Y){Ur.length=0,Vi(Y,e,1),T=Zt(Sn)}let B=T;if(b&&C!==!1){const Y=Object.keys(b),{shapeFlag:dt}=B;Y.length&&dt&7&&(o&&Y.some(Fa)&&(b=Og(b,o)),B=ir(B,b))}return n.dirs&&(B=ir(B),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&(B.transition=n.transition),T=B,si(L),T}const Ng=e=>{let t;for(const n in e)(n==="class"||n==="style"||Si(n))&&((t||(t={}))[n]=e[n]);return t},Og=(e,t)=>{const n={};for(const r in e)(!Fa(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function kg(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?_l(r,o,l):!!o;if(c&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!Di(l,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?_l(r,o,l):!0:!!o;return!1}function _l(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Di(n,i))return!0}return!1}function Mg({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Lg=Symbol.for("v-ndc"),Fg=e=>e.__isSuspense;function Ug(e,t){t&&t.pendingBranch?K(e)?t.effects.push(...e):t.effects.push(e):Cg(e)}const Bg=Symbol.for("v-scx"),$g=()=>Le(Bg);function jg(e,t){return Za(e,null,{flush:"sync"})}const Ms={};function Ws(e,t,n){return Za(e,t,n)}function Za(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=ft){if(t&&i){const q=t;t=(...wt)=>{q(...wt),dt()}}const c=qt,l=q=>r===!0?q:mn(q,r===!1?1:void 0);let u,h=!1,d=!1;if(ee(e)?(u=()=>e.value,h=ri(e)):Qn(e)?(u=()=>l(e),h=!0):K(e)?(d=!0,h=e.some(q=>Qn(q)||ri(q)),u=()=>e.map(q=>{if(ee(q))return q.value;if(Qn(q))return l(q);if(Q(q))return tn(q,c,2)})):Q(e)?t?u=()=>tn(e,c,2):u=()=>(g&&g(),pe(e,c,3,[I])):u=ce,t&&r){const q=u;u=()=>mn(q())}let g,I=q=>{g=B.onStop=()=>{tn(q,c,4),g=B.onStop=void 0}},C;if(Mi)if(I=ce,t?n&&pe(t,c,3,[u(),d?[]:void 0,I]):u(),s==="sync"){const q=$g();C=q.__watcherHandles||(q.__watcherHandles=[])}else return ce;let T=d?new Array(e.length).fill(Ms):Ms;const b=()=>{if(!(!B.active||!B.dirty))if(t){const q=B.run();(r||h||(d?q.some((wt,ne)=>Ve(wt,T[ne])):Ve(q,T)))&&(g&&g(),pe(t,c,3,[q,T===Ms?void 0:d&&T[0]===Ms?[]:T,I]),T=q)}else B.run()};b.allowRecurse=!!t;let L;s==="sync"?L=b:s==="post"?L=()=>Xt(b,c&&c.suspense):(b.pre=!0,c&&(b.id=c.uid),L=()=>Ja(b));const B=new qa(u,ce,L),Y=Jp(),dt=()=>{B.stop(),Y&&Ua(Y.effects,B)};return t?n?b():T=B.run():s==="post"?Xt(B.run.bind(B),c&&c.suspense):B.run(),C&&C.push(dt),dt}function qg(e,t,n){const r=this.proxy,s=St(e)?e.includes(".")?Kh(r,e):()=>r[e]:e.bind(r,r);let i;Q(t)?i=t:(i=t.handler,n=t);const o=gs(this),a=Za(s,i.bind(r),n);return o(),a}function Kh(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function mn(e,t,n=0,r){if(!_t(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(r=r||new Set,r.has(e))return e;if(r.add(e),ee(e))mn(e.value,t,n,r);else if(K(e))for(let s=0;s<e.length;s++)mn(e[s],t,n,r);else if(fh(e)||Wn(e))e.forEach(s=>{mn(s,t,n,r)});else if(gh(e))for(const s in e)mn(e[s],t,n,r);return e}function yl(e,t){if(Jt===null)return e;const n=Li(Jt)||Jt.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,a,c=ft]=t[s];i&&(Q(i)&&(i={mounted:i,updated:i}),i.deep&&mn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function hn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(xn(),pe(c,n,8,[e.el,a,e,t]),Nn())}}/*! #__NO_SIDE_EFFECTS__ */function Hh(e,t){return Q(e)?Lt({name:e.name},t,{setup:e}):e}const Qs=e=>!!e.type.__asyncLoader,Gh=e=>e.type.__isKeepAlive;function zg(e,t){Wh(e,"a",t)}function Kg(e,t){Wh(e,"da",t)}function Wh(e,t,n=qt){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Ni(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Gh(s.parent.vnode)&&Hg(r,t,n,s),s=s.parent}}function Hg(e,t,n,r){const s=Ni(t,e,r,!0);Qh(()=>{Ua(r[t],s)},n)}function Ni(e,t,n=qt,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;xn();const a=gs(n),c=pe(t,n,e,o);return a(),Nn(),c});return r?s.unshift(i):s.push(i),i}}const Ue=e=>(t,n=qt)=>(!Mi||e==="sp")&&Ni(e,(...r)=>t(...r),n),Gg=Ue("bm"),tc=Ue("m"),Wg=Ue("bu"),Qg=Ue("u"),Yg=Ue("bum"),Qh=Ue("um"),Xg=Ue("sp"),Jg=Ue("rtg"),Zg=Ue("rtc");function tm(e,t=qt){Ni("ec",e,t)}function em(e,t,n,r){let s;const i=n&&n[r];if(K(e)||St(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(_t(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i&&i[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];s[a]=t(e[l],l,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const Go=e=>e?lf(e)?Li(e)||e.proxy:Go(e.parent):null,Fr=Lt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Go(e.parent),$root:e=>Go(e.root),$emit:e=>e.emit,$options:e=>ec(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Ja(e.update)}),$nextTick:e=>e.n||(e.n=Bh.bind(e.proxy)),$watch:e=>qg.bind(e)}),go=(e,t)=>e!==ft&&!e.__isScriptSetup&&tt(e,t),nm={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(go(r,t))return o[t]=1,r[t];if(s!==ft&&tt(s,t))return o[t]=2,s[t];if((l=e.propsOptions[0])&&tt(l,t))return o[t]=3,i[t];if(n!==ft&&tt(n,t))return o[t]=4,n[t];Wo&&(o[t]=0)}}const u=Fr[t];let h,d;if(u)return t==="$attrs"&&te(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==ft&&tt(n,t))return o[t]=4,n[t];if(d=c.config.globalProperties,tt(d,t))return d[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return go(s,t)?(s[t]=n,!0):r!==ft&&tt(r,t)?(r[t]=n,!0):tt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==ft&&tt(e,o)||go(t,o)||(a=i[0])&&tt(a,o)||tt(r,o)||tt(Fr,o)||tt(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:tt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function vl(e){return K(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Wo=!0;function rm(e){const t=ec(e),n=e.proxy,r=e.ctx;Wo=!1,t.beforeCreate&&El(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:g,updated:I,activated:C,deactivated:T,beforeDestroy:b,beforeUnmount:L,destroyed:B,unmounted:Y,render:dt,renderTracked:q,renderTriggered:wt,errorCaptured:ne,serverPrefetch:$e,expose:re,inheritAttrs:je,components:un,directives:ye,filters:Rr}=t;if(l&&sm(l,r,null),o)for(const ut in o){const it=o[ut];Q(it)&&(r[ut]=it.bind(n))}if(s){const ut=s.call(n,n);_t(ut)&&(e.data=ps(ut))}if(Wo=!0,i)for(const ut in i){const it=i[ut],Ne=Q(it)?it.bind(n,n):Q(it.get)?it.get.bind(n,n):ce,qe=!Q(it)&&Q(it.set)?it.set.bind(n):ce,ve=fe({get:Ne,set:qe});Object.defineProperty(r,ut,{enumerable:!0,configurable:!0,get:()=>ve.value,set:Yt=>ve.value=Yt})}if(a)for(const ut in a)Yh(a[ut],r,n,ut);if(c){const ut=Q(c)?c.call(n):c;Reflect.ownKeys(ut).forEach(it=>{Ys(it,ut[it])})}u&&El(u,e,"c");function Ct(ut,it){K(it)?it.forEach(Ne=>ut(Ne.bind(n))):it&&ut(it.bind(n))}if(Ct(Gg,h),Ct(tc,d),Ct(Wg,g),Ct(Qg,I),Ct(zg,C),Ct(Kg,T),Ct(tm,ne),Ct(Zg,q),Ct(Jg,wt),Ct(Yg,L),Ct(Qh,Y),Ct(Xg,$e),K(re))if(re.length){const ut=e.exposed||(e.exposed={});re.forEach(it=>{Object.defineProperty(ut,it,{get:()=>n[it],set:Ne=>n[it]=Ne})})}else e.exposed||(e.exposed={});dt&&e.render===ce&&(e.render=dt),je!=null&&(e.inheritAttrs=je),un&&(e.components=un),ye&&(e.directives=ye)}function sm(e,t,n=ce){K(e)&&(e=Qo(e));for(const r in e){const s=e[r];let i;_t(s)?"default"in s?i=Le(s.from||r,s.default,!0):i=Le(s.from||r):i=Le(s),ee(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function El(e,t,n){pe(K(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Yh(e,t,n,r){const s=r.includes(".")?Kh(n,r):()=>n[r];if(St(e)){const i=t[e];Q(i)&&Ws(s,i)}else if(Q(e))Ws(s,e.bind(n));else if(_t(e))if(K(e))e.forEach(i=>Yh(i,t,n,r));else{const i=Q(e.handler)?e.handler.bind(n):t[e.handler];Q(i)&&Ws(s,i,e)}}function ec(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let c;return a?c=a:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(l=>ii(c,l,o,!0)),ii(c,t,o)),_t(t)&&i.set(t,c),c}function ii(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&ii(e,i,n,!0),s&&s.forEach(o=>ii(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=im[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const im={data:wl,props:Tl,emits:Tl,methods:xr,computed:xr,beforeCreate:Wt,created:Wt,beforeMount:Wt,mounted:Wt,beforeUpdate:Wt,updated:Wt,beforeDestroy:Wt,beforeUnmount:Wt,destroyed:Wt,unmounted:Wt,activated:Wt,deactivated:Wt,errorCaptured:Wt,serverPrefetch:Wt,components:xr,directives:xr,watch:am,provide:wl,inject:om};function wl(e,t){return t?e?function(){return Lt(Q(e)?e.call(this,this):e,Q(t)?t.call(this,this):t)}:t:e}function om(e,t){return xr(Qo(e),Qo(t))}function Qo(e){if(K(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Wt(e,t){return e?[...new Set([].concat(e,t))]:t}function xr(e,t){return e?Lt(Object.create(null),e,t):t}function Tl(e,t){return e?K(e)&&K(t)?[...new Set([...e,...t])]:Lt(Object.create(null),vl(e),vl(t??{})):t}function am(e,t){if(!e)return t;if(!t)return e;const n=Lt(Object.create(null),e);for(const r in t)n[r]=Wt(e[r],t[r]);return n}function Xh(){return{app:null,config:{isNativeTag:Up,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cm=0;function lm(e,t){return function(r,s=null){Q(r)||(r=Lt({},r)),s!=null&&!_t(s)&&(s=null);const i=Xh(),o=new WeakSet;let a=!1;const c=i.app={_uid:cm++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Om,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&Q(l.install)?(o.add(l),l.install(c,...u)):Q(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const d=Zt(r,s);return d.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&t?t(d,l):e(d,l,h),a=!0,c._container=l,l.__vue_app__=c,Li(d.component)||d.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c},runWithContext(l){oi=c;try{return l()}finally{oi=null}}};return c}}let oi=null;function Ys(e,t){if(qt){let n=qt.provides;const r=qt.parent&&qt.parent.provides;r===n&&(n=qt.provides=Object.create(r)),n[e]=t}}function Le(e,t,n=!1){const r=qt||Jt;if(r||oi){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:oi._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Q(t)?t.call(r&&r.proxy):t}}function um(e,t,n,r=!1){const s={},i={};ni(i,ki,1),e.propsDefaults=Object.create(null),Jh(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:xh(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function hm(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=st(s),[c]=e.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Di(e.emitsOptions,d))continue;const g=t[d];if(c)if(tt(i,d))g!==i[d]&&(i[d]=g,l=!0);else{const I=Rn(d);s[I]=Yo(c,a,I,g,e,!1)}else g!==i[d]&&(i[d]=g,l=!0)}}}else{Jh(e,t,s,i)&&(l=!0);let u;for(const h in a)(!t||!tt(t,h)&&((u=Dn(h))===h||!tt(t,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=Yo(c,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!t||!tt(t,h))&&(delete i[h],l=!0)}l&&Me(e,"set","$attrs")}function Jh(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let c in t){if(Hs(c))continue;const l=t[c];let u;s&&tt(s,u=Rn(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:Di(e.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=st(n),l=a||ft;for(let u=0;u<i.length;u++){const h=i[u];n[h]=Yo(s,c,h,l[h],e,!tt(l,h))}}return o}function Yo(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=tt(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Q(c)){const{propsDefaults:l}=s;if(n in l)r=l[n];else{const u=gs(s);r=l[n]=c.call(null,t),u()}}else r=c}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Dn(n))&&(r=!0))}return r}function Zh(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let c=!1;if(!Q(e)){const u=h=>{c=!0;const[d,g]=Zh(h,t,!0);Lt(o,d),g&&a.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!c)return _t(e)&&r.set(e,Gn),Gn;if(K(i))for(let u=0;u<i.length;u++){const h=Rn(i[u]);Il(h)&&(o[h]=ft)}else if(i)for(const u in i){const h=Rn(u);if(Il(h)){const d=i[u],g=o[h]=K(d)||Q(d)?{type:d}:Lt({},d);if(g){const I=Sl(Boolean,g.type),C=Sl(String,g.type);g[0]=I>-1,g[1]=C<0||I<C,(I>-1||tt(g,"default"))&&a.push(h)}}}const l=[o,a];return _t(e)&&r.set(e,l),l}function Il(e){return e[0]!=="$"}function Al(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Rl(e,t){return Al(e)===Al(t)}function Sl(e,t){return K(t)?t.findIndex(n=>Rl(n,e)):Q(t)&&Rl(t,e)?0:-1}const tf=e=>e[0]==="_"||e==="$stable",nc=e=>K(e)?e.map(Ie):[Ie(e)],fm=(e,t,n)=>{if(t._n)return t;const r=xg((...s)=>nc(t(...s)),n);return r._c=!1,r},ef=(e,t,n)=>{const r=e._ctx;for(const s in e){if(tf(s))continue;const i=e[s];if(Q(i))t[s]=fm(s,i,r);else if(i!=null){const o=nc(i);t[s]=()=>o}}},nf=(e,t)=>{const n=nc(t);e.slots.default=()=>n},dm=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=st(t),ni(t,"_",n)):ef(t,e.slots={})}else e.slots={},t&&nf(e,t);ni(e.slots,ki,1)},pm=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=ft;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(Lt(s,t),!n&&a===1&&delete s._):(i=!t.$stable,ef(t,s)),o=t}else t&&(nf(e,t),o={default:1});if(i)for(const a in s)!tf(a)&&o[a]==null&&delete s[a]};function Xo(e,t,n,r,s=!1){if(K(e)){e.forEach((d,g)=>Xo(d,t&&(K(t)?t[g]:t),n,r,s));return}if(Qs(r)&&!s)return;const i=r.shapeFlag&4?Li(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:c}=e,l=t&&t.r,u=a.refs===ft?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(St(l)?(u[l]=null,tt(h,l)&&(h[l]=null)):ee(l)&&(l.value=null)),Q(c))tn(c,a,12,[o,u]);else{const d=St(c),g=ee(c),I=e.f;if(d||g){const C=()=>{if(I){const T=d?tt(h,c)?h[c]:u[c]:c.value;s?K(T)&&Ua(T,i):K(T)?T.includes(i)||T.push(i):d?(u[c]=[i],tt(h,c)&&(h[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else d?(u[c]=o,tt(h,c)&&(h[c]=o)):g&&(c.value=o,e.k&&(u[e.k]=o))};s||I?C():(C.id=-1,Xt(C,n))}}}const Xt=Ug;function gm(e){return mm(e)}function mm(e,t){const n=_h();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:g=ce,insertStaticContent:I}=e,C=(f,p,m,v=null,_=null,S=null,N=void 0,R=null,P=!!p.dynamicChildren)=>{if(f===p)return;f&&!Cr(f,p)&&(v=y(f),Yt(f,_,S,!0),f=null),p.patchFlag===-2&&(P=!1,p.dynamicChildren=null);const{type:w,ref:k,shapeFlag:$}=p;switch(w){case Oi:T(f,p,m,v);break;case Sn:b(f,p,m,v);break;case Xs:f==null&&L(p,m,v,N);break;case Te:un(f,p,m,v,_,S,N,R,P);break;default:$&1?dt(f,p,m,v,_,S,N,R,P):$&6?ye(f,p,m,v,_,S,N,R,P):($&64||$&128)&&w.process(f,p,m,v,_,S,N,R,P,F)}k!=null&&_&&Xo(k,f&&f.ref,S,p||f,!p)},T=(f,p,m,v)=>{if(f==null)r(p.el=a(p.children),m,v);else{const _=p.el=f.el;p.children!==f.children&&l(_,p.children)}},b=(f,p,m,v)=>{f==null?r(p.el=c(p.children||""),m,v):p.el=f.el},L=(f,p,m,v)=>{[f.el,f.anchor]=I(f.children,p,m,v,f.el,f.anchor)},B=({el:f,anchor:p},m,v)=>{let _;for(;f&&f!==p;)_=d(f),r(f,m,v),f=_;r(p,m,v)},Y=({el:f,anchor:p})=>{let m;for(;f&&f!==p;)m=d(f),s(f),f=m;s(p)},dt=(f,p,m,v,_,S,N,R,P)=>{p.type==="svg"?N="svg":p.type==="math"&&(N="mathml"),f==null?q(p,m,v,_,S,N,R,P):$e(f,p,_,S,N,R,P)},q=(f,p,m,v,_,S,N,R)=>{let P,w;const{props:k,shapeFlag:$,transition:U,dirs:H}=f;if(P=f.el=o(f.type,S,k&&k.is,k),$&8?u(P,f.children):$&16&&ne(f.children,P,null,v,_,mo(f,S),N,R),H&&hn(f,null,v,"created"),wt(P,f,f.scopeId,N,v),k){for(const ht in k)ht!=="value"&&!Hs(ht)&&i(P,ht,null,k[ht],S,f.children,v,_,Ft);"value"in k&&i(P,"value",null,k.value,S),(w=k.onVnodeBeforeMount)&&we(w,v,f)}H&&hn(f,null,v,"beforeMount");const X=_m(_,U);X&&U.beforeEnter(P),r(P,p,m),((w=k&&k.onVnodeMounted)||X||H)&&Xt(()=>{w&&we(w,v,f),X&&U.enter(P),H&&hn(f,null,v,"mounted")},_)},wt=(f,p,m,v,_)=>{if(m&&g(f,m),v)for(let S=0;S<v.length;S++)g(f,v[S]);if(_){let S=_.subTree;if(p===S){const N=_.vnode;wt(f,N,N.scopeId,N.slotScopeIds,_.parent)}}},ne=(f,p,m,v,_,S,N,R,P=0)=>{for(let w=P;w<f.length;w++){const k=f[w]=R?Ge(f[w]):Ie(f[w]);C(null,k,p,m,v,_,S,N,R)}},$e=(f,p,m,v,_,S,N)=>{const R=p.el=f.el;let{patchFlag:P,dynamicChildren:w,dirs:k}=p;P|=f.patchFlag&16;const $=f.props||ft,U=p.props||ft;let H;if(m&&fn(m,!1),(H=U.onVnodeBeforeUpdate)&&we(H,m,p,f),k&&hn(p,f,m,"beforeUpdate"),m&&fn(m,!0),w?re(f.dynamicChildren,w,R,m,v,mo(p,_),S):N||it(f,p,R,null,m,v,mo(p,_),S,!1),P>0){if(P&16)je(R,p,$,U,m,v,_);else if(P&2&&$.class!==U.class&&i(R,"class",null,U.class,_),P&4&&i(R,"style",$.style,U.style,_),P&8){const X=p.dynamicProps;for(let ht=0;ht<X.length;ht++){const mt=X[ht],Pt=$[mt],le=U[mt];(le!==Pt||mt==="value")&&i(R,mt,Pt,le,_,f.children,m,v,Ft)}}P&1&&f.children!==p.children&&u(R,p.children)}else!N&&w==null&&je(R,p,$,U,m,v,_);((H=U.onVnodeUpdated)||k)&&Xt(()=>{H&&we(H,m,p,f),k&&hn(p,f,m,"updated")},v)},re=(f,p,m,v,_,S,N)=>{for(let R=0;R<p.length;R++){const P=f[R],w=p[R],k=P.el&&(P.type===Te||!Cr(P,w)||P.shapeFlag&70)?h(P.el):m;C(P,w,k,null,v,_,S,N,!0)}},je=(f,p,m,v,_,S,N)=>{if(m!==v){if(m!==ft)for(const R in m)!Hs(R)&&!(R in v)&&i(f,R,m[R],null,N,p.children,_,S,Ft);for(const R in v){if(Hs(R))continue;const P=v[R],w=m[R];P!==w&&R!=="value"&&i(f,R,w,P,N,p.children,_,S,Ft)}"value"in v&&i(f,"value",m.value,v.value,N)}},un=(f,p,m,v,_,S,N,R,P)=>{const w=p.el=f?f.el:a(""),k=p.anchor=f?f.anchor:a("");let{patchFlag:$,dynamicChildren:U,slotScopeIds:H}=p;H&&(R=R?R.concat(H):H),f==null?(r(w,m,v),r(k,m,v),ne(p.children||[],m,k,_,S,N,R,P)):$>0&&$&64&&U&&f.dynamicChildren?(re(f.dynamicChildren,U,m,_,S,N,R),(p.key!=null||_&&p===_.subTree)&&rf(f,p,!0)):it(f,p,m,k,_,S,N,R,P)},ye=(f,p,m,v,_,S,N,R,P)=>{p.slotScopeIds=R,f==null?p.shapeFlag&512?_.ctx.activate(p,m,v,N,P):Rr(p,m,v,_,S,N,P):kn(f,p,P)},Rr=(f,p,m,v,_,S,N)=>{const R=f.component=Cm(f,v,_);if(Gh(f)&&(R.ctx.renderer=F),bm(R),R.asyncDep){if(_&&_.registerDep(R,Ct),!f.el){const P=R.subTree=Zt(Sn);b(null,P,p,m)}}else Ct(R,f,p,m,_,S,N)},kn=(f,p,m)=>{const v=p.component=f.component;if(kg(f,p,m))if(v.asyncDep&&!v.asyncResolved){ut(v,p,m);return}else v.next=p,Sg(v.update),v.effect.dirty=!0,v.update();else p.el=f.el,v.vnode=p},Ct=(f,p,m,v,_,S,N)=>{const R=()=>{if(f.isMounted){let{next:k,bu:$,u:U,parent:H,vnode:X}=f;{const Fn=sf(f);if(Fn){k&&(k.el=X.el,ut(f,k,N)),Fn.asyncDep.then(()=>{f.isUnmounted||R()});return}}let ht=k,mt;fn(f,!1),k?(k.el=X.el,ut(f,k,N)):k=X,$&&Gs($),(mt=k.props&&k.props.onVnodeBeforeUpdate)&&we(mt,H,k,X),fn(f,!0);const Pt=po(f),le=f.subTree;f.subTree=Pt,C(le,Pt,h(le.el),y(le),f,_,S),k.el=Pt.el,ht===null&&Mg(f,Pt.el),U&&Xt(U,_),(mt=k.props&&k.props.onVnodeUpdated)&&Xt(()=>we(mt,H,k,X),_)}else{let k;const{el:$,props:U}=p,{bm:H,m:X,parent:ht}=f,mt=Qs(p);if(fn(f,!1),H&&Gs(H),!mt&&(k=U&&U.onVnodeBeforeMount)&&we(k,ht,p),fn(f,!0),$&&gt){const Pt=()=>{f.subTree=po(f),gt($,f.subTree,f,_,null)};mt?p.type.__asyncLoader().then(()=>!f.isUnmounted&&Pt()):Pt()}else{const Pt=f.subTree=po(f);C(null,Pt,m,v,f,_,S),p.el=Pt.el}if(X&&Xt(X,_),!mt&&(k=U&&U.onVnodeMounted)){const Pt=p;Xt(()=>we(k,ht,Pt),_)}(p.shapeFlag&256||ht&&Qs(ht.vnode)&&ht.vnode.shapeFlag&256)&&f.a&&Xt(f.a,_),f.isMounted=!0,p=m=v=null}},P=f.effect=new qa(R,ce,()=>Ja(w),f.scope),w=f.update=()=>{P.dirty&&P.run()};w.id=f.uid,fn(f,!0),w()},ut=(f,p,m)=>{p.component=f;const v=f.vnode.props;f.vnode=p,f.next=null,hm(f,p.props,v,m),pm(f,p.children,m),xn(),ml(f),Nn()},it=(f,p,m,v,_,S,N,R,P=!1)=>{const w=f&&f.children,k=f?f.shapeFlag:0,$=p.children,{patchFlag:U,shapeFlag:H}=p;if(U>0){if(U&128){qe(w,$,m,v,_,S,N,R,P);return}else if(U&256){Ne(w,$,m,v,_,S,N,R,P);return}}H&8?(k&16&&Ft(w,_,S),$!==w&&u(m,$)):k&16?H&16?qe(w,$,m,v,_,S,N,R,P):Ft(w,_,S,!0):(k&8&&u(m,""),H&16&&ne($,m,v,_,S,N,R,P))},Ne=(f,p,m,v,_,S,N,R,P)=>{f=f||Gn,p=p||Gn;const w=f.length,k=p.length,$=Math.min(w,k);let U;for(U=0;U<$;U++){const H=p[U]=P?Ge(p[U]):Ie(p[U]);C(f[U],H,m,null,_,S,N,R,P)}w>k?Ft(f,_,S,!0,!1,$):ne(p,m,v,_,S,N,R,P,$)},qe=(f,p,m,v,_,S,N,R,P)=>{let w=0;const k=p.length;let $=f.length-1,U=k-1;for(;w<=$&&w<=U;){const H=f[w],X=p[w]=P?Ge(p[w]):Ie(p[w]);if(Cr(H,X))C(H,X,m,null,_,S,N,R,P);else break;w++}for(;w<=$&&w<=U;){const H=f[$],X=p[U]=P?Ge(p[U]):Ie(p[U]);if(Cr(H,X))C(H,X,m,null,_,S,N,R,P);else break;$--,U--}if(w>$){if(w<=U){const H=U+1,X=H<k?p[H].el:v;for(;w<=U;)C(null,p[w]=P?Ge(p[w]):Ie(p[w]),m,X,_,S,N,R,P),w++}}else if(w>U)for(;w<=$;)Yt(f[w],_,S,!0),w++;else{const H=w,X=w,ht=new Map;for(w=X;w<=U;w++){const se=p[w]=P?Ge(p[w]):Ie(p[w]);se.key!=null&&ht.set(se.key,w)}let mt,Pt=0;const le=U-X+1;let Fn=!1,il=0;const Sr=new Array(le);for(w=0;w<le;w++)Sr[w]=0;for(w=H;w<=$;w++){const se=f[w];if(Pt>=le){Yt(se,_,S,!0);continue}let Ee;if(se.key!=null)Ee=ht.get(se.key);else for(mt=X;mt<=U;mt++)if(Sr[mt-X]===0&&Cr(se,p[mt])){Ee=mt;break}Ee===void 0?Yt(se,_,S,!0):(Sr[Ee-X]=w+1,Ee>=il?il=Ee:Fn=!0,C(se,p[Ee],m,null,_,S,N,R,P),Pt++)}const ol=Fn?ym(Sr):Gn;for(mt=ol.length-1,w=le-1;w>=0;w--){const se=X+w,Ee=p[se],al=se+1<k?p[se+1].el:v;Sr[w]===0?C(null,Ee,m,al,_,S,N,R,P):Fn&&(mt<0||w!==ol[mt]?ve(Ee,m,al,2):mt--)}}},ve=(f,p,m,v,_=null)=>{const{el:S,type:N,transition:R,children:P,shapeFlag:w}=f;if(w&6){ve(f.component.subTree,p,m,v);return}if(w&128){f.suspense.move(p,m,v);return}if(w&64){N.move(f,p,m,F);return}if(N===Te){r(S,p,m);for(let $=0;$<P.length;$++)ve(P[$],p,m,v);r(f.anchor,p,m);return}if(N===Xs){B(f,p,m);return}if(v!==2&&w&1&&R)if(v===0)R.beforeEnter(S),r(S,p,m),Xt(()=>R.enter(S),_);else{const{leave:$,delayLeave:U,afterLeave:H}=R,X=()=>r(S,p,m),ht=()=>{$(S,()=>{X(),H&&H()})};U?U(S,X,ht):ht()}else r(S,p,m)},Yt=(f,p,m,v=!1,_=!1)=>{const{type:S,props:N,ref:R,children:P,dynamicChildren:w,shapeFlag:k,patchFlag:$,dirs:U}=f;if(R!=null&&Xo(R,null,m,f,!0),k&256){p.ctx.deactivate(f);return}const H=k&1&&U,X=!Qs(f);let ht;if(X&&(ht=N&&N.onVnodeBeforeUnmount)&&we(ht,p,f),k&6)Vs(f.component,m,v);else{if(k&128){f.suspense.unmount(m,v);return}H&&hn(f,null,p,"beforeUnmount"),k&64?f.type.remove(f,p,m,_,F,v):w&&(S!==Te||$>0&&$&64)?Ft(w,p,m,!1,!0):(S===Te&&$&384||!_&&k&16)&&Ft(P,p,m),v&&Mn(f)}(X&&(ht=N&&N.onVnodeUnmounted)||H)&&Xt(()=>{ht&&we(ht,p,f),H&&hn(f,null,p,"unmounted")},m)},Mn=f=>{const{type:p,el:m,anchor:v,transition:_}=f;if(p===Te){Ln(m,v);return}if(p===Xs){Y(f);return}const S=()=>{s(m),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(f.shapeFlag&1&&_&&!_.persisted){const{leave:N,delayLeave:R}=_,P=()=>N(m,S);R?R(f.el,S,P):P()}else S()},Ln=(f,p)=>{let m;for(;f!==p;)m=d(f),s(f),f=m;s(p)},Vs=(f,p,m)=>{const{bum:v,scope:_,update:S,subTree:N,um:R}=f;v&&Gs(v),_.stop(),S&&(S.active=!1,Yt(N,f,p,m)),R&&Xt(R,p),Xt(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Ft=(f,p,m,v=!1,_=!1,S=0)=>{for(let N=S;N<f.length;N++)Yt(f[N],p,m,v,_)},y=f=>f.shapeFlag&6?y(f.component.subTree):f.shapeFlag&128?f.suspense.next():d(f.anchor||f.el);let O=!1;const x=(f,p,m)=>{f==null?p._vnode&&Yt(p._vnode,null,null,!0):C(p._vnode||null,f,p,null,null,null,m),O||(O=!0,ml(),jh(),O=!1),p._vnode=f},F={p:C,um:Yt,m:ve,r:Mn,mt:Rr,mc:ne,pc:it,pbc:re,n:y,o:e};let ot,gt;return t&&([ot,gt]=t(F)),{render:x,hydrate:ot,createApp:lm(x,ot)}}function mo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function fn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function _m(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function rf(e,t,n=!1){const r=e.children,s=t.children;if(K(r)&&K(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Ge(s[i]),a.el=o.el),n||rf(o,a)),a.type===Oi&&(a.el=o.el)}}function ym(e){const t=e.slice(),n=[0];let r,s,i,o,a;const c=e.length;for(r=0;r<c;r++){const l=e[r];if(l!==0){if(s=n[n.length-1],e[s]<l){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<l?i=a+1:o=a;l<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function sf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:sf(t)}const vm=e=>e.__isTeleport,Te=Symbol.for("v-fgt"),Oi=Symbol.for("v-txt"),Sn=Symbol.for("v-cmt"),Xs=Symbol.for("v-stc"),Ur=[];let de=null;function ie(e=!1){Ur.push(de=e?null:[])}function Em(){Ur.pop(),de=Ur[Ur.length-1]||null}let Jr=1;function Cl(e){Jr+=e}function of(e){return e.dynamicChildren=Jr>0?de||Gn:null,Em(),Jr>0&&de&&de.push(e),e}function he(e,t,n,r,s,i){return of(J(e,t,n,r,s,i,!0))}function af(e,t,n,r,s){return of(Zt(e,t,n,r,s,!0))}function Jo(e){return e?e.__v_isVNode===!0:!1}function Cr(e,t){return e.type===t.type&&e.key===t.key}const ki="__vInternal",cf=({key:e})=>e??null,Js=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?St(e)||ee(e)||Q(e)?{i:Jt,r:e,k:t,f:!!n}:e:null);function J(e,t=null,n=null,r=0,s=null,i=e===Te?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&cf(t),ref:t&&Js(t),scopeId:xi,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Jt};return a?(rc(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=St(n)?8:16),Jr>0&&!o&&de&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&de.push(c),c}const Zt=wm;function wm(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Lg)&&(e=Sn),Jo(e)){const a=ir(e,t,!0);return n&&rc(a,n),Jr>0&&!i&&de&&(a.shapeFlag&6?de[de.indexOf(e)]=a:de.push(a)),a.patchFlag|=-2,a}if(Nm(e)&&(e=e.__vccOpts),t){t=Tm(t);let{class:a,style:c}=t;a&&!St(a)&&(t.class=ja(a)),_t(c)&&(Oh(c)&&!K(c)&&(c=Lt({},c)),t.style=$a(c))}const o=St(e)?1:Fg(e)?128:vm(e)?64:_t(e)?4:Q(e)?2:0;return J(e,t,n,r,s,o,i,!0)}function Tm(e){return e?Oh(e)||ki in e?Lt({},e):e:null}function ir(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,a=t?Am(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&cf(a),ref:t&&t.ref?n&&s?K(s)?s.concat(Js(t)):[s,Js(t)]:Js(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Te?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ir(e.ssContent),ssFallback:e.ssFallback&&ir(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Bn(e=" ",t=0){return Zt(Oi,null,e,t)}function Im(e,t){const n=Zt(Xs,null,e);return n.staticCount=t,n}function Br(e="",t=!1){return t?(ie(),af(Sn,null,e)):Zt(Sn,null,e)}function Ie(e){return e==null||typeof e=="boolean"?Zt(Sn):K(e)?Zt(Te,null,e.slice()):typeof e=="object"?Ge(e):Zt(Oi,null,String(e))}function Ge(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ir(e)}function rc(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(K(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),rc(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(ki in t)?t._ctx=Jt:s===3&&Jt&&(Jt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Q(t)?(t={default:t,_ctx:Jt},n=32):(t=String(t),r&64?(n=16,t=[Bn(t)]):n=8);e.children=t,e.shapeFlag|=n}function Am(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=ja([t.class,r.class]));else if(s==="style")t.style=$a([t.style,r.style]);else if(Si(s)){const i=t[s],o=r[s];o&&i!==o&&!(K(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function we(e,t,n,r=null){pe(e,t,7,[n,r])}const Rm=Xh();let Sm=0;function Cm(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Rm,i={uid:Sm++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Yp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zh(r,s),emitsOptions:zh(r,s),emit:null,emitted:null,propsDefaults:ft,inheritAttrs:r.inheritAttrs,ctx:ft,data:ft,props:ft,attrs:ft,slots:ft,refs:ft,setupState:ft,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=bg.bind(null,i),e.ce&&e.ce(i),i}let qt=null;const Pm=()=>qt||Jt;let ai,Zo;{const e=_h(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};ai=t("__VUE_INSTANCE_SETTERS__",n=>qt=n),Zo=t("__VUE_SSR_SETTERS__",n=>Mi=n)}const gs=e=>{const t=qt;return ai(e),e.scope.on(),()=>{e.scope.off(),ai(t)}},Pl=()=>{qt&&qt.scope.off(),ai(null)};function lf(e){return e.vnode.shapeFlag&4}let Mi=!1;function bm(e,t=!1){t&&Zo(t);const{props:n,children:r}=e.vnode,s=lf(e);um(e,n,s,t),dm(e,r);const i=s?Vm(e,t):void 0;return t&&Zo(!1),i}function Vm(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=kh(new Proxy(e.ctx,nm));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?xm(e):null,i=gs(e);xn();const o=tn(r,e,0,[e.props,s]);if(Nn(),i(),dh(o)){if(o.then(Pl,Pl),t)return o.then(a=>{bl(e,a,t)}).catch(a=>{Vi(a,e,0)});e.asyncDep=o}else bl(e,o,t)}else uf(e,t)}function bl(e,t,n){Q(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:_t(t)&&(e.setupState=Fh(t)),uf(e,n)}let Vl;function uf(e,t,n){const r=e.type;if(!e.render){if(!t&&Vl&&!r.render){const s=r.template||ec(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:c}=r,l=Lt(Lt({isCustomElement:i,delimiters:a},o),c);r.render=Vl(s,l)}}e.render=r.render||ce}{const s=gs(e);xn();try{rm(e)}finally{Nn(),s()}}}function Dm(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return te(e,"get","$attrs"),t[n]}}))}function xm(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Dm(e)},slots:e.slots,emit:e.emit,expose:t}}function Li(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Fh(kh(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Fr)return Fr[n](e)},has(t,n){return n in t||n in Fr}}))}function Nm(e){return Q(e)&&"__vccOpts"in e}const fe=(e,t)=>yg(e,t,Mi);function Dl(e,t,n=ft){const r=Pm(),s=Rn(t),i=Dn(t),o=Ig((c,l)=>{let u;return jg(()=>{const h=e[t];Ve(u,h)&&(u=h,l())}),{get(){return c(),n.get?n.get(u):u},set(h){const d=r.vnode.props;!(d&&(t in d||s in d||i in d)&&(`onUpdate:${t}`in d||`onUpdate:${s}`in d||`onUpdate:${i}`in d))&&Ve(h,u)&&(u=h,l()),r.emit(`update:${t}`,n.set?n.set(h):h)}}}),a=t==="modelValue"?"modelModifiers":`${t}Modifiers`;return o[Symbol.iterator]=()=>{let c=0;return{next(){return c<2?{value:c++?e[a]||{}:o,done:!1}:{done:!0}}}},o}function hf(e,t,n){const r=arguments.length;return r===2?_t(t)&&!K(t)?Jo(t)?Zt(e,null,[t]):Zt(e,t):Zt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Jo(n)&&(n=[n]),Zt(e,t,n))}const Om="3.4.15";/**
* @vue/runtime-dom v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const km="http://www.w3.org/2000/svg",Mm="http://www.w3.org/1998/Math/MathML",We=typeof document<"u"?document:null,xl=We&&We.createElement("template"),Lm={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?We.createElementNS(km,e):t==="mathml"?We.createElementNS(Mm,e):We.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>We.createTextNode(e),createComment:e=>We.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>We.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{xl.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const a=xl.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Fm=Symbol("_vtc");function Um(e,t,n){const r=e[Fm];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Bm=Symbol("_vod"),$m=Symbol("");function jm(e,t,n){const r=e.style,s=r.display,i=St(n);if(n&&!i){if(t&&!St(t))for(const o in t)n[o]==null&&ta(r,o,"");for(const o in n)ta(r,o,n[o])}else if(i){if(t!==n){const o=r[$m];o&&(n+=";"+o),r.cssText=n}}else t&&e.removeAttribute("style");Bm in e&&(r.display=s)}const Nl=/\s*!important$/;function ta(e,t,n){if(K(n))n.forEach(r=>ta(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=qm(e,t);Nl.test(n)?e.setProperty(Dn(r),n.replace(Nl,""),"important"):e[r]=n}}const Ol=["Webkit","Moz","ms"],_o={};function qm(e,t){const n=_o[t];if(n)return n;let r=Rn(t);if(r!=="filter"&&r in e)return _o[t]=r;r=mh(r);for(let s=0;s<Ol.length;s++){const i=Ol[s]+r;if(i in e)return _o[t]=i}return t}const kl="http://www.w3.org/1999/xlink";function zm(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(kl,t.slice(6,t.length)):e.setAttributeNS(kl,t,n);else{const i=Qp(t);n==null||i&&!yh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function Km(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const l=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";l!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let c=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=yh(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function $n(e,t,n,r){e.addEventListener(t,n,r)}function Hm(e,t,n,r){e.removeEventListener(t,n,r)}const Ml=Symbol("_vei");function Gm(e,t,n,r,s=null){const i=e[Ml]||(e[Ml]={}),o=i[t];if(r&&o)o.value=r;else{const[a,c]=Wm(t);if(r){const l=i[t]=Xm(r,s);$n(e,a,l,c)}else o&&(Hm(e,a,o,c),i[t]=void 0)}}const Ll=/(?:Once|Passive|Capture)$/;function Wm(e){let t;if(Ll.test(e)){t={};let r;for(;r=e.match(Ll);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Dn(e.slice(2)),t]}let yo=0;const Qm=Promise.resolve(),Ym=()=>yo||(Qm.then(()=>yo=0),yo=Date.now());function Xm(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;pe(Jm(r,n.value),t,5,[r])};return n.value=e,n.attached=Ym(),n}function Jm(e,t){if(K(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Fl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Zm=(e,t,n,r,s,i,o,a,c)=>{const l=s==="svg";t==="class"?Um(e,r,l):t==="style"?jm(e,n,r):Si(t)?Fa(t)||Gm(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):t_(e,t,r,l))?Km(e,t,r,i,o,a,c):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),zm(e,t,r,l))};function t_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Fl(t)&&Q(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Fl(t)&&St(n)?!1:t in e}const Ul=e=>{const t=e.props["onUpdate:modelValue"]||!1;return K(t)?n=>Gs(t,n):t};function e_(e){e.target.composing=!0}function Bl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vo=Symbol("_assign"),$l={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[vo]=Ul(s);const i=r||s.props&&s.props.type==="number";$n(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=Bo(a)),e[vo](a)}),n&&$n(e,"change",()=>{e.value=e.value.trim()}),t||($n(e,"compositionstart",e_),$n(e,"compositionend",Bl),$n(e,"change",Bl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e[vo]=Ul(i),e.composing)return;const o=s||e.type==="number"?Bo(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===a)||(e.value=a))}},n_=Lt({patchProp:Zm},Lm);let jl;function r_(){return jl||(jl=gm(n_))}const s_=(...e)=>{const t=r_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=o_(r);if(!s)return;const i=t._component;!Q(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,i_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function i_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function o_(e){return St(e)?document.querySelector(e):e}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const jn=typeof window<"u";function a_(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const ct=Object.assign;function Eo(e,t){const n={};for(const r in t){const s=t[r];n[r]=ge(s)?s.map(e):e(s)}return n}const $r=()=>{},ge=Array.isArray,c_=/\/$/,l_=e=>e.replace(c_,"");function wo(e,t,n="/"){let r,s={},i="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,a>-1?a:t.length),s=e(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=d_(r??t,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function u_(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function ql(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function h_(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&or(t.matched[r],n.matched[s])&&ff(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function or(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ff(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!f_(e[n],t[n]))return!1;return!0}function f_(e,t){return ge(e)?zl(e,t):ge(t)?zl(t,e):e===t}function zl(e,t){return ge(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function d_(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var Zr;(function(e){e.pop="pop",e.push="push"})(Zr||(Zr={}));var jr;(function(e){e.back="back",e.forward="forward",e.unknown=""})(jr||(jr={}));function p_(e){if(!e)if(jn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),l_(e)}const g_=/^[^#]+#/;function m_(e,t){return e.replace(g_,"#")+t}function __(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Fi=()=>({left:window.pageXOffset,top:window.pageYOffset});function y_(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=__(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Kl(e,t){return(history.state?history.state.position-t:-1)+e}const ea=new Map;function v_(e,t){ea.set(e,t)}function E_(e){const t=ea.get(e);return ea.delete(e),t}let w_=()=>location.protocol+"//"+location.host;function df(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),ql(c,"")}return ql(n,e)+r+s}function T_(e,t,n,r){let s=[],i=[],o=null;const a=({state:d})=>{const g=df(e,location),I=n.value,C=t.value;let T=0;if(d){if(n.value=g,t.value=d,o&&o===I){o=null;return}T=C?d.position-C.position:0}else r(g);s.forEach(b=>{b(n.value,I,{delta:T,type:Zr.pop,direction:T?T>0?jr.forward:jr.back:jr.unknown})})};function c(){o=n.value}function l(d){s.push(d);const g=()=>{const I=s.indexOf(d);I>-1&&s.splice(I,1)};return i.push(g),g}function u(){const{history:d}=window;d.state&&d.replaceState(ct({},d.state,{scroll:Fi()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:h}}function Hl(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?Fi():null}}function I_(e){const{history:t,location:n}=window,r={value:df(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const h=e.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+c:w_()+e+c;try{t[u?"replaceState":"pushState"](l,"",d),s.value=l}catch(g){console.error(g),n[u?"replace":"assign"](d)}}function o(c,l){const u=ct({},t.state,Hl(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});i(c,u,!0),r.value=c}function a(c,l){const u=ct({},s.value,t.state,{forward:c,scroll:Fi()});i(u.current,u,!0);const h=ct({},Hl(r.value,c,null),{position:u.position+1},l);i(c,h,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function A_(e){e=p_(e);const t=I_(e),n=T_(e,t.state,t.location,t.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=ct({location:"",base:e,go:r,createHref:m_.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function R_(e){return typeof e=="string"||e&&typeof e=="object"}function pf(e){return typeof e=="string"||typeof e=="symbol"}const Ke={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},gf=Symbol("");var Gl;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Gl||(Gl={}));function ar(e,t){return ct(new Error,{type:e,[gf]:!0},t)}function Oe(e,t){return e instanceof Error&&gf in e&&(t==null||!!(e.type&t))}const Wl="[^/]+?",S_={sensitive:!1,strict:!1,start:!0,end:!0},C_=/[.+*?^${}()[\]/\\]/g;function P_(e,t){const n=ct({},S_,t),r=[];let s=n.start?"^":"";const i=[];for(const l of e){const u=l.length?[]:[90];n.strict&&!l.length&&(s+="/");for(let h=0;h<l.length;h++){const d=l[h];let g=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(C_,"\\$&"),g+=40;else if(d.type===1){const{value:I,repeatable:C,optional:T,regexp:b}=d;i.push({name:I,repeatable:C,optional:T});const L=b||Wl;if(L!==Wl){g+=10;try{new RegExp(`(${L})`)}catch(Y){throw new Error(`Invalid custom RegExp for param "${I}" (${L}): `+Y.message)}}let B=C?`((?:${L})(?:/(?:${L}))*)`:`(${L})`;h||(B=T&&l.length<2?`(?:/${B})`:"/"+B),T&&(B+="?"),s+=B,g+=20,T&&(g+=-8),C&&(g+=-20),L===".*"&&(g+=-50)}u.push(g)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const g=u[d]||"",I=i[d-1];h[I.name]=g&&I.repeatable?g.split("/"):g}return h}function c(l){let u="",h=!1;for(const d of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const g of d)if(g.type===0)u+=g.value;else if(g.type===1){const{value:I,repeatable:C,optional:T}=g,b=I in l?l[I]:"";if(ge(b)&&!C)throw new Error(`Provided param "${I}" is an array but it is not repeatable (* or + modifiers)`);const L=ge(b)?b.join("/"):b;if(!L)if(T)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${I}"`);u+=L}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function b_(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function V_(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=b_(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Ql(r))return 1;if(Ql(s))return-1}return s.length-r.length}function Ql(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const D_={type:0,value:""},x_=/[a-zA-Z0-9_]/;function N_(e){if(!e)return[[]];if(e==="/")return[[D_]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${n})/"${l}": ${g}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",u="";function h(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:c==="("?n=2:x_.test(c)?d():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${l}"`),h(),o(),s}function O_(e,t,n){const r=P_(N_(e.path),n),s=ct(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function k_(e,t){const n=[],r=new Map;t=Jl({strict:!1,end:!0,sensitive:!1},t);function s(u){return r.get(u)}function i(u,h,d){const g=!d,I=M_(u);I.aliasOf=d&&d.record;const C=Jl(t,u),T=[I];if("alias"in u){const B=typeof u.alias=="string"?[u.alias]:u.alias;for(const Y of B)T.push(ct({},I,{components:d?d.record.components:I.components,path:Y,aliasOf:d?d.record:I}))}let b,L;for(const B of T){const{path:Y}=B;if(h&&Y[0]!=="/"){const dt=h.record.path,q=dt[dt.length-1]==="/"?"":"/";B.path=h.record.path+(Y&&q+Y)}if(b=O_(B,h,C),d?d.alias.push(b):(L=L||b,L!==b&&L.alias.push(b),g&&u.name&&!Xl(b)&&o(u.name)),I.children){const dt=I.children;for(let q=0;q<dt.length;q++)i(dt[q],b,d&&d.children[q])}d=d||b,(b.record.components&&Object.keys(b.record.components).length||b.record.name||b.record.redirect)&&c(b)}return L?()=>{o(L)}:$r}function o(u){if(pf(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let h=0;for(;h<n.length&&V_(u,n[h])>=0&&(u.record.path!==n[h].record.path||!mf(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Xl(u)&&r.set(u.record.name,u)}function l(u,h){let d,g={},I,C;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw ar(1,{location:u});C=d.record.name,g=ct(Yl(h.params,d.keys.filter(L=>!L.optional).map(L=>L.name)),u.params&&Yl(u.params,d.keys.map(L=>L.name))),I=d.stringify(g)}else if("path"in u)I=u.path,d=n.find(L=>L.re.test(I)),d&&(g=d.parse(I),C=d.record.name);else{if(d=h.name?r.get(h.name):n.find(L=>L.re.test(h.path)),!d)throw ar(1,{location:u,currentLocation:h});C=d.record.name,g=ct({},h.params,u.params),I=d.stringify(g)}const T=[];let b=d;for(;b;)T.unshift(b.record),b=b.parent;return{name:C,path:I,params:g,matched:T,meta:F_(T)}}return e.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Yl(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function M_(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:L_(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function L_(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Xl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function F_(e){return e.reduce((t,n)=>ct(t,n.meta),{})}function Jl(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function mf(e,t){return t.children.some(n=>n===e||mf(e,n))}const _f=/#/g,U_=/&/g,B_=/\//g,$_=/=/g,j_=/\?/g,yf=/\+/g,q_=/%5B/g,z_=/%5D/g,vf=/%5E/g,K_=/%60/g,Ef=/%7B/g,H_=/%7C/g,wf=/%7D/g,G_=/%20/g;function sc(e){return encodeURI(""+e).replace(H_,"|").replace(q_,"[").replace(z_,"]")}function W_(e){return sc(e).replace(Ef,"{").replace(wf,"}").replace(vf,"^")}function na(e){return sc(e).replace(yf,"%2B").replace(G_,"+").replace(_f,"%23").replace(U_,"%26").replace(K_,"`").replace(Ef,"{").replace(wf,"}").replace(vf,"^")}function Q_(e){return na(e).replace($_,"%3D")}function Y_(e){return sc(e).replace(_f,"%23").replace(j_,"%3F")}function X_(e){return e==null?"":Y_(e).replace(B_,"%2F")}function ci(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function J_(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(yf," "),o=i.indexOf("="),a=ci(o<0?i:i.slice(0,o)),c=o<0?null:ci(i.slice(o+1));if(a in t){let l=t[a];ge(l)||(l=t[a]=[l]),l.push(c)}else t[a]=c}return t}function Zl(e){let t="";for(let n in e){const r=e[n];if(n=Q_(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(ge(r)?r.map(i=>i&&na(i)):[r&&na(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function Z_(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=ge(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const ty=Symbol(""),tu=Symbol(""),ic=Symbol(""),Tf=Symbol(""),ra=Symbol("");function Pr(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Qe(e,t,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(ar(4,{from:n,to:t})):h instanceof Error?a(h):R_(h)?a(ar(2,{from:t,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},l=e.call(r&&r.instances[s],t,n,c);let u=Promise.resolve(l);e.length<3&&(u=u.then(c)),u.catch(h=>a(h))})}function To(e,t,n,r){const s=[];for(const i of e)for(const o in i.components){let a=i.components[o];if(!(t!=="beforeRouteEnter"&&!i.instances[o]))if(ey(a)){const l=(a.__vccOpts||a)[t];l&&s.push(Qe(l,n,r,i,o))}else{let c=a();s.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=a_(l)?l.default:l;i.components[o]=u;const d=(u.__vccOpts||u)[t];return d&&Qe(d,n,r,i,o)()}))}}return s}function ey(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function eu(e){const t=Le(ic),n=Le(Tf),r=fe(()=>t.resolve(Ze(e.to))),s=fe(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(or.bind(null,u));if(d>-1)return d;const g=nu(c[l-2]);return l>1&&nu(u)===g&&h[h.length-1].path!==g?h.findIndex(or.bind(null,c[l-2])):d}),i=fe(()=>s.value>-1&&iy(n.params,r.value.params)),o=fe(()=>s.value>-1&&s.value===n.matched.length-1&&ff(n.params,r.value.params));function a(c={}){return sy(c)?t[Ze(e.replace)?"replace":"push"](Ze(e.to)).catch($r):Promise.resolve()}return{route:r,href:fe(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const ny=Hh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:eu,setup(e,{slots:t}){const n=ps(eu(e)),{options:r}=Le(ic),s=fe(()=>({[ru(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[ru(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:hf("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),ry=ny;function sy(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function iy(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!ge(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function nu(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ru=(e,t,n)=>e??t??n,oy=Hh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Le(ra),s=fe(()=>e.route||r.value),i=Le(tu,0),o=fe(()=>{let l=Ze(i);const{matched:u}=s.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=fe(()=>s.value.matched[o.value]);Ys(tu,fe(()=>o.value+1)),Ys(ty,a),Ys(ra,s);const c=Yn();return Ws(()=>[c.value,a.value,e.name],([l,u,h],[d,g,I])=>{u&&(u.instances[h]=l,g&&g!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),l&&u&&(!g||!or(u,g)||!d)&&(u.enterCallbacks[h]||[]).forEach(C=>C(l))},{flush:"post"}),()=>{const l=s.value,u=e.name,h=a.value,d=h&&h.components[u];if(!d)return su(n.default,{Component:d,route:l});const g=h.props[u],I=g?g===!0?l.params:typeof g=="function"?g(l):g:null,T=hf(d,ct({},I,t,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return su(n.default,{Component:T,route:l})||T}}});function su(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const If=oy;function ay(e){const t=k_(e.routes,e),n=e.parseQuery||J_,r=e.stringifyQuery||Zl,s=e.history,i=Pr(),o=Pr(),a=Pr(),c=vg(Ke);let l=Ke;jn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Eo.bind(null,y=>""+y),h=Eo.bind(null,X_),d=Eo.bind(null,ci);function g(y,O){let x,F;return pf(y)?(x=t.getRecordMatcher(y),F=O):F=y,t.addRoute(F,x)}function I(y){const O=t.getRecordMatcher(y);O&&t.removeRoute(O)}function C(){return t.getRoutes().map(y=>y.record)}function T(y){return!!t.getRecordMatcher(y)}function b(y,O){if(O=ct({},O||c.value),typeof y=="string"){const p=wo(n,y,O.path),m=t.resolve({path:p.path},O),v=s.createHref(p.fullPath);return ct(p,m,{params:d(m.params),hash:ci(p.hash),redirectedFrom:void 0,href:v})}let x;if("path"in y)x=ct({},y,{path:wo(n,y.path,O.path).path});else{const p=ct({},y.params);for(const m in p)p[m]==null&&delete p[m];x=ct({},y,{params:h(p)}),O.params=h(O.params)}const F=t.resolve(x,O),ot=y.hash||"";F.params=u(d(F.params));const gt=u_(r,ct({},y,{hash:W_(ot),path:F.path})),f=s.createHref(gt);return ct({fullPath:gt,hash:ot,query:r===Zl?Z_(y.query):y.query||{}},F,{redirectedFrom:void 0,href:f})}function L(y){return typeof y=="string"?wo(n,y,c.value.path):ct({},y)}function B(y,O){if(l!==y)return ar(8,{from:O,to:y})}function Y(y){return wt(y)}function dt(y){return Y(ct(L(y),{replace:!0}))}function q(y){const O=y.matched[y.matched.length-1];if(O&&O.redirect){const{redirect:x}=O;let F=typeof x=="function"?x(y):x;return typeof F=="string"&&(F=F.includes("?")||F.includes("#")?F=L(F):{path:F},F.params={}),ct({query:y.query,hash:y.hash,params:"path"in F?{}:y.params},F)}}function wt(y,O){const x=l=b(y),F=c.value,ot=y.state,gt=y.force,f=y.replace===!0,p=q(x);if(p)return wt(ct(L(p),{state:typeof p=="object"?ct({},ot,p.state):ot,force:gt,replace:f}),O||x);const m=x;m.redirectedFrom=O;let v;return!gt&&h_(r,F,x)&&(v=ar(16,{to:m,from:F}),ve(F,F,!0,!1)),(v?Promise.resolve(v):re(m,F)).catch(_=>Oe(_)?Oe(_,2)?_:qe(_):it(_,m,F)).then(_=>{if(_){if(Oe(_,2))return wt(ct({replace:f},L(_.to),{state:typeof _.to=="object"?ct({},ot,_.to.state):ot,force:gt}),O||m)}else _=un(m,F,!0,f,ot);return je(m,F,_),_})}function ne(y,O){const x=B(y,O);return x?Promise.reject(x):Promise.resolve()}function $e(y){const O=Ln.values().next().value;return O&&typeof O.runWithContext=="function"?O.runWithContext(y):y()}function re(y,O){let x;const[F,ot,gt]=cy(y,O);x=To(F.reverse(),"beforeRouteLeave",y,O);for(const p of F)p.leaveGuards.forEach(m=>{x.push(Qe(m,y,O))});const f=ne.bind(null,y,O);return x.push(f),Ft(x).then(()=>{x=[];for(const p of i.list())x.push(Qe(p,y,O));return x.push(f),Ft(x)}).then(()=>{x=To(ot,"beforeRouteUpdate",y,O);for(const p of ot)p.updateGuards.forEach(m=>{x.push(Qe(m,y,O))});return x.push(f),Ft(x)}).then(()=>{x=[];for(const p of gt)if(p.beforeEnter)if(ge(p.beforeEnter))for(const m of p.beforeEnter)x.push(Qe(m,y,O));else x.push(Qe(p.beforeEnter,y,O));return x.push(f),Ft(x)}).then(()=>(y.matched.forEach(p=>p.enterCallbacks={}),x=To(gt,"beforeRouteEnter",y,O),x.push(f),Ft(x))).then(()=>{x=[];for(const p of o.list())x.push(Qe(p,y,O));return x.push(f),Ft(x)}).catch(p=>Oe(p,8)?p:Promise.reject(p))}function je(y,O,x){a.list().forEach(F=>$e(()=>F(y,O,x)))}function un(y,O,x,F,ot){const gt=B(y,O);if(gt)return gt;const f=O===Ke,p=jn?history.state:{};x&&(F||f?s.replace(y.fullPath,ct({scroll:f&&p&&p.scroll},ot)):s.push(y.fullPath,ot)),c.value=y,ve(y,O,x,f),qe()}let ye;function Rr(){ye||(ye=s.listen((y,O,x)=>{if(!Vs.listening)return;const F=b(y),ot=q(F);if(ot){wt(ct(ot,{replace:!0}),F).catch($r);return}l=F;const gt=c.value;jn&&v_(Kl(gt.fullPath,x.delta),Fi()),re(F,gt).catch(f=>Oe(f,12)?f:Oe(f,2)?(wt(f.to,F).then(p=>{Oe(p,20)&&!x.delta&&x.type===Zr.pop&&s.go(-1,!1)}).catch($r),Promise.reject()):(x.delta&&s.go(-x.delta,!1),it(f,F,gt))).then(f=>{f=f||un(F,gt,!1),f&&(x.delta&&!Oe(f,8)?s.go(-x.delta,!1):x.type===Zr.pop&&Oe(f,20)&&s.go(-1,!1)),je(F,gt,f)}).catch($r)}))}let kn=Pr(),Ct=Pr(),ut;function it(y,O,x){qe(y);const F=Ct.list();return F.length?F.forEach(ot=>ot(y,O,x)):console.error(y),Promise.reject(y)}function Ne(){return ut&&c.value!==Ke?Promise.resolve():new Promise((y,O)=>{kn.add([y,O])})}function qe(y){return ut||(ut=!y,Rr(),kn.list().forEach(([O,x])=>y?x(y):O()),kn.reset()),y}function ve(y,O,x,F){const{scrollBehavior:ot}=e;if(!jn||!ot)return Promise.resolve();const gt=!x&&E_(Kl(y.fullPath,0))||(F||!x)&&history.state&&history.state.scroll||null;return Bh().then(()=>ot(y,O,gt)).then(f=>f&&y_(f)).catch(f=>it(f,y,O))}const Yt=y=>s.go(y);let Mn;const Ln=new Set,Vs={currentRoute:c,listening:!0,addRoute:g,removeRoute:I,hasRoute:T,getRoutes:C,resolve:b,options:e,push:Y,replace:dt,go:Yt,back:()=>Yt(-1),forward:()=>Yt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Ct.add,isReady:Ne,install(y){const O=this;y.component("RouterLink",ry),y.component("RouterView",If),y.config.globalProperties.$router=O,Object.defineProperty(y.config.globalProperties,"$route",{enumerable:!0,get:()=>Ze(c)}),jn&&!Mn&&c.value===Ke&&(Mn=!0,Y(s.location).catch(ot=>{}));const x={};for(const ot in Ke)Object.defineProperty(x,ot,{get:()=>c.value[ot],enumerable:!0});y.provide(ic,O),y.provide(Tf,xh(x)),y.provide(ra,c);const F=y.unmount;Ln.add(y),y.unmount=function(){Ln.delete(y),Ln.size<1&&(l=Ke,ye&&ye(),ye=null,c.value=Ke,Mn=!1,ut=!1),F()}}};function Ft(y){return y.reduce((O,x)=>O.then(()=>$e(x)),Promise.resolve())}return Vs}function cy(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(l=>or(l,a))?r.push(a):n.push(a));const c=e.matched[o];c&&(t.matched.find(l=>or(l,c))||s.push(c))}return[n,r,s]}const ly={__name:"App",setup(e){return(t,n)=>(ie(),af(Ze(If)))}};var iu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},uy=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],o=e[n++],a=e[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},Rf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,a=o?e[s+1]:0,c=s+2<e.length,l=c?e[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|l>>6,g=l&63;c||(g=64,o||(d=64)),r.push(n[u],n[h],n[d],n[g])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Af(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):uy(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const l=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||a==null||l==null||h==null)throw new hy;const d=i<<2|a>>4;if(r.push(d),l!==64){const g=a<<4&240|l>>2;if(r.push(g),h!==64){const I=l<<6&192|h;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class hy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fy=function(e){const t=Af(e);return Rf.encodeByteArray(t,!0)},li=function(e){return fy(e).replace(/\./g,"")},dy=function(e){try{return Rf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=()=>py().__FIREBASE_DEFAULTS__,my=()=>{if(typeof process>"u"||typeof iu>"u")return;const e=iu.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},_y=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&dy(e[1]);return t&&JSON.parse(t)},oc=()=>{try{return gy()||my()||_y()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},yy=e=>{var t,n;return(n=(t=oc())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},vy=e=>{const t=yy(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Sf=()=>{var e;return(e=oc())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[li(JSON.stringify(n)),li(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ty(){var e;const t=(e=oc())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Iy(){return!Ty()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cf(){try{return typeof indexedDB=="object"}catch{return!1}}function Ay(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="FirebaseError";class _r extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Ry,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pf.prototype.create)}}class Pf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?Sy(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new _r(s,a,r)}}function Sy(e,t){return e.replace(Cy,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Cy=/\{\$([^}]+)}/g;function sa(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],o=t[s];if(ou(i)&&ou(o)){if(!sa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ou(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(e){return e&&e._delegate?e._delegate:e}class ts{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Ey;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Vy(t))try{this.getOrInitializeService({instanceIdentifier:dn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=dn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=dn){return this.instances.has(t)}getOptions(t=dn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:by(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=dn){return this.component?this.component.multipleInstances?t:dn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function by(e){return e===dn?void 0:e}function Vy(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Py(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(et||(et={}));const xy={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},Ny=et.INFO,Oy={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},ky=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Oy[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class bf{constructor(t){this.name=t,this._logLevel=Ny,this._logHandler=ky,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in et))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?xy[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...t),this._logHandler(this,et.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...t),this._logHandler(this,et.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,et.INFO,...t),this._logHandler(this,et.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,et.WARN,...t),this._logHandler(this,et.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...t),this._logHandler(this,et.ERROR,...t)}}const My=(e,t)=>t.some(n=>e instanceof n);let au,cu;function Ly(){return au||(au=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fy(){return cu||(cu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vf=new WeakMap,ia=new WeakMap,Df=new WeakMap,Io=new WeakMap,ac=new WeakMap;function Uy(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(en(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Vf.set(n,e)}).catch(()=>{}),ac.set(t,e),t}function By(e){if(ia.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});ia.set(e,t)}let oa={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ia.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Df.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return en(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function $y(e){oa=e(oa)}function jy(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Ao(this),t,...n);return Df.set(r,t.sort?t.sort():[t]),en(r)}:Fy().includes(e)?function(...t){return e.apply(Ao(this),t),en(Vf.get(this))}:function(...t){return en(e.apply(Ao(this),t))}}function qy(e){return typeof e=="function"?jy(e):(e instanceof IDBTransaction&&By(e),My(e,Ly())?new Proxy(e,oa):e)}function en(e){if(e instanceof IDBRequest)return Uy(e);if(Io.has(e))return Io.get(e);const t=qy(e);return t!==e&&(Io.set(e,t),ac.set(t,e)),t}const Ao=e=>ac.get(e);function zy(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=en(o);return r&&o.addEventListener("upgradeneeded",c=>{r(en(o.result),c.oldVersion,c.newVersion,en(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Ky=["get","getKey","getAll","getAllKeys","count"],Hy=["put","add","delete","clear"],Ro=new Map;function lu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Ro.get(t))return Ro.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Hy.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ky.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return Ro.set(t,i),i}$y(e=>({...e,get:(t,n,r)=>lu(t,n)||e.get(t,n,r),has:(t,n)=>!!lu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Wy(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Wy(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const aa="@firebase/app",uu="0.9.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=new bf("@firebase/app"),Qy="@firebase/app-compat",Yy="@firebase/analytics-compat",Xy="@firebase/analytics",Jy="@firebase/app-check-compat",Zy="@firebase/app-check",tv="@firebase/auth",ev="@firebase/auth-compat",nv="@firebase/database",rv="@firebase/database-compat",sv="@firebase/functions",iv="@firebase/functions-compat",ov="@firebase/installations",av="@firebase/installations-compat",cv="@firebase/messaging",lv="@firebase/messaging-compat",uv="@firebase/performance",hv="@firebase/performance-compat",fv="@firebase/remote-config",dv="@firebase/remote-config-compat",pv="@firebase/storage",gv="@firebase/storage-compat",mv="@firebase/firestore",_v="@firebase/firestore-compat",yv="firebase",vv="10.7.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]",Ev={[aa]:"fire-core",[Qy]:"fire-core-compat",[Xy]:"fire-analytics",[Yy]:"fire-analytics-compat",[Zy]:"fire-app-check",[Jy]:"fire-app-check-compat",[tv]:"fire-auth",[ev]:"fire-auth-compat",[nv]:"fire-rtdb",[rv]:"fire-rtdb-compat",[sv]:"fire-fn",[iv]:"fire-fn-compat",[ov]:"fire-iid",[av]:"fire-iid-compat",[cv]:"fire-fcm",[lv]:"fire-fcm-compat",[uv]:"fire-perf",[hv]:"fire-perf-compat",[fv]:"fire-rc",[dv]:"fire-rc-compat",[pv]:"fire-gcs",[gv]:"fire-gcs-compat",[mv]:"fire-fst",[_v]:"fire-fst-compat","fire-js":"fire-js",[yv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new Map,la=new Map;function wv(e,t){try{e.container.addComponent(t)}catch(n){Cn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function di(e){const t=e.name;if(la.has(t))return Cn.debug(`There were multiple attempts to register component ${t}.`),!1;la.set(t,e);for(const n of fi.values())wv(n,e);return!0}function Tv(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},nn=new Pf("app","Firebase",Iv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw nn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=vv;function xf(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:ca,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw nn.create("bad-app-name",{appName:String(s)});if(n||(n=Sf()),!n)throw nn.create("no-options");const i=fi.get(s);if(i){if(sa(n,i.options)&&sa(r,i.config))return i;throw nn.create("duplicate-app",{appName:s})}const o=new Dy(s);for(const c of la.values())o.addComponent(c);const a=new Av(n,r,o);return fi.set(s,a),a}function Sv(e=ca){const t=fi.get(e);if(!t&&e===ca&&Sf())return xf();if(!t)throw nn.create("no-app",{appName:e});return t}function Jn(e,t,n){var r;let s=(r=Ev[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${t}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Cn.warn(a.join(" "));return}di(new ts(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="firebase-heartbeat-database",Pv=1,es="firebase-heartbeat-store";let So=null;function Nf(){return So||(So=zy(Cv,Pv,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(es)}catch(n){console.warn(n)}}}}).catch(e=>{throw nn.create("idb-open",{originalErrorMessage:e.message})})),So}async function bv(e){try{return await(await Nf()).transaction(es).objectStore(es).get(Of(e))}catch(t){if(t instanceof _r)Cn.warn(t.message);else{const n=nn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Cn.warn(n.message)}}}async function hu(e,t){try{const r=(await Nf()).transaction(es,"readwrite");await r.objectStore(es).put(t,Of(e)),await r.done}catch(n){if(n instanceof _r)Cn.warn(n.message);else{const r=nn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cn.warn(r.message)}}}function Of(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=1024,Dv=30*24*60*60*1e3;class xv{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ov(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=fu();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Dv}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fu(),{heartbeatsToSend:r,unsentEntries:s}=Nv(this._heartbeatsCache.heartbeats),i=li(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function fu(){return new Date().toISOString().substring(0,10)}function Nv(e,t=Vv){const n=[];let r=e.slice();for(const s of e){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),du(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),du(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ov{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cf()?Ay().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hu(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hu(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function du(e){return li(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(e){di(new ts("platform-logger",t=>new Gy(t),"PRIVATE")),di(new ts("heartbeat",t=>new xv(t),"PRIVATE")),Jn(aa,uu,e),Jn(aa,uu,"esm2017"),Jn("fire-js","")}kv("");var Mv="firebase",Lv="10.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn(Mv,Lv,"app");var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V,cc=cc||{},z=Fv||self;function Ui(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function ms(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function Uv(e){return Object.prototype.hasOwnProperty.call(e,Co)&&e[Co]||(e[Co]=++Bv)}var Co="closure_uid_"+(1e9*Math.random()>>>0),Bv=0;function $v(e,t,n){return e.call.apply(e.bind,arguments)}function jv(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),e.apply(t,s)}}return function(){return e.apply(t,arguments)}}function Kt(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Kt=$v:Kt=jv,Kt.apply(null,arguments)}function Ls(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function xt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[s].apply(r,o)}}function cn(){this.s=this.s,this.o=this.o}var qv=0;cn.prototype.s=!1;cn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),qv!=0)&&Uv(this)};cn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kf=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function lc(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function pu(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Ui(r)){const s=e.length||0,i=r.length||0;e.length=s+i;for(let o=0;o<i;o++)e[s+o]=r[o]}else e.push(r)}}function Ht(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ht.prototype.h=function(){this.defaultPrevented=!0};var zv=function(){if(!z.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};z.addEventListener("test",n,t),z.removeEventListener("test",n,t)}catch{}return e}();function ns(e){return/^[\s\xa0]*$/.test(e)}function Bi(){var e=z.navigator;return e&&(e=e.userAgent)?e:""}function Re(e){return Bi().indexOf(e)!=-1}function uc(e){return uc[" "](e),e}uc[" "]=function(){};function Kv(e,t){var n=LE;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var Hv=Re("Opera"),cr=Re("Trident")||Re("MSIE"),Mf=Re("Edge"),ua=Mf||cr,Lf=Re("Gecko")&&!(Bi().toLowerCase().indexOf("webkit")!=-1&&!Re("Edge"))&&!(Re("Trident")||Re("MSIE"))&&!Re("Edge"),Gv=Bi().toLowerCase().indexOf("webkit")!=-1&&!Re("Edge");function Ff(){var e=z.document;return e?e.documentMode:void 0}var ha;t:{var Po="",bo=function(){var e=Bi();if(Lf)return/rv:([^\);]+)(\)|;)/.exec(e);if(Mf)return/Edge\/([\d\.]+)/.exec(e);if(cr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(Gv)return/WebKit\/(\S+)/.exec(e);if(Hv)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(bo&&(Po=bo?bo[1]:""),cr){var Vo=Ff();if(Vo!=null&&Vo>parseFloat(Po)){ha=String(Vo);break t}}ha=Po}var fa;if(z.document&&cr){var gu=Ff();fa=gu||parseInt(ha,10)||void 0}else fa=void 0;var Wv=fa;function rs(e,t){if(Ht.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Lf){t:{try{uc(t.nodeName);var s=!0;break t}catch{}s=!1}s||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Qv[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&rs.$.h.call(this)}}xt(rs,Ht);var Qv={2:"touch",3:"pen",4:"mouse"};rs.prototype.h=function(){rs.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var _s="closure_listenable_"+(1e6*Math.random()|0),Yv=0;function Xv(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++Yv,this.fa=this.ia=!1}function $i(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function hc(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Jv(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function Uf(e){const t={};for(const n in e)t[n]=e[n];return t}const mu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bf(e,t){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)e[n]=r[n];for(let i=0;i<mu.length;i++)n=mu[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ji(e){this.src=e,this.g={},this.h=0}ji.prototype.add=function(e,t,n,r,s){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var o=pa(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new Xv(t,this.src,i,!!r,s),t.ia=n,e.push(t)),t};function da(e,t){var n=t.type;if(n in e.g){var r=e.g[n],s=kf(r,t),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&($i(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function pa(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}var fc="closure_lm_"+(1e6*Math.random()|0),Do={};function $f(e,t,n,r,s){if(r&&r.once)return qf(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)$f(e,t[i],n,r,s);return null}return n=gc(n),e&&e[_s]?e.O(t,n,ms(r)?!!r.capture:!!r,s):jf(e,t,n,!1,r,s)}function jf(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=ms(s)?!!s.capture:!!s,a=pc(e);if(a||(e[fc]=a=new ji(e)),n=a.add(t,n,r,o,i),n.proxy)return n;if(r=Zv(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)zv||(s=o),s===void 0&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Kf(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Zv(){function e(n){return t.call(e.src,e.listener,n)}const t=tE;return e}function qf(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)qf(e,t[i],n,r,s);return null}return n=gc(n),e&&e[_s]?e.P(t,n,ms(r)?!!r.capture:!!r,s):jf(e,t,n,!0,r,s)}function zf(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)zf(e,t[i],n,r,s);else r=ms(r)?!!r.capture:!!r,n=gc(n),e&&e[_s]?(e=e.i,t=String(t).toString(),t in e.g&&(i=e.g[t],n=pa(i,n,r,s),-1<n&&($i(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=pc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=pa(t,n,r,s)),(n=-1<e?t[e]:null)&&dc(n))}function dc(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[_s])da(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Kf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=pc(t))?(da(n,e),n.h==0&&(n.src=null,t[fc]=null)):$i(e)}}}function Kf(e){return e in Do?Do[e]:Do[e]="on"+e}function tE(e,t){if(e.fa)e=!0;else{t=new rs(t,this);var n=e.listener,r=e.la||e.src;e.ia&&dc(e),e=n.call(r,t)}return e}function pc(e){return e=e[fc],e instanceof ji?e:null}var xo="__closure_events_fn_"+(1e9*Math.random()>>>0);function gc(e){return typeof e=="function"?e:(e[xo]||(e[xo]=function(t){return e.handleEvent(t)}),e[xo])}function Dt(){cn.call(this),this.i=new ji(this),this.S=this,this.J=null}xt(Dt,cn);Dt.prototype[_s]=!0;Dt.prototype.removeEventListener=function(e,t,n,r){zf(this,e,t,n,r)};function kt(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Ht(t,e);else if(t instanceof Ht)t.target=t.target||e;else{var s=t;t=new Ht(r,e),Bf(t,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=Fs(o,r,!0,t)&&s}if(o=t.g=e,s=Fs(o,r,!0,t)&&s,s=Fs(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)o=t.g=n[i],s=Fs(o,r,!1,t)&&s}Dt.prototype.N=function(){if(Dt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)$i(n[r]);delete e.g[t],e.h--}}this.J=null};Dt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Dt.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Fs(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&da(e.i,o),s=a.call(c,r)!==!1&&s}}return s&&!r.defaultPrevented}var mc=z.JSON.stringify;class eE{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function nE(){var e=_c;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class rE{constructor(){this.h=this.g=null}add(t,n){const r=Hf.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Hf=new eE(()=>new sE,e=>e.reset());class sE{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function iE(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function oE(e){z.setTimeout(()=>{throw e},0)}let ss,is=!1,_c=new rE,Gf=()=>{const e=z.Promise.resolve(void 0);ss=()=>{e.then(aE)}};var aE=()=>{for(var e;e=nE();){try{e.h.call(e.g)}catch(n){oE(n)}var t=Hf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}is=!1};function qi(e,t){Dt.call(this),this.h=e||1,this.g=t||z,this.j=Kt(this.qb,this),this.l=Date.now()}xt(qi,Dt);V=qi.prototype;V.ga=!1;V.T=null;V.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),kt(this,"tick"),this.ga&&(yc(this),this.start()))}};V.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function yc(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}V.N=function(){qi.$.N.call(this),yc(this),delete this.g};function vc(e,t,n){if(typeof e=="function")n&&(e=Kt(e,n));else if(e&&typeof e.handleEvent=="function")e=Kt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:z.setTimeout(e,t||0)}function Wf(e){e.g=vc(()=>{e.g=null,e.i&&(e.i=!1,Wf(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class cE extends cn{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Wf(this)}N(){super.N(),this.g&&(z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function os(e){cn.call(this),this.h=e,this.g={}}xt(os,cn);var _u=[];function Qf(e,t,n,r){Array.isArray(n)||(n&&(_u[0]=n.toString()),n=_u);for(var s=0;s<n.length;s++){var i=$f(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function Yf(e){hc(e.g,function(t,n){this.g.hasOwnProperty(n)&&dc(t)},e),e.g={}}os.prototype.N=function(){os.$.N.call(this),Yf(this)};os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function zi(){this.g=!0}zi.prototype.Ea=function(){this.g=!1};function lE(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+`
`+n+`
`+o})}function uE(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+`
`+n+`
`+i+" "+o})}function Hn(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+fE(e,n)+(r?" "+r:"")})}function hE(e,t){e.info(function(){return"TIMEOUT: "+t})}zi.prototype.info=function(){};function fE(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return mc(n)}catch{return t}}var On={},yu=null;function Ki(){return yu=yu||new Dt}On.Ta="serverreachability";function Xf(e){Ht.call(this,On.Ta,e)}xt(Xf,Ht);function as(e){const t=Ki();kt(t,new Xf(t))}On.STAT_EVENT="statevent";function Jf(e,t){Ht.call(this,On.STAT_EVENT,e),this.stat=t}xt(Jf,Ht);function Qt(e){const t=Ki();kt(t,new Jf(t,e))}On.Ua="timingevent";function Zf(e,t){Ht.call(this,On.Ua,e),this.size=t}xt(Zf,Ht);function ys(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return z.setTimeout(function(){e()},t)}var Hi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},td={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ec(){}Ec.prototype.h=null;function vu(e){return e.h||(e.h=e.i())}function ed(){}var vs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function wc(){Ht.call(this,"d")}xt(wc,Ht);function Tc(){Ht.call(this,"c")}xt(Tc,Ht);var ga;function Gi(){}xt(Gi,Ec);Gi.prototype.g=function(){return new XMLHttpRequest};Gi.prototype.i=function(){return{}};ga=new Gi;function Es(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new os(this),this.P=dE,e=ua?125:void 0,this.V=new qi(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new nd}function nd(){this.i=null,this.g="",this.h=!1}var dE=45e3,rd={},ma={};V=Es.prototype;V.setTimeout=function(e){this.P=e};function _a(e,t,n){e.L=1,e.A=Qi(Fe(t)),e.u=n,e.S=!0,sd(e,null)}function sd(e,t){e.G=Date.now(),ws(e),e.B=Fe(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),fd(n.i,"t",r),e.o=0,n=e.l.J,e.h=new nd,e.g=Nd(e.l,n?t:null,!e.u),0<e.O&&(e.M=new cE(Kt(e.Pa,e,e.g),e.O)),Qf(e.U,e.g,"readystatechange",e.nb),t=e.I?Uf(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),as(),lE(e.j,e.v,e.B,e.m,e.W,e.u)}V.nb=function(e){e=e.target;const t=this.M;t&&Ce(e)==3?t.l():this.Pa(e)};V.Pa=function(e){try{if(e==this.g)t:{const u=Ce(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||ua||this.g&&(this.h.h||this.g.ja()||Iu(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?as(3):as(2)),Wi(this);var n=this.g.da();this.ca=n;e:if(id(this)){var r=Iu(this.g);e="";var s=r.length,i=Ce(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),qr(this);var o="";break e}this.h.i=new z.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,uE(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ns(a)){var l=a;break e}}l=null}if(n=l)Hn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ya(this,n);else{this.i=!1,this.s=3,Qt(12),_n(this),qr(this);break t}}this.S?(od(this,u,o),ua&&this.i&&u==3&&(Qf(this.U,this.V,"tick",this.mb),this.V.start())):(Hn(this.j,this.m,o,null),ya(this,o)),u==4&&_n(this),this.i&&!this.J&&(u==4?bd(this.l,this):(this.i=!1,ws(this)))}else OE(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Qt(12)):(this.s=0,Qt(13)),_n(this),qr(this)}}}catch{}finally{}};function id(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function od(e,t,n){let r=!0,s;for(;!e.J&&e.o<n.length;)if(s=pE(e,n),s==ma){t==4&&(e.s=4,Qt(14),r=!1),Hn(e.j,e.m,null,"[Incomplete Response]");break}else if(s==rd){e.s=4,Qt(15),Hn(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else Hn(e.j,e.m,s,null),ya(e,s);id(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,Qt(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pc(t),t.M=!0,Qt(11))):(Hn(e.j,e.m,n,"[Invalid Chunked Response]"),_n(e),qr(e))}V.mb=function(){if(this.g){var e=Ce(this.g),t=this.g.ja();this.o<t.length&&(Wi(this),od(this,e,t),this.i&&e!=4&&ws(this))}};function pE(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?ma:(n=Number(t.substring(n,r)),isNaN(n)?rd:(r+=1,r+n>t.length?ma:(t=t.slice(r,r+n),e.o=r+n,t)))}V.cancel=function(){this.J=!0,_n(this)};function ws(e){e.Y=Date.now()+e.P,ad(e,e.P)}function ad(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=ys(Kt(e.lb,e),t)}function Wi(e){e.C&&(z.clearTimeout(e.C),e.C=null)}V.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(hE(this.j,this.B),this.L!=2&&(as(),Qt(17)),_n(this),this.s=2,qr(this)):ad(this,this.Y-e)};function qr(e){e.l.H==0||e.J||bd(e.l,e)}function _n(e){Wi(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,yc(e.V),Yf(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ya(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||va(n.i,e))){if(!e.K&&va(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)mi(n),Zi(n);else break t;Cc(n),Qt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=ys(Kt(n.ib,n),6e3));if(1>=gd(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else yn(n,11)}else if((e.K||n.g==e)&&mi(n),!ns(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=l[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const g=e.g;if(g){const I=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(I){var i=r.i;i.g||I.indexOf("spdy")==-1&&I.indexOf("quic")==-1&&I.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Ic(i,i.h),i.h=null))}if(r.F){const C=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(r.Da=C,pt(r.I,r.F,C))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=xd(r,r.J?r.pa:null,r.Y),o.K){md(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Wi(a),ws(a)),r.g=o}else Cd(r);0<n.j.length&&to(n)}else l[0]!="stop"&&l[0]!="close"||yn(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?yn(n,7):Sc(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}as(4)}catch{}}function gE(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Ui(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function mE(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Ui(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function cd(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Ui(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=mE(e),r=gE(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}var ld=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _E(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function In(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof In){this.h=e.h,pi(this,e.j),this.s=e.s,this.g=e.g,gi(this,e.m),this.l=e.l;var t=e.i,n=new cs;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Eu(this,n),this.o=e.o}else e&&(t=String(e).match(ld))?(this.h=!1,pi(this,t[1]||"",!0),this.s=Nr(t[2]||""),this.g=Nr(t[3]||"",!0),gi(this,t[4]),this.l=Nr(t[5]||"",!0),Eu(this,t[6]||"",!0),this.o=Nr(t[7]||"")):(this.h=!1,this.i=new cs(null,this.h))}In.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Or(t,wu,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Or(t,wu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(Or(n,n.charAt(0)=="/"?EE:vE,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Or(n,TE)),e.join("")};function Fe(e){return new In(e)}function pi(e,t,n){e.j=n?Nr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function gi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Eu(e,t,n){t instanceof cs?(e.i=t,IE(e.i,e.h)):(n||(t=Or(t,wE)),e.i=new cs(t,e.h))}function pt(e,t,n){e.i.set(t,n)}function Qi(e){return pt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Nr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Or(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,yE),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function yE(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var wu=/[#\/\?@]/g,vE=/[#\?:]/g,EE=/[#\?]/g,wE=/[#\?@]/g,TE=/#/g;function cs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ln(e){e.g||(e.g=new Map,e.h=0,e.i&&_E(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}V=cs.prototype;V.add=function(e,t){ln(this),this.i=null,e=yr(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function ud(e,t){ln(e),t=yr(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function hd(e,t){return ln(e),t=yr(e,t),e.g.has(t)}V.forEach=function(e,t){ln(this),this.g.forEach(function(n,r){n.forEach(function(s){e.call(t,s,r,this)},this)},this)};V.ta=function(){ln(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let i=0;i<s.length;i++)n.push(t[r])}return n};V.Z=function(e){ln(this);let t=[];if(typeof e=="string")hd(this,e)&&(t=t.concat(this.g.get(yr(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};V.set=function(e,t){return ln(this),this.i=null,e=yr(this,e),hd(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};V.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function fd(e,t,n){ud(e,t),0<n.length&&(e.i=null,e.g.set(yr(e,t),lc(n)),e.h+=n.length)}V.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};function yr(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function IE(e,t){t&&!e.j&&(ln(e),e.i=null,e.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(ud(this,r),fd(this,s,n))},e)),e.j=t}var AE=class{constructor(e,t){this.g=e,this.map=t}};function dd(e){this.l=e||RE,z.PerformanceNavigationTiming?(e=z.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(z.g&&z.g.Ka&&z.g.Ka()&&z.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var RE=10;function pd(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function gd(e){return e.h?1:e.g?e.g.size:0}function va(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Ic(e,t){e.g?e.g.add(t):e.h=t}function md(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}dd.prototype.cancel=function(){if(this.i=_d(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function _d(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return lc(e.i)}var SE=class{stringify(e){return z.JSON.stringify(e,void 0)}parse(e){return z.JSON.parse(e,void 0)}};function CE(){this.g=new SE}function PE(e,t,n){const r=n||"";try{cd(e,function(s,i){let o=s;ms(s)&&(o=mc(s)),t.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function bE(e,t){const n=new zi;if(z.Image){const r=new Image;r.onload=Ls(Us,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ls(Us,n,r,"TestLoadImage: error",!1,t),r.onabort=Ls(Us,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ls(Us,n,r,"TestLoadImage: timeout",!1,t),z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Us(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch{}}function Yi(e){this.l=e.ec||null,this.j=e.ob||!1}xt(Yi,Ec);Yi.prototype.g=function(){return new Xi(this.l,this.j)};Yi.prototype.i=function(e){return function(){return e}}({});function Xi(e,t){Dt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ac,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xt(Xi,Dt);var Ac=0;V=Xi.prototype;V.open=function(e,t){if(this.readyState!=Ac)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ls(this)};V.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||z).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ts(this)),this.readyState=Ac};V.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ls(this)),this.g&&(this.readyState=3,ls(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof z.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yd(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function yd(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}V.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ts(this):ls(this),this.readyState==3&&yd(this)}};V.Za=function(e){this.g&&(this.response=this.responseText=e,Ts(this))};V.Ya=function(e){this.g&&(this.response=e,Ts(this))};V.ka=function(){this.g&&Ts(this)};function Ts(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ls(e)}V.setRequestHeader=function(e,t){this.v.append(e,t)};V.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};V.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function ls(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var VE=z.JSON.parse;function vt(e){Dt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=vd,this.L=this.M=!1}xt(vt,Dt);var vd="",DE=/^https?$/i,xE=["POST","PUT"];V=vt.prototype;V.Oa=function(e){this.M=e};V.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ga.g(),this.C=this.u?vu(this.u):vu(ga),this.g.onreadystatechange=Kt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){Tu(this,i);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=z.FormData&&e instanceof z.FormData,!(0<=kf(xE,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Td(this),0<this.B&&((this.L=NE(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kt(this.ua,this)):this.A=vc(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Tu(this,i)}};function NE(e){return cr&&typeof e.timeout=="number"&&e.ontimeout!==void 0}V.ua=function(){typeof cc<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kt(this,"timeout"),this.abort(8))};function Tu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ed(e),Ji(e)}function Ed(e){e.F||(e.F=!0,kt(e,"complete"),kt(e,"error"))}V.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,kt(this,"complete"),kt(this,"abort"),Ji(this))};V.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ji(this,!0)),vt.$.N.call(this)};V.La=function(){this.s||(this.G||this.v||this.l?wd(this):this.kb())};V.kb=function(){wd(this)};function wd(e){if(e.h&&typeof cc<"u"&&(!e.C[1]||Ce(e)!=4||e.da()!=2)){if(e.v&&Ce(e)==4)vc(e.La,0,e);else if(kt(e,"readystatechange"),Ce(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var s=String(e.I).match(ld)[1]||null;!s&&z.self&&z.self.location&&(s=z.self.location.protocol.slice(0,-1)),r=!DE.test(s?s.toLowerCase():"")}n=r}if(n)kt(e,"complete"),kt(e,"success");else{e.m=6;try{var i=2<Ce(e)?e.g.statusText:""}catch{i=""}e.j=i+" ["+e.da()+"]",Ed(e)}}finally{Ji(e)}}}}function Ji(e,t){if(e.g){Td(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||kt(e,"ready");try{n.onreadystatechange=r}catch{}}}function Td(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(z.clearTimeout(e.A),e.A=null)}V.isActive=function(){return!!this.g};function Ce(e){return e.g?e.g.readyState:0}V.da=function(){try{return 2<Ce(this)?this.g.status:-1}catch{return-1}};V.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};V.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),VE(t)}};function Iu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case vd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function OE(e){const t={};e=(e.g&&2<=Ce(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(ns(e[r]))continue;var n=iE(e[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}Jv(t,function(r){return r.join(", ")})}V.Ia=function(){return this.m};V.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Id(e){let t="";return hc(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function Rc(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Id(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):pt(e,t,n))}function br(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ad(e){this.Ga=0,this.j=[],this.l=new zi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=br("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=br("baseRetryDelayMs",5e3,e),this.hb=br("retryDelaySeedMs",1e4,e),this.eb=br("forwardChannelMaxRetries",2,e),this.xa=br("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new dd(e&&e.concurrentRequestLimit),this.Ja=new CE,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}V=Ad.prototype;V.ra=8;V.H=1;function Sc(e){if(Rd(e),e.H==3){var t=e.W++,n=Fe(e.I);if(pt(n,"SID",e.K),pt(n,"RID",t),pt(n,"TYPE","terminate"),Is(e,n),t=new Es(e,e.l,t),t.L=2,t.A=Qi(Fe(n)),n=!1,z.navigator&&z.navigator.sendBeacon)try{n=z.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&z.Image&&(new Image().src=t.A,n=!0),n||(t.g=Nd(t.l,null),t.g.ha(t.A)),t.G=Date.now(),ws(t)}Dd(e)}function Zi(e){e.g&&(Pc(e),e.g.cancel(),e.g=null)}function Rd(e){Zi(e),e.u&&(z.clearTimeout(e.u),e.u=null),mi(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&z.clearTimeout(e.m),e.m=null)}function to(e){if(!pd(e.i)&&!e.m){e.m=!0;var t=e.Na;ss||Gf(),is||(ss(),is=!0),_c.add(t,e),e.C=0}}function kE(e,t){return gd(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=ys(Kt(e.Na,e,t),Vd(e,e.C)),e.C++,!0)}V.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Es(this,this.l,e);let i=this.s;if(this.U&&(i?(i=Uf(i),Bf(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Sd(this,s,t),n=Fe(this.I),pt(n,"RID",e),pt(n,"CVER",22),this.F&&pt(n,"X-HTTP-Session-Id",this.F),Is(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Id(i)))+"&"+t:this.o&&Rc(n,this.o,i)),Ic(this.i,s),this.bb&&pt(n,"TYPE","init"),this.P?(pt(n,"$req",t),pt(n,"SID","null"),s.aa=!0,_a(s,n,null)):_a(s,n,t),this.H=2}}else this.H==3&&(e?Au(this,e):this.j.length==0||pd(this.i)||Au(this))};function Au(e,t){var n;t?n=t.m:n=e.W++;const r=Fe(e.I);pt(r,"SID",e.K),pt(r,"RID",n),pt(r,"AID",e.V),Is(e,r),e.o&&e.s&&Rc(r,e.o,e.s),n=new Es(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Sd(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ic(e.i,n),_a(n,r,t)}function Is(e,t){e.na&&hc(e.na,function(n,r){pt(t,r,n)}),e.h&&cd({},function(n,r){pt(t,r,n)})}function Sd(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Kt(e.h.Va,e.h,e):null;t:{var s=e.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let c=0;c<n;c++){let l=s[c].g;const u=s[c].map;if(l-=i,0>l)i=Math.max(0,s[c].g-100),a=!1;else try{PE(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function Cd(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ss||Gf(),is||(ss(),is=!0),_c.add(t,e),e.A=0}}function Cc(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=ys(Kt(e.Ma,e),Vd(e,e.A)),e.A++,!0)}V.Ma=function(){if(this.u=null,Pd(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ys(Kt(this.jb,this),e)}};V.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Qt(10),Zi(this),Pd(this))};function Pc(e){e.B!=null&&(z.clearTimeout(e.B),e.B=null)}function Pd(e){e.g=new Es(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Fe(e.wa);pt(t,"RID","rpc"),pt(t,"SID",e.K),pt(t,"AID",e.V),pt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&pt(t,"TO",e.qa),pt(t,"TYPE","xmlhttp"),Is(e,t),e.o&&e.s&&Rc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Qi(Fe(t)),n.u=null,n.S=!0,sd(n,e)}V.ib=function(){this.v!=null&&(this.v=null,Zi(this),Cc(this),Qt(19))};function mi(e){e.v!=null&&(z.clearTimeout(e.v),e.v=null)}function bd(e,t){var n=null;if(e.g==t){mi(e),Pc(e),e.g=null;var r=2}else if(va(e.i,t))n=t.F,md(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var s=e.C;r=Ki(),kt(r,new Zf(r,n)),to(e)}else Cd(e);else if(s=t.s,s==3||s==0&&0<t.ca||!(r==1&&kE(e,t)||r==2&&Cc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:yn(e,5);break;case 4:yn(e,10);break;case 3:yn(e,6);break;default:yn(e,2)}}}function Vd(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function yn(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Kt(e.pb,e);n||(n=new In("//www.google.com/images/cleardot.gif"),z.location&&z.location.protocol=="http"||pi(n,"https"),Qi(n)),bE(n.toString(),r)}else Qt(2);e.H=0,e.h&&e.h.za(t),Dd(e),Rd(e)}V.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Qt(2)):(this.l.info("Failed to ping google.com"),Qt(1))};function Dd(e){if(e.H=0,e.ma=[],e.h){const t=_d(e.i);(t.length!=0||e.j.length!=0)&&(pu(e.ma,t),pu(e.ma,e.j),e.i.i.length=0,lc(e.j),e.j.length=0),e.h.ya()}}function xd(e,t,n){var r=n instanceof In?Fe(n):new In(n);if(r.g!="")t&&(r.g=t+"."+r.g),gi(r,r.m);else{var s=z.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new In(null);r&&pi(i,r),t&&(i.g=t),s&&gi(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&pt(r,n,t),pt(r,"VER",e.ra),Is(e,r),r}function Nd(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new vt(new Yi({ob:n})):new vt(e.va),t.Oa(e.J),t}V.isActive=function(){return!!this.h&&this.h.isActive(this)};function Od(){}V=Od.prototype;V.Ba=function(){};V.Aa=function(){};V.za=function(){};V.ya=function(){};V.isActive=function(){return!0};V.Va=function(){};function _i(){if(cr&&!(10<=Number(Wv)))throw Error("Environmental error: no available transport.")}_i.prototype.g=function(e,t){return new oe(e,t)};function oe(e,t){Dt.call(this),this.g=new Ad(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ns(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ns(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new vr(this)}xt(oe,Dt);oe.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Qt(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=xd(e,null,e.Y),to(e)};oe.prototype.close=function(){Sc(this.g)};oe.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=mc(e),e=n);t.j.push(new AE(t.fb++,e)),t.H==3&&to(t)};oe.prototype.N=function(){this.g.h=null,delete this.j,Sc(this.g),delete this.g,oe.$.N.call(this)};function kd(e){wc.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}xt(kd,wc);function Md(){Tc.call(this),this.status=1}xt(Md,Tc);function vr(e){this.g=e}xt(vr,Od);vr.prototype.Ba=function(){kt(this.g,"a")};vr.prototype.Aa=function(e){kt(this.g,new kd(e))};vr.prototype.za=function(e){kt(this.g,new Md)};vr.prototype.ya=function(){kt(this.g,"b")};function ME(){this.blockSize=-1}function me(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}xt(me,ME);me.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function No(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[1]+3905402710&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[5]+1200080426&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[9]+2336552879&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[13]+4254626195&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(s^i&(n^s))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[6]+3225465664&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[10]+38016083&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[14]+3275163606&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[2]+4243563512&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(n^s^i)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[8]+2272392833&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[4]+1272893353&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[0]+3936430074&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[12]+3873151461&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(s^(n|~i))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[7]+1126891415&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[3]+2399980690&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[15]+4264355552&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[11]+3174756917&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}me.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(s==0)for(;i<=n;)No(this,e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){No(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){No(this,r),s=0;break}}this.h=s,this.i+=t};me.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function lt(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=e[s]|0;r&&i==t||(n[s]=i,r=!1)}this.g=n}var LE={};function bc(e){return-128<=e&&128>e?Kv(e,function(t){return new lt([t|0],0>t?-1:0)}):new lt([e|0],0>e?-1:0)}function Pe(e){if(isNaN(e)||!isFinite(e))return Zn;if(0>e)return Ot(Pe(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ea;return new lt(t,0)}function Ld(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Ot(Ld(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Pe(Math.pow(t,8)),r=Zn,s=0;s<e.length;s+=8){var i=Math.min(8,e.length-s),o=parseInt(e.substring(s,s+i),t);8>i?(i=Pe(Math.pow(t,i)),r=r.R(i).add(Pe(o))):(r=r.R(n),r=r.add(Pe(o)))}return r}var Ea=4294967296,Zn=bc(0),wa=bc(1),Ru=bc(16777216);V=lt.prototype;V.ea=function(){if(ae(this))return-Ot(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ea+r)*t,t*=Ea}return e};V.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(ke(this))return"0";if(ae(this))return"-"+Ot(this).toString(e);for(var t=Pe(Math.pow(e,6)),n=this,r="";;){var s=vi(n,t).g;n=yi(n,s.R(t));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=s,ke(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};V.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function ke(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function ae(e){return e.h==-1}V.X=function(e){return e=yi(this,e),ae(e)?-1:ke(e)?0:1};function Ot(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new lt(n,~e.h).add(wa)}V.abs=function(){return ae(this)?Ot(this):this};V.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(this.D(s)&65535)+(e.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new lt(n,n[n.length-1]&-2147483648?-1:0)};function yi(e,t){return e.add(Ot(t))}V.R=function(e){if(ke(this)||ke(e))return Zn;if(ae(this))return ae(e)?Ot(this).R(Ot(e)):Ot(Ot(this).R(e));if(ae(e))return Ot(this.R(Ot(e)));if(0>this.X(Ru)&&0>e.X(Ru))return Pe(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(s)>>>16,c=e.D(s)&65535;n[2*r+2*s]+=o*c,Bs(n,2*r+2*s),n[2*r+2*s+1]+=i*c,Bs(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Bs(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Bs(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new lt(n,0)};function Bs(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Vr(e,t){this.g=e,this.h=t}function vi(e,t){if(ke(t))throw Error("division by zero");if(ke(e))return new Vr(Zn,Zn);if(ae(e))return t=vi(Ot(e),t),new Vr(Ot(t.g),Ot(t.h));if(ae(t))return t=vi(e,Ot(t)),new Vr(Ot(t.g),t.h);if(30<e.g.length){if(ae(e)||ae(t))throw Error("slowDivide_ only works with positive integers.");for(var n=wa,r=t;0>=r.X(e);)n=Su(n),r=Su(r);var s=Un(n,1),i=Un(r,1);for(r=Un(r,2),n=Un(n,2);!ke(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=Un(r,1),n=Un(n,1)}return t=yi(e,s.R(t)),new Vr(s,t)}for(s=Zn;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Pe(n),o=i.R(t);ae(o)||0<o.X(e);)n-=r,i=Pe(n),o=i.R(t);ke(i)&&(i=wa),s=s.add(i),e=yi(e,o)}return new Vr(s,e)}V.gb=function(e){return vi(this,e).h};V.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new lt(n,this.h&e.h)};V.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new lt(n,this.h|e.h)};V.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new lt(n,this.h^e.h)};function Su(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new lt(n,e.h)}function Un(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new lt(s,e.h)}_i.prototype.createWebChannel=_i.prototype.g;oe.prototype.send=oe.prototype.u;oe.prototype.open=oe.prototype.m;oe.prototype.close=oe.prototype.close;Hi.NO_ERROR=0;Hi.TIMEOUT=8;Hi.HTTP_ERROR=6;td.COMPLETE="complete";ed.EventType=vs;vs.OPEN="a";vs.CLOSE="b";vs.ERROR="c";vs.MESSAGE="d";Dt.prototype.listen=Dt.prototype.O;vt.prototype.listenOnce=vt.prototype.P;vt.prototype.getLastError=vt.prototype.Sa;vt.prototype.getLastErrorCode=vt.prototype.Ia;vt.prototype.getStatus=vt.prototype.da;vt.prototype.getResponseJson=vt.prototype.Wa;vt.prototype.getResponseText=vt.prototype.ja;vt.prototype.send=vt.prototype.ha;vt.prototype.setWithCredentials=vt.prototype.Oa;me.prototype.digest=me.prototype.l;me.prototype.reset=me.prototype.reset;me.prototype.update=me.prototype.j;lt.prototype.add=lt.prototype.add;lt.prototype.multiply=lt.prototype.R;lt.prototype.modulo=lt.prototype.gb;lt.prototype.compare=lt.prototype.X;lt.prototype.toNumber=lt.prototype.ea;lt.prototype.toString=lt.prototype.toString;lt.prototype.getBits=lt.prototype.D;lt.fromNumber=Pe;lt.fromString=Ld;var FE=function(){return new _i},UE=function(){return Ki()},Oo=Hi,BE=td,$E=On,Cu={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},$s=ed,jE=vt,qE=me,tr=lt;const Pu="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Er="10.7.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn=new bf("@firebase/firestore");function Dr(){return Pn.logLevel}function D(e,...t){if(Pn.logLevel<=et.DEBUG){const n=t.map(Vc);Pn.debug(`Firestore (${Er}): ${e}`,...n)}}function De(e,...t){if(Pn.logLevel<=et.ERROR){const n=t.map(Vc);Pn.error(`Firestore (${Er}): ${e}`,...n)}}function lr(e,...t){if(Pn.logLevel<=et.WARN){const n=t.map(Vc);Pn.warn(`Firestore (${Er}): ${e}`,...n)}}function Vc(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(e="Unexpected state"){const t=`FIRESTORE (${Er}) INTERNAL ASSERTION FAILED: `+e;throw De(t),new Error(t)}function Rt(e,t){e||W()}function rt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends _r{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class zE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Bt.UNAUTHENTICATED))}shutdown(){}}class KE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HE{constructor(t){this.t=t,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rn,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rn)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt(typeof r.accessToken=="string"),new Fd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Rt(t===null||typeof t=="string"),new Bt(t)}}class GE{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class WE{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new GE(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YE{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=i=>{i.error!=null&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Rt(typeof n.token=="string"),this.R=n.token,new QE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=XE(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%t.length))}return r}}function at(e,t){return e<t?-1:e>t?1:0}function ur(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new M(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new M(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new M(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new M(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Vt.fromMillis(Date.now())}static fromDate(t){return Vt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Vt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?at(this.nanoseconds,t.nanoseconds):at(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.timestamp=t}static fromTimestamp(t){return new G(t)}static min(){return new G(new Vt(0,0))}static max(){return new G(new Vt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(t,n,r){n===void 0?n=0:n>t.length&&W(),r===void 0?r=t.length-n:r>t.length-n&&W(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return us.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof us?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=t.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class yt extends us{construct(t,n,r){return new yt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new M(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new yt(n)}static emptyPath(){return new yt([])}}const ZE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends us{construct(t,n,r){return new zt(t,n,r)}static isValidIdentifier(t){return ZE.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zt(["__name__"])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new M(A.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new M(A.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new M(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new M(A.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new zt(n)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.path=t}static fromPath(t){return new j(yt.fromString(t))}static fromName(t){return new j(yt.fromString(t).popFirst(5))}static empty(){return new j(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&yt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return yt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new j(new yt(t.slice()))}}function tw(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=G.fromTimestamp(r===1e9?new Vt(n+1,0):new Vt(n,r));return new sn(s,j.empty(),t)}function ew(e){return new sn(e.readTime,e.key,-1)}class sn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new sn(G.min(),j.empty(),-1)}static max(){return new sn(G.max(),j.empty(),-1)}}function nw(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=j.comparator(e.documentKey,t.documentKey),n!==0?n:at(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(e){if(e.code!==A.FAILED_PRECONDITION||e.message!==rw)throw e;D("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new E((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof E?n:E.resolve(n)}catch(n){return E.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):E.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):E.reject(n)}static resolve(t){return new E((n,r)=>{n(t)})}static reject(t){return new E((n,r)=>{r(t)})}static waitFor(t){return new E((n,r)=>{let s=0,i=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(t){let n=E.resolve(!1);for(const r of t)n=n.next(s=>s?E.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new E((r,s)=>{const i=t.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(t[l]).next(u=>{o[l]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(t,n){return new E((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new rn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new zr(t,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Nc(r.target.error);this.V.reject(new zr(t,s))}}static open(t,n,r,s){try{return new xc(n,t.transaction(s,r))}catch(i){throw new zr(n,i)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(D("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new ow(n)}}class vn{constructor(t,n,r){this.name=t,this.version=n,this.p=r,vn.S(ui())===12.2&&De("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return D("SimpleDb","Removing database:",t),gn(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!Cf())return!1;if(vn.C())return!0;const t=ui(),n=vn.S(t),r=0<n&&n<10,s=vn.v(t),i=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||i)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(t){const n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(t){return this.db||(D("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new zr(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new M(A.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new M(A.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new zr(t,o))},s.onupgradeneeded=i=>{D("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{D("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(t);const a=xc.open(this.db,t,i?"readonly":"readwrite",r),c=s(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),E.reject(l))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(D("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class iw{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return gn(this.k.delete())}}class zr extends M{constructor(t,n){super(A.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function As(e){return e.name==="IndexedDbTransactionError"}class ow{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(D("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(D("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),gn(r)}add(t){return D("SimpleDb","ADD",this.store.name,t,t),gn(this.store.add(t))}get(t){return gn(this.store.get(t)).next(n=>(n===void 0&&(n=null),D("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return D("SimpleDb","DELETE",this.store.name,t),gn(this.store.delete(t))}count(){return D("SimpleDb","COUNT",this.store.name),gn(this.store.count())}W(t,n){const r=this.options(t,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new E((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,c)=>{o.push(c)}).next(()=>o)}}j(t,n){const r=this.store.getAll(t,n===null?void 0:n);return new E((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(t,n){D("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(t,n){let r;n?r=t:(r={},n=t);const s=this.cursor(r);return this.G(s,n)}Z(t){const n=this.cursor({});return new E((r,s)=>{n.onerror=i=>{const o=Nc(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(t,n){const r=[];return new E((s,i)=>{t.onerror=o=>{i(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new iw(a),l=n(a.primaryKey,a.value,c);if(l instanceof E){const u=l.catch(h=>(c.done(),E.reject(h)));r.push(u)}c.isDone?s():c.$===null?a.continue():a.continue(c.$)}}).next(()=>E.waitFor(r))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const r=this.store.index(t.index);return t.J?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function gn(e){return new E((t,n)=>{e.onsuccess=r=>{const s=r.target.result;t(s)},e.onerror=r=>{const s=Nc(r.target.error);n(s)}})}let bu=!1;function Nc(e){const t=vn.S(ui());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){const r=new M("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bu||(bu=!0,setTimeout(()=>{throw r},0)),r}}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}Oc._e=-1;function eo(e){return e==null}function Ei(e){return e===0&&1/e==-1/0}function aw(e){return typeof e=="number"&&Number.isInteger(e)&&!Ei(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rs(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ud(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t,n){this.comparator=t,this.root=n||Nt.EMPTY}insert(t,n){return new Et(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(t){return new Et(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new js(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new js(this.root,t,this.comparator,!1)}getReverseIterator(){return new js(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new js(this.root,t,this.comparator,!0)}}class js{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Nt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Nt.RED,this.left=s??Nt.EMPTY,this.right=i??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Nt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();const t=this.left.check();if(t!==this.right.check())throw W();return t+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(t,n,r,s,i){return this}insert(t,n,r){return new Nt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t){this.comparator=t,this.data=new Et(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Du(this.data.getIterator())}getIteratorFrom(t){return new Du(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Mt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Mt(this.comparator);return n.data=t,n}}class Du{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.fields=t,t.sort(zt.comparator)}static empty(){return new Ye([])}unionWith(t){let n=new Mt(zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Ye(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ur(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Bd("Invalid base64 string: "+i):i}}(t);return new Gt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(t);return new Gt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return at(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const cw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function on(e){if(Rt(!!e),typeof e=="string"){let t=0;const n=cw.exec(e);if(Rt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:It(e.seconds),nanos:It(e.nanos)}}function It(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function bn(e){return typeof e=="string"?Gt.fromBase64String(e):Gt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Mc(e){const t=e.mapValue.fields.__previous_value__;return kc(t)?Mc(t):t}function hs(e){const t=on(e.mapValue.fields.__local_write_time__.timestampValue);return new Vt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(t,n,r,s,i,o,a,c,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class fs{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new fs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof fs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Vn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?kc(e)?4:uw(e)?9007199254740991:10:W()}function xe(e,t){if(e===t)return!0;const n=Vn(e);if(n!==Vn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hs(e).isEqual(hs(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=on(s.timestampValue),a=on(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return bn(s.bytesValue).isEqual(bn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return It(s.geoPointValue.latitude)===It(i.geoPointValue.latitude)&&It(s.geoPointValue.longitude)===It(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return It(s.integerValue)===It(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=It(s.doubleValue),a=It(i.doubleValue);return o===a?Ei(o)===Ei(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return ur(e.arrayValue.values||[],t.arrayValue.values||[],xe);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Vu(o)!==Vu(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!xe(o[c],a[c])))return!1;return!0}(e,t);default:return W()}}function ds(e,t){return(e.values||[]).find(n=>xe(n,t))!==void 0}function hr(e,t){if(e===t)return 0;const n=Vn(e),r=Vn(t);if(n!==r)return at(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(e.booleanValue,t.booleanValue);case 2:return function(i,o){const a=It(i.integerValue||i.doubleValue),c=It(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return xu(e.timestampValue,t.timestampValue);case 4:return xu(hs(e),hs(t));case 5:return at(e.stringValue,t.stringValue);case 6:return function(i,o){const a=bn(i),c=bn(o);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=at(a[l],c[l]);if(u!==0)return u}return at(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const a=at(It(i.latitude),It(o.latitude));return a!==0?a:at(It(i.longitude),It(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){const a=i.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){const u=hr(a[l],c[l]);if(u)return u}return at(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===qs.mapValue&&o===qs.mapValue)return 0;if(i===qs.mapValue)return 1;if(o===qs.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){const d=at(c[h],u[h]);if(d!==0)return d;const g=hr(a[c[h]],l[u[h]]);if(g!==0)return g}return at(c.length,u.length)}(e.mapValue,t.mapValue);default:throw W()}}function xu(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return at(e,t);const n=on(e),r=on(t),s=at(n.seconds,r.seconds);return s!==0?s:at(n.nanos,r.nanos)}function fr(e){return Ta(e)}function Ta(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=on(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return bn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return j.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ta(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ta(n.fields[o])}`;return s+"}"}(e.mapValue):W()}function Nu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ia(e){return!!e&&"integerValue"in e}function Lc(e){return!!e&&"arrayValue"in e}function Ou(e){return!!e&&"nullValue"in e}function ku(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ko(e){return!!e&&"mapValue"in e}function Kr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Rs(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Kr(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Kr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function uw(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(t){this.value=t}static empty(){return new Se({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!ko(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Kr(n)}setAll(t){let n=zt.emptyPath(),r={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Kr(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());ko(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return xe(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];ko(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Rs(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new Se(Kr(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t,n,r,s,i,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new $t(t,0,G.min(),G.min(),G.min(),Se.empty(),0)}static newFoundDocument(t,n,r,s){return new $t(t,1,n,G.min(),r,s,0)}static newNoDocument(t,n){return new $t(t,2,n,G.min(),G.min(),Se.empty(),0)}static newUnknownDocument(t,n){return new $t(t,3,n,G.min(),G.min(),Se.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Se.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Se.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof $t&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(t,n){this.position=t,this.inclusive=n}}function Mu(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(i.field.isKeyField()?r=j.comparator(j.fromName(o.referenceValue),n.key):r=hr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Lu(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!xe(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(t,n="asc"){this.field=t,this.dir=n}}function hw(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{}class At extends $d{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new dw(t,n,r):n==="array-contains"?new mw(t,r):n==="in"?new _w(t,r):n==="not-in"?new yw(t,r):n==="array-contains-any"?new vw(t,r):new At(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new pw(t,r):new gw(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hr(n,this.value)):n!==null&&Vn(this.value)===Vn(n)&&this.matchesComparison(hr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _e extends $d{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new _e(t,n)}matches(t){return jd(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function jd(e){return e.op==="and"}function qd(e){return fw(e)&&jd(e)}function fw(e){for(const t of e.filters)if(t instanceof _e)return!1;return!0}function Aa(e){if(e instanceof At)return e.field.canonicalString()+e.op.toString()+fr(e.value);if(qd(e))return e.filters.map(t=>Aa(t)).join(",");{const t=e.filters.map(n=>Aa(n)).join(",");return`${e.op}(${t})`}}function zd(e,t){return e instanceof At?function(r,s){return s instanceof At&&r.op===s.op&&r.field.isEqual(s.field)&&xe(r.value,s.value)}(e,t):e instanceof _e?function(r,s){return s instanceof _e&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&zd(o,s.filters[a]),!0):!1}(e,t):void W()}function Kd(e){return e instanceof At?function(n){return`${n.field.canonicalString()} ${n.op} ${fr(n.value)}`}(e):e instanceof _e?function(n){return n.op.toString()+" {"+n.getFilters().map(Kd).join(" ,")+"}"}(e):"Filter"}class dw extends At{constructor(t,n,r){super(t,n,r),this.key=j.fromName(r.referenceValue)}matches(t){const n=j.comparator(t.key,this.key);return this.matchesComparison(n)}}class pw extends At{constructor(t,n){super(t,"in",n),this.keys=Hd("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class gw extends At{constructor(t,n){super(t,"not-in",n),this.keys=Hd("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Hd(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>j.fromName(r.referenceValue))}class mw extends At{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Lc(n)&&ds(n.arrayValue,this.value)}}class _w extends At{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ds(this.value.arrayValue,n)}}class yw extends At{constructor(t,n){super(t,"not-in",n)}matches(t){if(ds(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!ds(this.value.arrayValue,n)}}class vw extends At{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Lc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ds(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(t,n=null,r=[],s=[],i=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function Fu(e,t=null,n=[],r=[],s=null,i=null,o=null){return new Ew(e,t,n,r,s,i,o)}function Fc(e){const t=rt(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Aa(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),eo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>fr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>fr(r)).join(",")),t.ce=n}return t.ce}function Uc(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!hw(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!zd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Lu(e.startAt,t.startAt)&&Lu(e.endAt,t.endAt)}function Ra(e){return j.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(t,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function ww(e,t,n,r,s,i,o,a){return new Ss(e,t,n,r,s,i,o,a)}function Gd(e){return new Ss(e)}function Uu(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Wd(e){return e.collectionGroup!==null}function Hr(e){const t=rt(e);if(t.le===null){t.le=[];const n=new Set;for(const i of t.explicitOrderBy)t.le.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mt(zt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.le.push(new Ti(i,r))}),n.has(zt.keyField().canonicalString())||t.le.push(new Ti(zt.keyField(),r))}return t.le}function be(e){const t=rt(e);return t.he||(t.he=Tw(t,Hr(e))),t.he}function Tw(e,t){if(e.limitType==="F")return Fu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ti(s.field,i)});const n=e.endAt?new wi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new wi(e.startAt.position,e.startAt.inclusive):null;return Fu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Sa(e,t){const n=e.filters.concat([t]);return new Ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ca(e,t,n){return new Ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function no(e,t){return Uc(be(e),be(t))&&e.limitType===t.limitType}function Qd(e){return`${Fc(be(e))}|lt:${e.limitType}`}function qn(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Kd(s)).join(", ")}]`),eo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>fr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>fr(s)).join(",")),`Target(${r})`}(be(e))}; limitType=${e.limitType})`}function ro(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):j.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of Hr(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(o,a,c){const l=Mu(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Hr(r),s)||r.endAt&&!function(o,a,c){const l=Mu(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Hr(r),s))}(e,t)}function Iw(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Yd(e){return(t,n)=>{let r=!1;for(const s of Hr(e)){const i=Aw(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Aw(e,t,n){const r=e.field.isKeyField()?j.comparator(t.key,n.key):function(i,o,a){const c=o.data.field(i),l=a.data.field(i);return c!==null&&l!==null?hr(c,l):W()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Rs(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Ud(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=new Et(j.comparator);function an(){return Rw}const Xd=new Et(j.comparator);function kr(...e){let t=Xd;for(const n of e)t=t.insert(n.key,n);return t}function Sw(e){let t=Xd;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function En(){return Gr()}function Jd(){return Gr()}function Gr(){return new wr(e=>e.toString(),(e,t)=>e.isEqual(t))}const Cw=new Mt(j.comparator);function nt(...e){let t=Cw;for(const n of e)t=t.add(n);return t}const Pw=new Mt(at);function bw(){return Pw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ei(t)?"-0":t}}function tp(e){return{integerValue:""+e}}function Vw(e,t){return aw(t)?tp(t):Zd(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this._=void 0}}function Dw(e,t,n){return e instanceof Pa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&kc(i)&&(i=Mc(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof Ii?ep(e,t):e instanceof Ai?np(e,t):function(s,i){const o=Nw(s,i),a=Bu(o)+Bu(s.Ie);return Ia(o)&&Ia(s.Ie)?tp(a):Zd(s.serializer,a)}(e,t)}function xw(e,t,n){return e instanceof Ii?ep(e,t):e instanceof Ai?np(e,t):n}function Nw(e,t){return e instanceof ba?function(r){return Ia(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class Pa extends so{}class Ii extends so{constructor(t){super(),this.elements=t}}function ep(e,t){const n=rp(t);for(const r of e.elements)n.some(s=>xe(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ai extends so{constructor(t){super(),this.elements=t}}function np(e,t){let n=rp(t);for(const r of e.elements)n=n.filter(s=>!xe(s,r));return{arrayValue:{values:n}}}class ba extends so{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function Bu(e){return It(e.integerValue||e.doubleValue)}function rp(e){return Lc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function Ow(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof Ii&&s instanceof Ii||r instanceof Ai&&s instanceof Ai?ur(r.elements,s.elements,xe):r instanceof ba&&s instanceof ba?xe(r.Ie,s.Ie):r instanceof Pa&&s instanceof Pa}(e.transform,t.transform)}class An{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new An}static exists(t){return new An(void 0,t)}static updateTime(t){return new An(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Zs(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Bc{}function sp(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Mw(e.key,An.none()):new $c(e.key,e.data,An.none());{const n=e.data,r=Se.empty();let s=new Mt(zt.comparator);for(let i of t.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new io(e.key,r,new Ye(s.toArray()),An.none())}}function kw(e,t,n){e instanceof $c?function(s,i,o){const a=s.value.clone(),c=ju(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof io?function(s,i,o){if(!Zs(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=ju(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(ip(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Wr(e,t,n,r){return e instanceof $c?function(i,o,a,c){if(!Zs(i.precondition,o))return a;const l=i.value.clone(),u=qu(i.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof io?function(i,o,a,c){if(!Zs(i.precondition,o))return a;const l=qu(i.fieldTransforms,c,o),u=o.data;return u.setAll(ip(i)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(i,o,a){return Zs(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function $u(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ur(r,s,(i,o)=>Ow(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class $c extends Bc{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class io extends Bc{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ip(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function ju(e,t,n){const r=new Map;Rt(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,xw(o,a,n[s]))}return r}function qu(e,t,n){const r=new Map;for(const s of e){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Dw(i,o,t))}return r}class Mw extends Bc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&kw(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Wr(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Wr(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Jd();return this.mutations.forEach(s=>{const i=t.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=sp(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),nt())}isEqual(t){return this.batchId===t.batchId&&ur(this.mutations,t.mutations,(n,r)=>$u(n,r))&&ur(this.baseMutations,t.baseMutations,(n,r)=>$u(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Z;function op(e){if(e===void 0)return De("GRPC error has no .code"),A.UNKNOWN;switch(e){case Tt.OK:return A.OK;case Tt.CANCELLED:return A.CANCELLED;case Tt.UNKNOWN:return A.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return A.INTERNAL;case Tt.UNAVAILABLE:return A.UNAVAILABLE;case Tt.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Tt.NOT_FOUND:return A.NOT_FOUND;case Tt.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Tt.ABORTED:return A.ABORTED;case Tt.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Tt.DATA_LOSS:return A.DATA_LOSS;default:return W()}}(Z=Tt||(Tt={}))[Z.OK=0]="OK",Z[Z.CANCELLED=1]="CANCELLED",Z[Z.UNKNOWN=2]="UNKNOWN",Z[Z.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Z[Z.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Z[Z.NOT_FOUND=5]="NOT_FOUND",Z[Z.ALREADY_EXISTS=6]="ALREADY_EXISTS",Z[Z.PERMISSION_DENIED=7]="PERMISSION_DENIED",Z[Z.UNAUTHENTICATED=16]="UNAUTHENTICATED",Z[Z.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Z[Z.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Z[Z.ABORTED=10]="ABORTED",Z[Z.OUT_OF_RANGE=11]="OUT_OF_RANGE",Z[Z.UNIMPLEMENTED=12]="UNIMPLEMENTED",Z[Z.INTERNAL=13]="INTERNAL",Z[Z.UNAVAILABLE=14]="UNAVAILABLE",Z[Z.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=new tr([4294967295,4294967295],0);function zu(e){const t=Bw().encode(e),n=new qE;return n.update(t),new Uint8Array(n.digest())}function Ku(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new tr([n,r],0),new tr([s,i],0)]}class jc{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mr(`Invalid padding: ${n}`);if(r<0)throw new Mr(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Mr(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Mr(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=tr.fromNumber(this.Te)}de(t,n,r){let s=t.add(n.multiply(tr.fromNumber(r)));return s.compare($w)===1&&(s=new tr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=zu(t),[r,s]=Ku(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new jc(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=zu(t),[r,s]=Ku(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Mr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Cs.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new oo(G.min(),s,new Et(at),an(),nt())}}class Cs{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Cs(r,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t,n,r,s){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=s}}class ap{constructor(t,n){this.targetId=t,this.fe=n}}class cp{constructor(t,n,r=Gt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Hu{constructor(){this.ge=0,this.pe=Wu(),this.ye=Gt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=nt(),n=nt(),r=nt();return this.pe.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:W()}}),new Cs(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=Wu()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Rt(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class jw{constructor(t){this.Le=t,this.ke=new Map,this.qe=an(),this.Qe=Gu(),this.Ke=new Et(at)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:W()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(t){const n=t.targetId,r=t.fe.count,s=this.Ye(n);if(s){const i=s.target;if(Ra(i))if(r===0){const o=new j(i.path);this.We(n,o,$t.newNoDocument(o,G.min()))}else Rt(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),c=a?this.et(a,t,o):1;if(c!==0){this.He(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=bn(r).toUint8Array()}catch(c){if(c instanceof Bd)return lr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new jc(o,s,i)}catch(c){return lr(c instanceof Mr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(a)||(this.We(n,i,null),s++)}),s}it(t){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&Ra(a.target)){const c=new j(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,$t.newNoDocument(c,t))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=nt();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(t));const s=new oo(t,n,this.Ke,this.qe,r);return this.qe=an(),this.Qe=Gu(),this.Ke=new Et(at),s}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const s=this.ze(t);this.st(t,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new Hu,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new Mt(at),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||D("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new Hu),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Gu(){return new Et(j.comparator)}function Wu(){return new Et(j.comparator)}const qw={asc:"ASCENDING",desc:"DESCENDING"},zw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kw={and:"AND",or:"OR"};class Hw{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Va(e,t){return e.useProto3Json||eo(t)?t:{value:t}}function Da(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function er(e){return Rt(!!e),G.fromTimestamp(function(n){const r=on(n);return new Vt(r.seconds,r.nanos)}(e))}function up(e,t){return xa(e,t).canonicalString()}function xa(e,t){const n=function(s){return new yt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function hp(e){const t=yt.fromString(e);return Rt(mp(t)),t}function Mo(e,t){const n=hp(t);if(n.get(1)!==e.databaseId.projectId)throw new M(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new M(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new j(dp(n))}function fp(e,t){return up(e.databaseId,t)}function Gw(e){const t=hp(e);return t.length===4?yt.emptyPath():dp(t)}function Qu(e){return new yt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dp(e){return Rt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Ww(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(l,u){return l.useProto3Json?(Rt(u===void 0||typeof u=="string"),Gt.fromBase64String(u||"")):(Rt(u===void 0||u instanceof Uint8Array),Gt.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const u=l.code===void 0?A.UNKNOWN:op(l.code);return new M(u,l.message||"")}(o);n=new cp(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Mo(e,r.document.name),i=er(r.document.updateTime),o=r.document.createTime?er(r.document.createTime):G.min(),a=new Se({mapValue:{fields:r.document.fields}}),c=$t.newFoundDocument(s,i,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new ti(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Mo(e,r.document),i=r.readTime?er(r.readTime):G.min(),o=$t.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ti([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Mo(e,r.document),i=r.removedTargetIds||[];n=new ti([],i,s,null)}else{if(!("filter"in t))return W();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Uw(s,i),a=r.targetId;n=new ap(a,o)}}return n}function Qw(e,t){return{documents:[fp(e,t.path)]}}function Yw(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fp(e,s);const i=function(l){if(l.length!==0)return gp(_e.create(l,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(u=>function(d){return{field:zn(d.field),direction:Zw(d.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Va(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ut:n,parent:s}}function Xw(e){let t=Gw(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Rt(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let i=[];n.where&&(i=function(h){const d=pp(h);return d instanceof _e&&qd(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(I){return new Ti(Kn(I.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,eo(d)?null:d}(n.limit));let c=null;n.startAt&&(c=function(h){const d=!!h.before,g=h.values||[];return new wi(g,d)}(n.startAt));let l=null;return n.endAt&&(l=function(h){const d=!h.before,g=h.values||[];return new wi(g,d)}(n.endAt)),ww(t,s,o,i,a,"F",c,l)}function Jw(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function pp(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Kn(n.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Kn(n.unaryFilter.field);return At.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Kn(n.unaryFilter.field);return At.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Kn(n.unaryFilter.field);return At.create(o,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(e):e.fieldFilter!==void 0?function(n){return At.create(Kn(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return _e.create(n.compositeFilter.filters.map(r=>pp(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return W()}}(n.compositeFilter.op))}(e):W()}function Zw(e){return qw[e]}function tT(e){return zw[e]}function eT(e){return Kw[e]}function zn(e){return{fieldPath:e.canonicalString()}}function Kn(e){return zt.fromServerFormat(e.fieldPath)}function gp(e){return e instanceof At?function(n){if(n.op==="=="){if(ku(n.value))return{unaryFilter:{field:zn(n.field),op:"IS_NAN"}};if(Ou(n.value))return{unaryFilter:{field:zn(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ku(n.value))return{unaryFilter:{field:zn(n.field),op:"IS_NOT_NAN"}};if(Ou(n.value))return{unaryFilter:{field:zn(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zn(n.field),op:tT(n.op),value:n.value}}}(e):e instanceof _e?function(n){const r=n.getFilters().map(s=>gp(s));return r.length===1?r[0]:{compositeFilter:{op:eT(n.op),filters:r}}}(e):W()}function mp(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t,n,r,s,i=G.min(),o=G.min(),a=Gt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new Xe(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Xe(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Xe(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Xe(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(t){this.ct=t}}function rT(e){const t=Xw({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Ca(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this._n=new iT}addToCollectionParentIndex(t,n){return this._n.add(n),E.resolve()}getCollectionParents(t,n){return E.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return E.resolve()}deleteFieldIndex(t,n){return E.resolve()}deleteAllFieldIndexes(t){return E.resolve()}createTargetIndexes(t,n){return E.resolve()}getDocumentsMatchingTarget(t,n){return E.resolve(null)}getIndexType(t,n){return E.resolve(0)}getFieldIndexes(t,n){return E.resolve([])}getNextCollectionGroupToUpdate(t){return E.resolve(null)}getMinOffset(t,n){return E.resolve(sn.min())}getMinOffsetFromCollectionGroup(t,n){return E.resolve(sn.min())}updateCollectionGroup(t,n,r){return E.resolve()}updateIndexEntries(t,n){return E.resolve()}}class iT{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Mt(yt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Mt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new dr(0)}static Bn(){return new dr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.changes=new wr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,$t.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?E.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&Wr(r.mutation,s,Ye.empty(),Vt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,nt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=nt()){const s=En();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let o=kr();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=En();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,nt()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,s){let i=an();const o=Gr(),a=function(){return Gr()}();return n.forEach((c,l)=>{const u=r.get(l.key);s.has(l.key)&&(u===void 0||u.mutation instanceof io)?i=i.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Wr(u.mutation,l,u.mutation.getFieldMask(),Vt.now())):o.set(l.key,Ye.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new aT(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Gr();let s=new Et((o,a)=>o-a),i=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=r.get(c)||Ye.empty();u=a.applyToLocalView(l,u),r.set(c,u);const h=(s.get(a.batchId)||nt()).add(c);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=Jd();u.forEach(d=>{if(!i.has(d)){const g=sp(n.get(d),r.get(d));g!==null&&h.set(d,g),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,h))}return E.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Wd(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):E.resolve(En());let a=-1,c=i;return o.next(l=>E.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?E.resolve():this.remoteDocumentCache.getEntry(t,u).next(d=>{c=c.insert(u,d)}))).next(()=>this.populateOverlays(t,l,i)).next(()=>this.computeViews(t,c,l,nt())).next(u=>({batchId:a,changes:Sw(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new j(n)).next(r=>{let s=kr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let o=kr();return this.indexManager.getCollectionParents(t,i).next(a=>E.forEach(a,c=>{const l=function(h,d){return new Ss(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,l,r,s).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(o=>{i.forEach((c,l)=>{const u=l.getKey();o.get(u)===null&&(o=o.insert(u,$t.newInvalidDocument(u)))});let a=kr();return o.forEach((c,l)=>{const u=i.get(c);u!==void 0&&Wr(u.mutation,l,Ye.empty(),Vt.now()),ro(n,l)&&(a=a.insert(c,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return E.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:er(s.createTime)}}(n)),E.resolve()}getNamedQuery(t,n){return E.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(s){return{name:s.name,query:rT(s.bundledQuery),readTime:er(s.readTime)}}(n)),E.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(){this.overlays=new Et(j.comparator),this.hr=new Map}getOverlay(t,n){return E.resolve(this.overlays.get(n))}getOverlays(t,n){const r=En();return E.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.ht(t,n,i)}),E.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),E.resolve()}getOverlaysForCollection(t,n,r){const s=En(),i=n.length+1,o=new j(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return E.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Et((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=i.get(l.largestBatchId);u===null&&(u=En(),i=i.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=En(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=s)););return E.resolve(a)}ht(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Fw(n,r));let i=this.hr.get(n);i===void 0&&(i=nt(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this.Pr=new Mt(bt.Ir),this.Tr=new Mt(bt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new bt(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new bt(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new j(new yt([])),r=new bt(n,t),s=new bt(n,t+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new j(new yt([])),r=new bt(n,t),s=new bt(n,t+1);let i=nt();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new bt(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class bt{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return j.comparator(t.key,n.key)||at(t.pr,n.pr)}static Er(t,n){return at(t.pr,n.pr)||j.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Mt(bt.Ir)}checkEmpty(t){return E.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Lw(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new bt(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return E.resolve(o)}lookupMutationBatch(t,n){return E.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.br(r),i=s<0?0:s;return E.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new bt(n,0),s=new bt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),E.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Mt(at);return n.forEach(s=>{const i=new bt(s,0),o=new bt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),E.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;j.isDocumentKey(i)||(i=i.child(""));const o=new bt(new j(i),0);let a=new Mt(at);return this.wr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(a=a.add(c.pr)),!0)},o),E.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){Rt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return E.forEach(n.mutations,s=>{const i=new bt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new bt(n,0),s=this.wr.firstAfterOrEqual(r);return E.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,E.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t){this.vr=t,this.docs=function(){return new Et(j.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return E.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(t,n){let r=an();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():$t.newInvalidDocument(s))}),E.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=an();const o=n.path,a=new j(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||nw(ew(u),r)<=0||(s.has(u.key)||ro(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return E.resolve(i)}getAllFromCollectionGroup(t,n,r,s){W()}Fr(t,n){return E.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new dT(this)}getSize(t){return E.resolve(this.size)}}class dT extends oT{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(t,s)):this.ar.removeEntry(r)}),E.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t){this.persistence=t,this.Mr=new wr(n=>Fc(n),Uc),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Or=0,this.Nr=new qc,this.targetCount=0,this.Br=dr.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,s)=>n(s)),E.resolve()}getLastRemoteSnapshotVersion(t){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return E.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),E.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Br=new dr(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,E.resolve()}updateTargetData(t,n){return this.qn(n),E.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,E.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),E.waitFor(i).next(()=>s)}getTargetCount(t){return E.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return E.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),E.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(t,o))}),E.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),E.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return E.resolve(r)}containsKey(t,n){return E.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t,n){this.Lr={},this.overlays={},this.kr=new Oc(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new pT(this),this.indexManager=new sT,this.remoteDocumentCache=function(s){return new fT(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new nT(n),this.$r=new lT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new uT,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Lr[t.toKey()];return r||(r=new hT(n,this.referenceDelegate),this.Lr[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){D("MemoryPersistence","Starting transaction:",t);const s=new mT(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(t,n){return E.or(Object.values(this.Lr).map(r=>()=>r.containsKey(t,n)))}}class mT extends sw{constructor(t){super(),this.currentSequenceNumber=t}}class zc{constructor(t){this.persistence=t,this.zr=new qc,this.jr=null}static Hr(t){return new zc(t)}get Jr(){if(this.jr)return this.jr;throw W()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),E.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),E.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),E.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Jr,r=>{const s=j.fromPath(r);return this.Yr(t,s).next(i=>{i||n.removeEntry(s,G.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return E.or([()=>E.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(t,n){let r=nt(),s=nt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Kc(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Iy()?8:vn.v(ui())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ji(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(t,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new _T;return this.Ji(t,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>i.result)}Yi(t,n,r,s){return r.documentReadCount<this.Wi?(Dr()<=et.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",qn(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),E.resolve()):(Dr()<=et.DEBUG&&D("QueryEngine","Query:",qn(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Dr()<=et.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",qn(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,be(n))):E.resolve())}ji(t,n){if(Uu(n))return E.resolve(null);let r=be(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ca(n,null,"F"),r=be(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const o=nt(...i);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(c=>{const l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(t,Ca(n,null,"F")):this.es(t,l,n,c)}))})))}Hi(t,n,r,s){return Uu(n)||s.isEqual(G.min())?E.resolve(null):this.zi.getDocuments(t,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?E.resolve(null):(Dr()<=et.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),qn(n)),this.es(t,o,n,tw(s,-1)).next(a=>a))})}Zi(t,n){let r=new Mt(Yd(t));return n.forEach((s,i)=>{ro(t,i)&&(r=r.add(i))}),r}Xi(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(t,n,r){return Dr()<=et.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",qn(n)),this.zi.getDocumentsMatchingQuery(t,n,sn.min(),r)}es(t,n,r,s){return this.zi.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t,n,r,s){this.persistence=t,this.ts=n,this.serializer=s,this.ns=new Et(at),this.rs=new wr(i=>Fc(i),Uc),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new cT(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function ET(e,t,n,r){return new vT(e,t,n,r)}async function _p(e,t){const n=rt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=nt();for(const l of s){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of i){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function yp(e){const t=rt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function wT(e,t){const n=rt(e),r=t.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];t.targetChanges.forEach((u,h)=>{const d=s.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,u.addedDocuments,h)));let g=d.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(h)!==null?g=g.withResumeToken(Gt.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),s=s.insert(h,g),function(C,T,b){return C.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(d,g,u)&&a.push(n.Qr.updateTargetData(i,g))});let c=an(),l=nt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(TT(i,o,t.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!r.isEqual(G.min())){const u=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return E.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,l)).next(()=>c)}).then(i=>(n.ns=s,i))}function TT(e,t,n){let r=nt(),s=nt();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let o=an();return n.forEach((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(G.min())?(t.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(c),o=o.insert(a,c)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:s}})}function IT(e,t){const n=rt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,t).next(i=>i?(s=i,E.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new Xe(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function Na(e,t,n){const r=rt(e),s=r.ns.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!As(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(s.target)}function Yu(e,t,n){const r=rt(e);let s=G.min(),i=nt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){const h=rt(c),d=h.rs.get(u);return d!==void 0?E.resolve(h.ns.get(d)):h.Qr.getTargetData(l,u)}(r,o,be(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?s:G.min(),n?i:nt())).next(a=>(AT(r,Iw(t),a),{documents:a,hs:i})))}function AT(e,t,n){let r=e.ss.get(t)||G.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.ss.set(t,r)}class Xu{constructor(){this.activeTargetIds=bw()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class RT{constructor(){this.no=new Xu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Xu,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zs=null;function Lo(){return zs===null?zs=function(){return 268435456+Math.round(2147483648*Math.random())}():zs++,"0x"+zs.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class bT extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=Lo(),c=this.bo(n,r.toUriEncodedString());D("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,i,o),this.Co(n,c,l,s).then(u=>(D("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw lr("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",s),u})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Er}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=CT[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,r,s){const i=Lo();return new Promise((o,a)=>{const c=new jE;c.setWithCredentials(!0),c.listenOnce(BE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Oo.NO_ERROR:const u=c.getResponseJson();D(Ut,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(u)),o(u);break;case Oo.TIMEOUT:D(Ut,`RPC '${t}' ${i} timed out`),a(new M(A.DEADLINE_EXCEEDED,"Request time out"));break;case Oo.HTTP_ERROR:const h=c.getStatus();if(D(Ut,`RPC '${t}' ${i} failed with status:`,h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);const g=d==null?void 0:d.error;if(g&&g.status&&g.message){const I=function(T){const b=T.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(b)>=0?b:A.UNKNOWN}(g.status);a(new M(I,g.message))}else a(new M(A.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new M(A.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{D(Ut,`RPC '${t}' ${i} completed.`)}});const l=JSON.stringify(s);D(Ut,`RPC '${t}' ${i} sending request:`,s),c.send(n,"POST",l,r,15)})}Fo(t,n,r){const s=Lo(),i=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=FE(),a=UE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=i.join("");D(Ut,`Creating RPC '${t}' stream ${s}: ${u}`,c);const h=o.createWebChannel(u,c);let d=!1,g=!1;const I=new PT({lo:T=>{g?D(Ut,`Not sending because RPC '${t}' stream ${s} is closed:`,T):(d||(D(Ut,`Opening RPC '${t}' stream ${s} transport.`),h.open(),d=!0),D(Ut,`RPC '${t}' stream ${s} sending:`,T),h.send(T))},ho:()=>h.close()}),C=(T,b,L)=>{T.listen(b,B=>{try{L(B)}catch(Y){setTimeout(()=>{throw Y},0)}})};return C(h,$s.EventType.OPEN,()=>{g||D(Ut,`RPC '${t}' stream ${s} transport opened.`)}),C(h,$s.EventType.CLOSE,()=>{g||(g=!0,D(Ut,`RPC '${t}' stream ${s} transport closed`),I.Vo())}),C(h,$s.EventType.ERROR,T=>{g||(g=!0,lr(Ut,`RPC '${t}' stream ${s} transport errored:`,T),I.Vo(new M(A.UNAVAILABLE,"The operation could not be completed")))}),C(h,$s.EventType.MESSAGE,T=>{var b;if(!g){const L=T.data[0];Rt(!!L);const B=L,Y=B.error||((b=B[0])===null||b===void 0?void 0:b.error);if(Y){D(Ut,`RPC '${t}' stream ${s} received error:`,Y);const dt=Y.status;let q=function($e){const re=Tt[$e];if(re!==void 0)return op(re)}(dt),wt=Y.message;q===void 0&&(q=A.INTERNAL,wt="Unknown error status: "+dt+" with message "+Y.message),g=!0,I.Vo(new M(q,wt)),h.close()}else D(Ut,`RPC '${t}' stream ${s} received:`,L),I.mo(L)}}),C(a,$E.STAT_EVENT,T=>{T.stat===Cu.PROXY?D(Ut,`RPC '${t}' stream ${s} detected buffering proxy`):T.stat===Cu.NOPROXY&&D(Ut,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.Ro()},0),I}}function Fo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(e){return new Hw(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(t,n,r=1e3,s=1.5,i=6e4){this.oi=t,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),s=Math.max(0,n-r);s>0&&D("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Lo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(t,n,r,s,i,o,a,c){this.oi=t,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new vp(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(De(n.toString()),De("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(n)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{t(()=>{const s=new M(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(t,n){const r=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(t){return D("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DT extends VT{constructor(t,n,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(t,n){return this.connection.Fo("Listen",t,n)}onMessage(t){this.jo.reset();const n=Ww(this.serializer,t),r=function(i){if(!("targetChange"in i))return G.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?G.min():o.readTime?er(o.readTime):G.min()}(t);return this.listener.u_(n,r)}c_(t){const n={};n.database=Qu(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Ra(c)?{documents:Qw(i,c)}:{query:Yw(i,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=lp(i,o.resumeToken);const l=Va(i,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(G.min())>0){a.readTime=Da(i,o.snapshotVersion.toTimestamp());const l=Va(i,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=Jw(this.serializer,t);r&&(n.labels=r),this.t_(n)}l_(t){const n={};n.database=Qu(this.serializer),n.removeTarget=t,this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT extends class{}{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new M(A.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(t,xa(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new M(A.UNKNOWN,i.toString())})}vo(t,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(t,xa(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new M(A.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class NT{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(De(n),this.g_=!1):D("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{bs(this)&&(D("RemoteStore","Restarting streams for network reachability change."),await async function(c){const l=rt(c);l.v_.add(4),await Ps(l),l.x_.set("Unknown"),l.v_.delete(4),await co(l)}(this))})}),this.x_=new NT(r,s)}}async function co(e){if(bs(e))for(const t of e.F_)await t(!0)}async function Ps(e){for(const t of e.F_)await t(!1)}function Ep(e,t){const n=rt(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Wc(n)?Gc(n):Tr(n).Jo()&&Hc(n,t))}function wp(e,t){const n=rt(e),r=Tr(n);n.C_.delete(t),r.Jo()&&Tp(n,t),n.C_.size===0&&(r.Jo()?r.Xo():bs(n)&&n.x_.set("Unknown"))}function Hc(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(G.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Tr(e).c_(t)}function Tp(e,t){e.O_.Oe(t),Tr(e).l_(t)}function Gc(e){e.O_=new jw({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Tr(e).start(),e.x_.p_()}function Wc(e){return bs(e)&&!Tr(e).Ho()&&e.C_.size>0}function bs(e){return rt(e).v_.size===0}function Ip(e){e.O_=void 0}async function kT(e){e.C_.forEach((t,n)=>{Hc(e,t)})}async function MT(e,t){Ip(e),Wc(e)?(e.x_.S_(t),Gc(e)):e.x_.set("Unknown")}async function LT(e,t,n){if(e.x_.set("Online"),t instanceof cp&&t.state===2&&t.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(e,t)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Zu(e,r)}else if(t instanceof ti?e.O_.$e(t):t instanceof ap?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(G.min()))try{const r=await yp(e.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=i.C_.get(l);u&&i.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const u=i.C_.get(c);if(!u)return;i.C_.set(c,u.withResumeToken(Gt.EMPTY_BYTE_STRING,u.snapshotVersion)),Tp(i,c);const h=new Xe(u.target,c,l,u.sequenceNumber);Hc(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){D("RemoteStore","Failed to raise snapshot:",r),await Zu(e,r)}}async function Zu(e,t,n){if(!As(t))throw t;e.v_.add(1),await Ps(e),e.x_.set("Offline"),n||(n=()=>yp(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{D("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await co(e)})}async function th(e,t){const n=rt(e);n.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");const r=bs(n);n.v_.add(3),await Ps(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await co(n)}async function FT(e,t){const n=rt(e);t?(n.v_.delete(2),await co(n)):t||(n.v_.add(2),await Ps(n),n.x_.set("Unknown"))}function Tr(e){return e.N_||(e.N_=function(n,r,s){const i=rt(n);return i.R_(),new DT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Po:kT.bind(null,e),To:MT.bind(null,e),u_:LT.bind(null,e)}),e.F_.push(async t=>{t?(e.N_.Zo(),Wc(e)?Gc(e):e.x_.set("Unknown")):(await e.N_.stop(),Ip(e))})),e.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const o=Date.now()+r,a=new Qc(t,n,o,s,i);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(A.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ap(e,t){if(De("AsyncQueue",`${t}: ${e}`),As(e))return new M(A.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(t){this.comparator=t?(n,r)=>t(n,r)||j.comparator(n.key,r.key):(n,r)=>j.comparator(n.key,r.key),this.keyedMap=kr(),this.sortedSet=new Et(this.comparator)}static emptySet(t){return new nr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof nr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new nr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(){this.L_=new Et(j.comparator)}track(t){const n=t.doc.key,r=this.L_.get(n);r?t.type!==0&&r.type===3?this.L_=this.L_.insert(n,t):t.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.L_=this.L_.remove(n):t.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:t.doc}):W():this.L_=this.L_.insert(n,t)}k_(){const t=[];return this.L_.inorderTraversal((n,r)=>{t.push(r)}),t}}class pr{constructor(t,n,r,s,i,o,a,c,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new pr(t,n,nr.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&no(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.q_=void 0,this.Q_=[]}}class BT{constructor(){this.queries=new wr(t=>Qd(t),no),this.onlineState="Unknown",this.K_=new Set}}async function $T(e,t){const n=rt(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new UT),s)try{i.q_=await n.onListen(r)}catch(o){const a=Ap(o,`Initialization of query '${qn(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,i),i.Q_.push(t),t.U_(n.onlineState),i.q_&&t.W_(i.q_)&&Yc(n)}async function jT(e,t){const n=rt(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(t);o>=0&&(i.Q_.splice(o,1),s=i.Q_.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function qT(e,t){const n=rt(e);let r=!1;for(const s of t){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.W_(s)&&(r=!0);o.q_=s}}r&&Yc(n)}function zT(e,t,n){const r=rt(e),s=r.queries.get(t);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(t)}function Yc(e){e.K_.forEach(t=>{t.next()})}class KT{constructor(t,n,r){this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new pr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.z_?this.H_(t)&&(this.G_.next(t),n=!0):this.J_(t,this.onlineState)&&(this.Y_(t),n=!0),this.j_=t,n}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),n=!0),n}J_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}H_(t){if(t.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(t){t=pr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(t){this.key=t}}class Sp{constructor(t){this.key=t}}class HT{constructor(t,n){this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=nt(),this.mutatedKeys=nt(),this.ua=Yd(t),this.ca=new nr(this.ua)}get la(){return this.oa}ha(t,n){const r=n?n.Pa:new eh,s=n?n.ca:this.ca;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,h)=>{const d=s.get(u),g=ro(this.query,h)?h:null,I=!!d&&this.mutatedKeys.has(d.key),C=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;d&&g?d.data.isEqual(g.data)?I!==C&&(r.track({type:3,doc:g}),T=!0):this.Ia(d,g)||(r.track({type:2,doc:g}),T=!0,(c&&this.ua(g,c)>0||l&&this.ua(g,l)<0)&&(a=!0)):!d&&g?(r.track({type:0,doc:g}),T=!0):d&&!g&&(r.track({type:1,doc:d}),T=!0,(c||l)&&(a=!0)),T&&(g?(o=o.add(g),i=C?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{ca:o,Pa:r,Xi:a,mutatedKeys:i}}Ia(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const o=t.Pa.k_();o.sort((u,h)=>function(g,I){const C=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return C(g)-C(I)}(u.type,h.type)||this.ua(u.doc,h.doc)),this.Ta(r),s=s!=null&&s;const a=n&&!s?this.Ea():[],c=this.aa.size===0&&this.current&&!s?1:0,l=c!==this._a;return this._a=c,o.length!==0||l?{snapshot:new pr(this.query,t.ca,i,o,t.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new eh,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=t.current)}Ea(){if(!this.current)return[];const t=this.aa;this.aa=nt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return t.forEach(r=>{this.aa.has(r)||n.push(new Sp(r))}),this.aa.forEach(r=>{t.has(r)||n.push(new Rp(r))}),n}Ra(t){this.oa=t.hs,this.aa=nt();const n=this.ha(t.documents);return this.applyChanges(n,!0)}Va(){return pr.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class GT{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class WT{constructor(t){this.key=t,this.ma=!1}}class QT{constructor(t,n,r,s,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new wr(a=>Qd(a),no),this.pa=new Map,this.ya=new Set,this.wa=new Et(j.comparator),this.Sa=new Map,this.ba=new qc,this.Da={},this.Ca=new Map,this.va=dr.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function YT(e,t){const n=rI(e);let r,s;const i=n.ga.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Va();else{const o=await IT(n.localStore,be(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await XT(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&Ep(n.remoteStore,o)}return s}async function XT(e,t,n,r,s){e.Ma=(h,d,g)=>async function(C,T,b,L){let B=T.view.ha(b);B.Xi&&(B=await Yu(C.localStore,T.query,!1).then(({documents:wt})=>T.view.ha(wt,B)));const Y=L&&L.targetChanges.get(T.targetId),dt=L&&L.targetMismatches.get(T.targetId)!=null,q=T.view.applyChanges(B,C.isPrimaryClient,Y,dt);return rh(C,T.targetId,q.da),q.snapshot}(e,h,d,g);const i=await Yu(e.localStore,t,!0),o=new HT(t,i.hs),a=o.ha(i.documents),c=Cs.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),l=o.applyChanges(a,e.isPrimaryClient,c);rh(e,n,l.da);const u=new GT(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),l.snapshot}async function JT(e,t){const n=rt(e),r=n.ga.get(t),s=n.pa.get(r.targetId);if(s.length>1)return n.pa.set(r.targetId,s.filter(i=>!no(i,t))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Na(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),wp(n.remoteStore,r.targetId),Oa(n,r.targetId)}).catch(Dc)):(Oa(n,r.targetId),await Na(n.localStore,r.targetId,!0))}async function Cp(e,t){const n=rt(e);try{const r=await wT(n.localStore,t);t.targetChanges.forEach((s,i)=>{const o=n.Sa.get(i);o&&(Rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ma=!0:s.modifiedDocuments.size>0?Rt(o.ma):s.removedDocuments.size>0&&(Rt(o.ma),o.ma=!1))}),await bp(n,r,t)}catch(r){await Dc(r)}}function nh(e,t,n){const r=rt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ga.forEach((i,o)=>{const a=o.view.U_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=rt(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(const d of h.Q_)d.U_(a)&&(l=!0)}),l&&Yc(c)}(r.eventManager,t),s.length&&r.fa.u_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ZT(e,t,n){const r=rt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Sa.get(t),i=s&&s.key;if(i){let o=new Et(j.comparator);o=o.insert(i,$t.newNoDocument(i,G.min()));const a=nt().add(i),c=new oo(G.min(),new Map,new Et(at),o,a);await Cp(r,c),r.wa=r.wa.remove(i),r.Sa.delete(t),Xc(r)}else await Na(r.localStore,t,!1).then(()=>Oa(r,t,n)).catch(Dc)}function Oa(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach(r=>{e.ba.containsKey(r)||Pp(e,r)})}function Pp(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);n!==null&&(wp(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Xc(e))}function rh(e,t,n){for(const r of n)r instanceof Rp?(e.ba.addReference(r.key,t),tI(e,r)):r instanceof Sp?(D("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||Pp(e,r.key)):W()}function tI(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(D("SyncEngine","New document in limbo: "+n),e.ya.add(r),Xc(e))}function Xc(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new j(yt.fromString(t)),r=e.va.next();e.Sa.set(r,new WT(n)),e.wa=e.wa.insert(n,r),Ep(e.remoteStore,new Xe(be(Gd(n.path)),r,"TargetPurposeLimboResolution",Oc._e))}}async function bp(e,t,n){const r=rt(e),s=[],i=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{o.push(r.Ma(c,t,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l!=null&&l.fromCache?"not-current":"current"),l){s.push(l);const u=Kc.Ki(c.targetId,l);i.push(u)}}))}),await Promise.all(o),r.fa.u_(s),await async function(c,l){const u=rt(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>E.forEach(l,d=>E.forEach(d.qi,g=>u.persistence.referenceDelegate.addReference(h,d.targetId,g)).next(()=>E.forEach(d.Qi,g=>u.persistence.referenceDelegate.removeReference(h,d.targetId,g)))))}catch(h){if(!As(h))throw h;D("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const g=u.ns.get(d),I=g.snapshotVersion,C=g.withLastLimboFreeSnapshotVersion(I);u.ns=u.ns.insert(d,C)}}}(r.localStore,i))}async function eI(e,t){const n=rt(e);if(!n.currentUser.isEqual(t)){D("SyncEngine","User change. New user:",t.toKey());const r=await _p(n.localStore,t);n.currentUser=t,function(i,o){i.Ca.forEach(a=>{a.forEach(c=>{c.reject(new M(A.CANCELLED,o))})}),i.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await bp(n,r.us)}}function nI(e,t){const n=rt(e),r=n.Sa.get(t);if(r&&r.ma)return nt().add(r.key);{let s=nt();const i=n.pa.get(t);if(!i)return s;for(const o of i){const a=n.ga.get(o);s=s.unionWith(a.view.la)}return s}}function rI(e){const t=rt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Cp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZT.bind(null,t),t.fa.u_=qT.bind(null,t.eventManager),t.fa.xa=zT.bind(null,t.eventManager),t}class sh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=ao(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return ET(this.persistence,new yT,t.initialUser,this.serializer)}createPersistence(t){return new gT(zc.Hr,this.serializer)}createSharedClientState(t){return new RT}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sI{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eI.bind(null,this.syncEngine),await FT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new BT}()}createDatastore(t){const n=ao(t.databaseInfo.databaseId),r=function(i){return new bT(i)}(t.databaseInfo);return function(i,o,a,c){return new xT(i,o,a,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,o,a){return new OT(r,s,i,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>nh(this.syncEngine,n,0),function(){return Ju.D()?new Ju:new ST}())}createSyncEngine(t,n){return function(s,i,o,a,c,l,u){const h=new QT(s,i,o,a,c,l);return u&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const s=rt(r);D("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await Ps(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):De("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(t,n,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Bt.UNAUTHENTICATED,this.clientId=JE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{D("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(D("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(A.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Ap(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Uo(e,t){e.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await _p(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function ih(e,t){e.asyncQueue.verifyOperationInProgress();const n=await cI(e);D("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>th(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>th(t.remoteStore,s)),e._onlineComponents=t}function aI(e){return e.name==="FirebaseError"?e.code===A.FAILED_PRECONDITION||e.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function cI(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){D("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uo(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!aI(n))throw n;lr("Error using user provided cache. Falling back to memory cache: "+n),await Uo(e,new sh)}}else D("FirestoreClient","Using default OfflineComponentProvider"),await Uo(e,new sh);return e._offlineComponents}async function lI(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(D("FirestoreClient","Using user provided OnlineComponentProvider"),await ih(e,e._uninitializedComponentsProvider._online)):(D("FirestoreClient","Using default OnlineComponentProvider"),await ih(e,new sI))),e._onlineComponents}async function uI(e){const t=await lI(e),n=t.eventManager;return n.onListen=YT.bind(null,t.syncEngine),n.onUnlisten=JT.bind(null,t.syncEngine),n}function hI(e,t,n={}){const r=new rn;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,l){const u=new iI({next:d=>{o.enqueueAndForget(()=>jT(i,h)),d.fromCache&&c.source==="server"?l.reject(new M(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new KT(a,u,{includeMetadataChanges:!0,Z_:!0});return $T(i,h)}(await uI(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(e,t,n){if(!n)throw new M(A.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function dI(e,t,n,r){if(t===!0&&r===!0)throw new M(A.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ah(e){if(j.isDocumentKey(e))throw new M(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function lo(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":W()}function ka(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new M(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lo(e);throw new M(A.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new M(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new M(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}dI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vp((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new M(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new M(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new M(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Jc{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ch({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new M(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ch(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zE;switch(r.type){case"firstParty":return new WE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=oh.get(n);r&&(D("ComponentProvider","Removing Datastore"),oh.delete(n),r.terminate())}(this),Promise.resolve()}}function pI(e,t,n,r={}){var s;const i=(e=ka(e,Jc))._getSettings(),o=`${t}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Bt.MOCK_USER;else{a=wy(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new M(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Bt(l)}e._authCredentials=new KE(new Fd(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ir(this.firestore,t,this._query)}}class Be{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Be(this.firestore,t,this._key)}}class rr extends Ir{constructor(t,n,r){super(t,n,Gd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Be(this.firestore,null,new j(t))}withConverter(t){return new rr(this.firestore,t,this._path)}}function gI(e,t,...n){if(e=hi(e),fI("collection","path",t),e instanceof Jc){const r=yt.fromString(t,...n);return ah(r),new rr(e,null,r)}{if(!(e instanceof Be||e instanceof rr))throw new M(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(yt.fromString(t,...n));return ah(r),new rr(e.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new vp(this,"async_queue_retry"),this._u=()=>{const n=Fo();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const t=Fo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const n=Fo();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise(()=>{});const n=new rn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.eu.push(t),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!As(t))throw t;D("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(t){const n=this.Xa.then(()=>(this.iu=!0,t().catch(r=>{this.ru=r,this.iu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw De("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(t,n,r){this.au(),this.ou.indexOf(t)>-1&&(n=0);const s=Qc.createAndSchedule(this,t,n,r,i=>this.lu(i));return this.nu.push(s),s}au(){this.ru&&W()}verifyOperationInProgress(){}async hu(){let t;do t=this.Xa,await t;while(t!==this.Xa)}Pu(t){for(const n of this.nu)if(n.timerId===t)return!0;return!1}Iu(t){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.hu()})}Tu(t){this.ou.push(t)}lu(t){const n=this.nu.indexOf(t);this.nu.splice(n,1)}}class Dp extends Jc{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=function(){return new mI}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||xp(this),this._firestoreClient.terminate()}}function _I(e,t){const n=typeof e=="object"?e:Sv(),r=typeof e=="string"?e:t||"(default)",s=Tv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=vy("firestore");i&&pI(s,...i)}return s}function yI(e){return e._firestoreClient||xp(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function xp(e){var t,n,r;const s=e._freezeSettings(),i=function(a,c,l,u){return new lw(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Vp(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new oI(e._authCredentials,e._appCheckCredentials,e._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gr(Gt.fromBase64String(t))}catch(n){throw new M(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new gr(Gt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new M(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new M(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new M(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return at(this._lat,t._lat)||at(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=/^__.*__$/;function kp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}class tl{constructor(t,n,r,s,i,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new tl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Au({path:r,Vu:!1});return s.mu(t),s}fu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Au({path:r,Vu:!1});return s.Eu(),s}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return Ma(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(t.length===0)throw this.pu("Document fields must not be empty");if(kp(this.du)&&vI.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class EI{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ao(t)}Su(t,n,r,s=!1){return new tl({du:t,methodName:n,wu:r,path:zt.emptyPath(),Vu:!1,yu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wI(e){const t=e._freezeSettings(),n=ao(e._databaseId);return new EI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function TI(e,t,n,r=!1){return el(n,e.Su(r?4:3,t))}function el(e,t){if(Mp(e=hi(e)))return AI("Unsupported field value:",t,e),II(e,t);if(e instanceof Op)return function(r,s){if(!kp(s.du))throw s.pu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.pu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&t.du!==4)throw t.pu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=el(a,s.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=hi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Vw(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Vt.fromDate(r);return{timestampValue:Da(s.serializer,i)}}if(r instanceof Vt){const i=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Da(s.serializer,i)}}if(r instanceof Zc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gr)return{bytesValue:lp(s.serializer,r._byteString)};if(r instanceof Be){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:up(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.pu(`Unsupported field value: ${lo(r)}`)}(e,t)}function II(e,t){const n={};return Ud(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rs(e,(r,s)=>{const i=el(s,t.Ru(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Mp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Vt||e instanceof Zc||e instanceof gr||e instanceof Be||e instanceof Op)}function AI(e,t,n){if(!Mp(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=lo(n);throw r==="an object"?t.pu(e+" a custom object"):t.pu(e+" "+r)}}const RI=new RegExp("[~\\*/\\[\\]]");function SI(e,t,n){if(t.search(RI)>=0)throw Ma(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Np(...t.split("."))._internalPath}catch{throw Ma(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ma(e,t,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new M(A.INVALID_ARGUMENT,a+e+c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new CI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(nl("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CI extends Lp{data(){return super.data()}}function nl(e,t){return typeof t=="string"?SI(e,t):t instanceof Np?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new M(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rl{}class bI extends rl{}function VI(e,t,...n){let r=[];t instanceof rl&&r.push(t),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof sl).length,a=i.filter(c=>c instanceof uo).length;if(o>1||o>0&&a>0)throw new M(A.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class uo extends bI{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new uo(t,n,r)}_apply(t){const n=this._parse(t);return Fp(t._query,n),new Ir(t.firestore,t.converter,Sa(t._query,n))}_parse(t){const n=wI(t.firestore);return function(i,o,a,c,l,u,h){let d;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new M(A.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){hh(h,u);const g=[];for(const I of h)g.push(uh(c,i,I));d={arrayValue:{values:g}}}else d=uh(c,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||hh(h,u),d=TI(a,o,h,u==="in"||u==="not-in");return At.create(l,u,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function lh(e,t,n){const r=t,s=nl("where",e);return uo._create(s,r,n)}class sl extends rl{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new sl(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_e.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)Fp(o,c),o=Sa(o,c)}(t._query,n),new Ir(t.firestore,t.converter,Sa(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function uh(e,t,n){if(typeof(n=hi(n))=="string"){if(n==="")throw new M(A.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wd(t)&&n.indexOf("/")!==-1)throw new M(A.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(yt.fromString(n));if(!j.isDocumentKey(r))throw new M(A.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nu(e,new j(r))}if(n instanceof Be)return Nu(e,n._key);throw new M(A.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lo(n)}.`)}function hh(e,t){if(!Array.isArray(e)||e.length===0)throw new M(A.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Fp(e,t){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new M(A.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new M(A.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class DI{convertValue(t,n="none"){switch(Vn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return It(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(bn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw W()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Rs(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(t){return new Zc(It(t.latitude),It(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Mc(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hs(t));default:return null}}convertTimestamp(t){const n=on(t);return new Vt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=yt.fromString(t);Rt(mp(r));const s=new fs(r.get(1),r.get(3)),i=new j(r.popFirst(5));return s.isEqual(n)||De(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class xI extends Lp{constructor(t,n,r,s,i,o){super(t,n,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ei(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(nl("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ei extends xI{data(t={}){return super.data(t)}}class NI{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ks(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new ei(this._firestore,this._userDataWriter,r.key,r,new Ks(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new M(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new ei(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ks(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new ei(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ks(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:OI(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function OI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}class kI extends DI{constructor(t){super(),this.firestore=t}convertBytes(t){return new gr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Be(this.firestore,null,n)}}function MI(e){e=ka(e,Ir);const t=ka(e.firestore,Dp),n=yI(t),r=new kI(t);return PI(e._query),hI(n,e._query).then(s=>new NI(t,r,e,s))}(function(t,n=!0){(function(s){Er=s})(Rv),di(new ts("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Dp(new HE(r.getProvider("auth-internal")),new YE(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new M(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fs(l.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Jn(Pu,"4.4.1",t),Jn(Pu,"4.4.1","esm2017")})();const LI={apiKey:"AIzaSyD6xyq5OpN70Z8r3UYRbTCTpKRixzsmPf0",authDomain:"voice-recording-1fc90.firebaseapp.com",projectId:"voice-recording-1fc90",storageBucket:"voice-recording-1fc90.appspot.com",messagingSenderId:"222717438916",appId:"1:222717438916:web:1d8e1fd4fd4e7ef4b59291"};xf(LI);const FI=_I(),UI={id:"login"},BI=J("div",{class:"center pad"},[J("h2",null,"User Login")],-1),$I={class:"center pad"},jI={class:"center pad"},qI={key:0,class:"center pad"},zI=J("p",null,"wrong password please try again",-1),KI=[zI],HI={key:1,class:"center pad"},GI=J("p",null,"(make sure neptun code is in capital letter)",-1),WI=[GI],QI={__name:"login",props:{id:{},idModifiers:{},password:{},passwordModifiers:{}},emits:["update:id","update:password"],setup(e){tc(()=>{var i=sessionStorage.getItem("neptun");i&&Ri.push("/audio")});const t=Yn(!1),n=Dl(e,"id"),r=Dl(e,"password"),s=async()=>{const i=VI(gI(FI,"user"),lh("neptun","==",n.value),lh("password","==",r.value));await MI(i).then(o=>{if(o.empty)console.log("No such document!"),t.value=!0;else{const a=o.docs[0].data();sessionStorage.setItem("neptun",a.neptun),Ri.push("/audio")}})};return(i,o)=>(ie(),he("div",UI,[BI,J("div",$I,[yl(J("input",{type:"text",placeholder:"neptun ID","onUpdate:modelValue":o[0]||(o[0]=a=>n.value=a)},null,512),[[$l,n.value]])]),J("div",jI,[yl(J("input",{type:"password",placeholder:"password","onUpdate:modelValue":o[1]||(o[1]=a=>r.value=a)},null,512),[[$l,r.value]])]),J("div",{class:"center pad"},[J("button",{onClick:s},"login")]),t.value?(ie(),he("div",qI,KI)):Br("",!0),t.value?(ie(),he("div",HI,WI)):Br("",!0)]))}},YI={class:"home"},XI={class:"center pad",id:"isRecording"},JI=J("button",{id:"stopRecording"},"Stop",-1),ZI=Im('<br><div class="record"><div class="center pad"><h3>recorded audio</h3></div><div class="center pad"><div class="center pad"><audio src="" id="audioElement" controls></audio><button style="margin:0.5rem 1rem;">Delete</button></div></div></div>',2),t0={__name:"home",setup(e){let t=Yn("Click start button to record");function n(){async function r(c){if(await navigator.mediaDevices.getUserMedia({audio:!0}),window.navigator.mediaDevices)return window.navigator.mediaDevices.getUserMedia(c);let l=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(l)return new Promise(function(u,h){l.bind(window.navigator)(c,u,h)});alert("user api not supported")}t="Recording...";let s=[],i;function o(c){i=new MediaRecorder(c),i.start(),i.ondataavailable=l=>{if(s.push(l.data),i.state=="inactive"){let u=new Blob(s,{type:"audio/mp3"});console.log(u),document.getElementById("audioElement").src=URL.createObjectURL(u)}}}function a(c){r({audio:c}).then(l=>{o(l)})}a(!0),document.getElementById("stopRecording").addEventListener("click",c=>{i.stop(),t="Click play button to start listening"})}return(r,s)=>(ie(),he("div",YI,[J("div",XI,[J("h2",null,$o(Ze(t)),1)]),J("div",{class:"center pad"},[J("button",{id:"startRecording",onClick:n},"Start"),JI]),ZI]))}},e0={class:"admin center"},n0=J("h1",null,"admin",-1),r0={__name:"admin",setup(e){const t=()=>{Ri.push("/")};return(n,r)=>(ie(),he("div",e0,[n0,J("div",null,[J("button",{onClick:t}," go login")])]))}},s0=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},Ar=e=>(Vg("data-v-afe1a394"),e=e(),Dg(),e),i0={class:"center"},o0={style:{"max-width":"28em"}},a0={class:"white-bold"},c0=Ar(()=>J("p",null,"Read out the text below:",-1)),l0=Ar(()=>J("div",{class:"center"},[J("h1",{style:{"font-size":"100px"}},"Text")],-1)),u0={key:0},h0=Ar(()=>J("strong",{class:"white-bold"},"Record",-1)),f0={key:1},d0={key:2},p0=Ar(()=>J("strong",{class:"white-bold"},"Stop",-1)),g0={id:"controls"},m0=["disabled"],_0=["disabled"],y0=Ar(()=>J("h2",{style:{"margin-top":"20px"}},"Recordings",-1)),v0=Ar(()=>J("ol",{id:"recordingsList"},null,-1)),E0=["src"],w0=["href","download"],T0={__name:"audio",setup(e){const t=Yn(sessionStorage.getItem("neptun"));tc(()=>{t||router.push("/")}),URL=window.URL||window.webkitURL;var n,r,s,i=window.AudioContext||window.webkitAudioContext;const o=ps([]),a=Yn(!1),c=Yn(!0);var l="wav",u=!0;const h=()=>{console.log("startRecording() called");var I={audio:!0,video:!1};navigator.mediaDevices.getUserMedia(I).then(function(C){n=C;var T=new i;s=T.createMediaStreamSource(C),r=new WebAudioRecorder(s,{encoding:l,numChannels:2,onEncoderLoading:async function(b,L){},onEncoderLoaded:async function(b,L){}}),r.onComplete=function(b,L){g(L,b.encoding)},r.setOptions({timeLimit:120,encodeAfterRecord:u,ogg:{quality:.5},mp3:{bitRate:160}}),r.startRecording()}).catch(function(C){a.value=!1,c.value=!0}),a.value=!0,c.value=!1},d=()=>{n.getAudioTracks()[0].stop(),c.value=!0,a.value=!1,r.finishRecording()},g=(I,C)=>{var T=URL.createObjectURL(I),b=new Date().toISOString()+"."+C;o.unshift({url:T,audioName:b})};return(I,C)=>(ie(),he("div",i0,[J("div",o0,[J("div",null,[J("h3",null,[Bn("Welcomeback "),J("strong",a0,$o(t.value),1)]),c0,l0]),c.value?(ie(),he("p",u0,[Bn("Click "),h0,Bn(" button to start recording")])):Br("",!0),a.value?(ie(),he("p",f0,"Recording . . . ")):Br("",!0),a.value?(ie(),he("p",d0,[Bn("Click "),p0,Bn(" button to stop recording")])):Br("",!0),J("div",g0,[J("button",{id:"recordButton",onClick:h,disabled:a.value,style:{width:"200px",height:"40px"}}," Record ",8,m0),J("button",{id:"stopButton",disabled:c.value,onClick:d,style:{width:"200px",height:"40px"}}," Stop ",8,_0)]),y0,v0,(ie(!0),he(Te,null,em(o,T=>(ie(),he("li",{key:T},[J("audio",{src:T.url,controls:""},null,8,E0),J("a",{href:T.url,download:T.audioName},"download link: "+$o(T.audioName),9,w0)]))),128))])]))}},I0=s0(T0,[["__scopeId","data-v-afe1a394"]]),Ri=ay({history:A_("/"),routes:[{path:"/",name:"login",component:QI},{path:"/home",name:"home",component:t0},{path:"/admin",name:"admin",component:r0},{path:"/audio",name:"audio",component:I0}]}),A0=s_(ly);A0.use(Ri).mount("#app");
